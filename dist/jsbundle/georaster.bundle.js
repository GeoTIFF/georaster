(function (global, factory) {
    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :
    typeof define === 'function' && define.amd ? define(['exports'], factory) :
    (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global.GeoRaster = {}));
})(this, (function (exports) { 'use strict';

    function decodeBase64(base64, enableUnicode) {
        var binaryString = atob(base64);
        if (enableUnicode) {
            var binaryView = new Uint8Array(binaryString.length);
            for (var i = 0, n = binaryString.length; i < n; ++i) {
                binaryView[i] = binaryString.charCodeAt(i);
            }
            return String.fromCharCode.apply(null, new Uint16Array(binaryView.buffer));
        }
        return binaryString;
    }

    function createURL(base64, sourcemapArg, enableUnicodeArg) {
        var sourcemap = sourcemapArg === undefined ? null : sourcemapArg;
        var enableUnicode = enableUnicodeArg === undefined ? false : enableUnicodeArg;
        var source = decodeBase64(base64, enableUnicode);
        var start = source.indexOf('\n', 10) + 1;
        var body = source.substring(start) + (sourcemap ? '\/\/# sourceMappingURL=' + sourcemap : '');
        var blob = new Blob([body], { type: 'application/javascript' });
        return URL.createObjectURL(blob);
    }

    function createBase64WorkerFactory(base64, sourcemapArg, enableUnicodeArg) {
        var url;
        return function WorkerFactory(options) {
            url = url || createURL(base64, sourcemapArg, enableUnicodeArg);
            return new Worker(url, options);
        };
    }

    var WorkerFactory = createBase64WorkerFactory('Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwooZnVuY3Rpb24gKCkgewoJJ3VzZSBzdHJpY3QnOwoKCXZhciBjb21tb25qc0dsb2JhbCA9IHR5cGVvZiBnbG9iYWxUaGlzICE9PSAndW5kZWZpbmVkJyA/IGdsb2JhbFRoaXMgOiB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyA/IHdpbmRvdyA6IHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnID8gZ2xvYmFsIDogdHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnID8gc2VsZiA6IHt9OwoKCXZhciBnZW90aWZmID0ge2V4cG9ydHM6IHt9fTsKCgkoZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cykgewoJIWZ1bmN0aW9uKGUsdCl7dChleHBvcnRzKTt9KGNvbW1vbmpzR2xvYmFsLChmdW5jdGlvbihlKXtmdW5jdGlvbiB0KGUsdCxyKXtyZXR1cm4gdCBpbiBlP09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLHQse3ZhbHVlOnIsZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITB9KTplW3RdPXIsZX1mdW5jdGlvbiByKGUpe2lmKEFycmF5LmlzQXJyYXkoZSkpcmV0dXJuIGV9ZnVuY3Rpb24gbihlLHQpeyhudWxsPT10fHx0PmUubGVuZ3RoKSYmKHQ9ZS5sZW5ndGgpO2Zvcih2YXIgcj0wLG49bmV3IEFycmF5KHQpO3I8dDtyKyspbltyXT1lW3JdO3JldHVybiBufWZ1bmN0aW9uIGkoZSx0KXtpZihlKXtpZigic3RyaW5nIj09dHlwZW9mIGUpcmV0dXJuIG4oZSx0KTt2YXIgcj1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZSkuc2xpY2UoOCwtMSk7cmV0dXJuICJPYmplY3QiPT09ciYmZS5jb25zdHJ1Y3RvciYmKHI9ZS5jb25zdHJ1Y3Rvci5uYW1lKSwiTWFwIj09PXJ8fCJTZXQiPT09cj9BcnJheS5mcm9tKGUpOiJBcmd1bWVudHMiPT09cnx8L14oPzpVaXxJKW50KD86OHwxNnwzMikoPzpDbGFtcGVkKT9BcnJheSQvLnRlc3Qocik/bihlLHQpOnZvaWQgMH19ZnVuY3Rpb24gYSgpe3Rocm93IG5ldyBUeXBlRXJyb3IoIkludmFsaWQgYXR0ZW1wdCB0byBkZXN0cnVjdHVyZSBub24taXRlcmFibGUgaW5zdGFuY2UuXG5JbiBvcmRlciB0byBiZSBpdGVyYWJsZSwgbm9uLWFycmF5IG9iamVjdHMgbXVzdCBoYXZlIGEgW1N5bWJvbC5pdGVyYXRvcl0oKSBtZXRob2QuIil9ZnVuY3Rpb24gbyhlLHQpe3JldHVybiByKGUpfHxmdW5jdGlvbihlLHQpe3ZhciByPW51bGw9PWU/bnVsbDoidW5kZWZpbmVkIiE9dHlwZW9mIFN5bWJvbCYmZVtTeW1ib2wuaXRlcmF0b3JdfHxlWyJAQGl0ZXJhdG9yIl07aWYobnVsbCE9cil7dmFyIG4saSxhPVtdLG89ITAscz0hMTt0cnl7Zm9yKHI9ci5jYWxsKGUpOyEobz0obj1yLm5leHQoKSkuZG9uZSkmJihhLnB1c2gobi52YWx1ZSksIXR8fGEubGVuZ3RoIT09dCk7bz0hMCk7fWNhdGNoKGUpe3M9ITAsaT1lO31maW5hbGx5e3RyeXtvfHxudWxsPT1yLnJldHVybnx8ci5yZXR1cm4oKTt9ZmluYWxseXtpZihzKXRocm93IGl9fXJldHVybiBhfX0oZSx0KXx8aShlLHQpfHxhKCl9ZnVuY3Rpb24gcyhlLHQscixuLGksYSxvKXt0cnl7dmFyIHM9ZVthXShvKSx1PXMudmFsdWU7fWNhdGNoKGUpe3JldHVybiB2b2lkIHIoZSl9cy5kb25lP3QodSk6UHJvbWlzZS5yZXNvbHZlKHUpLnRoZW4obixpKTt9ZnVuY3Rpb24gdShlKXtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgdD10aGlzLHI9YXJndW1lbnRzO3JldHVybiBuZXcgUHJvbWlzZSgoZnVuY3Rpb24obixpKXt2YXIgYT1lLmFwcGx5KHQscik7ZnVuY3Rpb24gbyhlKXtzKGEsbixpLG8sdSwibmV4dCIsZSk7fWZ1bmN0aW9uIHUoZSl7cyhhLG4saSxvLHUsInRocm93IixlKTt9byh2b2lkIDApO30pKX19ZnVuY3Rpb24gZihlLHQpe2Zvcih2YXIgcj0wO3I8dC5sZW5ndGg7cisrKXt2YXIgbj10W3JdO24uZW51bWVyYWJsZT1uLmVudW1lcmFibGV8fCExLG4uY29uZmlndXJhYmxlPSEwLCJ2YWx1ZSJpbiBuJiYobi53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsbi5rZXksbik7fX1mdW5jdGlvbiBjKGUsdCxyKXtyZXR1cm4gdCYmZihlLnByb3RvdHlwZSx0KSxyJiZmKGUsciksZX1mdW5jdGlvbiBsKGUsdCl7cmV0dXJuIGw9T2JqZWN0LnNldFByb3RvdHlwZU9mfHxmdW5jdGlvbihlLHQpe3JldHVybiBlLl9fcHJvdG9fXz10LGV9LGwoZSx0KX1mdW5jdGlvbiBoKGUsdCl7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIHQmJm51bGwhPT10KXRocm93IG5ldyBUeXBlRXJyb3IoIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uIik7ZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh0JiZ0LnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOmUsd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfX0pLHQmJmwoZSx0KTt9ZnVuY3Rpb24gZChlKXtyZXR1cm4gZD0iZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sJiYic3ltYm9sIj09dHlwZW9mIFN5bWJvbC5pdGVyYXRvcj9mdW5jdGlvbihlKXtyZXR1cm4gdHlwZW9mIGV9OmZ1bmN0aW9uKGUpe3JldHVybiBlJiYiZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sJiZlLmNvbnN0cnVjdG9yPT09U3ltYm9sJiZlIT09U3ltYm9sLnByb3RvdHlwZT8ic3ltYm9sIjp0eXBlb2YgZX0sZChlKX1mdW5jdGlvbiBwKGUpe2lmKHZvaWQgMD09PWUpdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWQiKTtyZXR1cm4gZX1mdW5jdGlvbiBtKGUsdCl7aWYodCYmKCJvYmplY3QiPT09ZCh0KXx8ImZ1bmN0aW9uIj09dHlwZW9mIHQpKXJldHVybiB0O2lmKHZvaWQgMCE9PXQpdGhyb3cgbmV3IFR5cGVFcnJvcigiRGVyaXZlZCBjb25zdHJ1Y3RvcnMgbWF5IG9ubHkgcmV0dXJuIG9iamVjdCBvciB1bmRlZmluZWQiKTtyZXR1cm4gcChlKX1mdW5jdGlvbiB2KGUpe3JldHVybiB2PU9iamVjdC5zZXRQcm90b3R5cGVPZj9PYmplY3QuZ2V0UHJvdG90eXBlT2Y6ZnVuY3Rpb24oZSl7cmV0dXJuIGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSl9LHYoZSl9ZnVuY3Rpb24geSgpe2lmKCJ1bmRlZmluZWQiPT10eXBlb2YgUmVmbGVjdHx8IVJlZmxlY3QuY29uc3RydWN0KXJldHVybiAhMTtpZihSZWZsZWN0LmNvbnN0cnVjdC5zaGFtKXJldHVybiAhMTtpZigiZnVuY3Rpb24iPT10eXBlb2YgUHJveHkpcmV0dXJuICEwO3RyeXtyZXR1cm4gQm9vbGVhbi5wcm90b3R5cGUudmFsdWVPZi5jYWxsKFJlZmxlY3QuY29uc3RydWN0KEJvb2xlYW4sW10sKGZ1bmN0aW9uKCl7fSkpKSwhMH1jYXRjaChlKXtyZXR1cm4gITF9fWZ1bmN0aW9uIGcoZSx0LHIpe3JldHVybiBnPXkoKT9SZWZsZWN0LmNvbnN0cnVjdDpmdW5jdGlvbihlLHQscil7dmFyIG49W251bGxdO24ucHVzaC5hcHBseShuLHQpO3ZhciBpPW5ldyhGdW5jdGlvbi5iaW5kLmFwcGx5KGUsbikpO3JldHVybiByJiZsKGksci5wcm90b3R5cGUpLGl9LGcuYXBwbHkobnVsbCxhcmd1bWVudHMpfWZ1bmN0aW9uIHcoZSl7dmFyIHQ9ImZ1bmN0aW9uIj09dHlwZW9mIE1hcD9uZXcgTWFwOnZvaWQgMDtyZXR1cm4gdz1mdW5jdGlvbihlKXtpZihudWxsPT09ZXx8KHI9ZSwtMT09PUZ1bmN0aW9uLnRvU3RyaW5nLmNhbGwocikuaW5kZXhPZigiW25hdGl2ZSBjb2RlXSIpKSlyZXR1cm4gZTt2YXIgcjtpZigiZnVuY3Rpb24iIT10eXBlb2YgZSl0aHJvdyBuZXcgVHlwZUVycm9yKCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiIpO2lmKHZvaWQgMCE9PXQpe2lmKHQuaGFzKGUpKXJldHVybiB0LmdldChlKTt0LnNldChlLG4pO31mdW5jdGlvbiBuKCl7cmV0dXJuIGcoZSxhcmd1bWVudHMsdih0aGlzKS5jb25zdHJ1Y3Rvcil9cmV0dXJuIG4ucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoZS5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTpuLGVudW1lcmFibGU6ITEsd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfX0pLGwobixlKX0sdyhlKX1mdW5jdGlvbiBiKGUsdCl7aWYoIShlIGluc3RhbmNlb2YgdCkpdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIil9dmFyIGs9e2V4cG9ydHM6e319OyFmdW5jdGlvbihlKXt2YXIgdD1mdW5jdGlvbihlKXt2YXIgdCxyPU9iamVjdC5wcm90b3R5cGUsbj1yLmhhc093blByb3BlcnR5LGk9ImZ1bmN0aW9uIj09dHlwZW9mIFN5bWJvbD9TeW1ib2w6e30sYT1pLml0ZXJhdG9yfHwiQEBpdGVyYXRvciIsbz1pLmFzeW5jSXRlcmF0b3J8fCJAQGFzeW5jSXRlcmF0b3IiLHM9aS50b1N0cmluZ1RhZ3x8IkBAdG9TdHJpbmdUYWciO2Z1bmN0aW9uIHUoZSx0LHIpe3JldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydHkoZSx0LHt2YWx1ZTpyLGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwfSksZVt0XX10cnl7dSh7fSwiIik7fWNhdGNoKGUpe3U9ZnVuY3Rpb24oZSx0LHIpe3JldHVybiBlW3RdPXJ9O31mdW5jdGlvbiBmKGUsdCxyLG4pe3ZhciBpPXQmJnQucHJvdG90eXBlIGluc3RhbmNlb2YgeT90OnksYT1PYmplY3QuY3JlYXRlKGkucHJvdG90eXBlKSxvPW5ldyBVKG58fFtdKTtyZXR1cm4gYS5faW52b2tlPWZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1sO3JldHVybiBmdW5jdGlvbihpLGEpe2lmKG49PT1wKXRocm93IG5ldyBFcnJvcigiR2VuZXJhdG9yIGlzIGFscmVhZHkgcnVubmluZyIpO2lmKG49PT1tKXtpZigidGhyb3ciPT09aSl0aHJvdyBhO3JldHVybiBEKCl9Zm9yKHIubWV0aG9kPWksci5hcmc9YTs7KXt2YXIgbz1yLmRlbGVnYXRlO2lmKG8pe3ZhciBzPVAobyxyKTtpZihzKXtpZihzPT09diljb250aW51ZTtyZXR1cm4gc319aWYoIm5leHQiPT09ci5tZXRob2Qpci5zZW50PXIuX3NlbnQ9ci5hcmc7ZWxzZSBpZigidGhyb3ciPT09ci5tZXRob2Qpe2lmKG49PT1sKXRocm93IG49bSxyLmFyZztyLmRpc3BhdGNoRXhjZXB0aW9uKHIuYXJnKTt9ZWxzZSAicmV0dXJuIj09PXIubWV0aG9kJiZyLmFicnVwdCgicmV0dXJuIixyLmFyZyk7bj1wO3ZhciB1PWMoZSx0LHIpO2lmKCJub3JtYWwiPT09dS50eXBlKXtpZihuPXIuZG9uZT9tOmgsdS5hcmc9PT12KWNvbnRpbnVlO3JldHVybiB7dmFsdWU6dS5hcmcsZG9uZTpyLmRvbmV9fSJ0aHJvdyI9PT11LnR5cGUmJihuPW0sci5tZXRob2Q9InRocm93IixyLmFyZz11LmFyZyk7fX19KGUscixvKSxhfWZ1bmN0aW9uIGMoZSx0LHIpe3RyeXtyZXR1cm4ge3R5cGU6Im5vcm1hbCIsYXJnOmUuY2FsbCh0LHIpfX1jYXRjaChlKXtyZXR1cm4ge3R5cGU6InRocm93Iixhcmc6ZX19fWUud3JhcD1mO3ZhciBsPSJzdXNwZW5kZWRTdGFydCIsaD0ic3VzcGVuZGVkWWllbGQiLHA9ImV4ZWN1dGluZyIsbT0iY29tcGxldGVkIix2PXt9O2Z1bmN0aW9uIHkoKXt9ZnVuY3Rpb24gZygpe31mdW5jdGlvbiB3KCl7fXZhciBiPXt9O3UoYixhLChmdW5jdGlvbigpe3JldHVybiB0aGlzfSkpO3ZhciBrPU9iamVjdC5nZXRQcm90b3R5cGVPZix4PWsmJmsoayhPKFtdKSkpO3gmJnghPT1yJiZuLmNhbGwoeCxhKSYmKGI9eCk7dmFyIEE9dy5wcm90b3R5cGU9eS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShiKTtmdW5jdGlvbiBfKGUpe1sibmV4dCIsInRocm93IiwicmV0dXJuIl0uZm9yRWFjaCgoZnVuY3Rpb24odCl7dShlLHQsKGZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9pbnZva2UodCxlKX0pKTt9KSk7fWZ1bmN0aW9uIEkoZSx0KXtmdW5jdGlvbiByKGksYSxvLHMpe3ZhciB1PWMoZVtpXSxlLGEpO2lmKCJ0aHJvdyIhPT11LnR5cGUpe3ZhciBmPXUuYXJnLGw9Zi52YWx1ZTtyZXR1cm4gbCYmIm9iamVjdCI9PT1kKGwpJiZuLmNhbGwobCwiX19hd2FpdCIpP3QucmVzb2x2ZShsLl9fYXdhaXQpLnRoZW4oKGZ1bmN0aW9uKGUpe3IoIm5leHQiLGUsbyxzKTt9KSwoZnVuY3Rpb24oZSl7cigidGhyb3ciLGUsbyxzKTt9KSk6dC5yZXNvbHZlKGwpLnRoZW4oKGZ1bmN0aW9uKGUpe2YudmFsdWU9ZSxvKGYpO30pLChmdW5jdGlvbihlKXtyZXR1cm4gcigidGhyb3ciLGUsbyxzKX0pKX1zKHUuYXJnKTt9dmFyIGk7dGhpcy5faW52b2tlPWZ1bmN0aW9uKGUsbil7ZnVuY3Rpb24gYSgpe3JldHVybiBuZXcgdCgoZnVuY3Rpb24odCxpKXtyKGUsbix0LGkpO30pKX1yZXR1cm4gaT1pP2kudGhlbihhLGEpOmEoKX07fWZ1bmN0aW9uIFAoZSxyKXt2YXIgbj1lLml0ZXJhdG9yW3IubWV0aG9kXTtpZihuPT09dCl7aWYoci5kZWxlZ2F0ZT1udWxsLCJ0aHJvdyI9PT1yLm1ldGhvZCl7aWYoZS5pdGVyYXRvci5yZXR1cm4mJihyLm1ldGhvZD0icmV0dXJuIixyLmFyZz10LFAoZSxyKSwidGhyb3ciPT09ci5tZXRob2QpKXJldHVybiB2O3IubWV0aG9kPSJ0aHJvdyIsci5hcmc9bmV3IFR5cGVFcnJvcigiVGhlIGl0ZXJhdG9yIGRvZXMgbm90IHByb3ZpZGUgYSAndGhyb3cnIG1ldGhvZCIpO31yZXR1cm4gdn12YXIgaT1jKG4sZS5pdGVyYXRvcixyLmFyZyk7aWYoInRocm93Ij09PWkudHlwZSlyZXR1cm4gci5tZXRob2Q9InRocm93IixyLmFyZz1pLmFyZyxyLmRlbGVnYXRlPW51bGwsdjt2YXIgYT1pLmFyZztyZXR1cm4gYT9hLmRvbmU/KHJbZS5yZXN1bHROYW1lXT1hLnZhbHVlLHIubmV4dD1lLm5leHRMb2MsInJldHVybiIhPT1yLm1ldGhvZCYmKHIubWV0aG9kPSJuZXh0IixyLmFyZz10KSxyLmRlbGVnYXRlPW51bGwsdik6YTooci5tZXRob2Q9InRocm93IixyLmFyZz1uZXcgVHlwZUVycm9yKCJpdGVyYXRvciByZXN1bHQgaXMgbm90IGFuIG9iamVjdCIpLHIuZGVsZWdhdGU9bnVsbCx2KX1mdW5jdGlvbiBTKGUpe3ZhciB0PXt0cnlMb2M6ZVswXX07MSBpbiBlJiYodC5jYXRjaExvYz1lWzFdKSwyIGluIGUmJih0LmZpbmFsbHlMb2M9ZVsyXSx0LmFmdGVyTG9jPWVbM10pLHRoaXMudHJ5RW50cmllcy5wdXNoKHQpO31mdW5jdGlvbiBUKGUpe3ZhciB0PWUuY29tcGxldGlvbnx8e307dC50eXBlPSJub3JtYWwiLGRlbGV0ZSB0LmFyZyxlLmNvbXBsZXRpb249dDt9ZnVuY3Rpb24gVShlKXt0aGlzLnRyeUVudHJpZXM9W3t0cnlMb2M6InJvb3QifV0sZS5mb3JFYWNoKFMsdGhpcyksdGhpcy5yZXNldCghMCk7fWZ1bmN0aW9uIE8oZSl7aWYoZSl7dmFyIHI9ZVthXTtpZihyKXJldHVybiByLmNhbGwoZSk7aWYoImZ1bmN0aW9uIj09dHlwZW9mIGUubmV4dClyZXR1cm4gZTtpZighaXNOYU4oZS5sZW5ndGgpKXt2YXIgaT0tMSxvPWZ1bmN0aW9uIHIoKXtmb3IoOysraTxlLmxlbmd0aDspaWYobi5jYWxsKGUsaSkpcmV0dXJuIHIudmFsdWU9ZVtpXSxyLmRvbmU9ITEscjtyZXR1cm4gci52YWx1ZT10LHIuZG9uZT0hMCxyfTtyZXR1cm4gby5uZXh0PW99fXJldHVybiB7bmV4dDpEfX1mdW5jdGlvbiBEKCl7cmV0dXJuIHt2YWx1ZTp0LGRvbmU6ITB9fXJldHVybiBnLnByb3RvdHlwZT13LHUoQSwiY29uc3RydWN0b3IiLHcpLHUodywiY29uc3RydWN0b3IiLGcpLGcuZGlzcGxheU5hbWU9dSh3LHMsIkdlbmVyYXRvckZ1bmN0aW9uIiksZS5pc0dlbmVyYXRvckZ1bmN0aW9uPWZ1bmN0aW9uKGUpe3ZhciB0PSJmdW5jdGlvbiI9PXR5cGVvZiBlJiZlLmNvbnN0cnVjdG9yO3JldHVybiAhIXQmJih0PT09Z3x8IkdlbmVyYXRvckZ1bmN0aW9uIj09PSh0LmRpc3BsYXlOYW1lfHx0Lm5hbWUpKX0sZS5tYXJrPWZ1bmN0aW9uKGUpe3JldHVybiBPYmplY3Quc2V0UHJvdG90eXBlT2Y/T2JqZWN0LnNldFByb3RvdHlwZU9mKGUsdyk6KGUuX19wcm90b19fPXcsdShlLHMsIkdlbmVyYXRvckZ1bmN0aW9uIikpLGUucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoQSksZX0sZS5hd3JhcD1mdW5jdGlvbihlKXtyZXR1cm4ge19fYXdhaXQ6ZX19LF8oSS5wcm90b3R5cGUpLHUoSS5wcm90b3R5cGUsbywoZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30pKSxlLkFzeW5jSXRlcmF0b3I9SSxlLmFzeW5jPWZ1bmN0aW9uKHQscixuLGksYSl7dm9pZCAwPT09YSYmKGE9UHJvbWlzZSk7dmFyIG89bmV3IEkoZih0LHIsbixpKSxhKTtyZXR1cm4gZS5pc0dlbmVyYXRvckZ1bmN0aW9uKHIpP286by5uZXh0KCkudGhlbigoZnVuY3Rpb24oZSl7cmV0dXJuIGUuZG9uZT9lLnZhbHVlOm8ubmV4dCgpfSkpfSxfKEEpLHUoQSxzLCJHZW5lcmF0b3IiKSx1KEEsYSwoZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30pKSx1KEEsInRvU3RyaW5nIiwoZnVuY3Rpb24oKXtyZXR1cm4gIltvYmplY3QgR2VuZXJhdG9yXSJ9KSksZS5rZXlzPWZ1bmN0aW9uKGUpe3ZhciB0PVtdO2Zvcih2YXIgciBpbiBlKXQucHVzaChyKTtyZXR1cm4gdC5yZXZlcnNlKCksZnVuY3Rpb24gcigpe2Zvcig7dC5sZW5ndGg7KXt2YXIgbj10LnBvcCgpO2lmKG4gaW4gZSlyZXR1cm4gci52YWx1ZT1uLHIuZG9uZT0hMSxyfXJldHVybiByLmRvbmU9ITAscn19LGUudmFsdWVzPU8sVS5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOlUscmVzZXQ6ZnVuY3Rpb24oZSl7aWYodGhpcy5wcmV2PTAsdGhpcy5uZXh0PTAsdGhpcy5zZW50PXRoaXMuX3NlbnQ9dCx0aGlzLmRvbmU9ITEsdGhpcy5kZWxlZ2F0ZT1udWxsLHRoaXMubWV0aG9kPSJuZXh0Iix0aGlzLmFyZz10LHRoaXMudHJ5RW50cmllcy5mb3JFYWNoKFQpLCFlKWZvcih2YXIgciBpbiB0aGlzKSJ0Ij09PXIuY2hhckF0KDApJiZuLmNhbGwodGhpcyxyKSYmIWlzTmFOKCtyLnNsaWNlKDEpKSYmKHRoaXNbcl09dCk7fSxzdG9wOmZ1bmN0aW9uKCl7dGhpcy5kb25lPSEwO3ZhciBlPXRoaXMudHJ5RW50cmllc1swXS5jb21wbGV0aW9uO2lmKCJ0aHJvdyI9PT1lLnR5cGUpdGhyb3cgZS5hcmc7cmV0dXJuIHRoaXMucnZhbH0sZGlzcGF0Y2hFeGNlcHRpb246ZnVuY3Rpb24oZSl7aWYodGhpcy5kb25lKXRocm93IGU7dmFyIHI9dGhpcztmdW5jdGlvbiBpKG4saSl7cmV0dXJuIHMudHlwZT0idGhyb3ciLHMuYXJnPWUsci5uZXh0PW4saSYmKHIubWV0aG9kPSJuZXh0IixyLmFyZz10KSwhIWl9Zm9yKHZhciBhPXRoaXMudHJ5RW50cmllcy5sZW5ndGgtMTthPj0wOy0tYSl7dmFyIG89dGhpcy50cnlFbnRyaWVzW2FdLHM9by5jb21wbGV0aW9uO2lmKCJyb290Ij09PW8udHJ5TG9jKXJldHVybiBpKCJlbmQiKTtpZihvLnRyeUxvYzw9dGhpcy5wcmV2KXt2YXIgdT1uLmNhbGwobywiY2F0Y2hMb2MiKSxmPW4uY2FsbChvLCJmaW5hbGx5TG9jIik7aWYodSYmZil7aWYodGhpcy5wcmV2PG8uY2F0Y2hMb2MpcmV0dXJuIGkoby5jYXRjaExvYywhMCk7aWYodGhpcy5wcmV2PG8uZmluYWxseUxvYylyZXR1cm4gaShvLmZpbmFsbHlMb2MpfWVsc2UgaWYodSl7aWYodGhpcy5wcmV2PG8uY2F0Y2hMb2MpcmV0dXJuIGkoby5jYXRjaExvYywhMCl9ZWxzZSB7aWYoIWYpdGhyb3cgbmV3IEVycm9yKCJ0cnkgc3RhdGVtZW50IHdpdGhvdXQgY2F0Y2ggb3IgZmluYWxseSIpO2lmKHRoaXMucHJldjxvLmZpbmFsbHlMb2MpcmV0dXJuIGkoby5maW5hbGx5TG9jKX19fX0sYWJydXB0OmZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByPXRoaXMudHJ5RW50cmllcy5sZW5ndGgtMTtyPj0wOy0tcil7dmFyIGk9dGhpcy50cnlFbnRyaWVzW3JdO2lmKGkudHJ5TG9jPD10aGlzLnByZXYmJm4uY2FsbChpLCJmaW5hbGx5TG9jIikmJnRoaXMucHJldjxpLmZpbmFsbHlMb2Mpe3ZhciBhPWk7YnJlYWt9fWEmJigiYnJlYWsiPT09ZXx8ImNvbnRpbnVlIj09PWUpJiZhLnRyeUxvYzw9dCYmdDw9YS5maW5hbGx5TG9jJiYoYT1udWxsKTt2YXIgbz1hP2EuY29tcGxldGlvbjp7fTtyZXR1cm4gby50eXBlPWUsby5hcmc9dCxhPyh0aGlzLm1ldGhvZD0ibmV4dCIsdGhpcy5uZXh0PWEuZmluYWxseUxvYyx2KTp0aGlzLmNvbXBsZXRlKG8pfSxjb21wbGV0ZTpmdW5jdGlvbihlLHQpe2lmKCJ0aHJvdyI9PT1lLnR5cGUpdGhyb3cgZS5hcmc7cmV0dXJuICJicmVhayI9PT1lLnR5cGV8fCJjb250aW51ZSI9PT1lLnR5cGU/dGhpcy5uZXh0PWUuYXJnOiJyZXR1cm4iPT09ZS50eXBlPyh0aGlzLnJ2YWw9dGhpcy5hcmc9ZS5hcmcsdGhpcy5tZXRob2Q9InJldHVybiIsdGhpcy5uZXh0PSJlbmQiKToibm9ybWFsIj09PWUudHlwZSYmdCYmKHRoaXMubmV4dD10KSx2fSxmaW5pc2g6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PXRoaXMudHJ5RW50cmllcy5sZW5ndGgtMTt0Pj0wOy0tdCl7dmFyIHI9dGhpcy50cnlFbnRyaWVzW3RdO2lmKHIuZmluYWxseUxvYz09PWUpcmV0dXJuIHRoaXMuY29tcGxldGUoci5jb21wbGV0aW9uLHIuYWZ0ZXJMb2MpLFQociksdn19LGNhdGNoOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdD10aGlzLnRyeUVudHJpZXMubGVuZ3RoLTE7dD49MDstLXQpe3ZhciByPXRoaXMudHJ5RW50cmllc1t0XTtpZihyLnRyeUxvYz09PWUpe3ZhciBuPXIuY29tcGxldGlvbjtpZigidGhyb3ciPT09bi50eXBlKXt2YXIgaT1uLmFyZztUKHIpO31yZXR1cm4gaX19dGhyb3cgbmV3IEVycm9yKCJpbGxlZ2FsIGNhdGNoIGF0dGVtcHQiKX0sZGVsZWdhdGVZaWVsZDpmdW5jdGlvbihlLHIsbil7cmV0dXJuIHRoaXMuZGVsZWdhdGU9e2l0ZXJhdG9yOk8oZSkscmVzdWx0TmFtZTpyLG5leHRMb2M6bn0sIm5leHQiPT09dGhpcy5tZXRob2QmJih0aGlzLmFyZz10KSx2fX0sZX0oZS5leHBvcnRzKTt0cnl7cmVnZW5lcmF0b3JSdW50aW1lPXQ7fWNhdGNoKGUpeyJvYmplY3QiPT09KCJ1bmRlZmluZWQiPT10eXBlb2YgZ2xvYmFsVGhpcz8idW5kZWZpbmVkIjpkKGdsb2JhbFRoaXMpKT9nbG9iYWxUaGlzLnJlZ2VuZXJhdG9yUnVudGltZT10OkZ1bmN0aW9uKCJyIiwicmVnZW5lcmF0b3JSdW50aW1lID0gciIpKHQpO319KGspO2Zvcih2YXIgeD1rLmV4cG9ydHMsQT1uZXcgQXJyYXlCdWZmZXIoNCksXz1uZXcgRmxvYXQzMkFycmF5KEEpLEk9bmV3IFVpbnQzMkFycmF5KEEpLFA9bmV3IFVpbnQzMkFycmF5KDUxMiksUz1uZXcgVWludDMyQXJyYXkoNTEyKSxUPTA7VDwyNTY7KytUKXt2YXIgVT1ULTEyNztVPC0yNz8oUFtUXT0wLFBbMjU2fFRdPTMyNzY4LFNbVF09MjQsU1syNTZ8VF09MjQpOlU8LTE0PyhQW1RdPTEwMjQ+Pi1VLTE0LFBbMjU2fFRdPTEwMjQ+Pi1VLTE0fDMyNzY4LFNbVF09LVUtMSxTWzI1NnxUXT0tVS0xKTpVPD0xNT8oUFtUXT1VKzE1PDwxMCxQWzI1NnxUXT1VKzE1PDwxMHwzMjc2OCxTW1RdPTEzLFNbMjU2fFRdPTEzKTpVPDEyOD8oUFtUXT0zMTc0NCxQWzI1NnxUXT02NDUxMixTW1RdPTI0LFNbMjU2fFRdPTI0KTooUFtUXT0zMTc0NCxQWzI1NnxUXT02NDUxMixTW1RdPTEzLFNbMjU2fFRdPTEzKTt9dmFyIE89bmV3IFVpbnQzMkFycmF5KDIwNDgpLEQ9bmV3IFVpbnQzMkFycmF5KDY0KSxFPW5ldyBVaW50MzJBcnJheSg2NCk7T1swXT0wO2Zvcih2YXIgUj0xO1I8MTAyNDsrK1Ipe2Zvcih2YXIgTT1SPDwxMyxCPTA7MD09KDgzODg2MDgmTSk7KUItPTgzODg2MDgsTTw8PTE7TSY9LTgzODg2MDksQis9OTQ3OTEyNzA0LE9bUl09TXxCO31mb3IodmFyIEM9MTAyNDtDPDIwNDg7KytDKU9bQ109OTM5NTI0MDk2KyhDLTEwMjQ8PDEzKTtEWzBdPTA7Zm9yKHZhciBMPTE7TDwzMTsrK0wpRFtMXT1MPDwyMztEWzMxXT0xMTk5NTcwOTQ0LERbMzJdPTIxNDc0ODM2NDg7Zm9yKHZhciBGPTMzO0Y8NjM7KytGKURbRl09MjE0NzQ4MzY0OCsoRi0zMjw8MjMpO0RbNjNdPTMzNDcwNTQ1OTIsRVswXT0wO2Zvcih2YXIgVj0xO1Y8NjQ7KytWKUVbVl09MzI9PT1WPzA6MTAyNDtmdW5jdGlvbiBHKGUpe3ZhciB0PWU+PjEwO3JldHVybiBJWzBdPU9bRVt0XSsoMTAyMyZlKV0rRFt0XSxfWzBdfWZ1bmN0aW9uIGooZSl7aWYoInVuZGVmaW5lZCIhPXR5cGVvZiBTeW1ib2wmJm51bGwhPWVbU3ltYm9sLml0ZXJhdG9yXXx8bnVsbCE9ZVsiQEBpdGVyYXRvciJdKXJldHVybiBBcnJheS5mcm9tKGUpfWZ1bmN0aW9uIHooZSl7cmV0dXJuIGZ1bmN0aW9uKGUpe2lmKEFycmF5LmlzQXJyYXkoZSkpcmV0dXJuIG4oZSl9KGUpfHxqKGUpfHxpKGUpfHxmdW5jdGlvbigpe3Rocm93IG5ldyBUeXBlRXJyb3IoIkludmFsaWQgYXR0ZW1wdCB0byBzcHJlYWQgbm9uLWl0ZXJhYmxlIGluc3RhbmNlLlxuSW4gb3JkZXIgdG8gYmUgaXRlcmFibGUsIG5vbi1hcnJheSBvYmplY3RzIG11c3QgaGF2ZSBhIFtTeW1ib2wuaXRlcmF0b3JdKCkgbWV0aG9kLiIpfSgpfXZhciBOPVJlZmxlY3QuZ2V0UHJvdG90eXBlT2YoVWludDhBcnJheSkucHJvdG90eXBlLEs9UmVmbGVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoTixTeW1ib2wudG9TdHJpbmdUYWcpLmdldDt2YXIgWj1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nO2Z1bmN0aW9uIEgoZSl7cmV0dXJuICEhQXJyYXlCdWZmZXIuaXNWaWV3KGUpJiYoIWZ1bmN0aW9uKGUpe3JldHVybiB2b2lkIDAhPT1LLmNhbGwoZSl9KGUpJiYiW29iamVjdCBEYXRhVmlld10iPT09Wi5jYWxsKGUpKX1mdW5jdGlvbiBZKGUsdCl7aWYoIUgoZSkpdGhyb3cgbmV3IFR5cGVFcnJvcigiRmlyc3QgYXJndW1lbnQgdG8gZ2V0RmxvYXQxNiBmdW5jdGlvbiBtdXN0IGJlIGEgRGF0YVZpZXciKTtmb3IodmFyIHI9YXJndW1lbnRzLmxlbmd0aCxuPW5ldyBBcnJheShyPjI/ci0yOjApLGk9MjtpPHI7aSsrKW5baS0yXT1hcmd1bWVudHNbaV07cmV0dXJuIEcoZS5nZXRVaW50MTYuYXBwbHkoZSxbdF0uY29uY2F0KG4pKSl9dmFyIHE9ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXImJnIuZGVidWd8fCExO24mJmNvbnNvbGUubG9nKCJnZXR0aW5nICIrdCsiIGluICIrZSk7dmFyIGk9Im9iamVjdCI9PT1kKGUpP2Uub3V0ZXI6ZSxhPSIiLmNvbmNhdCh0LCdcXD0iKFteIl0qKSInKTtuJiZjb25zb2xlLmxvZygicGF0dGVybjoiLGEpO3ZhciBvPW5ldyBSZWdFeHAoYSkuZXhlYyhpKTtpZihuJiZjb25zb2xlLmxvZygibWF0Y2g6IixvKSxvKXJldHVybiBvWzFdfTt2YXIgWD1mdW5jdGlvbihlLHQscil7dmFyIG49bmV3IFJlZ0V4cCh0KS5leGVjKGUuc2xpY2UocikpO3JldHVybiBuP3Irbi5pbmRleDotMX07dmFyIFc9ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXImJnIuZGVidWd8fCExLGk9ciYmci5zdGFydEluZGV4fHwwO24mJmNvbnNvbGUubG9nKCJzdGFydGluZyBmaW5kVGFnQnlOYW1lIHdpdGgiLHQsIiBhbmQgIixyKTt2YXIgYT1YKGUsIjwiLmNvbmNhdCh0LCJbID5dIiksaSk7aWYobiYmY29uc29sZS5sb2coInN0YXJ0OiIsYSksLTEhPT1hKXt2YXIgbz1lLnNsaWNlKGErdC5sZW5ndGgpLHM9WChvLCJbIC9dIit0KyI+IiwwKSx1PS0xPT09czt1JiYocz1YKG8sIlsgL10+IiwwKSk7dmFyIGY9YSt0Lmxlbmd0aCtzKzErKHU/MDp0Lmxlbmd0aCkrMTtpZihuJiZjb25zb2xlLmxvZygiZW5kOiIsZiksLTEhPT1mKXt2YXIgYz1lLnNsaWNlKGEsZik7cmV0dXJuIHtpbm5lcjp1P251bGw6Yy5zbGljZShjLmluZGV4T2YoIj4iKSsxLGMubGFzdEluZGV4T2YoIjwiKSksb3V0ZXI6YyxzdGFydDphLGVuZDpmfX19fTt2YXIgSj1mdW5jdGlvbihlLHQscil7Zm9yKHZhciBuLGk9W10sYT1yJiZyLmRlYnVnfHwhMSxvPXImJnIuc3RhcnRJbmRleHx8MDtuPVcoZSx0LHtkZWJ1ZzphLHN0YXJ0SW5kZXg6b30pOylvPW4uZW5kLGkucHVzaChuKTtyZXR1cm4gYSYmY29uc29sZS5sb2coImZpbmRUYWdzQnlOYW1lIGZvdW5kIixpLmxlbmd0aCwidGFncyIpLGl9LFE9ezMxNToiQXJ0aXN0IiwyNTg6IkJpdHNQZXJTYW1wbGUiLDI2NToiQ2VsbExlbmd0aCIsMjY0OiJDZWxsV2lkdGgiLDMyMDoiQ29sb3JNYXAiLDI1OToiQ29tcHJlc3Npb24iLDMzNDMyOiJDb3B5cmlnaHQiLDMwNjoiRGF0ZVRpbWUiLDMzODoiRXh0cmFTYW1wbGVzIiwyNjY6IkZpbGxPcmRlciIsMjg5OiJGcmVlQnl0ZUNvdW50cyIsMjg4OiJGcmVlT2Zmc2V0cyIsMjkxOiJHcmF5UmVzcG9uc2VDdXJ2ZSIsMjkwOiJHcmF5UmVzcG9uc2VVbml0IiwzMTY6Ikhvc3RDb21wdXRlciIsMjcwOiJJbWFnZURlc2NyaXB0aW9uIiwyNTc6IkltYWdlTGVuZ3RoIiwyNTY6IkltYWdlV2lkdGgiLDI3MToiTWFrZSIsMjgxOiJNYXhTYW1wbGVWYWx1ZSIsMjgwOiJNaW5TYW1wbGVWYWx1ZSIsMjcyOiJNb2RlbCIsMjU0OiJOZXdTdWJmaWxlVHlwZSIsMjc0OiJPcmllbnRhdGlvbiIsMjYyOiJQaG90b21ldHJpY0ludGVycHJldGF0aW9uIiwyODQ6IlBsYW5hckNvbmZpZ3VyYXRpb24iLDI5NjoiUmVzb2x1dGlvblVuaXQiLDI3ODoiUm93c1BlclN0cmlwIiwyNzc6IlNhbXBsZXNQZXJQaXhlbCIsMzA1OiJTb2Z0d2FyZSIsMjc5OiJTdHJpcEJ5dGVDb3VudHMiLDI3MzoiU3RyaXBPZmZzZXRzIiwyNTU6IlN1YmZpbGVUeXBlIiwyNjM6IlRocmVzaGhvbGRpbmciLDI4MjoiWFJlc29sdXRpb24iLDI4MzoiWVJlc29sdXRpb24iLDMyNjoiQmFkRmF4TGluZXMiLDMyNzoiQ2xlYW5GYXhEYXRhIiwzNDM6IkNsaXBQYXRoIiwzMjg6IkNvbnNlY3V0aXZlQmFkRmF4TGluZXMiLDQzMzoiRGVjb2RlIiw0MzQ6IkRlZmF1bHRJbWFnZUNvbG9yIiwyNjk6IkRvY3VtZW50TmFtZSIsMzM2OiJEb3RSYW5nZSIsMzIxOiJIYWxmdG9uZUhpbnRzIiwzNDY6IkluZGV4ZWQiLDM0NzoiSlBFR1RhYmxlcyIsMjg1OiJQYWdlTmFtZSIsMjk3OiJQYWdlTnVtYmVyIiwzMTc6IlByZWRpY3RvciIsMzE5OiJQcmltYXJ5Q2hyb21hdGljaXRpZXMiLDUzMjoiUmVmZXJlbmNlQmxhY2tXaGl0ZSIsMzM5OiJTYW1wbGVGb3JtYXQiLDM0MDoiU01pblNhbXBsZVZhbHVlIiwzNDE6IlNNYXhTYW1wbGVWYWx1ZSIsNTU5OiJTdHJpcFJvd0NvdW50cyIsMzMwOiJTdWJJRkRzIiwyOTI6IlQ0T3B0aW9ucyIsMjkzOiJUNk9wdGlvbnMiLDMyNToiVGlsZUJ5dGVDb3VudHMiLDMyMzoiVGlsZUxlbmd0aCIsMzI0OiJUaWxlT2Zmc2V0cyIsMzIyOiJUaWxlV2lkdGgiLDMwMToiVHJhbnNmZXJGdW5jdGlvbiIsMzE4OiJXaGl0ZVBvaW50IiwzNDQ6IlhDbGlwUGF0aFVuaXRzIiwyODY6IlhQb3NpdGlvbiIsNTI5OiJZQ2JDckNvZWZmaWNpZW50cyIsNTMxOiJZQ2JDclBvc2l0aW9uaW5nIiw1MzA6IllDYkNyU3ViU2FtcGxpbmciLDM0NToiWUNsaXBQYXRoVW5pdHMiLDI4NzoiWVBvc2l0aW9uIiwzNzM3ODoiQXBlcnR1cmVWYWx1ZSIsNDA5NjE6IkNvbG9yU3BhY2UiLDM2ODY4OiJEYXRlVGltZURpZ2l0aXplZCIsMzY4Njc6IkRhdGVUaW1lT3JpZ2luYWwiLDM0NjY1OiJFeGlmIElGRCIsMzY4NjQ6IkV4aWZWZXJzaW9uIiwzMzQzNDoiRXhwb3N1cmVUaW1lIiw0MTcyODoiRmlsZVNvdXJjZSIsMzczODU6IkZsYXNoIiw0MDk2MDoiRmxhc2hwaXhWZXJzaW9uIiwzMzQzNzoiRk51bWJlciIsNDIwMTY6IkltYWdlVW5pcXVlSUQiLDM3Mzg0OiJMaWdodFNvdXJjZSIsMzc1MDA6Ik1ha2VyTm90ZSIsMzczNzc6IlNodXR0ZXJTcGVlZFZhbHVlIiwzNzUxMDoiVXNlckNvbW1lbnQiLDMzNzIzOiJJUFRDIiwzNDY3NToiSUNDIFByb2ZpbGUiLDcwMDoiWE1QIiw0MjExMjoiR0RBTF9NRVRBREFUQSIsNDIxMTM6IkdEQUxfTk9EQVRBIiwzNDM3NzoiUGhvdG9zaG9wIiwzMzU1MDoiTW9kZWxQaXhlbFNjYWxlIiwzMzkyMjoiTW9kZWxUaWVwb2ludCIsMzQyNjQ6Ik1vZGVsVHJhbnNmb3JtYXRpb24iLDM0NzM1OiJHZW9LZXlEaXJlY3RvcnkiLDM0NzM2OiJHZW9Eb3VibGVQYXJhbXMiLDM0NzM3OiJHZW9Bc2NpaVBhcmFtcyIsNTA2NzQ6IkxlcmNQYXJhbWV0ZXJzIn0sJD17fTtmb3IodmFyIGVlIGluIFEpUS5oYXNPd25Qcm9wZXJ0eShlZSkmJigkW1FbZWVdXT1wYXJzZUludChlZSwxMCkpO3ZhciB0ZT17MjU2OiJTSE9SVCIsMjU3OiJTSE9SVCIsMjU4OiJTSE9SVCIsMjU5OiJTSE9SVCIsMjYyOiJTSE9SVCIsMjczOiJMT05HIiwyNzQ6IlNIT1JUIiwyNzc6IlNIT1JUIiwyNzg6IkxPTkciLDI3OToiTE9ORyIsMjgyOiJSQVRJT05BTCIsMjgzOiJSQVRJT05BTCIsMjg0OiJTSE9SVCIsMjg2OiJTSE9SVCIsMjg3OiJSQVRJT05BTCIsMjk2OiJTSE9SVCIsMjk3OiJTSE9SVCIsMzA1OiJBU0NJSSIsMzA2OiJBU0NJSSIsMzM4OiJTSE9SVCIsMzM5OiJTSE9SVCIsNTEzOiJMT05HIiw1MTQ6IkxPTkciLDEwMjQ6IlNIT1JUIiwxMDI1OiJTSE9SVCIsMjA0ODoiU0hPUlQiLDIwNDk6IkFTQ0lJIiwzMDcyOiJTSE9SVCIsMzA3MzoiQVNDSUkiLDMzNTUwOiJET1VCTEUiLDMzOTIyOiJET1VCTEUiLDM0NjY1OiJMT05HIiwzNDczNToiU0hPUlQiLDM0NzM3OiJBU0NJSSIsNDIxMTM6IkFTQ0lJIn0scmU9WyQuQml0c1BlclNhbXBsZSwkLkV4dHJhU2FtcGxlcywkLlNhbXBsZUZvcm1hdCwkLlN0cmlwQnl0ZUNvdW50cywkLlN0cmlwT2Zmc2V0cywkLlN0cmlwUm93Q291bnRzLCQuVGlsZUJ5dGVDb3VudHMsJC5UaWxlT2Zmc2V0cywkLlN1YklGRHNdLG5lPXsxOiJCWVRFIiwyOiJBU0NJSSIsMzoiU0hPUlQiLDQ6IkxPTkciLDU6IlJBVElPTkFMIiw2OiJTQllURSIsNzoiVU5ERUZJTkVEIiw4OiJTU0hPUlQiLDk6IlNMT05HIiwxMDoiU1JBVElPTkFMIiwxMToiRkxPQVQiLDEyOiJET1VCTEUiLDEzOiJJRkQiLDE2OiJMT05HOCIsMTc6IlNMT05HOCIsMTg6IklGRDgifSxpZT17fTtmb3IodmFyIGFlIGluIG5lKW5lLmhhc093blByb3BlcnR5KGFlKSYmKGllW25lW2FlXV09cGFyc2VJbnQoYWUsMTApKTt2YXIgb2U9e1doaXRlSXNaZXJvOjAsQmxhY2tJc1plcm86MSxSR0I6MixQYWxldHRlOjMsVHJhbnNwYXJlbmN5TWFzazo0LENNWUs6NSxZQ2JDcjo2LENJRUxhYjo4LElDQ0xhYjo5fSxzZT17VW5zcGVjaWZpZWQ6MCxBc3NvY2FscGhhOjEsVW5hc3NhbHBoYToyfSx1ZT17VmVyc2lvbjowLEFkZENvbXByZXNzaW9uOjF9LGZlPXtOb25lOjAsRGVmbGF0ZToxfSxjZT17MTAyNDoiR1RNb2RlbFR5cGVHZW9LZXkiLDEwMjU6IkdUUmFzdGVyVHlwZUdlb0tleSIsMTAyNjoiR1RDaXRhdGlvbkdlb0tleSIsMjA0ODoiR2VvZ3JhcGhpY1R5cGVHZW9LZXkiLDIwNDk6Ikdlb2dDaXRhdGlvbkdlb0tleSIsMjA1MDoiR2VvZ0dlb2RldGljRGF0dW1HZW9LZXkiLDIwNTE6Ikdlb2dQcmltZU1lcmlkaWFuR2VvS2V5IiwyMDUyOiJHZW9nTGluZWFyVW5pdHNHZW9LZXkiLDIwNTM6Ikdlb2dMaW5lYXJVbml0U2l6ZUdlb0tleSIsMjA1NDoiR2VvZ0FuZ3VsYXJVbml0c0dlb0tleSIsMjA1NToiR2VvZ0FuZ3VsYXJVbml0U2l6ZUdlb0tleSIsMjA1NjoiR2VvZ0VsbGlwc29pZEdlb0tleSIsMjA1NzoiR2VvZ1NlbWlNYWpvckF4aXNHZW9LZXkiLDIwNTg6Ikdlb2dTZW1pTWlub3JBeGlzR2VvS2V5IiwyMDU5OiJHZW9nSW52RmxhdHRlbmluZ0dlb0tleSIsMjA2MDoiR2VvZ0F6aW11dGhVbml0c0dlb0tleSIsMjA2MToiR2VvZ1ByaW1lTWVyaWRpYW5Mb25nR2VvS2V5IiwyMDYyOiJHZW9nVE9XR1M4NEdlb0tleSIsMzA3MjoiUHJvamVjdGVkQ1NUeXBlR2VvS2V5IiwzMDczOiJQQ1NDaXRhdGlvbkdlb0tleSIsMzA3NDoiUHJvamVjdGlvbkdlb0tleSIsMzA3NToiUHJvakNvb3JkVHJhbnNHZW9LZXkiLDMwNzY6IlByb2pMaW5lYXJVbml0c0dlb0tleSIsMzA3NzoiUHJvakxpbmVhclVuaXRTaXplR2VvS2V5IiwzMDc4OiJQcm9qU3RkUGFyYWxsZWwxR2VvS2V5IiwzMDc5OiJQcm9qU3RkUGFyYWxsZWwyR2VvS2V5IiwzMDgwOiJQcm9qTmF0T3JpZ2luTG9uZ0dlb0tleSIsMzA4MToiUHJvak5hdE9yaWdpbkxhdEdlb0tleSIsMzA4MjoiUHJvakZhbHNlRWFzdGluZ0dlb0tleSIsMzA4MzoiUHJvakZhbHNlTm9ydGhpbmdHZW9LZXkiLDMwODQ6IlByb2pGYWxzZU9yaWdpbkxvbmdHZW9LZXkiLDMwODU6IlByb2pGYWxzZU9yaWdpbkxhdEdlb0tleSIsMzA4NjoiUHJvakZhbHNlT3JpZ2luRWFzdGluZ0dlb0tleSIsMzA4NzoiUHJvakZhbHNlT3JpZ2luTm9ydGhpbmdHZW9LZXkiLDMwODg6IlByb2pDZW50ZXJMb25nR2VvS2V5IiwzMDg5OiJQcm9qQ2VudGVyTGF0R2VvS2V5IiwzMDkwOiJQcm9qQ2VudGVyRWFzdGluZ0dlb0tleSIsMzA5MToiUHJvakNlbnRlck5vcnRoaW5nR2VvS2V5IiwzMDkyOiJQcm9qU2NhbGVBdE5hdE9yaWdpbkdlb0tleSIsMzA5MzoiUHJvalNjYWxlQXRDZW50ZXJHZW9LZXkiLDMwOTQ6IlByb2pBemltdXRoQW5nbGVHZW9LZXkiLDMwOTU6IlByb2pTdHJhaWdodFZlcnRQb2xlTG9uZ0dlb0tleSIsMzA5NjoiUHJvalJlY3RpZmllZEdyaWRBbmdsZUdlb0tleSIsNDA5NjoiVmVydGljYWxDU1R5cGVHZW9LZXkiLDQwOTc6IlZlcnRpY2FsQ2l0YXRpb25HZW9LZXkiLDQwOTg6IlZlcnRpY2FsRGF0dW1HZW9LZXkiLDQwOTk6IlZlcnRpY2FsVW5pdHNHZW9LZXkifSxsZT17fTtmb3IodmFyIGhlIGluIGNlKWNlLmhhc093blByb3BlcnR5KGhlKSYmKGxlW2NlW2hlXV09cGFyc2VJbnQoaGUsMTApKTt2YXIgZGU9T2JqZWN0LmZyZWV6ZSh7X19wcm90b19fOm51bGwsZmllbGRUYWdOYW1lczpRLGZpZWxkVGFnczokLGZpZWxkVGFnVHlwZXM6dGUsYXJyYXlGaWVsZHM6cmUsZmllbGRUeXBlTmFtZXM6bmUsZmllbGRUeXBlczppZSxwaG90b21ldHJpY0ludGVycHJldGF0aW9uczpvZSxFeHRyYVNhbXBsZXNWYWx1ZXM6c2UsTGVyY1BhcmFtZXRlcnM6dWUsTGVyY0FkZENvbXByZXNzaW9uOmZlLGdlb0tleU5hbWVzOmNlLGdlb0tleXM6bGV9KTtmdW5jdGlvbiBwZShlLHQpe2Zvcih2YXIgcixuPWUud2lkdGgsaT1lLmhlaWdodCxhPW5ldyBVaW50OEFycmF5KG4qaSozKSxvPTAscz0wO288ZS5sZW5ndGg7KytvLHMrPTMpcj0yNTYtZVtvXS90KjI1NixhW3NdPXIsYVtzKzFdPXIsYVtzKzJdPXI7cmV0dXJuIGF9ZnVuY3Rpb24gbWUoZSx0KXtmb3IodmFyIHIsbj1lLndpZHRoLGk9ZS5oZWlnaHQsYT1uZXcgVWludDhBcnJheShuKmkqMyksbz0wLHM9MDtvPGUubGVuZ3RoOysrbyxzKz0zKXI9ZVtvXS90KjI1NixhW3NdPXIsYVtzKzFdPXIsYVtzKzJdPXI7cmV0dXJuIGF9ZnVuY3Rpb24gdmUoZSx0KXtmb3IodmFyIHI9ZS53aWR0aCxuPWUuaGVpZ2h0LGk9bmV3IFVpbnQ4QXJyYXkocipuKjMpLGE9dC5sZW5ndGgvMyxvPXQubGVuZ3RoLzMqMixzPTAsdT0wO3M8ZS5sZW5ndGg7KytzLHUrPTMpe3ZhciBmPWVbc107aVt1XT10W2ZdLzY1NTM2KjI1NixpW3UrMV09dFtmK2FdLzY1NTM2KjI1NixpW3UrMl09dFtmK29dLzY1NTM2KjI1Njt9cmV0dXJuIGl9ZnVuY3Rpb24geWUoZSl7Zm9yKHZhciB0PWUud2lkdGgscj1lLmhlaWdodCxuPW5ldyBVaW50OEFycmF5KHQqciozKSxpPTAsYT0wO2k8ZS5sZW5ndGg7aSs9NCxhKz0zKXt2YXIgbz1lW2ldLHM9ZVtpKzFdLHU9ZVtpKzJdLGY9ZVtpKzNdO25bYV09KDI1NS1vKS8yNTYqMjU1KigoMjU1LWYpLzI1NiksblthKzFdPSgyNTUtcykvMjU2KjI1NSooKDI1NS1mKS8yNTYpLG5bYSsyXT0oMjU1LXUpLzI1NioyNTUqKCgyNTUtZikvMjU2KTt9cmV0dXJuIG59ZnVuY3Rpb24gZ2UoZSl7Zm9yKHZhciB0PWUud2lkdGgscj1lLmhlaWdodCxuPW5ldyBVaW50OENsYW1wZWRBcnJheSh0KnIqMyksaT0wLGE9MDtpPGUubGVuZ3RoO2krPTMsYSs9Myl7dmFyIG89ZVtpXSxzPWVbaSsxXSx1PWVbaSsyXTtuW2FdPW8rMS40MDIqKHUtMTI4KSxuW2ErMV09by0uMzQ0MTQqKHMtMTI4KS0uNzE0MTQqKHUtMTI4KSxuW2ErMl09bysxLjc3Mioocy0xMjgpO31yZXR1cm4gbn1mdW5jdGlvbiB3ZShlKXtmb3IodmFyIHQ9ZS53aWR0aCxyPWUuaGVpZ2h0LG49bmV3IFVpbnQ4QXJyYXkodCpyKjMpLGk9MCxhPTA7aTxlLmxlbmd0aDtpKz0zLGErPTMpe3ZhciBvPShlW2krMF0rMTYpLzExNixzPShlW2krMV08PDI0Pj4yNCkvNTAwK28sdT1vLShlW2krMl08PDI0Pj4yNCkvMjAwLGY9dm9pZCAwLGM9dm9pZCAwLGw9dm9pZCAwO2M9LS45Njg5KihzPS45NTA0NyoocypzKnM+LjAwODg1Nj9zKnMqczoocy0xNi8xMTYpLzcuNzg3KSkrMS44NzU4KihvPTEqKG8qbypvPi4wMDg4NTY/bypvKm86KG8tMTYvMTE2KS83Ljc4NykpKy4wNDE1Kih1PTEuMDg4ODMqKHUqdSp1Pi4wMDg4NTY/dSp1KnU6KHUtMTYvMTE2KS83Ljc4NykpLGw9LjA1NTcqcystLjIwNCpvKzEuMDU3KnUsZj0oZj0zLjI0MDYqcystMS41MzcyKm8rLS40OTg2KnUpPi4wMDMxMzA4PzEuMDU1Kk1hdGgucG93KGYsMS8yLjQpLS4wNTU6MTIuOTIqZixjPWM+LjAwMzEzMDg/MS4wNTUqTWF0aC5wb3coYywxLzIuNCktLjA1NToxMi45MipjLGw9bD4uMDAzMTMwOD8xLjA1NSpNYXRoLnBvdyhsLDEvMi40KS0uMDU1OjEyLjkyKmwsblthXT0yNTUqTWF0aC5tYXgoMCxNYXRoLm1pbigxLGYpKSxuW2ErMV09MjU1Kk1hdGgubWF4KDAsTWF0aC5taW4oMSxjKSksblthKzJdPTI1NSpNYXRoLm1heCgwLE1hdGgubWluKDEsbCkpO31yZXR1cm4gbn12YXIgYmU9T2JqZWN0LmZyZWV6ZSh7X19wcm90b19fOm51bGwsZnJvbVdoaXRlSXNaZXJvOnBlLGZyb21CbGFja0lzWmVybzptZSxmcm9tUGFsZXR0ZTp2ZSxmcm9tQ01ZSzp5ZSxmcm9tWUNiQ3I6Z2UsZnJvbUNJRUxhYjp3ZX0pLGtlPW5ldyBNYXA7ZnVuY3Rpb24geGUoZSx0KXtBcnJheS5pc0FycmF5KGUpfHwoZT1bZV0pLGUuZm9yRWFjaCgoZnVuY3Rpb24oZSl7cmV0dXJuIGtlLnNldChlLHQpfSkpO31mdW5jdGlvbiBBZShlKXtyZXR1cm4gX2UuYXBwbHkodGhpcyxhcmd1bWVudHMpfWZ1bmN0aW9uIF9lKCl7cmV0dXJuIChfZT11KHgubWFyaygoZnVuY3Rpb24gZSh0KXt2YXIgcixuO3JldHVybiB4LndyYXAoKGZ1bmN0aW9uKGUpe2Zvcig7Oylzd2l0Y2goZS5wcmV2PWUubmV4dCl7Y2FzZSAwOmlmKHI9a2UuZ2V0KHQuQ29tcHJlc3Npb24pKXtlLm5leHQ9MzticmVha310aHJvdyBuZXcgRXJyb3IoIlVua25vd24gY29tcHJlc3Npb24gbWV0aG9kIGlkZW50aWZpZXI6ICIuY29uY2F0KHQuQ29tcHJlc3Npb24pKTtjYXNlIDM6cmV0dXJuIGUubmV4dD01LHIoKTtjYXNlIDU6cmV0dXJuIG49ZS5zZW50LGUuYWJydXB0KCJyZXR1cm4iLG5ldyBuKHQpKTtjYXNlIDc6Y2FzZSJlbmQiOnJldHVybiBlLnN0b3AoKX19KSxlKX0pKSkpLmFwcGx5KHRoaXMsYXJndW1lbnRzKX1mdW5jdGlvbiBJZShlLHQscil7dmFyIG49YXJndW1lbnRzLmxlbmd0aD4zJiZ2b2lkIDAhPT1hcmd1bWVudHNbM10/YXJndW1lbnRzWzNdOjE7cmV0dXJuIG5ldyhPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkuY29uc3RydWN0b3IpKHQqcipuKX1mdW5jdGlvbiBQZShlLHQscixuLGkpe3ZhciBhPXQvbixvPXIvaTtyZXR1cm4gZS5tYXAoKGZ1bmN0aW9uKGUpe2Zvcih2YXIgcz1JZShlLG4saSksdT0wO3U8aTsrK3UpZm9yKHZhciBmPU1hdGgubWluKE1hdGgucm91bmQobyp1KSxyLTEpLGM9MDtjPG47KytjKXt2YXIgbD1NYXRoLm1pbihNYXRoLnJvdW5kKGEqYyksdC0xKSxoPWVbZip0K2xdO3NbdSpuK2NdPWg7fXJldHVybiBzfSkpfWZ1bmN0aW9uIFNlKGUsdCxyKXtyZXR1cm4gKDEtcikqZStyKnR9ZnVuY3Rpb24gVGUoZSx0LHIsbixpKXt2YXIgYT10L24sbz1yL2k7cmV0dXJuIGUubWFwKChmdW5jdGlvbihlKXtmb3IodmFyIHM9SWUoZSxuLGkpLHU9MDt1PGk7Kyt1KWZvcih2YXIgZj1vKnUsYz1NYXRoLmZsb29yKGYpLGw9TWF0aC5taW4oTWF0aC5jZWlsKGYpLHItMSksaD0wO2g8bjsrK2gpe3ZhciBkPWEqaCxwPWQlMSxtPU1hdGguZmxvb3IoZCksdj1NYXRoLm1pbihNYXRoLmNlaWwoZCksdC0xKSx5PWVbYyp0K21dLGc9ZVtjKnQrdl0sdz1lW2wqdCttXSxiPWVbbCp0K3ZdLGs9U2UoU2UoeSxnLHApLFNlKHcsYixwKSxmJTEpO3NbdSpuK2hdPWs7fXJldHVybiBzfSkpfWZ1bmN0aW9uIFVlKGUsdCxyLG4saSl7dmFyIGE9YXJndW1lbnRzLmxlbmd0aD41JiZ2b2lkIDAhPT1hcmd1bWVudHNbNV0/YXJndW1lbnRzWzVdOiJuZWFyZXN0Ijtzd2l0Y2goYS50b0xvd2VyQ2FzZSgpKXtjYXNlIm5lYXJlc3QiOnJldHVybiBQZShlLHQscixuLGkpO2Nhc2UiYmlsaW5lYXIiOmNhc2UibGluZWFyIjpyZXR1cm4gVGUoZSx0LHIsbixpKTtkZWZhdWx0OnRocm93IG5ldyBFcnJvcigiVW5zdXBwb3J0ZWQgcmVzYW1wbGluZyBtZXRob2Q6ICciLmNvbmNhdChhLCInIikpfX1mdW5jdGlvbiBPZShlLHQscixuLGksYSl7Zm9yKHZhciBvPXQvbixzPXIvaSx1PUllKGUsbixpLGEpLGY9MDtmPGk7KytmKWZvcih2YXIgYz1NYXRoLm1pbihNYXRoLnJvdW5kKHMqZiksci0xKSxsPTA7bDxuOysrbClmb3IodmFyIGg9TWF0aC5taW4oTWF0aC5yb3VuZChvKmwpLHQtMSksZD0wO2Q8YTsrK2Qpe3ZhciBwPWVbYyp0KmEraCphK2RdO3VbZipuKmErbCphK2RdPXA7fXJldHVybiB1fWZ1bmN0aW9uIERlKGUsdCxyLG4saSxhKXtmb3IodmFyIG89dC9uLHM9ci9pLHU9SWUoZSxuLGksYSksZj0wO2Y8aTsrK2YpZm9yKHZhciBjPXMqZixsPU1hdGguZmxvb3IoYyksaD1NYXRoLm1pbihNYXRoLmNlaWwoYyksci0xKSxkPTA7ZDxuOysrZClmb3IodmFyIHA9bypkLG09cCUxLHY9TWF0aC5mbG9vcihwKSx5PU1hdGgubWluKE1hdGguY2VpbChwKSx0LTEpLGc9MDtnPGE7KytnKXt2YXIgdz1lW2wqdCphK3YqYStnXSxiPWVbbCp0KmEreSphK2ddLGs9ZVtoKnQqYSt2KmErZ10seD1lW2gqdCphK3kqYStnXSxBPVNlKFNlKHcsYixtKSxTZShrLHgsbSksYyUxKTt1W2YqbiphK2QqYStnXT1BO31yZXR1cm4gdX1mdW5jdGlvbiBFZShlLHQscixuLGksYSl7dmFyIG89YXJndW1lbnRzLmxlbmd0aD42JiZ2b2lkIDAhPT1hcmd1bWVudHNbNl0/YXJndW1lbnRzWzZdOiJuZWFyZXN0Ijtzd2l0Y2goby50b0xvd2VyQ2FzZSgpKXtjYXNlIm5lYXJlc3QiOnJldHVybiBPZShlLHQscixuLGksYSk7Y2FzZSJiaWxpbmVhciI6Y2FzZSJsaW5lYXIiOnJldHVybiBEZShlLHQscixuLGksYSk7ZGVmYXVsdDp0aHJvdyBuZXcgRXJyb3IoIlVuc3VwcG9ydGVkIHJlc2FtcGxpbmcgbWV0aG9kOiAnIi5jb25jYXQobywiJyIpKX19ZnVuY3Rpb24gUmUoZSx0LHIpe2Zvcih2YXIgbj0wLGk9dDtpPHI7KytpKW4rPWVbaV07cmV0dXJuIG59ZnVuY3Rpb24gTWUoZSx0LHIpe3N3aXRjaChlKXtjYXNlIDE6aWYodDw9OClyZXR1cm4gbmV3IFVpbnQ4QXJyYXkocik7aWYodDw9MTYpcmV0dXJuIG5ldyBVaW50MTZBcnJheShyKTtpZih0PD0zMilyZXR1cm4gbmV3IFVpbnQzMkFycmF5KHIpO2JyZWFrO2Nhc2UgMjppZig4PT09dClyZXR1cm4gbmV3IEludDhBcnJheShyKTtpZigxNj09PXQpcmV0dXJuIG5ldyBJbnQxNkFycmF5KHIpO2lmKDMyPT09dClyZXR1cm4gbmV3IEludDMyQXJyYXkocik7YnJlYWs7Y2FzZSAzOnN3aXRjaCh0KXtjYXNlIDE2OmNhc2UgMzI6cmV0dXJuIG5ldyBGbG9hdDMyQXJyYXkocik7Y2FzZSA2NDpyZXR1cm4gbmV3IEZsb2F0NjRBcnJheShyKX19dGhyb3cgRXJyb3IoIlVuc3VwcG9ydGVkIGRhdGEgZm9ybWF0L2JpdHNQZXJTYW1wbGUiKX1mdW5jdGlvbiBCZShlLHQpe3JldHVybiAoMSE9PWUmJjIhPT1lfHwhKHQ8PTMyKXx8dCU4IT0wKSYmKDMhPT1lfHwxNiE9PXQmJjMyIT09dCYmNjQhPT10KX1mdW5jdGlvbiBDZShlLHQscixuLGksYSxvKXt2YXIgcz1uZXcgRGF0YVZpZXcoZSksdT0yPT09cj8xOm4sZj1NZSh0LGksMj09PXI/byphOm8qYSpuKSxjPXBhcnNlSW50KCIxIi5yZXBlYXQoaSksMik7aWYoMT09PXQpe3ZhciBsPWEqKDE9PT1yP24qaTppKTswIT0oNyZsKSYmKGw9bCs3Ji04KTtmb3IodmFyIGg9MDtoPG87KytoKWZvcih2YXIgZD1oKmwscD0wO3A8YTsrK3ApZm9yKHZhciBtPWQrcCp1Kmksdj0wO3Y8dTsrK3Ype3ZhciB5PW0rdippLGc9KGgqYStwKSp1K3Ysdz1NYXRoLmZsb29yKHkvOCksYj15JTg7aWYoYitpPD04KWZbZ109cy5nZXRVaW50OCh3KT4+OC1pLWImYztlbHNlIGlmKGIraTw9MTYpZltnXT1zLmdldFVpbnQxNih3KT4+MTYtaS1iJmM7ZWxzZSBpZihiK2k8PTI0KXt2YXIgaz1zLmdldFVpbnQxNih3KTw8OHxzLmdldFVpbnQ4KHcrMik7ZltnXT1rPj4yNC1pLWImYzt9ZWxzZSBmW2ddPXMuZ2V0VWludDMyKHcpPj4zMi1pLWImYzt9fXJldHVybiBmLmJ1ZmZlcn14ZShbdm9pZCAwLDFdLChmdW5jdGlvbigpe3JldHVybiBQcm9taXNlLnJlc29sdmUoKS50aGVuKChmdW5jdGlvbigpe3JldHVybiBGcn0pKS50aGVuKChmdW5jdGlvbihlKXtyZXR1cm4gZS5kZWZhdWx0fSkpfSkpLHhlKDUsKGZ1bmN0aW9uKCl7cmV0dXJuIFByb21pc2UucmVzb2x2ZSgpLnRoZW4oKGZ1bmN0aW9uKCl7cmV0dXJuIE5yfSkpLnRoZW4oKGZ1bmN0aW9uKGUpe3JldHVybiBlLmRlZmF1bHR9KSl9KSkseGUoNiwoZnVuY3Rpb24oKXt0aHJvdyBuZXcgRXJyb3IoIm9sZCBzdHlsZSBKUEVHIGNvbXByZXNzaW9uIGlzIG5vdCBzdXBwb3J0ZWQuIil9KSkseGUoNywoZnVuY3Rpb24oKXtyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCkudGhlbigoZnVuY3Rpb24oKXtyZXR1cm4gb259KSkudGhlbigoZnVuY3Rpb24oZSl7cmV0dXJuIGUuZGVmYXVsdH0pKX0pKSx4ZShbOCwzMjk0Nl0sKGZ1bmN0aW9uKCl7cmV0dXJuIFByb21pc2UucmVzb2x2ZSgpLnRoZW4oKGZ1bmN0aW9uKCl7cmV0dXJuIHZpfSkpLnRoZW4oKGZ1bmN0aW9uKGUpe3JldHVybiBlLmRlZmF1bHR9KSl9KSkseGUoMzI3NzMsKGZ1bmN0aW9uKCl7cmV0dXJuIFByb21pc2UucmVzb2x2ZSgpLnRoZW4oKGZ1bmN0aW9uKCl7cmV0dXJuIHdpfSkpLnRoZW4oKGZ1bmN0aW9uKGUpe3JldHVybiBlLmRlZmF1bHR9KSl9KSkseGUoMzQ4ODcsKGZ1bmN0aW9uKCl7cmV0dXJuIFByb21pc2UucmVzb2x2ZSgpLnRoZW4oKGZ1bmN0aW9uKCl7cmV0dXJuIF9pfSkpLnRoZW4oKGZ1bmN0aW9uKGUpe3JldHVybiBlLmRlZmF1bHR9KSl9KSkseGUoNTAwMDEsKGZ1bmN0aW9uKCl7cmV0dXJuIFByb21pc2UucmVzb2x2ZSgpLnRoZW4oKGZ1bmN0aW9uKCl7cmV0dXJuIFNpfSkpLnRoZW4oKGZ1bmN0aW9uKGUpe3JldHVybiBlLmRlZmF1bHR9KSl9KSk7dmFyIExlPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0LHIsbixpLGEsbyl7Yih0aGlzLGUpLHRoaXMuZmlsZURpcmVjdG9yeT10LHRoaXMuZ2VvS2V5cz1yLHRoaXMuZGF0YVZpZXc9bix0aGlzLmxpdHRsZUVuZGlhbj1pLHRoaXMudGlsZXM9YT97fTpudWxsLHRoaXMuaXNUaWxlZD0hdC5TdHJpcE9mZnNldHM7dmFyIHM9dC5QbGFuYXJDb25maWd1cmF0aW9uO2lmKHRoaXMucGxhbmFyQ29uZmlndXJhdGlvbj12b2lkIDA9PT1zPzE6cywxIT09dGhpcy5wbGFuYXJDb25maWd1cmF0aW9uJiYyIT09dGhpcy5wbGFuYXJDb25maWd1cmF0aW9uKXRocm93IG5ldyBFcnJvcigiSW52YWxpZCBwbGFuYXIgY29uZmlndXJhdGlvbi4iKTt0aGlzLnNvdXJjZT1vO312YXIgdCxyLG4saTtyZXR1cm4gYyhlLFt7a2V5OiJnZXRGaWxlRGlyZWN0b3J5Iix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmZpbGVEaXJlY3Rvcnl9fSx7a2V5OiJnZXRHZW9LZXlzIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdlb0tleXN9fSx7a2V5OiJnZXRXaWR0aCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5maWxlRGlyZWN0b3J5LkltYWdlV2lkdGh9fSx7a2V5OiJnZXRIZWlnaHQiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZmlsZURpcmVjdG9yeS5JbWFnZUxlbmd0aH19LHtrZXk6ImdldFNhbXBsZXNQZXJQaXhlbCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdm9pZCAwIT09dGhpcy5maWxlRGlyZWN0b3J5LlNhbXBsZXNQZXJQaXhlbD90aGlzLmZpbGVEaXJlY3RvcnkuU2FtcGxlc1BlclBpeGVsOjF9fSx7a2V5OiJnZXRUaWxlV2lkdGgiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXNUaWxlZD90aGlzLmZpbGVEaXJlY3RvcnkuVGlsZVdpZHRoOnRoaXMuZ2V0V2lkdGgoKX19LHtrZXk6ImdldFRpbGVIZWlnaHQiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXNUaWxlZD90aGlzLmZpbGVEaXJlY3RvcnkuVGlsZUxlbmd0aDp2b2lkIDAhPT10aGlzLmZpbGVEaXJlY3RvcnkuUm93c1BlclN0cmlwP01hdGgubWluKHRoaXMuZmlsZURpcmVjdG9yeS5Sb3dzUGVyU3RyaXAsdGhpcy5nZXRIZWlnaHQoKSk6dGhpcy5nZXRIZWlnaHQoKX19LHtrZXk6ImdldEJsb2NrV2lkdGgiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0VGlsZVdpZHRoKCl9fSx7a2V5OiJnZXRCbG9ja0hlaWdodCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuaXNUaWxlZHx8KGUrMSkqdGhpcy5nZXRUaWxlSGVpZ2h0KCk8PXRoaXMuZ2V0SGVpZ2h0KCk/dGhpcy5nZXRUaWxlSGVpZ2h0KCk6dGhpcy5nZXRIZWlnaHQoKS1lKnRoaXMuZ2V0VGlsZUhlaWdodCgpfX0se2tleToiZ2V0Qnl0ZXNQZXJQaXhlbCIsdmFsdWU6ZnVuY3Rpb24oKXtmb3IodmFyIGU9MCx0PTA7dDx0aGlzLmZpbGVEaXJlY3RvcnkuQml0c1BlclNhbXBsZS5sZW5ndGg7Kyt0KWUrPXRoaXMuZ2V0U2FtcGxlQnl0ZVNpemUodCk7cmV0dXJuIGV9fSx7a2V5OiJnZXRTYW1wbGVCeXRlU2l6ZSIsdmFsdWU6ZnVuY3Rpb24oZSl7aWYoZT49dGhpcy5maWxlRGlyZWN0b3J5LkJpdHNQZXJTYW1wbGUubGVuZ3RoKXRocm93IG5ldyBSYW5nZUVycm9yKCJTYW1wbGUgaW5kZXggIi5jb25jYXQoZSwiIGlzIG91dCBvZiByYW5nZS4iKSk7cmV0dXJuIE1hdGguY2VpbCh0aGlzLmZpbGVEaXJlY3RvcnkuQml0c1BlclNhbXBsZVtlXS84KX19LHtrZXk6ImdldFJlYWRlckZvclNhbXBsZSIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5maWxlRGlyZWN0b3J5LlNhbXBsZUZvcm1hdD90aGlzLmZpbGVEaXJlY3RvcnkuU2FtcGxlRm9ybWF0W2VdOjEscj10aGlzLmZpbGVEaXJlY3RvcnkuQml0c1BlclNhbXBsZVtlXTtzd2l0Y2godCl7Y2FzZSAxOmlmKHI8PTgpcmV0dXJuIERhdGFWaWV3LnByb3RvdHlwZS5nZXRVaW50ODtpZihyPD0xNilyZXR1cm4gRGF0YVZpZXcucHJvdG90eXBlLmdldFVpbnQxNjtpZihyPD0zMilyZXR1cm4gRGF0YVZpZXcucHJvdG90eXBlLmdldFVpbnQzMjticmVhaztjYXNlIDI6aWYocjw9OClyZXR1cm4gRGF0YVZpZXcucHJvdG90eXBlLmdldEludDg7aWYocjw9MTYpcmV0dXJuIERhdGFWaWV3LnByb3RvdHlwZS5nZXRJbnQxNjtpZihyPD0zMilyZXR1cm4gRGF0YVZpZXcucHJvdG90eXBlLmdldEludDMyO2JyZWFrO2Nhc2UgMzpzd2l0Y2gocil7Y2FzZSAxNjpyZXR1cm4gZnVuY3Rpb24oZSx0KXtyZXR1cm4gWSh0aGlzLGUsdCl9O2Nhc2UgMzI6cmV0dXJuIERhdGFWaWV3LnByb3RvdHlwZS5nZXRGbG9hdDMyO2Nhc2UgNjQ6cmV0dXJuIERhdGFWaWV3LnByb3RvdHlwZS5nZXRGbG9hdDY0fX10aHJvdyBFcnJvcigiVW5zdXBwb3J0ZWQgZGF0YSBmb3JtYXQvYml0c1BlclNhbXBsZSIpfX0se2tleToiZ2V0U2FtcGxlRm9ybWF0Iix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTowO3JldHVybiB0aGlzLmZpbGVEaXJlY3RvcnkuU2FtcGxlRm9ybWF0P3RoaXMuZmlsZURpcmVjdG9yeS5TYW1wbGVGb3JtYXRbZV06MX19LHtrZXk6ImdldEJpdHNQZXJTYW1wbGUiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOjA7cmV0dXJuIHRoaXMuZmlsZURpcmVjdG9yeS5CaXRzUGVyU2FtcGxlW2VdfX0se2tleToiZ2V0QXJyYXlGb3JTYW1wbGUiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIE1lKHRoaXMuZ2V0U2FtcGxlRm9ybWF0KGUpLHRoaXMuZ2V0Qml0c1BlclNhbXBsZShlKSx0KX19LHtrZXk6ImdldFRpbGVPclN0cmlwIix2YWx1ZTooaT11KHgubWFyaygoZnVuY3Rpb24gZSh0LHIsbixpLGEpe3ZhciBvLHMsZixjLGwsaCxkLHAsbT10aGlzO3JldHVybiB4LndyYXAoKGZ1bmN0aW9uKGUpe2Zvcig7Oylzd2l0Y2goZS5wcmV2PWUubmV4dCl7Y2FzZSAwOnJldHVybiBvPU1hdGguY2VpbCh0aGlzLmdldFdpZHRoKCkvdGhpcy5nZXRUaWxlV2lkdGgoKSkscz1NYXRoLmNlaWwodGhpcy5nZXRIZWlnaHQoKS90aGlzLmdldFRpbGVIZWlnaHQoKSksYz10aGlzLnRpbGVzLDE9PT10aGlzLnBsYW5hckNvbmZpZ3VyYXRpb24/Zj1yKm8rdDoyPT09dGhpcy5wbGFuYXJDb25maWd1cmF0aW9uJiYoZj1uKm8qcytyKm8rdCksdGhpcy5pc1RpbGVkPyhsPXRoaXMuZmlsZURpcmVjdG9yeS5UaWxlT2Zmc2V0c1tmXSxoPXRoaXMuZmlsZURpcmVjdG9yeS5UaWxlQnl0ZUNvdW50c1tmXSk6KGw9dGhpcy5maWxlRGlyZWN0b3J5LlN0cmlwT2Zmc2V0c1tmXSxoPXRoaXMuZmlsZURpcmVjdG9yeS5TdHJpcEJ5dGVDb3VudHNbZl0pLGUubmV4dD03LHRoaXMuc291cmNlLmZldGNoKFt7b2Zmc2V0OmwsbGVuZ3RoOmh9XSxhKTtjYXNlIDc6cmV0dXJuIGQ9ZS5zZW50WzBdLG51bGwhPT1jJiZjW2ZdP3A9Y1tmXToocD11KHgubWFyaygoZnVuY3Rpb24gZSgpe3ZhciB0LG4sYTtyZXR1cm4geC53cmFwKChmdW5jdGlvbihlKXtmb3IoOzspc3dpdGNoKGUucHJldj1lLm5leHQpe2Nhc2UgMDpyZXR1cm4gZS5uZXh0PTIsaS5kZWNvZGUobS5maWxlRGlyZWN0b3J5LGQpO2Nhc2UgMjpyZXR1cm4gdD1lLnNlbnQsbj1tLmdldFNhbXBsZUZvcm1hdCgpLGE9bS5nZXRCaXRzUGVyU2FtcGxlKCksQmUobixhKSYmKHQ9Q2UodCxuLG0ucGxhbmFyQ29uZmlndXJhdGlvbixtLmdldFNhbXBsZXNQZXJQaXhlbCgpLGEsbS5nZXRUaWxlV2lkdGgoKSxtLmdldEJsb2NrSGVpZ2h0KHIpKSksZS5hYnJ1cHQoInJldHVybiIsdCk7Y2FzZSA3OmNhc2UiZW5kIjpyZXR1cm4gZS5zdG9wKCl9fSksZSl9KSkpKCksbnVsbCE9PWMmJihjW2ZdPXApKSxlLnQwPXQsZS50MT1yLGUudDI9bixlLm5leHQ9MTQscDtjYXNlIDE0OnJldHVybiBlLnQzPWUuc2VudCxlLmFicnVwdCgicmV0dXJuIix7eDplLnQwLHk6ZS50MSxzYW1wbGU6ZS50MixkYXRhOmUudDN9KTtjYXNlIDE2OmNhc2UiZW5kIjpyZXR1cm4gZS5zdG9wKCl9fSksZSx0aGlzKX0pKSksZnVuY3Rpb24oZSx0LHIsbixhKXtyZXR1cm4gaS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9KX0se2tleToiX3JlYWRSYXN0ZXIiLHZhbHVlOihuPXUoeC5tYXJrKChmdW5jdGlvbiBlKHQscixuLGksYSxvLHMsdSxmKXt2YXIgYyxsLGgsZCxwLG0sdix5LGcsdyxiLGssQSxfLEksUCxTLFQsVSxPLEQ9dGhpcztyZXR1cm4geC53cmFwKChmdW5jdGlvbihlKXtmb3IoOzspc3dpdGNoKGUucHJldj1lLm5leHQpe2Nhc2UgMDpmb3IoYz10aGlzLmdldFRpbGVXaWR0aCgpLGw9dGhpcy5nZXRUaWxlSGVpZ2h0KCksaD10aGlzLmdldFdpZHRoKCksZD10aGlzLmdldEhlaWdodCgpLHA9TWF0aC5tYXgoTWF0aC5mbG9vcih0WzBdL2MpLDApLG09TWF0aC5taW4oTWF0aC5jZWlsKHRbMl0vYyksTWF0aC5jZWlsKGgvYykpLHY9TWF0aC5tYXgoTWF0aC5mbG9vcih0WzFdL2wpLDApLHk9TWF0aC5taW4oTWF0aC5jZWlsKHRbM10vbCksTWF0aC5jZWlsKGQvbCkpLGc9dFsyXS10WzBdLHc9dGhpcy5nZXRCeXRlc1BlclBpeGVsKCksYj1bXSxrPVtdLEE9MDtBPHIubGVuZ3RoOysrQSkxPT09dGhpcy5wbGFuYXJDb25maWd1cmF0aW9uP2IucHVzaChSZSh0aGlzLmZpbGVEaXJlY3RvcnkuQml0c1BlclNhbXBsZSwwLHJbQV0pLzgpOmIucHVzaCgwKSxrLnB1c2godGhpcy5nZXRSZWFkZXJGb3JTYW1wbGUocltBXSkpO2ZvcihfPVtdLEk9dGhpcy5saXR0bGVFbmRpYW4sUD12O1A8eTsrK1ApZm9yKFM9cDtTPG07KytTKWZvcihUPWZ1bmN0aW9uKGUpe3ZhciBvPWUscz1yW2VdOzI9PT1ELnBsYW5hckNvbmZpZ3VyYXRpb24mJih3PUQuZ2V0U2FtcGxlQnl0ZVNpemUoZSkpO3ZhciB1PUQuZ2V0VGlsZU9yU3RyaXAoUyxQLHMsYSxmKS50aGVuKChmdW5jdGlvbihlKXtmb3IodmFyIGE9ZS5kYXRhLHM9bmV3IERhdGFWaWV3KGEpLHU9RC5nZXRCbG9ja0hlaWdodChlLnkpLGY9ZS55KmwscD1lLngqYyxtPWYrdSx2PShlLngrMSkqYyx5PWtbb10seD1NYXRoLm1pbih1LHUtKG0tdFszXSksZC1mKSxBPU1hdGgubWluKGMsYy0odi10WzJdKSxoLXApLF89TWF0aC5tYXgoMCx0WzFdLWYpO188eDsrK18pZm9yKHZhciBQPU1hdGgubWF4KDAsdFswXS1wKTtQPEE7KytQKXt2YXIgUz0oXypjK1ApKncsVD15LmNhbGwocyxTK2Jbb10sSSksVT12b2lkIDA7aT8oVT0oXytmLXRbMV0pKmcqci5sZW5ndGgrKFArcC10WzBdKSpyLmxlbmd0aCtvLG5bVV09VCk6KFU9KF8rZi10WzFdKSpnK1ArcC10WzBdLG5bb11bVV09VCk7fX0pKTtfLnB1c2godSk7fSxVPTA7VTxyLmxlbmd0aDsrK1UpVChVKTtyZXR1cm4gZS5uZXh0PTE4LFByb21pc2UuYWxsKF8pO2Nhc2UgMTg6aWYoIShvJiZ0WzJdLXRbMF0hPT1vfHxzJiZ0WzNdLXRbMV0hPT1zKSl7ZS5uZXh0PTIzO2JyZWFrfXJldHVybiAoTz1pP0VlKG4sdFsyXS10WzBdLHRbM10tdFsxXSxvLHMsci5sZW5ndGgsdSk6VWUobix0WzJdLXRbMF0sdFszXS10WzFdLG8scyx1KSkud2lkdGg9byxPLmhlaWdodD1zLGUuYWJydXB0KCJyZXR1cm4iLE8pO2Nhc2UgMjM6cmV0dXJuIG4ud2lkdGg9b3x8dFsyXS10WzBdLG4uaGVpZ2h0PXN8fHRbM10tdFsxXSxlLmFicnVwdCgicmV0dXJuIixuKTtjYXNlIDI2OmNhc2UiZW5kIjpyZXR1cm4gZS5zdG9wKCl9fSksZSx0aGlzKX0pKSksZnVuY3Rpb24oZSx0LHIsaSxhLG8scyx1LGYpe3JldHVybiBuLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0pfSx7a2V5OiJyZWFkUmFzdGVycyIsdmFsdWU6KHI9dSh4Lm1hcmsoKGZ1bmN0aW9uIGUoKXt2YXIgdCxyLG4saSxhLG8scyx1LGYsYyxsLGgsZCxwLG0sdix5LGcsdyxiLGssQSxfLEksUCxTLFQ9YXJndW1lbnRzO3JldHVybiB4LndyYXAoKGZ1bmN0aW9uKGUpe2Zvcig7Oylzd2l0Y2goZS5wcmV2PWUubmV4dCl7Y2FzZSAwOmlmKHQ9VC5sZW5ndGg+MCYmdm9pZCAwIT09VFswXT9UWzBdOnt9LHI9dC53aW5kb3csbj10LnNhbXBsZXMsaT12b2lkIDA9PT1uP1tdOm4sYT10LmludGVybGVhdmUsbz10LnBvb2wscz12b2lkIDA9PT1vP251bGw6byx1PXQud2lkdGgsZj10LmhlaWdodCxjPXQucmVzYW1wbGVNZXRob2QsbD10LmZpbGxWYWx1ZSxoPXQuc2lnbmFsLCEoKGQ9cnx8WzAsMCx0aGlzLmdldFdpZHRoKCksdGhpcy5nZXRIZWlnaHQoKV0pWzBdPmRbMl18fGRbMV0+ZFszXSkpe2UubmV4dD00O2JyZWFrfXRocm93IG5ldyBFcnJvcigiSW52YWxpZCBzdWJzZXRzIik7Y2FzZSA0OmlmKHA9ZFsyXS1kWzBdLG09ZFszXS1kWzFdLHY9cCptLHk9dGhpcy5nZXRTYW1wbGVzUGVyUGl4ZWwoKSxpJiZpLmxlbmd0aCl7ZS5uZXh0PTEyO2JyZWFrfWZvcihnPTA7Zzx5OysrZylpLnB1c2goZyk7ZS5uZXh0PTE5O2JyZWFrO2Nhc2UgMTI6dz0wO2Nhc2UgMTM6aWYoISh3PGkubGVuZ3RoKSl7ZS5uZXh0PTE5O2JyZWFrfWlmKCEoaVt3XT49eSkpe2UubmV4dD0xNjticmVha31yZXR1cm4gZS5hYnJ1cHQoInJldHVybiIsUHJvbWlzZS5yZWplY3QobmV3IFJhbmdlRXJyb3IoIkludmFsaWQgc2FtcGxlIGluZGV4ICciLmNvbmNhdChpW3ddLCInLiIpKSkpO2Nhc2UgMTY6Kyt3LGUubmV4dD0xMzticmVhaztjYXNlIDE5OmlmKGEpaz10aGlzLmZpbGVEaXJlY3RvcnkuU2FtcGxlRm9ybWF0P01hdGgubWF4LmFwcGx5KG51bGwsdGhpcy5maWxlRGlyZWN0b3J5LlNhbXBsZUZvcm1hdCk6MSxBPU1hdGgubWF4LmFwcGx5KG51bGwsdGhpcy5maWxlRGlyZWN0b3J5LkJpdHNQZXJTYW1wbGUpLGI9TWUoayxBLHYqaS5sZW5ndGgpLGwmJmIuZmlsbChsKTtlbHNlIGZvcihiPVtdLF89MDtfPGkubGVuZ3RoOysrXylJPXRoaXMuZ2V0QXJyYXlGb3JTYW1wbGUoaVtfXSx2KSxBcnJheS5pc0FycmF5KGwpJiZfPGwubGVuZ3RoP0kuZmlsbChsW19dKTpsJiYhQXJyYXkuaXNBcnJheShsKSYmSS5maWxsKGwpLGIucHVzaChJKTtpZihlLnQwPXMsZS50MCl7ZS5uZXh0PTI1O2JyZWFrfXJldHVybiBlLm5leHQ9MjQsQWUodGhpcy5maWxlRGlyZWN0b3J5KTtjYXNlIDI0OmUudDA9ZS5zZW50O2Nhc2UgMjU6cmV0dXJuIFA9ZS50MCxlLm5leHQ9MjgsdGhpcy5fcmVhZFJhc3RlcihkLGksYixhLFAsdSxmLGMsaCk7Y2FzZSAyODpyZXR1cm4gUz1lLnNlbnQsZS5hYnJ1cHQoInJldHVybiIsUyk7Y2FzZSAzMDpjYXNlImVuZCI6cmV0dXJuIGUuc3RvcCgpfX0pLGUsdGhpcyl9KSkpLGZ1bmN0aW9uKCl7cmV0dXJuIHIuYXBwbHkodGhpcyxhcmd1bWVudHMpfSl9LHtrZXk6InJlYWRSR0IiLHZhbHVlOih0PXUoeC5tYXJrKChmdW5jdGlvbiBlKCl7dmFyIHQscixuLGksYSxvLHMsdSxmLGMsbCxoLGQscCxtLHYseSxnLHcsYixrLEEsXyxJLFAsUyxULFU9YXJndW1lbnRzO3JldHVybiB4LndyYXAoKGZ1bmN0aW9uKGUpe2Zvcig7Oylzd2l0Y2goZS5wcmV2PWUubmV4dCl7Y2FzZSAwOmlmKHQ9VS5sZW5ndGg+MCYmdm9pZCAwIT09VVswXT9VWzBdOnt9LHI9dC53aW5kb3csbj10LmludGVybGVhdmUsaT12b2lkIDA9PT1ufHxuLGE9dC5wb29sLG89dm9pZCAwPT09YT9udWxsOmEscz10LndpZHRoLHU9dC5oZWlnaHQsZj10LnJlc2FtcGxlTWV0aG9kLGM9dC5lbmFibGVBbHBoYSxsPXZvaWQgMCE9PWMmJmMsaD10LnNpZ25hbCwhKChkPXJ8fFswLDAsdGhpcy5nZXRXaWR0aCgpLHRoaXMuZ2V0SGVpZ2h0KCldKVswXT5kWzJdfHxkWzFdPmRbM10pKXtlLm5leHQ9NDticmVha310aHJvdyBuZXcgRXJyb3IoIkludmFsaWQgc3Vic2V0cyIpO2Nhc2UgNDppZigocD10aGlzLmZpbGVEaXJlY3RvcnkuUGhvdG9tZXRyaWNJbnRlcnByZXRhdGlvbikhPT1vZS5SR0Ipe2UubmV4dD05O2JyZWFrfWlmKG09WzAsMSwyXSx0aGlzLmZpbGVEaXJlY3RvcnkuRXh0cmFTYW1wbGVzIT09c2UuVW5zcGVjaWZpZWQmJmwpZm9yKG09W10sdj0wO3Y8dGhpcy5maWxlRGlyZWN0b3J5LkJpdHNQZXJTYW1wbGUubGVuZ3RoO3YrPTEpbS5wdXNoKHYpO3JldHVybiBlLmFicnVwdCgicmV0dXJuIix0aGlzLnJlYWRSYXN0ZXJzKHt3aW5kb3c6cixpbnRlcmxlYXZlOmksc2FtcGxlczptLHBvb2w6byx3aWR0aDpzLGhlaWdodDp1LHJlc2FtcGxlTWV0aG9kOmYsc2lnbmFsOmh9KSk7Y2FzZSA5OmUudDA9cCxlLm5leHQ9ZS50MD09PW9lLldoaXRlSXNaZXJvfHxlLnQwPT09b2UuQmxhY2tJc1plcm98fGUudDA9PT1vZS5QYWxldHRlPzEyOmUudDA9PT1vZS5DTVlLPzE0OmUudDA9PT1vZS5ZQ2JDcnx8ZS50MD09PW9lLkNJRUxhYj8xNjoxODticmVhaztjYXNlIDEyOnJldHVybiB5PVswXSxlLmFicnVwdCgiYnJlYWsiLDE5KTtjYXNlIDE0OnJldHVybiB5PVswLDEsMiwzXSxlLmFicnVwdCgiYnJlYWsiLDE5KTtjYXNlIDE2OnJldHVybiB5PVswLDEsMl0sZS5hYnJ1cHQoImJyZWFrIiwxOSk7Y2FzZSAxODp0aHJvdyBuZXcgRXJyb3IoIkludmFsaWQgb3IgdW5zdXBwb3J0ZWQgcGhvdG9tZXRyaWMgaW50ZXJwcmV0YXRpb24uIik7Y2FzZSAxOTpyZXR1cm4gZz17d2luZG93OmQsaW50ZXJsZWF2ZTohMCxzYW1wbGVzOnkscG9vbDpvLHdpZHRoOnMsaGVpZ2h0OnUscmVzYW1wbGVNZXRob2Q6ZixzaWduYWw6aH0sdz10aGlzLmZpbGVEaXJlY3RvcnksZS5uZXh0PTIzLHRoaXMucmVhZFJhc3RlcnMoZyk7Y2FzZSAyMzpiPWUuc2VudCxrPU1hdGgucG93KDIsdGhpcy5maWxlRGlyZWN0b3J5LkJpdHNQZXJTYW1wbGVbMF0pLGUudDE9cCxlLm5leHQ9ZS50MT09PW9lLldoaXRlSXNaZXJvPzI4OmUudDE9PT1vZS5CbGFja0lzWmVybz8zMDplLnQxPT09b2UuUGFsZXR0ZT8zMjplLnQxPT09b2UuQ01ZSz8zNDplLnQxPT09b2UuWUNiQ3I/MzY6ZS50MT09PW9lLkNJRUxhYj8zODo0MDticmVhaztjYXNlIDI4OnJldHVybiBBPXBlKGIsayksZS5hYnJ1cHQoImJyZWFrIiw0MSk7Y2FzZSAzMDpyZXR1cm4gQT1tZShiLGspLGUuYWJydXB0KCJicmVhayIsNDEpO2Nhc2UgMzI6cmV0dXJuIEE9dmUoYix3LkNvbG9yTWFwKSxlLmFicnVwdCgiYnJlYWsiLDQxKTtjYXNlIDM0OnJldHVybiBBPXllKGIpLGUuYWJydXB0KCJicmVhayIsNDEpO2Nhc2UgMzY6cmV0dXJuIEE9Z2UoYiksZS5hYnJ1cHQoImJyZWFrIiw0MSk7Y2FzZSAzODpyZXR1cm4gQT13ZShiKSxlLmFicnVwdCgiYnJlYWsiLDQxKTtjYXNlIDQwOnRocm93IG5ldyBFcnJvcigiVW5zdXBwb3J0ZWQgcGhvdG9tZXRyaWMgaW50ZXJwcmV0YXRpb24uIik7Y2FzZSA0MTppZighaSl7Zm9yKF89bmV3IFVpbnQ4QXJyYXkoQS5sZW5ndGgvMyksST1uZXcgVWludDhBcnJheShBLmxlbmd0aC8zKSxQPW5ldyBVaW50OEFycmF5KEEubGVuZ3RoLzMpLFM9MCxUPTA7UzxBLmxlbmd0aDtTKz0zLCsrVClfW1RdPUFbU10sSVtUXT1BW1MrMV0sUFtUXT1BW1MrMl07QT1bXyxJLFBdO31yZXR1cm4gQS53aWR0aD1iLndpZHRoLEEuaGVpZ2h0PWIuaGVpZ2h0LGUuYWJydXB0KCJyZXR1cm4iLEEpO2Nhc2UgNDU6Y2FzZSJlbmQiOnJldHVybiBlLnN0b3AoKX19KSxlLHRoaXMpfSkpKSxmdW5jdGlvbigpe3JldHVybiB0LmFwcGx5KHRoaXMsYXJndW1lbnRzKX0pfSx7a2V5OiJnZXRUaWVQb2ludHMiLHZhbHVlOmZ1bmN0aW9uKCl7aWYoIXRoaXMuZmlsZURpcmVjdG9yeS5Nb2RlbFRpZXBvaW50KXJldHVybiBbXTtmb3IodmFyIGU9W10sdD0wO3Q8dGhpcy5maWxlRGlyZWN0b3J5Lk1vZGVsVGllcG9pbnQubGVuZ3RoO3QrPTYpZS5wdXNoKHtpOnRoaXMuZmlsZURpcmVjdG9yeS5Nb2RlbFRpZXBvaW50W3RdLGo6dGhpcy5maWxlRGlyZWN0b3J5Lk1vZGVsVGllcG9pbnRbdCsxXSxrOnRoaXMuZmlsZURpcmVjdG9yeS5Nb2RlbFRpZXBvaW50W3QrMl0seDp0aGlzLmZpbGVEaXJlY3RvcnkuTW9kZWxUaWVwb2ludFt0KzNdLHk6dGhpcy5maWxlRGlyZWN0b3J5Lk1vZGVsVGllcG9pbnRbdCs0XSx6OnRoaXMuZmlsZURpcmVjdG9yeS5Nb2RlbFRpZXBvaW50W3QrNV19KTtyZXR1cm4gZX19LHtrZXk6ImdldEdEQUxNZXRhZGF0YSIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06bnVsbCx0PXt9O2lmKCF0aGlzLmZpbGVEaXJlY3RvcnkuR0RBTF9NRVRBREFUQSlyZXR1cm4gbnVsbDt2YXIgcj10aGlzLmZpbGVEaXJlY3RvcnkuR0RBTF9NRVRBREFUQSxuPUoociwiSXRlbSIpO249bnVsbD09PWU/bi5maWx0ZXIoKGZ1bmN0aW9uKGUpe3JldHVybiB2b2lkIDA9PT1xKGUsInNhbXBsZSIpfSkpOm4uZmlsdGVyKChmdW5jdGlvbih0KXtyZXR1cm4gTnVtYmVyKHEodCwic2FtcGxlIikpPT09ZX0pKTtmb3IodmFyIGk9MDtpPG4ubGVuZ3RoOysraSl7dmFyIGE9bltpXTt0W3EoYSwibmFtZSIpXT1hLmlubmVyO31yZXR1cm4gdH19LHtrZXk6ImdldEdEQUxOb0RhdGEiLHZhbHVlOmZ1bmN0aW9uKCl7aWYoIXRoaXMuZmlsZURpcmVjdG9yeS5HREFMX05PREFUQSlyZXR1cm4gbnVsbDt2YXIgZT10aGlzLmZpbGVEaXJlY3RvcnkuR0RBTF9OT0RBVEE7cmV0dXJuIE51bWJlcihlLnN1YnN0cmluZygwLGUubGVuZ3RoLTEpKX19LHtrZXk6ImdldE9yaWdpbiIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmZpbGVEaXJlY3RvcnkuTW9kZWxUaWVwb2ludCx0PXRoaXMuZmlsZURpcmVjdG9yeS5Nb2RlbFRyYW5zZm9ybWF0aW9uO2lmKGUmJjY9PT1lLmxlbmd0aClyZXR1cm4gW2VbM10sZVs0XSxlWzVdXTtpZih0KXJldHVybiBbdFszXSx0WzddLHRbMTFdXTt0aHJvdyBuZXcgRXJyb3IoIlRoZSBpbWFnZSBkb2VzIG5vdCBoYXZlIGFuIGFmZmluZSB0cmFuc2Zvcm1hdGlvbi4iKX19LHtrZXk6ImdldFJlc29sdXRpb24iLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOm51bGwsdD10aGlzLmZpbGVEaXJlY3RvcnkuTW9kZWxQaXhlbFNjYWxlLHI9dGhpcy5maWxlRGlyZWN0b3J5Lk1vZGVsVHJhbnNmb3JtYXRpb247aWYodClyZXR1cm4gW3RbMF0sLXRbMV0sdFsyXV07aWYocilyZXR1cm4gW3JbMF0scls1XSxyWzEwXV07aWYoZSl7dmFyIG49ZS5nZXRSZXNvbHV0aW9uKCksaT1vKG4sMyksYT1pWzBdLHM9aVsxXSx1PWlbMl07cmV0dXJuIFthKmUuZ2V0V2lkdGgoKS90aGlzLmdldFdpZHRoKCkscyplLmdldEhlaWdodCgpL3RoaXMuZ2V0SGVpZ2h0KCksdSplLmdldFdpZHRoKCkvdGhpcy5nZXRXaWR0aCgpXX10aHJvdyBuZXcgRXJyb3IoIlRoZSBpbWFnZSBkb2VzIG5vdCBoYXZlIGFuIGFmZmluZSB0cmFuc2Zvcm1hdGlvbi4iKX19LHtrZXk6InBpeGVsSXNBcmVhIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiAxPT09dGhpcy5nZW9LZXlzLkdUUmFzdGVyVHlwZUdlb0tleX19LHtrZXk6ImdldEJvdW5kaW5nQm94Iix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMuZ2V0T3JpZ2luKCksdD10aGlzLmdldFJlc29sdXRpb24oKSxyPWVbMF0sbj1lWzFdLGk9cit0WzBdKnRoaXMuZ2V0V2lkdGgoKSxhPW4rdFsxXSp0aGlzLmdldEhlaWdodCgpO3JldHVybiBbTWF0aC5taW4ocixpKSxNYXRoLm1pbihuLGEpLE1hdGgubWF4KHIsaSksTWF0aC5tYXgobixhKV19fV0pLGV9KCksRmU9TGUsVmU9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQpe2IodGhpcyxlKSx0aGlzLl9kYXRhVmlldz1uZXcgRGF0YVZpZXcodCk7fXJldHVybiBjKGUsW3trZXk6ImJ1ZmZlciIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2RhdGFWaWV3LmJ1ZmZlcn19LHtrZXk6ImdldFVpbnQ2NCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcixuPXRoaXMuZ2V0VWludDMyKGUsdCksaT10aGlzLmdldFVpbnQzMihlKzQsdCk7aWYodCl7aWYocj1uK01hdGgucG93KDIsMzIpKmksIU51bWJlci5pc1NhZmVJbnRlZ2VyKHIpKXRocm93IG5ldyBFcnJvcigiIi5jb25jYXQociwiIGV4Y2VlZHMgTUFYX1NBRkVfSU5URUdFUi4gIikrIlByZWNpc2lvbiBtYXkgYmUgbG9zdC4gUGxlYXNlIHJlcG9ydCBpZiB5b3UgZ2V0IHRoaXMgbWVzc2FnZSB0byBodHRwczovL2dpdGh1Yi5jb20vZ2VvdGlmZmpzL2dlb3RpZmYuanMvaXNzdWVzIik7cmV0dXJuIHJ9aWYocj1NYXRoLnBvdygyLDMyKSpuK2ksIU51bWJlci5pc1NhZmVJbnRlZ2VyKHIpKXRocm93IG5ldyBFcnJvcigiIi5jb25jYXQociwiIGV4Y2VlZHMgTUFYX1NBRkVfSU5URUdFUi4gIikrIlByZWNpc2lvbiBtYXkgYmUgbG9zdC4gUGxlYXNlIHJlcG9ydCBpZiB5b3UgZ2V0IHRoaXMgbWVzc2FnZSB0byBodHRwczovL2dpdGh1Yi5jb20vZ2VvdGlmZmpzL2dlb3RpZmYuanMvaXNzdWVzIik7cmV0dXJuIHJ9fSx7a2V5OiJnZXRJbnQ2NCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHI9MCxuPSgxMjgmdGhpcy5fZGF0YVZpZXcuZ2V0VWludDgoZSsodD83OjApKSk+MCxpPSEwLGE9MDthPDg7YSsrKXt2YXIgbz10aGlzLl9kYXRhVmlldy5nZXRVaW50OChlKyh0P2E6Ny1hKSk7biYmKGk/MCE9PW8mJihvPTI1NSZ+KG8tMSksaT0hMSk6bz0yNTUmfm8pLHIrPW8qTWF0aC5wb3coMjU2LGEpO31yZXR1cm4gbiYmKHI9LXIpLHJ9fSx7a2V5OiJnZXRVaW50OCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5fZGF0YVZpZXcuZ2V0VWludDgoZSx0KX19LHtrZXk6ImdldEludDgiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuX2RhdGFWaWV3LmdldEludDgoZSx0KX19LHtrZXk6ImdldFVpbnQxNiIsdmFsdWU6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5fZGF0YVZpZXcuZ2V0VWludDE2KGUsdCl9fSx7a2V5OiJnZXRJbnQxNiIsdmFsdWU6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5fZGF0YVZpZXcuZ2V0SW50MTYoZSx0KX19LHtrZXk6ImdldFVpbnQzMiIsdmFsdWU6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5fZGF0YVZpZXcuZ2V0VWludDMyKGUsdCl9fSx7a2V5OiJnZXRJbnQzMiIsdmFsdWU6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5fZGF0YVZpZXcuZ2V0SW50MzIoZSx0KX19LHtrZXk6ImdldEZsb2F0MTYiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIFkodGhpcy5fZGF0YVZpZXcsZSx0KX19LHtrZXk6ImdldEZsb2F0MzIiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuX2RhdGFWaWV3LmdldEZsb2F0MzIoZSx0KX19LHtrZXk6ImdldEZsb2F0NjQiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuX2RhdGFWaWV3LmdldEZsb2F0NjQoZSx0KX19XSksZX0oKSxHZT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUodCxyLG4saSl7Yih0aGlzLGUpLHRoaXMuX2RhdGFWaWV3PW5ldyBEYXRhVmlldyh0KSx0aGlzLl9zbGljZU9mZnNldD1yLHRoaXMuX2xpdHRsZUVuZGlhbj1uLHRoaXMuX2JpZ1RpZmY9aTt9cmV0dXJuIGMoZSxbe2tleToic2xpY2VPZmZzZXQiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zbGljZU9mZnNldH19LHtrZXk6InNsaWNlVG9wIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc2xpY2VPZmZzZXQrdGhpcy5idWZmZXIuYnl0ZUxlbmd0aH19LHtrZXk6ImxpdHRsZUVuZGlhbiIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2xpdHRsZUVuZGlhbn19LHtrZXk6ImJpZ1RpZmYiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9iaWdUaWZmfX0se2tleToiYnVmZmVyIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZGF0YVZpZXcuYnVmZmVyfX0se2tleToiY292ZXJzIix2YWx1ZTpmdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLnNsaWNlT2Zmc2V0PD1lJiZ0aGlzLnNsaWNlVG9wPj1lK3R9fSx7a2V5OiJyZWFkVWludDgiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9kYXRhVmlldy5nZXRVaW50OChlLXRoaXMuX3NsaWNlT2Zmc2V0LHRoaXMuX2xpdHRsZUVuZGlhbil9fSx7a2V5OiJyZWFkSW50OCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2RhdGFWaWV3LmdldEludDgoZS10aGlzLl9zbGljZU9mZnNldCx0aGlzLl9saXR0bGVFbmRpYW4pfX0se2tleToicmVhZFVpbnQxNiIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2RhdGFWaWV3LmdldFVpbnQxNihlLXRoaXMuX3NsaWNlT2Zmc2V0LHRoaXMuX2xpdHRsZUVuZGlhbil9fSx7a2V5OiJyZWFkSW50MTYiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9kYXRhVmlldy5nZXRJbnQxNihlLXRoaXMuX3NsaWNlT2Zmc2V0LHRoaXMuX2xpdHRsZUVuZGlhbil9fSx7a2V5OiJyZWFkVWludDMyIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fZGF0YVZpZXcuZ2V0VWludDMyKGUtdGhpcy5fc2xpY2VPZmZzZXQsdGhpcy5fbGl0dGxlRW5kaWFuKX19LHtrZXk6InJlYWRJbnQzMiIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2RhdGFWaWV3LmdldEludDMyKGUtdGhpcy5fc2xpY2VPZmZzZXQsdGhpcy5fbGl0dGxlRW5kaWFuKX19LHtrZXk6InJlYWRGbG9hdDMyIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fZGF0YVZpZXcuZ2V0RmxvYXQzMihlLXRoaXMuX3NsaWNlT2Zmc2V0LHRoaXMuX2xpdHRsZUVuZGlhbil9fSx7a2V5OiJyZWFkRmxvYXQ2NCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2RhdGFWaWV3LmdldEZsb2F0NjQoZS10aGlzLl9zbGljZU9mZnNldCx0aGlzLl9saXR0bGVFbmRpYW4pfX0se2tleToicmVhZFVpbnQ2NCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQscj10aGlzLnJlYWRVaW50MzIoZSksbj10aGlzLnJlYWRVaW50MzIoZSs0KTtpZih0aGlzLl9saXR0bGVFbmRpYW4pe2lmKHQ9citNYXRoLnBvdygyLDMyKSpuLCFOdW1iZXIuaXNTYWZlSW50ZWdlcih0KSl0aHJvdyBuZXcgRXJyb3IoIiIuY29uY2F0KHQsIiBleGNlZWRzIE1BWF9TQUZFX0lOVEVHRVIuICIpKyJQcmVjaXNpb24gbWF5IGJlIGxvc3QuIFBsZWFzZSByZXBvcnQgaWYgeW91IGdldCB0aGlzIG1lc3NhZ2UgdG8gaHR0cHM6Ly9naXRodWIuY29tL2dlb3RpZmZqcy9nZW90aWZmLmpzL2lzc3VlcyIpO3JldHVybiB0fWlmKHQ9TWF0aC5wb3coMiwzMikqcituLCFOdW1iZXIuaXNTYWZlSW50ZWdlcih0KSl0aHJvdyBuZXcgRXJyb3IoIiIuY29uY2F0KHQsIiBleGNlZWRzIE1BWF9TQUZFX0lOVEVHRVIuICIpKyJQcmVjaXNpb24gbWF5IGJlIGxvc3QuIFBsZWFzZSByZXBvcnQgaWYgeW91IGdldCB0aGlzIG1lc3NhZ2UgdG8gaHR0cHM6Ly9naXRodWIuY29tL2dlb3RpZmZqcy9nZW90aWZmLmpzL2lzc3VlcyIpO3JldHVybiB0fX0se2tleToicmVhZEludDY0Iix2YWx1ZTpmdW5jdGlvbihlKXtmb3IodmFyIHQ9MCxyPSgxMjgmdGhpcy5fZGF0YVZpZXcuZ2V0VWludDgoZSsodGhpcy5fbGl0dGxlRW5kaWFuPzc6MCkpKT4wLG49ITAsaT0wO2k8ODtpKyspe3ZhciBhPXRoaXMuX2RhdGFWaWV3LmdldFVpbnQ4KGUrKHRoaXMuX2xpdHRsZUVuZGlhbj9pOjctaSkpO3ImJihuPzAhPT1hJiYoYT0yNTUmfihhLTEpLG49ITEpOmE9MjU1Jn5hKSx0Kz1hKk1hdGgucG93KDI1NixpKTt9cmV0dXJuIHImJih0PS10KSx0fX0se2tleToicmVhZE9mZnNldCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2JpZ1RpZmY/dGhpcy5yZWFkVWludDY0KGUpOnRoaXMucmVhZFVpbnQzMihlKX19XSksZX0oKSxqZT0idW5kZWZpbmVkIiE9dHlwZW9mIG5hdmlnYXRvciYmbmF2aWdhdG9yLmhhcmR3YXJlQ29uY3VycmVuY3l8fDIsemU9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7dmFyIHQ9dGhpcyxyPWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTpqZSxuPWFyZ3VtZW50cy5sZW5ndGg+MT9hcmd1bWVudHNbMV06dm9pZCAwO2IodGhpcyxlKSx0aGlzLndvcmtlcnM9bnVsbCx0aGlzLl9hd2FpdGluZ0RlY29kZXI9bnVsbCx0aGlzLnNpemU9cix0aGlzLm1lc3NhZ2VJZD0wLHImJih0aGlzLl9hd2FpdGluZ0RlY29kZXI9bj9Qcm9taXNlLnJlc29sdmUobik6bmV3IFByb21pc2UoKGZ1bmN0aW9uKGUpe1Byb21pc2UucmVzb2x2ZSgpLnRoZW4oKGZ1bmN0aW9uKCl7cmV0dXJuIFVpfSkpLnRoZW4oKGZ1bmN0aW9uKHQpe2UodC5jcmVhdGUpO30pKTt9KSksdGhpcy5fYXdhaXRpbmdEZWNvZGVyLnRoZW4oKGZ1bmN0aW9uKGUpe3QuX2F3YWl0aW5nRGVjb2Rlcj1udWxsLHQud29ya2Vycz1bXTtmb3IodmFyIG49MDtuPHI7bisrKXQud29ya2Vycy5wdXNoKHt3b3JrZXI6ZSgpLGlkbGU6ITB9KTt9KSkpO312YXIgdDtyZXR1cm4gYyhlLFt7a2V5OiJkZWNvZGUiLHZhbHVlOih0PXUoeC5tYXJrKChmdW5jdGlvbiBlKHQscil7dmFyIG49dGhpcztyZXR1cm4geC53cmFwKChmdW5jdGlvbihlKXtmb3IoOzspc3dpdGNoKGUucHJldj1lLm5leHQpe2Nhc2UgMDppZighdGhpcy5fYXdhaXRpbmdEZWNvZGVyKXtlLm5leHQ9MzticmVha31yZXR1cm4gZS5uZXh0PTMsdGhpcy5fYXdhaXRpbmdEZWNvZGVyO2Nhc2UgMzpyZXR1cm4gZS5hYnJ1cHQoInJldHVybiIsMD09PXRoaXMuc2l6ZT9BZSh0KS50aGVuKChmdW5jdGlvbihlKXtyZXR1cm4gZS5kZWNvZGUodCxyKX0pKTpuZXcgUHJvbWlzZSgoZnVuY3Rpb24oZSl7dmFyIGk9bi53b3JrZXJzLmZpbmQoKGZ1bmN0aW9uKGUpe3JldHVybiBlLmlkbGV9KSl8fG4ud29ya2Vyc1tNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqbi5zaXplKV07aS5pZGxlPSExO3ZhciBhPW4ubWVzc2FnZUlkKys7aS53b3JrZXIuYWRkRXZlbnRMaXN0ZW5lcigibWVzc2FnZSIsKGZ1bmN0aW9uIHQocil7ci5kYXRhLmlkPT09YSYmKGkuaWRsZT0hMCxlKHIuZGF0YS5kZWNvZGVkKSxpLndvcmtlci5yZW1vdmVFdmVudExpc3RlbmVyKCJtZXNzYWdlIix0KSk7fSkpLGkud29ya2VyLnBvc3RNZXNzYWdlKHtmaWxlRGlyZWN0b3J5OnQsYnVmZmVyOnIsaWQ6YX0sW3JdKTt9KSkpO2Nhc2UgNDpjYXNlImVuZCI6cmV0dXJuIGUuc3RvcCgpfX0pLGUsdGhpcyl9KSkpLGZ1bmN0aW9uKGUscil7cmV0dXJuIHQuYXBwbHkodGhpcyxhcmd1bWVudHMpfSl9LHtrZXk6ImRlc3Ryb3kiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy53b3JrZXJzJiYodGhpcy53b3JrZXJzLmZvckVhY2goKGZ1bmN0aW9uKGUpe2Uud29ya2VyLnRlcm1pbmF0ZSgpO30pKSx0aGlzLndvcmtlcnM9bnVsbCk7fX1dKSxlfSgpLE5lPXplO2Z1bmN0aW9uIEtlKGUsdCl7aWYobnVsbD09ZSlyZXR1cm4ge307dmFyIHIsbixpPWZ1bmN0aW9uKGUsdCl7aWYobnVsbD09ZSlyZXR1cm4ge307dmFyIHIsbixpPXt9LGE9T2JqZWN0LmtleXMoZSk7Zm9yKG49MDtuPGEubGVuZ3RoO24rKylyPWFbbl0sdC5pbmRleE9mKHIpPj0wfHwoaVtyXT1lW3JdKTtyZXR1cm4gaX0oZSx0KTtpZihPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKXt2YXIgYT1PYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKGUpO2ZvcihuPTA7bjxhLmxlbmd0aDtuKyspcj1hW25dLHQuaW5kZXhPZihyKT49MHx8T2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZS5jYWxsKGUscikmJihpW3JdPWVbcl0pO31yZXR1cm4gaX1mdW5jdGlvbiBaZShlLHQpe3ZhciByPSJ1bmRlZmluZWQiIT10eXBlb2YgU3ltYm9sJiZlW1N5bWJvbC5pdGVyYXRvcl18fGVbIkBAaXRlcmF0b3IiXTtpZighcil7aWYoQXJyYXkuaXNBcnJheShlKXx8KHI9ZnVuY3Rpb24oZSx0KXtpZighZSlyZXR1cm47aWYoInN0cmluZyI9PXR5cGVvZiBlKXJldHVybiBIZShlLHQpO3ZhciByPU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChlKS5zbGljZSg4LC0xKTsiT2JqZWN0Ij09PXImJmUuY29uc3RydWN0b3ImJihyPWUuY29uc3RydWN0b3IubmFtZSk7aWYoIk1hcCI9PT1yfHwiU2V0Ij09PXIpcmV0dXJuIEFycmF5LmZyb20oZSk7aWYoIkFyZ3VtZW50cyI9PT1yfHwvXig/OlVpfEkpbnQoPzo4fDE2fDMyKSg/OkNsYW1wZWQpP0FycmF5JC8udGVzdChyKSlyZXR1cm4gSGUoZSx0KX0oZSkpfHx0JiZlJiYibnVtYmVyIj09dHlwZW9mIGUubGVuZ3RoKXtyJiYoZT1yKTt2YXIgbj0wLGk9ZnVuY3Rpb24oKXt9O3JldHVybiB7czppLG46ZnVuY3Rpb24oKXtyZXR1cm4gbj49ZS5sZW5ndGg/e2RvbmU6ITB9Ontkb25lOiExLHZhbHVlOmVbbisrXX19LGU6ZnVuY3Rpb24oZSl7dGhyb3cgZX0sZjppfX10aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIGF0dGVtcHQgdG8gaXRlcmF0ZSBub24taXRlcmFibGUgaW5zdGFuY2UuXG5JbiBvcmRlciB0byBiZSBpdGVyYWJsZSwgbm9uLWFycmF5IG9iamVjdHMgbXVzdCBoYXZlIGEgW1N5bWJvbC5pdGVyYXRvcl0oKSBtZXRob2QuIil9dmFyIGEsbz0hMCxzPSExO3JldHVybiB7czpmdW5jdGlvbigpe3I9ci5jYWxsKGUpO30sbjpmdW5jdGlvbigpe3ZhciBlPXIubmV4dCgpO3JldHVybiBvPWUuZG9uZSxlfSxlOmZ1bmN0aW9uKGUpe3M9ITAsYT1lO30sZjpmdW5jdGlvbigpe3RyeXtvfHxudWxsPT1yLnJldHVybnx8ci5yZXR1cm4oKTt9ZmluYWxseXtpZihzKXRocm93IGF9fX19ZnVuY3Rpb24gSGUoZSx0KXsobnVsbD09dHx8dD5lLmxlbmd0aCkmJih0PWUubGVuZ3RoKTtmb3IodmFyIHI9MCxuPW5ldyBBcnJheSh0KTtyPHQ7cisrKW5bcl09ZVtyXTtyZXR1cm4gbn12YXIgWWU9IlxyXG5cclxuIjtmdW5jdGlvbiBxZShlKXtpZih2b2lkIDAhPT1PYmplY3QuZnJvbUVudHJpZXMpcmV0dXJuIE9iamVjdC5mcm9tRW50cmllcyhlKTt2YXIgdCxyPXt9LG49WmUoZSk7dHJ5e2ZvcihuLnMoKTshKHQ9bi5uKCkpLmRvbmU7KXt2YXIgaT1vKHQudmFsdWUsMiksYT1pWzBdLHM9aVsxXTtyW2EudG9Mb3dlckNhc2UoKV09czt9fWNhdGNoKGUpe24uZShlKTt9ZmluYWxseXtuLmYoKTt9cmV0dXJuIHJ9ZnVuY3Rpb24gWGUoZSl7cmV0dXJuIHFlKGUuc3BsaXQoIlxyXG4iKS5tYXAoKGZ1bmN0aW9uKGUpe3ZhciB0PWUuc3BsaXQoIjoiKS5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybiBlLnRyaW0oKX0pKTtyZXR1cm4gdFswXT10WzBdLnRvTG93ZXJDYXNlKCksdH0pKSl9ZnVuY3Rpb24gV2UoZSl7dmFyIHQsbj1lLnNwbGl0KCI7IikubWFwKChmdW5jdGlvbihlKXtyZXR1cm4gZS50cmltKCl9KSksbz1yKHQ9bil8fGoodCl8fGkodCl8fGEoKTtyZXR1cm4ge3R5cGU6b1swXSxwYXJhbXM6cWUoby5zbGljZSgxKS5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybiBlLnNwbGl0KCI9Iil9KSkpfX1mdW5jdGlvbiBKZShlKXt2YXIgdCxyLG47aWYoZSl7dmFyIGk9byhlLm1hdGNoKC9ieXRlcyAoXGQrKS0oXGQrKVwvKFxkKykvKSw0KTt0PWlbMV0scj1pWzJdLG49aVszXSx0PXBhcnNlSW50KHQsMTApLHI9cGFyc2VJbnQociwxMCksbj1wYXJzZUludChuLDEwKTt9cmV0dXJuIHtzdGFydDp0LGVuZDpyLHRvdGFsOm59fWZ1bmN0aW9uIFFlKGUsdCl7Zm9yKHZhciByPW51bGwsbj1uZXcgVGV4dERlY29kZXIoImFzY2lpIiksaT1bXSxhPSItLSIuY29uY2F0KHQpLG89IiIuY29uY2F0KGEsIi0tIikscz0wO3M8MTA7KytzKXtuLmRlY29kZShuZXcgVWludDhBcnJheShlLHMsYS5sZW5ndGgpKT09PWEmJihyPXMpO31pZihudWxsPT09cil0aHJvdyBuZXcgRXJyb3IoIkNvdWxkIG5vdCBmaW5kIGluaXRpYWwgYm91bmRhcnkiKTtmb3IoO3I8ZS5ieXRlTGVuZ3RoOyl7dmFyIHU9bi5kZWNvZGUobmV3IFVpbnQ4QXJyYXkoZSxyLE1hdGgubWluKGEubGVuZ3RoKzEwMjQsZS5ieXRlTGVuZ3RoLXIpKSk7aWYoMD09PXUubGVuZ3RofHx1LnN0YXJ0c1dpdGgobykpYnJlYWs7aWYoIXUuc3RhcnRzV2l0aChhKSl0aHJvdyBuZXcgRXJyb3IoIlBhcnQgZG9lcyBub3Qgc3RhcnQgd2l0aCBib3VuZGFyeSIpO3ZhciBmPXUuc3Vic3RyKGEubGVuZ3RoKzIpO2lmKDA9PT1mLmxlbmd0aClicmVhazt2YXIgYz1mLmluZGV4T2YoWWUpLGw9WGUoZi5zdWJzdHIoMCxjKSksaD1KZShsWyJjb250ZW50LXJhbmdlIl0pLGQ9aC5zdGFydCxwPWguZW5kLG09aC50b3RhbCx2PXIrYS5sZW5ndGgrYytZZS5sZW5ndGgseT1wYXJzZUludChwLDEwKSsxLXBhcnNlSW50KGQsMTApO2kucHVzaCh7aGVhZGVyczpsLGRhdGE6ZS5zbGljZSh2LHYreSksb2Zmc2V0OmQsbGVuZ3RoOnksZmlsZVNpemU6bX0pLHI9dit5KzQ7fXJldHVybiBpfXZhciAkZT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXtiKHRoaXMsZSk7fXZhciB0LHIsbjtyZXR1cm4gYyhlLFt7a2V5OiJmZXRjaCIsdmFsdWU6KG49dSh4Lm1hcmsoKGZ1bmN0aW9uIGUodCl7dmFyIHIsbj10aGlzLGk9YXJndW1lbnRzO3JldHVybiB4LndyYXAoKGZ1bmN0aW9uKGUpe2Zvcig7Oylzd2l0Y2goZS5wcmV2PWUubmV4dCl7Y2FzZSAwOnJldHVybiByPWkubGVuZ3RoPjEmJnZvaWQgMCE9PWlbMV0/aVsxXTp2b2lkIDAsZS5hYnJ1cHQoInJldHVybiIsUHJvbWlzZS5hbGwodC5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybiBuLmZldGNoU2xpY2UoZSxyKX0pKSkpO2Nhc2UgMjpjYXNlImVuZCI6cmV0dXJuIGUuc3RvcCgpfX0pLGUpfSkpKSxmdW5jdGlvbihlKXtyZXR1cm4gbi5hcHBseSh0aGlzLGFyZ3VtZW50cyl9KX0se2tleToiZmV0Y2hTbGljZSIsdmFsdWU6KHI9dSh4Lm1hcmsoKGZ1bmN0aW9uIGUodCl7cmV0dXJuIHgud3JhcCgoZnVuY3Rpb24oZSl7Zm9yKDs7KXN3aXRjaChlLnByZXY9ZS5uZXh0KXtjYXNlIDA6dGhyb3cgbmV3IEVycm9yKCJmZXRjaGluZyBvZiBzbGljZSAiLmNvbmNhdCh0LCIgbm90IHBvc3NpYmxlLCBub3QgaW1wbGVtZW50ZWQiKSk7Y2FzZSAxOmNhc2UiZW5kIjpyZXR1cm4gZS5zdG9wKCl9fSksZSl9KSkpLGZ1bmN0aW9uKGUpe3JldHVybiByLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0pfSx7a2V5OiJmaWxlU2l6ZSIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIG51bGx9fSx7a2V5OiJjbG9zZSIsdmFsdWU6KHQ9dSh4Lm1hcmsoKGZ1bmN0aW9uIGUoKXtyZXR1cm4geC53cmFwKChmdW5jdGlvbihlKXtmb3IoOzspc3dpdGNoKGUucHJldj1lLm5leHQpe2Nhc2UgMDpjYXNlImVuZCI6cmV0dXJuIGUuc3RvcCgpfX0pLGUpfSkpKSxmdW5jdGlvbigpe3JldHVybiB0LmFwcGx5KHRoaXMsYXJndW1lbnRzKX0pfV0pLGV9KCk7ZnVuY3Rpb24gZXQoZSx0KXt2YXIgcj0idW5kZWZpbmVkIiE9dHlwZW9mIFN5bWJvbCYmZVtTeW1ib2wuaXRlcmF0b3JdfHxlWyJAQGl0ZXJhdG9yIl07aWYoIXIpe2lmKEFycmF5LmlzQXJyYXkoZSl8fChyPWZ1bmN0aW9uKGUsdCl7aWYoIWUpcmV0dXJuO2lmKCJzdHJpbmciPT10eXBlb2YgZSlyZXR1cm4gdHQoZSx0KTt2YXIgcj1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZSkuc2xpY2UoOCwtMSk7Ik9iamVjdCI9PT1yJiZlLmNvbnN0cnVjdG9yJiYocj1lLmNvbnN0cnVjdG9yLm5hbWUpO2lmKCJNYXAiPT09cnx8IlNldCI9PT1yKXJldHVybiBBcnJheS5mcm9tKGUpO2lmKCJBcmd1bWVudHMiPT09cnx8L14oPzpVaXxJKW50KD86OHwxNnwzMikoPzpDbGFtcGVkKT9BcnJheSQvLnRlc3QocikpcmV0dXJuIHR0KGUsdCl9KGUpKXx8dCYmZSYmIm51bWJlciI9PXR5cGVvZiBlLmxlbmd0aCl7ciYmKGU9cik7dmFyIG49MCxpPWZ1bmN0aW9uKCl7fTtyZXR1cm4ge3M6aSxuOmZ1bmN0aW9uKCl7cmV0dXJuIG4+PWUubGVuZ3RoP3tkb25lOiEwfTp7ZG9uZTohMSx2YWx1ZTplW24rK119fSxlOmZ1bmN0aW9uKGUpe3Rocm93IGV9LGY6aX19dGhyb3cgbmV3IFR5cGVFcnJvcigiSW52YWxpZCBhdHRlbXB0IHRvIGl0ZXJhdGUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlLlxuSW4gb3JkZXIgdG8gYmUgaXRlcmFibGUsIG5vbi1hcnJheSBvYmplY3RzIG11c3QgaGF2ZSBhIFtTeW1ib2wuaXRlcmF0b3JdKCkgbWV0aG9kLiIpfXZhciBhLG89ITAscz0hMTtyZXR1cm4ge3M6ZnVuY3Rpb24oKXtyPXIuY2FsbChlKTt9LG46ZnVuY3Rpb24oKXt2YXIgZT1yLm5leHQoKTtyZXR1cm4gbz1lLmRvbmUsZX0sZTpmdW5jdGlvbihlKXtzPSEwLGE9ZTt9LGY6ZnVuY3Rpb24oKXt0cnl7b3x8bnVsbD09ci5yZXR1cm58fHIucmV0dXJuKCk7fWZpbmFsbHl7aWYocyl0aHJvdyBhfX19fWZ1bmN0aW9uIHR0KGUsdCl7KG51bGw9PXR8fHQ+ZS5sZW5ndGgpJiYodD1lLmxlbmd0aCk7Zm9yKHZhciByPTAsbj1uZXcgQXJyYXkodCk7cjx0O3IrKyluW3JdPWVbcl07cmV0dXJuIG59ZnVuY3Rpb24gcnQoZSl7dmFyIHQ9ZnVuY3Rpb24oKXtpZigidW5kZWZpbmVkIj09dHlwZW9mIFJlZmxlY3R8fCFSZWZsZWN0LmNvbnN0cnVjdClyZXR1cm4gITE7aWYoUmVmbGVjdC5jb25zdHJ1Y3Quc2hhbSlyZXR1cm4gITE7aWYoImZ1bmN0aW9uIj09dHlwZW9mIFByb3h5KXJldHVybiAhMDt0cnl7cmV0dXJuIEJvb2xlYW4ucHJvdG90eXBlLnZhbHVlT2YuY2FsbChSZWZsZWN0LmNvbnN0cnVjdChCb29sZWFuLFtdLChmdW5jdGlvbigpe30pKSksITB9Y2F0Y2goZSl7cmV0dXJuICExfX0oKTtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgcixuPXYoZSk7aWYodCl7dmFyIGk9dih0aGlzKS5jb25zdHJ1Y3RvcjtyPVJlZmxlY3QuY29uc3RydWN0KG4sYXJndW1lbnRzLGkpO31lbHNlIHI9bi5hcHBseSh0aGlzLGFyZ3VtZW50cyk7cmV0dXJuIG0odGhpcyxyKX19dmFyIG50PWZ1bmN0aW9uKGUsdCxyKXtoKGksZSk7dmFyIG49cnQoaSk7ZnVuY3Rpb24gaSgpe3ZhciBlLHQ9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOnt9O2lmKGIodGhpcyxpKSxlPW4uY2FsbCh0aGlzKSwhKHQubWF4U2l6ZSYmdC5tYXhTaXplPjApKXRocm93IG5ldyBUeXBlRXJyb3IoImBtYXhTaXplYCBtdXN0IGJlIGEgbnVtYmVyIGdyZWF0ZXIgdGhhbiAwIik7aWYoIm51bWJlciI9PXR5cGVvZiB0Lm1heEFnZSYmMD09PXQubWF4QWdlKXRocm93IG5ldyBUeXBlRXJyb3IoImBtYXhBZ2VgIG11c3QgYmUgYSBudW1iZXIgZ3JlYXRlciB0aGFuIDAiKTtyZXR1cm4gZS5tYXhTaXplPXQubWF4U2l6ZSxlLm1heEFnZT10Lm1heEFnZXx8TnVtYmVyLlBPU0lUSVZFX0lORklOSVRZLGUub25FdmljdGlvbj10Lm9uRXZpY3Rpb24sZS5jYWNoZT1uZXcgTWFwLGUub2xkQ2FjaGU9bmV3IE1hcCxlLl9zaXplPTAsZX1yZXR1cm4gYyhpLFt7a2V5OiJfZW1pdEV2aWN0aW9ucyIsdmFsdWU6ZnVuY3Rpb24oZSl7aWYoImZ1bmN0aW9uIj09dHlwZW9mIHRoaXMub25FdmljdGlvbil7dmFyIHQscj1ldChlKTt0cnl7Zm9yKHIucygpOyEodD1yLm4oKSkuZG9uZTspe3ZhciBuPW8odC52YWx1ZSwyKSxpPW5bMF0sYT1uWzFdO3RoaXMub25FdmljdGlvbihpLGEudmFsdWUpO319Y2F0Y2goZSl7ci5lKGUpO31maW5hbGx5e3IuZigpO319fX0se2tleToiX2RlbGV0ZUlmRXhwaXJlZCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gIm51bWJlciI9PXR5cGVvZiB0LmV4cGlyeSYmdC5leHBpcnk8PURhdGUubm93KCkmJigiZnVuY3Rpb24iPT10eXBlb2YgdGhpcy5vbkV2aWN0aW9uJiZ0aGlzLm9uRXZpY3Rpb24oZSx0LnZhbHVlKSx0aGlzLmRlbGV0ZShlKSl9fSx7a2V5OiJfZ2V0T3JEZWxldGVJZkV4cGlyZWQiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7aWYoITE9PT10aGlzLl9kZWxldGVJZkV4cGlyZWQoZSx0KSlyZXR1cm4gdC52YWx1ZX19LHtrZXk6Il9nZXRJdGVtVmFsdWUiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQuZXhwaXJ5P3RoaXMuX2dldE9yRGVsZXRlSWZFeHBpcmVkKGUsdCk6dC52YWx1ZX19LHtrZXk6Il9wZWVrIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXQuZ2V0KGUpO3JldHVybiB0aGlzLl9nZXRJdGVtVmFsdWUoZSxyKX19LHtrZXk6Il9zZXQiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dGhpcy5jYWNoZS5zZXQoZSx0KSx0aGlzLl9zaXplKyssdGhpcy5fc2l6ZT49dGhpcy5tYXhTaXplJiYodGhpcy5fc2l6ZT0wLHRoaXMuX2VtaXRFdmljdGlvbnModGhpcy5vbGRDYWNoZSksdGhpcy5vbGRDYWNoZT10aGlzLmNhY2hlLHRoaXMuY2FjaGU9bmV3IE1hcCk7fX0se2tleToiX21vdmVUb1JlY2VudCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt0aGlzLm9sZENhY2hlLmRlbGV0ZShlKSx0aGlzLl9zZXQoZSx0KTt9fSx7a2V5OiJfZW50cmllc0FzY2VuZGluZyIsdmFsdWU6eC5tYXJrKChmdW5jdGlvbiBlKCl7dmFyIHQscixuLGksYSxzLHUsZixjLGwsaCxkO3JldHVybiB4LndyYXAoKGZ1bmN0aW9uKGUpe2Zvcig7Oylzd2l0Y2goZS5wcmV2PWUubmV4dCl7Y2FzZSAwOnQ9ZXQodGhpcy5vbGRDYWNoZSksZS5wcmV2PTEsdC5zKCk7Y2FzZSAzOmlmKChyPXQubigpKS5kb25lKXtlLm5leHQ9MTM7YnJlYWt9aWYobj1yLnZhbHVlLGk9byhuLDIpLGE9aVswXSxzPWlbMV0sdGhpcy5jYWNoZS5oYXMoYSkpe2UubmV4dD0xMTticmVha31pZighMSE9PXRoaXMuX2RlbGV0ZUlmRXhwaXJlZChhLHMpKXtlLm5leHQ9MTE7YnJlYWt9cmV0dXJuIGUubmV4dD0xMSxuO2Nhc2UgMTE6ZS5uZXh0PTM7YnJlYWs7Y2FzZSAxMzplLm5leHQ9MTg7YnJlYWs7Y2FzZSAxNTplLnByZXY9MTUsZS50MD1lLmNhdGNoKDEpLHQuZShlLnQwKTtjYXNlIDE4OnJldHVybiBlLnByZXY9MTgsdC5mKCksZS5maW5pc2goMTgpO2Nhc2UgMjE6dT1ldCh0aGlzLmNhY2hlKSxlLnByZXY9MjIsdS5zKCk7Y2FzZSAyNDppZigoZj11Lm4oKSkuZG9uZSl7ZS5uZXh0PTMzO2JyZWFrfWlmKGM9Zi52YWx1ZSxsPW8oYywyKSxoPWxbMF0sZD1sWzFdLCExIT09dGhpcy5fZGVsZXRlSWZFeHBpcmVkKGgsZCkpe2UubmV4dD0zMTticmVha31yZXR1cm4gZS5uZXh0PTMxLGM7Y2FzZSAzMTplLm5leHQ9MjQ7YnJlYWs7Y2FzZSAzMzplLm5leHQ9Mzg7YnJlYWs7Y2FzZSAzNTplLnByZXY9MzUsZS50MT1lLmNhdGNoKDIyKSx1LmUoZS50MSk7Y2FzZSAzODpyZXR1cm4gZS5wcmV2PTM4LHUuZigpLGUuZmluaXNoKDM4KTtjYXNlIDQxOmNhc2UiZW5kIjpyZXR1cm4gZS5zdG9wKCl9fSksZSx0aGlzLFtbMSwxNSwxOCwyMV0sWzIyLDM1LDM4LDQxXV0pfSkpfSx7a2V5OiJnZXQiLHZhbHVlOmZ1bmN0aW9uKGUpe2lmKHRoaXMuY2FjaGUuaGFzKGUpKXt2YXIgdD10aGlzLmNhY2hlLmdldChlKTtyZXR1cm4gdGhpcy5fZ2V0SXRlbVZhbHVlKGUsdCl9aWYodGhpcy5vbGRDYWNoZS5oYXMoZSkpe3ZhciByPXRoaXMub2xkQ2FjaGUuZ2V0KGUpO2lmKCExPT09dGhpcy5fZGVsZXRlSWZFeHBpcmVkKGUscikpcmV0dXJuIHRoaXMuX21vdmVUb1JlY2VudChlLHIpLHIudmFsdWV9fX0se2tleToic2V0Iix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPWFyZ3VtZW50cy5sZW5ndGg+MiYmdm9pZCAwIT09YXJndW1lbnRzWzJdP2FyZ3VtZW50c1syXTp7fSxuPXIubWF4QWdlLGk9dm9pZCAwPT09bj90aGlzLm1heEFnZTpuLGE9Im51bWJlciI9PXR5cGVvZiBpJiZpIT09TnVtYmVyLlBPU0lUSVZFX0lORklOSVRZP0RhdGUubm93KCkraTp2b2lkIDA7dGhpcy5jYWNoZS5oYXMoZSk/dGhpcy5jYWNoZS5zZXQoZSx7dmFsdWU6dCxleHBpcnk6YX0pOnRoaXMuX3NldChlLHt2YWx1ZTp0LGV4cGlyeTphfSk7fX0se2tleToiaGFzIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5jYWNoZS5oYXMoZSk/IXRoaXMuX2RlbGV0ZUlmRXhwaXJlZChlLHRoaXMuY2FjaGUuZ2V0KGUpKTohIXRoaXMub2xkQ2FjaGUuaGFzKGUpJiYhdGhpcy5fZGVsZXRlSWZFeHBpcmVkKGUsdGhpcy5vbGRDYWNoZS5nZXQoZSkpfX0se2tleToicGVlayIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuY2FjaGUuaGFzKGUpP3RoaXMuX3BlZWsoZSx0aGlzLmNhY2hlKTp0aGlzLm9sZENhY2hlLmhhcyhlKT90aGlzLl9wZWVrKGUsdGhpcy5vbGRDYWNoZSk6dm9pZCAwfX0se2tleToiZGVsZXRlIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLmNhY2hlLmRlbGV0ZShlKTtyZXR1cm4gdCYmdGhpcy5fc2l6ZS0tLHRoaXMub2xkQ2FjaGUuZGVsZXRlKGUpfHx0fX0se2tleToiY2xlYXIiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5jYWNoZS5jbGVhcigpLHRoaXMub2xkQ2FjaGUuY2xlYXIoKSx0aGlzLl9zaXplPTA7fX0se2tleToicmVzaXplIix2YWx1ZTpmdW5jdGlvbihlKXtpZighKGUmJmU+MCkpdGhyb3cgbmV3IFR5cGVFcnJvcigiYG1heFNpemVgIG11c3QgYmUgYSBudW1iZXIgZ3JlYXRlciB0aGFuIDAiKTt2YXIgdD16KHRoaXMuX2VudHJpZXNBc2NlbmRpbmcoKSkscj10Lmxlbmd0aC1lO3I8MD8odGhpcy5jYWNoZT1uZXcgTWFwKHQpLHRoaXMub2xkQ2FjaGU9bmV3IE1hcCx0aGlzLl9zaXplPXQubGVuZ3RoKToocj4wJiZ0aGlzLl9lbWl0RXZpY3Rpb25zKHQuc2xpY2UoMCxyKSksdGhpcy5vbGRDYWNoZT1uZXcgTWFwKHQuc2xpY2UocikpLHRoaXMuY2FjaGU9bmV3IE1hcCx0aGlzLl9zaXplPTApLHRoaXMubWF4U2l6ZT1lO319LHtrZXk6ImtleXMiLHZhbHVlOngubWFyaygoZnVuY3Rpb24gZSgpe3ZhciB0LHIsbixpO3JldHVybiB4LndyYXAoKGZ1bmN0aW9uKGUpe2Zvcig7Oylzd2l0Y2goZS5wcmV2PWUubmV4dCl7Y2FzZSAwOnQ9ZXQodGhpcyksZS5wcmV2PTEsdC5zKCk7Y2FzZSAzOmlmKChyPXQubigpKS5kb25lKXtlLm5leHQ9OTticmVha31yZXR1cm4gbj1vKHIudmFsdWUsMSksaT1uWzBdLGUubmV4dD03LGk7Y2FzZSA3OmUubmV4dD0zO2JyZWFrO2Nhc2UgOTplLm5leHQ9MTQ7YnJlYWs7Y2FzZSAxMTplLnByZXY9MTEsZS50MD1lLmNhdGNoKDEpLHQuZShlLnQwKTtjYXNlIDE0OnJldHVybiBlLnByZXY9MTQsdC5mKCksZS5maW5pc2goMTQpO2Nhc2UgMTc6Y2FzZSJlbmQiOnJldHVybiBlLnN0b3AoKX19KSxlLHRoaXMsW1sxLDExLDE0LDE3XV0pfSkpfSx7a2V5OiJ2YWx1ZXMiLHZhbHVlOngubWFyaygoZnVuY3Rpb24gZSgpe3ZhciB0LHIsbixpO3JldHVybiB4LndyYXAoKGZ1bmN0aW9uKGUpe2Zvcig7Oylzd2l0Y2goZS5wcmV2PWUubmV4dCl7Y2FzZSAwOnQ9ZXQodGhpcyksZS5wcmV2PTEsdC5zKCk7Y2FzZSAzOmlmKChyPXQubigpKS5kb25lKXtlLm5leHQ9OTticmVha31yZXR1cm4gbj1vKHIudmFsdWUsMiksaT1uWzFdLGUubmV4dD03LGk7Y2FzZSA3OmUubmV4dD0zO2JyZWFrO2Nhc2UgOTplLm5leHQ9MTQ7YnJlYWs7Y2FzZSAxMTplLnByZXY9MTEsZS50MD1lLmNhdGNoKDEpLHQuZShlLnQwKTtjYXNlIDE0OnJldHVybiBlLnByZXY9MTQsdC5mKCksZS5maW5pc2goMTQpO2Nhc2UgMTc6Y2FzZSJlbmQiOnJldHVybiBlLnN0b3AoKX19KSxlLHRoaXMsW1sxLDExLDE0LDE3XV0pfSkpfSx7a2V5OnQsdmFsdWU6eC5tYXJrKChmdW5jdGlvbigpe3ZhciBlLHQscixuLGksYSxzLHUsZixjLGwsaDtyZXR1cm4geC53cmFwKChmdW5jdGlvbihkKXtmb3IoOzspc3dpdGNoKGQucHJldj1kLm5leHQpe2Nhc2UgMDplPWV0KHRoaXMuY2FjaGUpLGQucHJldj0xLGUucygpO2Nhc2UgMzppZigodD1lLm4oKSkuZG9uZSl7ZC5uZXh0PTEyO2JyZWFrfWlmKHI9dC52YWx1ZSxuPW8ociwyKSxpPW5bMF0sYT1uWzFdLCExIT09dGhpcy5fZGVsZXRlSWZFeHBpcmVkKGksYSkpe2QubmV4dD0xMDticmVha31yZXR1cm4gZC5uZXh0PTEwLFtpLGEudmFsdWVdO2Nhc2UgMTA6ZC5uZXh0PTM7YnJlYWs7Y2FzZSAxMjpkLm5leHQ9MTc7YnJlYWs7Y2FzZSAxNDpkLnByZXY9MTQsZC50MD1kLmNhdGNoKDEpLGUuZShkLnQwKTtjYXNlIDE3OnJldHVybiBkLnByZXY9MTcsZS5mKCksZC5maW5pc2goMTcpO2Nhc2UgMjA6cz1ldCh0aGlzLm9sZENhY2hlKSxkLnByZXY9MjEscy5zKCk7Y2FzZSAyMzppZigodT1zLm4oKSkuZG9uZSl7ZC5uZXh0PTMzO2JyZWFrfWlmKGY9dS52YWx1ZSxjPW8oZiwyKSxsPWNbMF0saD1jWzFdLHRoaXMuY2FjaGUuaGFzKGwpKXtkLm5leHQ9MzE7YnJlYWt9aWYoITEhPT10aGlzLl9kZWxldGVJZkV4cGlyZWQobCxoKSl7ZC5uZXh0PTMxO2JyZWFrfXJldHVybiBkLm5leHQ9MzEsW2wsaC52YWx1ZV07Y2FzZSAzMTpkLm5leHQ9MjM7YnJlYWs7Y2FzZSAzMzpkLm5leHQ9Mzg7YnJlYWs7Y2FzZSAzNTpkLnByZXY9MzUsZC50MT1kLmNhdGNoKDIxKSxzLmUoZC50MSk7Y2FzZSAzODpyZXR1cm4gZC5wcmV2PTM4LHMuZigpLGQuZmluaXNoKDM4KTtjYXNlIDQxOmNhc2UiZW5kIjpyZXR1cm4gZC5zdG9wKCl9fSksYSx0aGlzLFtbMSwxNCwxNywyMF0sWzIxLDM1LDM4LDQxXV0pfSkpfSx7a2V5OiJlbnRyaWVzRGVzY2VuZGluZyIsdmFsdWU6eC5tYXJrKChmdW5jdGlvbiBlKCl7dmFyIHQscixuLGksYSxzLHUsZixjLGwsaDtyZXR1cm4geC53cmFwKChmdW5jdGlvbihlKXtmb3IoOzspc3dpdGNoKGUucHJldj1lLm5leHQpe2Nhc2UgMDp0PXoodGhpcy5jYWNoZSkscj10Lmxlbmd0aC0xO2Nhc2UgMjppZighKHI+PTApKXtlLm5leHQ9MTI7YnJlYWt9aWYobj10W3JdLGk9byhuLDIpLGE9aVswXSxzPWlbMV0sITEhPT10aGlzLl9kZWxldGVJZkV4cGlyZWQoYSxzKSl7ZS5uZXh0PTk7YnJlYWt9cmV0dXJuIGUubmV4dD05LFthLHMudmFsdWVdO2Nhc2UgOTotLXIsZS5uZXh0PTI7YnJlYWs7Y2FzZSAxMjp0PXoodGhpcy5vbGRDYWNoZSksdT10Lmxlbmd0aC0xO2Nhc2UgMTQ6aWYoISh1Pj0wKSl7ZS5uZXh0PTI1O2JyZWFrfWlmKGY9dFt1XSxjPW8oZiwyKSxsPWNbMF0saD1jWzFdLHRoaXMuY2FjaGUuaGFzKGwpKXtlLm5leHQ9MjI7YnJlYWt9aWYoITEhPT10aGlzLl9kZWxldGVJZkV4cGlyZWQobCxoKSl7ZS5uZXh0PTIyO2JyZWFrfXJldHVybiBlLm5leHQ9MjIsW2wsaC52YWx1ZV07Y2FzZSAyMjotLXUsZS5uZXh0PTE0O2JyZWFrO2Nhc2UgMjU6Y2FzZSJlbmQiOnJldHVybiBlLnN0b3AoKX19KSxlLHRoaXMpfSkpfSx7a2V5OiJlbnRyaWVzQXNjZW5kaW5nIix2YWx1ZTp4Lm1hcmsoKGZ1bmN0aW9uIGUoKXt2YXIgdCxyLG4saSxhO3JldHVybiB4LndyYXAoKGZ1bmN0aW9uKGUpe2Zvcig7Oylzd2l0Y2goZS5wcmV2PWUubmV4dCl7Y2FzZSAwOnQ9ZXQodGhpcy5fZW50cmllc0FzY2VuZGluZygpKSxlLnByZXY9MSx0LnMoKTtjYXNlIDM6aWYoKHI9dC5uKCkpLmRvbmUpe2UubmV4dD05O2JyZWFrfXJldHVybiBuPW8oci52YWx1ZSwyKSxpPW5bMF0sYT1uWzFdLGUubmV4dD03LFtpLGEudmFsdWVdO2Nhc2UgNzplLm5leHQ9MzticmVhaztjYXNlIDk6ZS5uZXh0PTE0O2JyZWFrO2Nhc2UgMTE6ZS5wcmV2PTExLGUudDA9ZS5jYXRjaCgxKSx0LmUoZS50MCk7Y2FzZSAxNDpyZXR1cm4gZS5wcmV2PTE0LHQuZigpLGUuZmluaXNoKDE0KTtjYXNlIDE3OmNhc2UiZW5kIjpyZXR1cm4gZS5zdG9wKCl9fSksZSx0aGlzLFtbMSwxMSwxNCwxN11dKX0pKX0se2tleToic2l6ZSIsZ2V0OmZ1bmN0aW9uKCl7aWYoIXRoaXMuX3NpemUpcmV0dXJuIHRoaXMub2xkQ2FjaGUuc2l6ZTt2YXIgZSx0PTAscj1ldCh0aGlzLm9sZENhY2hlLmtleXMoKSk7dHJ5e2ZvcihyLnMoKTshKGU9ci5uKCkpLmRvbmU7KXt2YXIgbj1lLnZhbHVlO3RoaXMuY2FjaGUuaGFzKG4pfHx0Kys7fX1jYXRjaChlKXtyLmUoZSk7fWZpbmFsbHl7ci5mKCk7fXJldHVybiBNYXRoLm1pbih0aGlzLl9zaXplK3QsdGhpcy5tYXhTaXplKX19LHtrZXk6ImVudHJpZXMiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZW50cmllc0FzY2VuZGluZygpfX0se2tleToiZm9yRWFjaCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQscj1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06dGhpcyxuPWV0KHRoaXMuZW50cmllc0FzY2VuZGluZygpKTt0cnl7Zm9yKG4ucygpOyEodD1uLm4oKSkuZG9uZTspe3ZhciBpPW8odC52YWx1ZSwyKSxhPWlbMF0scz1pWzFdO2UuY2FsbChyLHMsYSx0aGlzKTt9fWNhdGNoKGUpe24uZShlKTt9ZmluYWxseXtuLmYoKTt9fX0se2tleTpyLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIEpTT04uc3RyaW5naWZ5KHoodGhpcy5lbnRyaWVzQXNjZW5kaW5nKCkpKX19XSksaX0odyhNYXApLFN5bWJvbC5pdGVyYXRvcixTeW1ib2wudG9TdHJpbmdUYWcpO2Z1bmN0aW9uIGl0KGUpe3ZhciB0PWZ1bmN0aW9uKCl7aWYoInVuZGVmaW5lZCI9PXR5cGVvZiBSZWZsZWN0fHwhUmVmbGVjdC5jb25zdHJ1Y3QpcmV0dXJuICExO2lmKFJlZmxlY3QuY29uc3RydWN0LnNoYW0pcmV0dXJuICExO2lmKCJmdW5jdGlvbiI9PXR5cGVvZiBQcm94eSlyZXR1cm4gITA7dHJ5e3JldHVybiBCb29sZWFuLnByb3RvdHlwZS52YWx1ZU9mLmNhbGwoUmVmbGVjdC5jb25zdHJ1Y3QoQm9vbGVhbixbXSwoZnVuY3Rpb24oKXt9KSkpLCEwfWNhdGNoKGUpe3JldHVybiAhMX19KCk7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIHIsbj12KGUpO2lmKHQpe3ZhciBpPXYodGhpcykuY29uc3RydWN0b3I7cj1SZWZsZWN0LmNvbnN0cnVjdChuLGFyZ3VtZW50cyxpKTt9ZWxzZSByPW4uYXBwbHkodGhpcyxhcmd1bWVudHMpO3JldHVybiBtKHRoaXMscil9fWZ1bmN0aW9uIGF0KGUsdCl7Zm9yKHZhciByIGluIHQpdC5oYXNPd25Qcm9wZXJ0eShyKSYmKGVbcl09dFtyXSk7fWZ1bmN0aW9uIG90KGUsdCl7cmV0dXJuICEoZS5sZW5ndGg8dC5sZW5ndGgpJiZlLnN1YnN0cihlLmxlbmd0aC10Lmxlbmd0aCk9PT10fWZ1bmN0aW9uIHN0KGUpe3ZhciB0PXt9O2Zvcih2YXIgciBpbiBlKXtpZihlLmhhc093blByb3BlcnR5KHIpKXRbZVtyXV09cjt9cmV0dXJuIHR9ZnVuY3Rpb24gdXQoZSx0KXtmb3IodmFyIHI9W10sbj0wO248ZTtuKyspci5wdXNoKHQobikpO3JldHVybiByfWZ1bmN0aW9uIGZ0KGUpe3JldHVybiBjdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9ZnVuY3Rpb24gY3QoKXtyZXR1cm4gKGN0PXUoeC5tYXJrKChmdW5jdGlvbiBlKHQpe3JldHVybiB4LndyYXAoKGZ1bmN0aW9uKGUpe2Zvcig7Oylzd2l0Y2goZS5wcmV2PWUubmV4dCl7Y2FzZSAwOnJldHVybiBlLmFicnVwdCgicmV0dXJuIixuZXcgUHJvbWlzZSgoZnVuY3Rpb24oZSl7cmV0dXJuIHNldFRpbWVvdXQoZSx0KX0pKSk7Y2FzZSAxOmNhc2UiZW5kIjpyZXR1cm4gZS5zdG9wKCl9fSksZSl9KSkpKS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9ZnVuY3Rpb24gbHQoZSx0KXt2YXIgcj1BcnJheS5pc0FycmF5KGUpP2U6QXJyYXkuZnJvbShlKSxuPUFycmF5LmlzQXJyYXkodCk/dDpBcnJheS5mcm9tKHQpO3JldHVybiByLm1hcCgoZnVuY3Rpb24oZSx0KXtyZXR1cm4gW2Usblt0XV19KSl9dmFyIGh0PWZ1bmN0aW9uKGUpe2gocixlKTt2YXIgdD1pdChyKTtmdW5jdGlvbiByKGUpe3ZhciBuO3JldHVybiBiKHRoaXMsciksbj10LmNhbGwodGhpcyxlKSxFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSYmRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UocChuKSxyKSxuLm5hbWU9IkFib3J0RXJyb3IiLG59cmV0dXJuIHJ9KHcoRXJyb3IpKSxkdD1mdW5jdGlvbihlKXtoKHIsZSk7dmFyIHQ9aXQocik7ZnVuY3Rpb24gcihlLG4pe3ZhciBpO3JldHVybiBiKHRoaXMsciksKGk9dC5jYWxsKHRoaXMsbikpLmVycm9ycz1lLGkubWVzc2FnZT1uLGkubmFtZT0iQWdncmVnYXRlRXJyb3IiLGl9cmV0dXJuIHJ9KHcoRXJyb3IpKTtmdW5jdGlvbiBwdChlLHQpe3ZhciByPSJ1bmRlZmluZWQiIT10eXBlb2YgU3ltYm9sJiZlW1N5bWJvbC5pdGVyYXRvcl18fGVbIkBAaXRlcmF0b3IiXTtpZighcil7aWYoQXJyYXkuaXNBcnJheShlKXx8KHI9ZnVuY3Rpb24oZSx0KXtpZighZSlyZXR1cm47aWYoInN0cmluZyI9PXR5cGVvZiBlKXJldHVybiBtdChlLHQpO3ZhciByPU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChlKS5zbGljZSg4LC0xKTsiT2JqZWN0Ij09PXImJmUuY29uc3RydWN0b3ImJihyPWUuY29uc3RydWN0b3IubmFtZSk7aWYoIk1hcCI9PT1yfHwiU2V0Ij09PXIpcmV0dXJuIEFycmF5LmZyb20oZSk7aWYoIkFyZ3VtZW50cyI9PT1yfHwvXig/OlVpfEkpbnQoPzo4fDE2fDMyKSg/OkNsYW1wZWQpP0FycmF5JC8udGVzdChyKSlyZXR1cm4gbXQoZSx0KX0oZSkpfHx0JiZlJiYibnVtYmVyIj09dHlwZW9mIGUubGVuZ3RoKXtyJiYoZT1yKTt2YXIgbj0wLGk9ZnVuY3Rpb24oKXt9O3JldHVybiB7czppLG46ZnVuY3Rpb24oKXtyZXR1cm4gbj49ZS5sZW5ndGg/e2RvbmU6ITB9Ontkb25lOiExLHZhbHVlOmVbbisrXX19LGU6ZnVuY3Rpb24oZSl7dGhyb3cgZX0sZjppfX10aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIGF0dGVtcHQgdG8gaXRlcmF0ZSBub24taXRlcmFibGUgaW5zdGFuY2UuXG5JbiBvcmRlciB0byBiZSBpdGVyYWJsZSwgbm9uLWFycmF5IG9iamVjdHMgbXVzdCBoYXZlIGEgW1N5bWJvbC5pdGVyYXRvcl0oKSBtZXRob2QuIil9dmFyIGEsbz0hMCxzPSExO3JldHVybiB7czpmdW5jdGlvbigpe3I9ci5jYWxsKGUpO30sbjpmdW5jdGlvbigpe3ZhciBlPXIubmV4dCgpO3JldHVybiBvPWUuZG9uZSxlfSxlOmZ1bmN0aW9uKGUpe3M9ITAsYT1lO30sZjpmdW5jdGlvbigpe3RyeXtvfHxudWxsPT1yLnJldHVybnx8ci5yZXR1cm4oKTt9ZmluYWxseXtpZihzKXRocm93IGF9fX19ZnVuY3Rpb24gbXQoZSx0KXsobnVsbD09dHx8dD5lLmxlbmd0aCkmJih0PWUubGVuZ3RoKTtmb3IodmFyIHI9MCxuPW5ldyBBcnJheSh0KTtyPHQ7cisrKW5bcl09ZVtyXTtyZXR1cm4gbn1mdW5jdGlvbiB2dChlKXt2YXIgdD1mdW5jdGlvbigpe2lmKCJ1bmRlZmluZWQiPT10eXBlb2YgUmVmbGVjdHx8IVJlZmxlY3QuY29uc3RydWN0KXJldHVybiAhMTtpZihSZWZsZWN0LmNvbnN0cnVjdC5zaGFtKXJldHVybiAhMTtpZigiZnVuY3Rpb24iPT10eXBlb2YgUHJveHkpcmV0dXJuICEwO3RyeXtyZXR1cm4gQm9vbGVhbi5wcm90b3R5cGUudmFsdWVPZi5jYWxsKFJlZmxlY3QuY29uc3RydWN0KEJvb2xlYW4sW10sKGZ1bmN0aW9uKCl7fSkpKSwhMH1jYXRjaChlKXtyZXR1cm4gITF9fSgpO3JldHVybiBmdW5jdGlvbigpe3ZhciByLG49dihlKTtpZih0KXt2YXIgaT12KHRoaXMpLmNvbnN0cnVjdG9yO3I9UmVmbGVjdC5jb25zdHJ1Y3Qobixhcmd1bWVudHMsaSk7fWVsc2Ugcj1uLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtyZXR1cm4gbSh0aGlzLHIpfX12YXIgeXQ9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQscil7dmFyIG49YXJndW1lbnRzLmxlbmd0aD4yJiZ2b2lkIDAhPT1hcmd1bWVudHNbMl0/YXJndW1lbnRzWzJdOm51bGw7Yih0aGlzLGUpLHRoaXMub2Zmc2V0PXQsdGhpcy5sZW5ndGg9cix0aGlzLmRhdGE9bjt9cmV0dXJuIGMoZSxbe2tleToidG9wIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vZmZzZXQrdGhpcy5sZW5ndGh9fV0pLGV9KCksZ3Q9ZnVuY3Rpb24gZSh0LHIsbil7Yih0aGlzLGUpLHRoaXMub2Zmc2V0PXQsdGhpcy5sZW5ndGg9cix0aGlzLmJsb2NrSWRzPW47fSx3dD1mdW5jdGlvbihlKXtoKG4sZSk7dmFyIHQscj12dChuKTtmdW5jdGlvbiBuKGUpe3ZhciB0LGk9YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOnt9LGE9aS5ibG9ja1NpemUsbz12b2lkIDA9PT1hPzY1NTM2OmEscz1pLmNhY2hlU2l6ZSx1PXZvaWQgMD09PXM/MTAwOnM7cmV0dXJuIGIodGhpcyxuKSwodD1yLmNhbGwodGhpcykpLnNvdXJjZT1lLHQuYmxvY2tTaXplPW8sdC5ibG9ja0NhY2hlPW5ldyBudCh7bWF4U2l6ZTp1fSksdC5ibG9ja1JlcXVlc3RzPW5ldyBNYXAsdC5ibG9ja0lkc1RvRmV0Y2g9bmV3IFNldCx0LmFib3J0ZWRCbG9ja0lkcz1uZXcgU2V0LHR9cmV0dXJuIGMobixbe2tleToiZmlsZVNpemUiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnNvdXJjZS5maWxlU2l6ZX19LHtrZXk6ImZldGNoIix2YWx1ZToodD11KHgubWFyaygoZnVuY3Rpb24gZSh0LHIpe3ZhciBuLGksYSxvLHMsdSxmLGMsbCxoLGQscCxtLHYseSxnLHcsYixrLEEsXyxJLFAsUyxULFUsTz10aGlzO3JldHVybiB4LndyYXAoKGZ1bmN0aW9uKGUpe2Zvcig7Oylzd2l0Y2goZS5wcmV2PWUubmV4dCl7Y2FzZSAwOm49W10saT1bXSxhPVtdLG89cHQodCk7dHJ5e2ZvcihvLnMoKTshKHM9by5uKCkpLmRvbmU7KWZvcih1PXMudmFsdWUsZj11Lm9mZnNldCxjPXUubGVuZ3RoLGw9ZitjLG51bGwhPT0oaD10aGlzLmZpbGVTaXplKSYmKGw9TWF0aC5taW4obCxoKSksZD1NYXRoLmZsb29yKGYvdGhpcy5ibG9ja1NpemUpKnRoaXMuYmxvY2tTaXplLHA9ZDtwPGw7cCs9dGhpcy5ibG9ja1NpemUpbT1NYXRoLmZsb29yKHAvdGhpcy5ibG9ja1NpemUpLHRoaXMuYmxvY2tDYWNoZS5oYXMobSl8fHRoaXMuYmxvY2tSZXF1ZXN0cy5oYXMobSl8fCh0aGlzLmJsb2NrSWRzVG9GZXRjaC5hZGQobSksaS5wdXNoKG0pKSx0aGlzLmJsb2NrUmVxdWVzdHMuaGFzKG0pJiZuLnB1c2godGhpcy5ibG9ja1JlcXVlc3RzLmdldChtKSksYS5wdXNoKG0pO31jYXRjaChlKXtvLmUoZSk7fWZpbmFsbHl7by5mKCk7fXJldHVybiBlLm5leHQ9NyxmdCgpO2Nhc2UgNzpmb3IodGhpcy5mZXRjaEJsb2NrcyhyKSx2PVtdLHk9MCxnPWk7eTxnLmxlbmd0aDt5Kyspdz1nW3ldLHRoaXMuYmxvY2tSZXF1ZXN0cy5oYXModykmJnYucHVzaCh0aGlzLmJsb2NrUmVxdWVzdHMuZ2V0KHcpKTtyZXR1cm4gZS5uZXh0PTEyLFByb21pc2UuYWxsU2V0dGxlZChuKTtjYXNlIDEyOnJldHVybiBlLm5leHQ9MTQsUHJvbWlzZS5hbGxTZXR0bGVkKHYpO2Nhc2UgMTQ6aWYoYj1bXSwoaz1hLmZpbHRlcigoZnVuY3Rpb24oZSl7cmV0dXJuIE8uYWJvcnRlZEJsb2NrSWRzLmhhcyhlKXx8IU8uYmxvY2tDYWNoZS5oYXMoZSl9KSkpLmZvckVhY2goKGZ1bmN0aW9uKGUpe3JldHVybiBPLmJsb2NrSWRzVG9GZXRjaC5hZGQoZSl9KSksIShrLmxlbmd0aD4wJiZyKXx8ci5hYm9ydGVkKXtlLm5leHQ9NDA7YnJlYWt9dGhpcy5mZXRjaEJsb2NrcyhudWxsKSxBPXB0KGspLGUucHJldj0yMCxBLnMoKTtjYXNlIDIyOmlmKChfPUEubigpKS5kb25lKXtlLm5leHQ9MzA7YnJlYWt9aWYoST1fLnZhbHVlLFA9dGhpcy5ibG9ja1JlcXVlc3RzLmdldChJKSl7ZS5uZXh0PTI3O2JyZWFrfXRocm93IG5ldyBFcnJvcigiQmxvY2sgIi5jb25jYXQoSSwiIGlzIG5vdCBpbiB0aGUgYmxvY2sgcmVxdWVzdHMiKSk7Y2FzZSAyNzpiLnB1c2goUCk7Y2FzZSAyODplLm5leHQ9MjI7YnJlYWs7Y2FzZSAzMDplLm5leHQ9MzU7YnJlYWs7Y2FzZSAzMjplLnByZXY9MzIsZS50MD1lLmNhdGNoKDIwKSxBLmUoZS50MCk7Y2FzZSAzNTpyZXR1cm4gZS5wcmV2PTM1LEEuZigpLGUuZmluaXNoKDM1KTtjYXNlIDM4OnJldHVybiBlLm5leHQ9NDAsUHJvbWlzZS5hbGxTZXR0bGVkKGIpO2Nhc2UgNDA6aWYoIXJ8fCFyLmFib3J0ZWQpe2UubmV4dD00MjticmVha310aHJvdyBuZXcgaHQoIlJlcXVlc3Qgd2FzIGFib3J0ZWQiKTtjYXNlIDQyOmlmKFM9YS5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybiBPLmJsb2NrQ2FjaGUuZ2V0KGUpfSkpLFQ9Uy5maWx0ZXIoKGZ1bmN0aW9uKGUpe3JldHVybiAhZX0pKSwhVC5sZW5ndGgpe2UubmV4dD00NjticmVha310aHJvdyBuZXcgZHQoVCwiUmVxdWVzdCBmYWlsZWQiKTtjYXNlIDQ2OnJldHVybiBVPW5ldyBNYXAobHQoYSxTKSksZS5hYnJ1cHQoInJldHVybiIsdGhpcy5yZWFkU2xpY2VEYXRhKHQsVSkpO2Nhc2UgNDg6Y2FzZSJlbmQiOnJldHVybiBlLnN0b3AoKX19KSxlLHRoaXMsW1syMCwzMiwzNSwzOF1dKX0pKSksZnVuY3Rpb24oZSxyKXtyZXR1cm4gdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9KX0se2tleToiZmV0Y2hCbG9ja3MiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7dGhpcy5ibG9ja0lkc1RvRmV0Y2guc2l6ZT4wJiZmdW5jdGlvbigpe2Zvcih2YXIgcj10Lmdyb3VwQmxvY2tzKHQuYmxvY2tJZHNUb0ZldGNoKSxuPXQuc291cmNlLmZldGNoKHIsZSksaT1mdW5jdGlvbihpKXt2YXIgYSxvPXB0KHJbaV0uYmxvY2tJZHMpO3RyeXt2YXIgcz1mdW5jdGlvbigpe3ZhciByPWEudmFsdWU7dC5ibG9ja1JlcXVlc3RzLnNldChyLHUoeC5tYXJrKChmdW5jdGlvbiBhKCl7dmFyIG8scyx1LGYsYyxsO3JldHVybiB4LndyYXAoKGZ1bmN0aW9uKGEpe2Zvcig7Oylzd2l0Y2goYS5wcmV2PWEubmV4dCl7Y2FzZSAwOnJldHVybiBhLnByZXY9MCxhLm5leHQ9MyxuO2Nhc2UgMzphLnQwPWksbz1hLnNlbnRbYS50MF0scz1yKnQuYmxvY2tTaXplLHU9cy1vLm9mZnNldCxmPU1hdGgubWluKHUrdC5ibG9ja1NpemUsby5kYXRhLmJ5dGVMZW5ndGgpLGM9by5kYXRhLnNsaWNlKHUsZiksbD1uZXcgeXQocyxjLmJ5dGVMZW5ndGgsYyxyKSx0LmJsb2NrQ2FjaGUuc2V0KHIsbCksdC5hYm9ydGVkQmxvY2tJZHMuZGVsZXRlKHIpLGEubmV4dD0yMzticmVhaztjYXNlIDE0OmlmKGEucHJldj0xNCxhLnQxPWEuY2F0Y2goMCksIkFib3J0RXJyb3IiIT09YS50MS5uYW1lKXthLm5leHQ9MjI7YnJlYWt9YS50MS5zaWduYWw9ZSx0LmJsb2NrQ2FjaGUuZGVsZXRlKHIpLHQuYWJvcnRlZEJsb2NrSWRzLmFkZChyKSxhLm5leHQ9MjM7YnJlYWs7Y2FzZSAyMjp0aHJvdyBhLnQxO2Nhc2UgMjM6cmV0dXJuIGEucHJldj0yMyx0LmJsb2NrUmVxdWVzdHMuZGVsZXRlKHIpLGEuZmluaXNoKDIzKTtjYXNlIDI2OmNhc2UiZW5kIjpyZXR1cm4gYS5zdG9wKCl9fSksYSxudWxsLFtbMCwxNCwyMywyNl1dKX0pKSkoKSk7fTtmb3Ioby5zKCk7IShhPW8ubigpKS5kb25lOylzKCk7fWNhdGNoKGUpe28uZShlKTt9ZmluYWxseXtvLmYoKTt9fSxhPTA7YTxyLmxlbmd0aDsrK2EpaShhKTt0LmJsb2NrSWRzVG9GZXRjaC5jbGVhcigpO30oKTt9fSx7a2V5OiJncm91cEJsb2NrcyIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9QXJyYXkuZnJvbShlKS5zb3J0KChmdW5jdGlvbihlLHQpe3JldHVybiBlLXR9KSk7aWYoMD09PXQubGVuZ3RoKXJldHVybiBbXTt2YXIgcixuPVtdLGk9bnVsbCxhPVtdLG89cHQodCk7dHJ5e2ZvcihvLnMoKTshKHI9by5uKCkpLmRvbmU7KXt2YXIgcz1yLnZhbHVlO251bGw9PT1pfHxpKzE9PT1zPyhuLnB1c2gocyksaT1zKTooYS5wdXNoKG5ldyBndChuWzBdKnRoaXMuYmxvY2tTaXplLG4ubGVuZ3RoKnRoaXMuYmxvY2tTaXplLG4pKSxuPVtzXSxpPXMpO319Y2F0Y2goZSl7by5lKGUpO31maW5hbGx5e28uZigpO31yZXR1cm4gYS5wdXNoKG5ldyBndChuWzBdKnRoaXMuYmxvY2tTaXplLG4ubGVuZ3RoKnRoaXMuYmxvY2tTaXplLG4pKSxhfX0se2tleToicmVhZFNsaWNlRGF0YSIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzO3JldHVybiBlLm1hcCgoZnVuY3Rpb24oZSl7dmFyIG49ZS5vZmZzZXQrZS5sZW5ndGg7bnVsbCE9PXIuZmlsZVNpemUmJihuPU1hdGgubWluKHIuZmlsZVNpemUsbikpO2Zvcih2YXIgaT1NYXRoLmZsb29yKGUub2Zmc2V0L3IuYmxvY2tTaXplKSxhPU1hdGguZmxvb3Iobi9yLmJsb2NrU2l6ZSksbz1uZXcgQXJyYXlCdWZmZXIoZS5sZW5ndGgpLHM9bmV3IFVpbnQ4QXJyYXkobyksdT1pO3U8PWE7Kyt1KXt2YXIgZj10LmdldCh1KSxjPWYub2Zmc2V0LWUub2Zmc2V0LGw9MCxoPTAsZD12b2lkIDA7YzwwP2w9LWM6Yz4wJiYoaD1jKSxkPWYudG9wLW48MD9mLmxlbmd0aC1sOm4tZi5vZmZzZXQtbDt2YXIgcD1uZXcgVWludDhBcnJheShmLmRhdGEsbCxkKTtzLnNldChwLGgpO31yZXR1cm4gb30pKX19XSksbn0oJGUpLGJ0PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe2IodGhpcyxlKTt9dmFyIHQ7cmV0dXJuIGMoZSxbe2tleToib2siLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnN0YXR1cz49MjAwJiZ0aGlzLnN0YXR1czw9Mjk5fX0se2tleToic3RhdHVzIixnZXQ6ZnVuY3Rpb24oKXt0aHJvdyBuZXcgRXJyb3IoIm5vdCBpbXBsZW1lbnRlZCIpfX0se2tleToiZ2V0SGVhZGVyIix2YWx1ZTpmdW5jdGlvbihlKXt0aHJvdyBuZXcgRXJyb3IoIm5vdCBpbXBsZW1lbnRlZCIpfX0se2tleToiZ2V0RGF0YSIsdmFsdWU6KHQ9dSh4Lm1hcmsoKGZ1bmN0aW9uIGUoKXtyZXR1cm4geC53cmFwKChmdW5jdGlvbihlKXtmb3IoOzspc3dpdGNoKGUucHJldj1lLm5leHQpe2Nhc2UgMDp0aHJvdyBuZXcgRXJyb3IoIm5vdCBpbXBsZW1lbnRlZCIpO2Nhc2UgMTpjYXNlImVuZCI6cmV0dXJuIGUuc3RvcCgpfX0pLGUpfSkpKSxmdW5jdGlvbigpe3JldHVybiB0LmFwcGx5KHRoaXMsYXJndW1lbnRzKX0pfV0pLGV9KCksa3Q9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQpe2IodGhpcyxlKSx0aGlzLnVybD10O312YXIgdDtyZXR1cm4gYyhlLFt7a2V5OiJyZXF1ZXN0Iix2YWx1ZToodD11KHgubWFyaygoZnVuY3Rpb24gZSgpe3JldHVybiB4LndyYXAoKGZ1bmN0aW9uKGUpe2Zvcig7Oylzd2l0Y2goZS5wcmV2PWUubmV4dCl7Y2FzZSAwOnRocm93IG5ldyBFcnJvcigicmVxdWVzdCBpcyBub3QgaW1wbGVtZW50ZWQiKTtjYXNlIDI6Y2FzZSJlbmQiOnJldHVybiBlLnN0b3AoKX19KSxlKX0pKSksZnVuY3Rpb24oKXtyZXR1cm4gdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9KX1dKSxlfSgpO2Z1bmN0aW9uIHh0KGUpe3ZhciB0PWZ1bmN0aW9uKCl7aWYoInVuZGVmaW5lZCI9PXR5cGVvZiBSZWZsZWN0fHwhUmVmbGVjdC5jb25zdHJ1Y3QpcmV0dXJuICExO2lmKFJlZmxlY3QuY29uc3RydWN0LnNoYW0pcmV0dXJuICExO2lmKCJmdW5jdGlvbiI9PXR5cGVvZiBQcm94eSlyZXR1cm4gITA7dHJ5e3JldHVybiBCb29sZWFuLnByb3RvdHlwZS52YWx1ZU9mLmNhbGwoUmVmbGVjdC5jb25zdHJ1Y3QoQm9vbGVhbixbXSwoZnVuY3Rpb24oKXt9KSkpLCEwfWNhdGNoKGUpe3JldHVybiAhMX19KCk7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIHIsbj12KGUpO2lmKHQpe3ZhciBpPXYodGhpcykuY29uc3RydWN0b3I7cj1SZWZsZWN0LmNvbnN0cnVjdChuLGFyZ3VtZW50cyxpKTt9ZWxzZSByPW4uYXBwbHkodGhpcyxhcmd1bWVudHMpO3JldHVybiBtKHRoaXMscil9fXZhciBBdD1mdW5jdGlvbihlKXtoKG4sZSk7dmFyIHQscj14dChuKTtmdW5jdGlvbiBuKGUpe3ZhciB0O3JldHVybiBiKHRoaXMsbiksKHQ9ci5jYWxsKHRoaXMpKS5yZXNwb25zZT1lLHR9cmV0dXJuIGMobixbe2tleToic3RhdHVzIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yZXNwb25zZS5zdGF0dXN9fSx7a2V5OiJnZXRIZWFkZXIiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnJlc3BvbnNlLmhlYWRlcnMuZ2V0KGUpfX0se2tleToiZ2V0RGF0YSIsdmFsdWU6KHQ9dSh4Lm1hcmsoKGZ1bmN0aW9uIGUoKXt2YXIgdDtyZXR1cm4geC53cmFwKChmdW5jdGlvbihlKXtmb3IoOzspc3dpdGNoKGUucHJldj1lLm5leHQpe2Nhc2UgMDppZighdGhpcy5yZXNwb25zZS5hcnJheUJ1ZmZlcil7ZS5uZXh0PTY7YnJlYWt9cmV0dXJuIGUubmV4dD0zLHRoaXMucmVzcG9uc2UuYXJyYXlCdWZmZXIoKTtjYXNlIDM6ZS50MD1lLnNlbnQsZS5uZXh0PTk7YnJlYWs7Y2FzZSA2OnJldHVybiBlLm5leHQ9OCx0aGlzLnJlc3BvbnNlLmJ1ZmZlcigpO2Nhc2UgODplLnQwPWUuc2VudC5idWZmZXI7Y2FzZSA5OnJldHVybiB0PWUudDAsZS5hYnJ1cHQoInJldHVybiIsdCk7Y2FzZSAxMTpjYXNlImVuZCI6cmV0dXJuIGUuc3RvcCgpfX0pLGUsdGhpcyl9KSkpLGZ1bmN0aW9uKCl7cmV0dXJuIHQuYXBwbHkodGhpcyxhcmd1bWVudHMpfSl9XSksbn0oYnQpLF90PWZ1bmN0aW9uKGUpe2gobixlKTt2YXIgdCxyPXh0KG4pO2Z1bmN0aW9uIG4oZSx0KXt2YXIgaTtyZXR1cm4gYih0aGlzLG4pLChpPXIuY2FsbCh0aGlzLGUpKS5jcmVkZW50aWFscz10LGl9cmV0dXJuIGMobixbe2tleToicmVxdWVzdCIsdmFsdWU6KHQ9dSh4Lm1hcmsoKGZ1bmN0aW9uIGUoKXt2YXIgdCxyLG4saSxhLG89YXJndW1lbnRzO3JldHVybiB4LndyYXAoKGZ1bmN0aW9uKGUpe2Zvcig7Oylzd2l0Y2goZS5wcmV2PWUubmV4dCl7Y2FzZSAwOnJldHVybiB0PW8ubGVuZ3RoPjAmJnZvaWQgMCE9PW9bMF0/b1swXTp7fSxyPXQuaGVhZGVycyxuPXQuY3JlZGVudGlhbHMsaT10LnNpZ25hbCxlLm5leHQ9MyxmZXRjaCh0aGlzLnVybCx7aGVhZGVyczpyLGNyZWRlbnRpYWxzOm4sc2lnbmFsOml9KTtjYXNlIDM6cmV0dXJuIGE9ZS5zZW50LGUuYWJydXB0KCJyZXR1cm4iLG5ldyBBdChhKSk7Y2FzZSA1OmNhc2UiZW5kIjpyZXR1cm4gZS5zdG9wKCl9fSksZSx0aGlzKX0pKSksZnVuY3Rpb24oKXtyZXR1cm4gdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9KX1dKSxufShrdCk7ZnVuY3Rpb24gSXQoZSl7dmFyIHQ9ZnVuY3Rpb24oKXtpZigidW5kZWZpbmVkIj09dHlwZW9mIFJlZmxlY3R8fCFSZWZsZWN0LmNvbnN0cnVjdClyZXR1cm4gITE7aWYoUmVmbGVjdC5jb25zdHJ1Y3Quc2hhbSlyZXR1cm4gITE7aWYoImZ1bmN0aW9uIj09dHlwZW9mIFByb3h5KXJldHVybiAhMDt0cnl7cmV0dXJuIEJvb2xlYW4ucHJvdG90eXBlLnZhbHVlT2YuY2FsbChSZWZsZWN0LmNvbnN0cnVjdChCb29sZWFuLFtdLChmdW5jdGlvbigpe30pKSksITB9Y2F0Y2goZSl7cmV0dXJuICExfX0oKTtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgcixuPXYoZSk7aWYodCl7dmFyIGk9dih0aGlzKS5jb25zdHJ1Y3RvcjtyPVJlZmxlY3QuY29uc3RydWN0KG4sYXJndW1lbnRzLGkpO31lbHNlIHI9bi5hcHBseSh0aGlzLGFyZ3VtZW50cyk7cmV0dXJuIG0odGhpcyxyKX19dmFyIFB0PWZ1bmN0aW9uKGUpe2gobixlKTt2YXIgdCxyPUl0KG4pO2Z1bmN0aW9uIG4oZSx0KXt2YXIgaTtyZXR1cm4gYih0aGlzLG4pLChpPXIuY2FsbCh0aGlzKSkueGhyPWUsaS5kYXRhPXQsaX1yZXR1cm4gYyhuLFt7a2V5OiJzdGF0dXMiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnhoci5zdGF0dXN9fSx7a2V5OiJnZXRIZWFkZXIiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnhoci5nZXRSZXNwb25zZUhlYWRlcihlKX19LHtrZXk6ImdldERhdGEiLHZhbHVlOih0PXUoeC5tYXJrKChmdW5jdGlvbiBlKCl7cmV0dXJuIHgud3JhcCgoZnVuY3Rpb24oZSl7Zm9yKDs7KXN3aXRjaChlLnByZXY9ZS5uZXh0KXtjYXNlIDA6cmV0dXJuIGUuYWJydXB0KCJyZXR1cm4iLHRoaXMuZGF0YSk7Y2FzZSAxOmNhc2UiZW5kIjpyZXR1cm4gZS5zdG9wKCl9fSksZSx0aGlzKX0pKSksZnVuY3Rpb24oKXtyZXR1cm4gdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9KX1dKSxufShidCksU3Q9ZnVuY3Rpb24oZSl7aChuLGUpO3ZhciB0LHI9SXQobik7ZnVuY3Rpb24gbigpe3JldHVybiBiKHRoaXMsbiksci5hcHBseSh0aGlzLGFyZ3VtZW50cyl9cmV0dXJuIGMobixbe2tleToiY29uc3RydWN0UmVxdWVzdCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzO3JldHVybiBuZXcgUHJvbWlzZSgoZnVuY3Rpb24obixpKXt2YXIgYT1uZXcgWE1MSHR0cFJlcXVlc3Q7YS5vcGVuKCJHRVQiLHIudXJsKSxhLnJlc3BvbnNlVHlwZT0iYXJyYXlidWZmZXIiO2Zvcih2YXIgcz0wLHU9T2JqZWN0LmVudHJpZXMoZSk7czx1Lmxlbmd0aDtzKyspe3ZhciBmPW8odVtzXSwyKSxjPWZbMF0sbD1mWzFdO2Euc2V0UmVxdWVzdEhlYWRlcihjLGwpO31hLm9ubG9hZD1mdW5jdGlvbigpe3ZhciBlPWEucmVzcG9uc2U7bihuZXcgUHQoYSxlKSk7fSxhLm9uZXJyb3I9aSxhLm9uYWJvcnQ9ZnVuY3Rpb24oKXtyZXR1cm4gaShuZXcgaHQoIlJlcXVlc3QgYWJvcnRlZCIpKX0sYS5zZW5kKCksdCYmKHQuYWJvcnRlZCYmYS5hYm9ydCgpLHQuYWRkRXZlbnRMaXN0ZW5lcigiYWJvcnQiLChmdW5jdGlvbigpe3JldHVybiBhLmFib3J0KCl9KSkpO30pKX19LHtrZXk6InJlcXVlc3QiLHZhbHVlOih0PXUoeC5tYXJrKChmdW5jdGlvbiBlKCl7dmFyIHQscixuLGksYT1hcmd1bWVudHM7cmV0dXJuIHgud3JhcCgoZnVuY3Rpb24oZSl7Zm9yKDs7KXN3aXRjaChlLnByZXY9ZS5uZXh0KXtjYXNlIDA6cmV0dXJuIHQ9YS5sZW5ndGg+MCYmdm9pZCAwIT09YVswXT9hWzBdOnt9LHI9dC5oZWFkZXJzLG49dC5zaWduYWwsZS5uZXh0PTMsdGhpcy5jb25zdHJ1Y3RSZXF1ZXN0KHIsbik7Y2FzZSAzOnJldHVybiBpPWUuc2VudCxlLmFicnVwdCgicmV0dXJuIixpKTtjYXNlIDU6Y2FzZSJlbmQiOnJldHVybiBlLnN0b3AoKX19KSxlLHRoaXMpfSkpKSxmdW5jdGlvbigpe3JldHVybiB0LmFwcGx5KHRoaXMsYXJndW1lbnRzKX0pfV0pLG59KGt0KSxUdD17fTtmdW5jdGlvbiBVdChlLHQpe3ZhciByPU9iamVjdC5rZXlzKGUpO2lmKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpe3ZhciBuPU9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoZSk7dCYmKG49bi5maWx0ZXIoKGZ1bmN0aW9uKHQpe3JldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGUsdCkuZW51bWVyYWJsZX0pKSksci5wdXNoLmFwcGx5KHIsbik7fXJldHVybiByfWZ1bmN0aW9uIE90KGUpe2Zvcih2YXIgcj0xO3I8YXJndW1lbnRzLmxlbmd0aDtyKyspe3ZhciBuPW51bGwhPWFyZ3VtZW50c1tyXT9hcmd1bWVudHNbcl06e307ciUyP1V0KE9iamVjdChuKSwhMCkuZm9yRWFjaCgoZnVuY3Rpb24ocil7dChlLHIsbltyXSk7fSkpOk9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzP09iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGUsT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMobikpOlV0KE9iamVjdChuKSkuZm9yRWFjaCgoZnVuY3Rpb24odCl7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsdCxPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG4sdCkpO30pKTt9cmV0dXJuIGV9ZnVuY3Rpb24gRHQoZSl7dmFyIHQ9ZnVuY3Rpb24oKXtpZigidW5kZWZpbmVkIj09dHlwZW9mIFJlZmxlY3R8fCFSZWZsZWN0LmNvbnN0cnVjdClyZXR1cm4gITE7aWYoUmVmbGVjdC5jb25zdHJ1Y3Quc2hhbSlyZXR1cm4gITE7aWYoImZ1bmN0aW9uIj09dHlwZW9mIFByb3h5KXJldHVybiAhMDt0cnl7cmV0dXJuIEJvb2xlYW4ucHJvdG90eXBlLnZhbHVlT2YuY2FsbChSZWZsZWN0LmNvbnN0cnVjdChCb29sZWFuLFtdLChmdW5jdGlvbigpe30pKSksITB9Y2F0Y2goZSl7cmV0dXJuICExfX0oKTtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgcixuPXYoZSk7aWYodCl7dmFyIGk9dih0aGlzKS5jb25zdHJ1Y3RvcjtyPVJlZmxlY3QuY29uc3RydWN0KG4sYXJndW1lbnRzLGkpO31lbHNlIHI9bi5hcHBseSh0aGlzLGFyZ3VtZW50cyk7cmV0dXJuIG0odGhpcyxyKX19dmFyIEV0PWZ1bmN0aW9uKGUpe2gobixlKTt2YXIgdCxyPUR0KG4pO2Z1bmN0aW9uIG4oZSx0KXt2YXIgaTtyZXR1cm4gYih0aGlzLG4pLChpPXIuY2FsbCh0aGlzKSkucmVzcG9uc2U9ZSxpLmRhdGFQcm9taXNlPXQsaX1yZXR1cm4gYyhuLFt7a2V5OiJzdGF0dXMiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnJlc3BvbnNlLnN0YXR1c0NvZGV9fSx7a2V5OiJnZXRIZWFkZXIiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnJlc3BvbnNlLmhlYWRlcnNbZV19fSx7a2V5OiJnZXREYXRhIix2YWx1ZToodD11KHgubWFyaygoZnVuY3Rpb24gZSgpe3ZhciB0O3JldHVybiB4LndyYXAoKGZ1bmN0aW9uKGUpe2Zvcig7Oylzd2l0Y2goZS5wcmV2PWUubmV4dCl7Y2FzZSAwOnJldHVybiBlLm5leHQ9Mix0aGlzLmRhdGFQcm9taXNlO2Nhc2UgMjpyZXR1cm4gdD1lLnNlbnQsZS5hYnJ1cHQoInJldHVybiIsdCk7Y2FzZSA0OmNhc2UiZW5kIjpyZXR1cm4gZS5zdG9wKCl9fSksZSx0aGlzKX0pKSksZnVuY3Rpb24oKXtyZXR1cm4gdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9KX1dKSxufShidCksUnQ9ZnVuY3Rpb24oZSl7aChuLGUpO3ZhciB0LHI9RHQobik7ZnVuY3Rpb24gbihlKXt2YXIgdDtyZXR1cm4gYih0aGlzLG4pLCh0PXIuY2FsbCh0aGlzLGUpKS5wYXJzZWRVcmw9VHQucGFyc2UodC51cmwpLHQuaHR0cEFwaT0odC5wYXJzZWRVcmwucHJvdG9jb2wsVHQpLHR9cmV0dXJuIGMobixbe2tleToiY29uc3RydWN0UmVxdWVzdCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzO3JldHVybiBuZXcgUHJvbWlzZSgoZnVuY3Rpb24obixpKXt2YXIgYT1yLmh0dHBBcGkuZ2V0KE90KE90KHt9LHIucGFyc2VkVXJsKSx7fSx7aGVhZGVyczplfSksKGZ1bmN0aW9uKGUpe3ZhciB0PW5ldyBQcm9taXNlKChmdW5jdGlvbih0KXt2YXIgcj1bXTtlLm9uKCJkYXRhIiwoZnVuY3Rpb24oZSl7ci5wdXNoKGUpO30pKSxlLm9uKCJlbmQiLChmdW5jdGlvbigpe3ZhciBlPUJ1ZmZlci5jb25jYXQocikuYnVmZmVyO3QoZSk7fSkpLGUub24oImVycm9yIixpKTt9KSk7bihuZXcgRXQoZSx0KSk7fSkpO2Eub24oImVycm9yIixpKSx0JiYodC5hYm9ydGVkJiZhLmRlc3Ryb3kobmV3IGh0KCJSZXF1ZXN0IGFib3J0ZWQiKSksdC5hZGRFdmVudExpc3RlbmVyKCJhYm9ydCIsKGZ1bmN0aW9uKCl7cmV0dXJuIGEuZGVzdHJveShuZXcgaHQoIlJlcXVlc3QgYWJvcnRlZCIpKX0pKSk7fSkpfX0se2tleToicmVxdWVzdCIsdmFsdWU6KHQ9dSh4Lm1hcmsoKGZ1bmN0aW9uIGUoKXt2YXIgdCxyLG4saSxhPWFyZ3VtZW50cztyZXR1cm4geC53cmFwKChmdW5jdGlvbihlKXtmb3IoOzspc3dpdGNoKGUucHJldj1lLm5leHQpe2Nhc2UgMDpyZXR1cm4gdD1hLmxlbmd0aD4wJiZ2b2lkIDAhPT1hWzBdP2FbMF06e30scj10LmhlYWRlcnMsbj10LnNpZ25hbCxlLm5leHQ9Myx0aGlzLmNvbnN0cnVjdFJlcXVlc3QocixuKTtjYXNlIDM6cmV0dXJuIGk9ZS5zZW50LGUuYWJydXB0KCJyZXR1cm4iLGkpO2Nhc2UgNTpjYXNlImVuZCI6cmV0dXJuIGUuc3RvcCgpfX0pLGUsdGhpcyl9KSkpLGZ1bmN0aW9uKCl7cmV0dXJuIHQuYXBwbHkodGhpcyxhcmd1bWVudHMpfSl9XSksbn0oa3QpLE10PVsiaGVhZGVycyIsImNyZWRlbnRpYWxzIiwibWF4UmFuZ2VzIiwiYWxsb3dGdWxsRmlsZSJdLEJ0PVsiaGVhZGVycyIsIm1heFJhbmdlcyIsImFsbG93RnVsbEZpbGUiXSxDdD1bImhlYWRlcnMiLCJtYXhSYW5nZXMiLCJhbGxvd0Z1bGxGaWxlIl0sTHQ9WyJmb3JjZVhIUiJdO2Z1bmN0aW9uIEZ0KGUsdCl7dmFyIHI9T2JqZWN0LmtleXMoZSk7aWYoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyl7dmFyIG49T2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhlKTt0JiYobj1uLmZpbHRlcigoZnVuY3Rpb24odCl7cmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZSx0KS5lbnVtZXJhYmxlfSkpKSxyLnB1c2guYXBwbHkocixuKTt9cmV0dXJuIHJ9ZnVuY3Rpb24gVnQoZSl7Zm9yKHZhciByPTE7cjxhcmd1bWVudHMubGVuZ3RoO3IrKyl7dmFyIG49bnVsbCE9YXJndW1lbnRzW3JdP2FyZ3VtZW50c1tyXTp7fTtyJTI/RnQoT2JqZWN0KG4pLCEwKS5mb3JFYWNoKChmdW5jdGlvbihyKXt0KGUscixuW3JdKTt9KSk6T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnM/T2JqZWN0LmRlZmluZVByb3BlcnRpZXMoZSxPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhuKSk6RnQoT2JqZWN0KG4pKS5mb3JFYWNoKChmdW5jdGlvbih0KXtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSx0LE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iobix0KSk7fSkpO31yZXR1cm4gZX1mdW5jdGlvbiBHdChlKXt2YXIgdD1mdW5jdGlvbigpe2lmKCJ1bmRlZmluZWQiPT10eXBlb2YgUmVmbGVjdHx8IVJlZmxlY3QuY29uc3RydWN0KXJldHVybiAhMTtpZihSZWZsZWN0LmNvbnN0cnVjdC5zaGFtKXJldHVybiAhMTtpZigiZnVuY3Rpb24iPT10eXBlb2YgUHJveHkpcmV0dXJuICEwO3RyeXtyZXR1cm4gQm9vbGVhbi5wcm90b3R5cGUudmFsdWVPZi5jYWxsKFJlZmxlY3QuY29uc3RydWN0KEJvb2xlYW4sW10sKGZ1bmN0aW9uKCl7fSkpKSwhMH1jYXRjaChlKXtyZXR1cm4gITF9fSgpO3JldHVybiBmdW5jdGlvbigpe3ZhciByLG49dihlKTtpZih0KXt2YXIgaT12KHRoaXMpLmNvbnN0cnVjdG9yO3I9UmVmbGVjdC5jb25zdHJ1Y3Qobixhcmd1bWVudHMsaSk7fWVsc2Ugcj1uLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtyZXR1cm4gbSh0aGlzLHIpfX12YXIganQ9ZnVuY3Rpb24oZSl7aChhLGUpO3ZhciB0LHIsbixpPUd0KGEpO2Z1bmN0aW9uIGEoZSx0LHIsbil7dmFyIG87cmV0dXJuIGIodGhpcyxhKSwobz1pLmNhbGwodGhpcykpLmNsaWVudD1lLG8uaGVhZGVycz10LG8ubWF4UmFuZ2VzPXIsby5hbGxvd0Z1bGxGaWxlPW4sby5fZmlsZVNpemU9bnVsbCxvfXJldHVybiBjKGEsW3trZXk6ImZldGNoIix2YWx1ZToobj11KHgubWFyaygoZnVuY3Rpb24gZSh0LHIpe3ZhciBuPXRoaXM7cmV0dXJuIHgud3JhcCgoZnVuY3Rpb24oZSl7Zm9yKDs7KXN3aXRjaChlLnByZXY9ZS5uZXh0KXtjYXNlIDA6aWYoISh0aGlzLm1heFJhbmdlcz49dC5sZW5ndGgpKXtlLm5leHQ9NDticmVha31yZXR1cm4gZS5hYnJ1cHQoInJldHVybiIsdGhpcy5mZXRjaFNsaWNlcyh0LHIpKTtjYXNlIDQ6dGhpcy5tYXhSYW5nZXM+MCYmdC5sZW5ndGg7Y2FzZSA1OnJldHVybiBlLmFicnVwdCgicmV0dXJuIixQcm9taXNlLmFsbCh0Lm1hcCgoZnVuY3Rpb24oZSl7cmV0dXJuIG4uZmV0Y2hTbGljZShlLHIpfSkpKSk7Y2FzZSA2OmNhc2UiZW5kIjpyZXR1cm4gZS5zdG9wKCl9fSksZSx0aGlzKX0pKSksZnVuY3Rpb24oZSx0KXtyZXR1cm4gbi5hcHBseSh0aGlzLGFyZ3VtZW50cyl9KX0se2tleToiZmV0Y2hTbGljZXMiLHZhbHVlOihyPXUoeC5tYXJrKChmdW5jdGlvbiBlKHQscil7dmFyIG4saSxhLG8scyx1LGYsYyxsLGgsZCxwLG0sdj10aGlzO3JldHVybiB4LndyYXAoKGZ1bmN0aW9uKGUpe2Zvcig7Oylzd2l0Y2goZS5wcmV2PWUubmV4dCl7Y2FzZSAwOnJldHVybiBlLm5leHQ9Mix0aGlzLmNsaWVudC5yZXF1ZXN0KHtoZWFkZXJzOlZ0KFZ0KHt9LHRoaXMuaGVhZGVycykse30se1JhbmdlOiJieXRlcz0iLmNvbmNhdCh0Lm1hcCgoZnVuY3Rpb24oZSl7dmFyIHQ9ZS5vZmZzZXQscj1lLmxlbmd0aDtyZXR1cm4gIiIuY29uY2F0KHQsIi0iKS5jb25jYXQodCtyKX0pKS5qb2luKCIsIikpfSksc2lnbmFsOnJ9KTtjYXNlIDI6aWYoKG49ZS5zZW50KS5vayl7ZS5uZXh0PTc7YnJlYWt9dGhyb3cgbmV3IEVycm9yKCJFcnJvciBmZXRjaGluZyBkYXRhLiIpO2Nhc2UgNzppZigyMDYhPT1uLnN0YXR1cyl7ZS5uZXh0PTMyO2JyZWFrfWlmKGk9V2Uobi5nZXRIZWFkZXIoImNvbnRlbnQtdHlwZSIpKSxhPWkudHlwZSxvPWkucGFyYW1zLCJtdWx0aXBhcnQvYnl0ZXJhbmdlcyIhPT1hKXtlLm5leHQ9MTg7YnJlYWt9cmV0dXJuIGUudDA9UWUsZS5uZXh0PTEzLG4uZ2V0RGF0YSgpO2Nhc2UgMTM6cmV0dXJuIGUudDE9ZS5zZW50LGUudDI9by5ib3VuZGFyeSxzPSgwLCBlLnQwKShlLnQxLGUudDIpLHRoaXMuX2ZpbGVTaXplPXNbMF0uZmlsZVNpemV8fG51bGwsZS5hYnJ1cHQoInJldHVybiIscyk7Y2FzZSAxODpyZXR1cm4gZS5uZXh0PTIwLG4uZ2V0RGF0YSgpO2Nhc2UgMjA6aWYodT1lLnNlbnQsZj1KZShuLmdldEhlYWRlcigiY29udGVudC1yYW5nZSIpKSxjPWYuc3RhcnQsbD1mLmVuZCxoPWYudG90YWwsdGhpcy5fZmlsZVNpemU9aHx8bnVsbCxkPVt7ZGF0YTp1LG9mZnNldDpjLGxlbmd0aDpsLWN9XSwhKHQubGVuZ3RoPjEpKXtlLm5leHQ9Mjk7YnJlYWt9cmV0dXJuIGUubmV4dD0yNyxQcm9taXNlLmFsbCh0LnNsaWNlKDEpLm1hcCgoZnVuY3Rpb24oZSl7cmV0dXJuIHYuZmV0Y2hTbGljZShlLHIpfSkpKTtjYXNlIDI3OnJldHVybiBwPWUuc2VudCxlLmFicnVwdCgicmV0dXJuIixkLmNvbmNhdChwKSk7Y2FzZSAyOTpyZXR1cm4gZS5hYnJ1cHQoInJldHVybiIsZCk7Y2FzZSAzMjppZih0aGlzLmFsbG93RnVsbEZpbGUpe2UubmV4dD0zNDticmVha310aHJvdyBuZXcgRXJyb3IoIlNlcnZlciByZXNwb25kZWQgd2l0aCBmdWxsIGZpbGUiKTtjYXNlIDM0OnJldHVybiBlLm5leHQ9MzYsbi5nZXREYXRhKCk7Y2FzZSAzNjpyZXR1cm4gbT1lLnNlbnQsdGhpcy5fZmlsZVNpemU9bS5ieXRlTGVuZ3RoLGUuYWJydXB0KCJyZXR1cm4iLFt7ZGF0YTptLG9mZnNldDowLGxlbmd0aDptLmJ5dGVMZW5ndGh9XSk7Y2FzZSAzOTpjYXNlImVuZCI6cmV0dXJuIGUuc3RvcCgpfX0pLGUsdGhpcyl9KSkpLGZ1bmN0aW9uKGUsdCl7cmV0dXJuIHIuYXBwbHkodGhpcyxhcmd1bWVudHMpfSl9LHtrZXk6ImZldGNoU2xpY2UiLHZhbHVlOih0PXUoeC5tYXJrKChmdW5jdGlvbiBlKHQscil7dmFyIG4saSxhLG8scyx1LGY7cmV0dXJuIHgud3JhcCgoZnVuY3Rpb24oZSl7Zm9yKDs7KXN3aXRjaChlLnByZXY9ZS5uZXh0KXtjYXNlIDA6cmV0dXJuIG49dC5vZmZzZXQsaT10Lmxlbmd0aCxlLm5leHQ9Myx0aGlzLmNsaWVudC5yZXF1ZXN0KHtoZWFkZXJzOlZ0KFZ0KHt9LHRoaXMuaGVhZGVycykse30se1JhbmdlOiJieXRlcz0iLmNvbmNhdChuLCItIikuY29uY2F0KG4raSl9KSxzaWduYWw6cn0pO2Nhc2UgMzppZigoYT1lLnNlbnQpLm9rKXtlLm5leHQ9ODticmVha310aHJvdyBuZXcgRXJyb3IoIkVycm9yIGZldGNoaW5nIGRhdGEuIik7Y2FzZSA4OmlmKDIwNiE9PWEuc3RhdHVzKXtlLm5leHQ9MTc7YnJlYWt9cmV0dXJuIGUubmV4dD0xMSxhLmdldERhdGEoKTtjYXNlIDExOnJldHVybiBvPWUuc2VudCxzPUplKGEuZ2V0SGVhZGVyKCJjb250ZW50LXJhbmdlIikpLHU9cy50b3RhbCx0aGlzLl9maWxlU2l6ZT11fHxudWxsLGUuYWJydXB0KCJyZXR1cm4iLHtkYXRhOm8sb2Zmc2V0Om4sbGVuZ3RoOml9KTtjYXNlIDE3OmlmKHRoaXMuYWxsb3dGdWxsRmlsZSl7ZS5uZXh0PTE5O2JyZWFrfXRocm93IG5ldyBFcnJvcigiU2VydmVyIHJlc3BvbmRlZCB3aXRoIGZ1bGwgZmlsZSIpO2Nhc2UgMTk6cmV0dXJuIGUubmV4dD0yMSxhLmdldERhdGEoKTtjYXNlIDIxOnJldHVybiBmPWUuc2VudCx0aGlzLl9maWxlU2l6ZT1mLmJ5dGVMZW5ndGgsZS5hYnJ1cHQoInJldHVybiIse2RhdGE6ZixvZmZzZXQ6MCxsZW5ndGg6Zi5ieXRlTGVuZ3RofSk7Y2FzZSAyNDpjYXNlImVuZCI6cmV0dXJuIGUuc3RvcCgpfX0pLGUsdGhpcyl9KSkpLGZ1bmN0aW9uKGUscil7cmV0dXJuIHQuYXBwbHkodGhpcyxhcmd1bWVudHMpfSl9LHtrZXk6ImZpbGVTaXplIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZmlsZVNpemV9fV0pLGF9KCRlKTtmdW5jdGlvbiB6dChlLHQpe3ZhciByPXQuYmxvY2tTaXplLG49dC5jYWNoZVNpemU7cmV0dXJuIG51bGw9PT1yP2U6bmV3IHd0KGUse2Jsb2NrU2l6ZTpyLGNhY2hlU2l6ZTpufSl9ZnVuY3Rpb24gTnQoZSl7dmFyIHQ9YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOnt9LHI9dC5oZWFkZXJzLG49dm9pZCAwPT09cj97fTpyLGk9dC5jcmVkZW50aWFscyxhPXQubWF4UmFuZ2VzLG89dm9pZCAwPT09YT8wOmEscz10LmFsbG93RnVsbEZpbGUsdT12b2lkIDAhPT1zJiZzLGY9S2UodCxNdCksYz1uZXcgX3QoZSxpKSxsPW5ldyBqdChjLG4sbyx1KTtyZXR1cm4genQobCxmKX1mdW5jdGlvbiBLdChlKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06e30scj10LmhlYWRlcnMsbj12b2lkIDA9PT1yP3t9OnIsaT10Lm1heFJhbmdlcyxhPXZvaWQgMD09PWk/MDppLG89dC5hbGxvd0Z1bGxGaWxlLHM9dm9pZCAwIT09byYmbyx1PUtlKHQsQnQpLGY9bmV3IFN0KGUpLGM9bmV3IGp0KGYsbixhLHMpO3JldHVybiB6dChjLHUpfWZ1bmN0aW9uIFp0KGUpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTp7fSxyPXQuaGVhZGVycyxuPXZvaWQgMD09PXI/e306cixpPXQubWF4UmFuZ2VzLGE9dm9pZCAwPT09aT8wOmksbz10LmFsbG93RnVsbEZpbGUscz12b2lkIDAhPT1vJiZvLHU9S2UodCxDdCksZj1uZXcgUnQoZSksYz1uZXcganQoZixuLGEscyk7cmV0dXJuIHp0KGMsdSl9ZnVuY3Rpb24gSHQoZSl7dmFyIHQ9YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOnt9LHI9dC5mb3JjZVhIUixuPXZvaWQgMCE9PXImJnIsaT1LZSh0LEx0KTtyZXR1cm4gImZ1bmN0aW9uIiE9dHlwZW9mIGZldGNofHxuPyJ1bmRlZmluZWQiIT10eXBlb2YgWE1MSHR0cFJlcXVlc3Q/S3QoZSxpKTpadChlLGkpOk50KGUsaSl9ZnVuY3Rpb24gWXQoZSl7dmFyIHQ9ZnVuY3Rpb24oKXtpZigidW5kZWZpbmVkIj09dHlwZW9mIFJlZmxlY3R8fCFSZWZsZWN0LmNvbnN0cnVjdClyZXR1cm4gITE7aWYoUmVmbGVjdC5jb25zdHJ1Y3Quc2hhbSlyZXR1cm4gITE7aWYoImZ1bmN0aW9uIj09dHlwZW9mIFByb3h5KXJldHVybiAhMDt0cnl7cmV0dXJuIEJvb2xlYW4ucHJvdG90eXBlLnZhbHVlT2YuY2FsbChSZWZsZWN0LmNvbnN0cnVjdChCb29sZWFuLFtdLChmdW5jdGlvbigpe30pKSksITB9Y2F0Y2goZSl7cmV0dXJuICExfX0oKTtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgcixuPXYoZSk7aWYodCl7dmFyIGk9dih0aGlzKS5jb25zdHJ1Y3RvcjtyPVJlZmxlY3QuY29uc3RydWN0KG4sYXJndW1lbnRzLGkpO31lbHNlIHI9bi5hcHBseSh0aGlzLGFyZ3VtZW50cyk7cmV0dXJuIG0odGhpcyxyKX19dmFyIHF0PWZ1bmN0aW9uKGUpe2gocixlKTt2YXIgdD1ZdChyKTtmdW5jdGlvbiByKGUpe3ZhciBuO3JldHVybiBiKHRoaXMsciksKG49dC5jYWxsKHRoaXMpKS5hcnJheUJ1ZmZlcj1lLG59cmV0dXJuIGMocixbe2tleToiZmV0Y2hTbGljZSIsdmFsdWU6ZnVuY3Rpb24oZSx0KXtpZih0JiZ0LmFib3J0ZWQpdGhyb3cgbmV3IGh0KCJSZXF1ZXN0IGFib3J0ZWQiKTtyZXR1cm4gdGhpcy5hcnJheUJ1ZmZlci5zbGljZShlLm9mZnNldCxlLm9mZnNldCtlLmxlbmd0aCl9fV0pLHJ9KCRlKTtmdW5jdGlvbiBYdChlKXtyZXR1cm4gbmV3IHF0KGUpfWZ1bmN0aW9uIFd0KGUpe3ZhciB0PWZ1bmN0aW9uKCl7aWYoInVuZGVmaW5lZCI9PXR5cGVvZiBSZWZsZWN0fHwhUmVmbGVjdC5jb25zdHJ1Y3QpcmV0dXJuICExO2lmKFJlZmxlY3QuY29uc3RydWN0LnNoYW0pcmV0dXJuICExO2lmKCJmdW5jdGlvbiI9PXR5cGVvZiBQcm94eSlyZXR1cm4gITA7dHJ5e3JldHVybiBCb29sZWFuLnByb3RvdHlwZS52YWx1ZU9mLmNhbGwoUmVmbGVjdC5jb25zdHJ1Y3QoQm9vbGVhbixbXSwoZnVuY3Rpb24oKXt9KSkpLCEwfWNhdGNoKGUpe3JldHVybiAhMX19KCk7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIHIsbj12KGUpO2lmKHQpe3ZhciBpPXYodGhpcykuY29uc3RydWN0b3I7cj1SZWZsZWN0LmNvbnN0cnVjdChuLGFyZ3VtZW50cyxpKTt9ZWxzZSByPW4uYXBwbHkodGhpcyxhcmd1bWVudHMpO3JldHVybiBtKHRoaXMscil9fXZhciBKdD1mdW5jdGlvbihlKXtoKG4sZSk7dmFyIHQscj1XdChuKTtmdW5jdGlvbiBuKGUpe3ZhciB0O3JldHVybiBiKHRoaXMsbiksKHQ9ci5jYWxsKHRoaXMpKS5maWxlPWUsdH1yZXR1cm4gYyhuLFt7a2V5OiJmZXRjaFNsaWNlIix2YWx1ZToodD11KHgubWFyaygoZnVuY3Rpb24gZSh0LHIpe3ZhciBuPXRoaXM7cmV0dXJuIHgud3JhcCgoZnVuY3Rpb24oZSl7Zm9yKDs7KXN3aXRjaChlLnByZXY9ZS5uZXh0KXtjYXNlIDA6cmV0dXJuIGUuYWJydXB0KCJyZXR1cm4iLG5ldyBQcm9taXNlKChmdW5jdGlvbihlLGkpe3ZhciBhPW4uZmlsZS5zbGljZSh0Lm9mZnNldCx0Lm9mZnNldCt0Lmxlbmd0aCksbz1uZXcgRmlsZVJlYWRlcjtvLm9ubG9hZD1mdW5jdGlvbih0KXtyZXR1cm4gZSh0LnRhcmdldC5yZXN1bHQpfSxvLm9uZXJyb3I9aSxvLm9uYWJvcnQ9aSxvLnJlYWRBc0FycmF5QnVmZmVyKGEpLHImJnIuYWRkRXZlbnRMaXN0ZW5lcigiYWJvcnQiLChmdW5jdGlvbigpe3JldHVybiBvLmFib3J0KCl9KSk7fSkpKTtjYXNlIDE6Y2FzZSJlbmQiOnJldHVybiBlLnN0b3AoKX19KSxlKX0pKSksZnVuY3Rpb24oZSxyKXtyZXR1cm4gdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9KX1dKSxufSgkZSk7ZnVuY3Rpb24gUXQoZSl7cmV0dXJuIG5ldyBKdChlKX1mdW5jdGlvbiAkdChlKXt2YXIgdD1mdW5jdGlvbigpe2lmKCJ1bmRlZmluZWQiPT10eXBlb2YgUmVmbGVjdHx8IVJlZmxlY3QuY29uc3RydWN0KXJldHVybiAhMTtpZihSZWZsZWN0LmNvbnN0cnVjdC5zaGFtKXJldHVybiAhMTtpZigiZnVuY3Rpb24iPT10eXBlb2YgUHJveHkpcmV0dXJuICEwO3RyeXtyZXR1cm4gQm9vbGVhbi5wcm90b3R5cGUudmFsdWVPZi5jYWxsKFJlZmxlY3QuY29uc3RydWN0KEJvb2xlYW4sW10sKGZ1bmN0aW9uKCl7fSkpKSwhMH1jYXRjaChlKXtyZXR1cm4gITF9fSgpO3JldHVybiBmdW5jdGlvbigpe3ZhciByLG49dihlKTtpZih0KXt2YXIgaT12KHRoaXMpLmNvbnN0cnVjdG9yO3I9UmVmbGVjdC5jb25zdHJ1Y3Qobixhcmd1bWVudHMsaSk7fWVsc2Ugcj1uLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtyZXR1cm4gbSh0aGlzLHIpfX1mdW5jdGlvbiBlcihlKXtyZXR1cm4gbmV3IFByb21pc2UoKGZ1bmN0aW9uKHQscil7VHQuY2xvc2UoZSwoZnVuY3Rpb24oZSl7ZT9yKGUpOnQoKTt9KSk7fSkpfWZ1bmN0aW9uIHRyKCl7Zm9yKHZhciBlPWFyZ3VtZW50cy5sZW5ndGgsdD1uZXcgQXJyYXkoZSkscj0wO3I8ZTtyKyspdFtyXT1hcmd1bWVudHNbcl07cmV0dXJuIG5ldyBQcm9taXNlKChmdW5jdGlvbihlLHIpe1R0LnJlYWQuYXBwbHkoVHQsdC5jb25jYXQoW2Z1bmN0aW9uKHQsbixpKXt0P3IodCk6ZSh7Ynl0ZXNSZWFkOm4sYnVmZmVyOml9KTt9XSkpO30pKX12YXIgcnI9ZnVuY3Rpb24oZSl7aChpLGUpO3ZhciB0LHIsbj0kdChpKTtmdW5jdGlvbiBpKGUpe3ZhciB0O3JldHVybiBiKHRoaXMsaSksKHQ9bi5jYWxsKHRoaXMpKS5wYXRoPWUsdC5vcGVuUmVxdWVzdD1mdW5jdGlvbihlLHQpe3ZhciByPWFyZ3VtZW50cy5sZW5ndGg+MiYmdm9pZCAwIT09YXJndW1lbnRzWzJdP2FyZ3VtZW50c1syXTp2b2lkIDA7cmV0dXJuIG5ldyBQcm9taXNlKChmdW5jdGlvbihuLGkpe1R0Lm9wZW4oZSx0LHIsKGZ1bmN0aW9uKGUsdCl7ZT9pKGUpOm4odCk7fSkpO30pKX0oZSwiciIpLHR9cmV0dXJuIGMoaSxbe2tleToiZmV0Y2hTbGljZSIsdmFsdWU6KHI9dSh4Lm1hcmsoKGZ1bmN0aW9uIGUodCl7dmFyIHIsbixpO3JldHVybiB4LndyYXAoKGZ1bmN0aW9uKGUpe2Zvcig7Oylzd2l0Y2goZS5wcmV2PWUubmV4dCl7Y2FzZSAwOnJldHVybiBlLm5leHQ9Mix0aGlzLm9wZW5SZXF1ZXN0O2Nhc2UgMjpyZXR1cm4gcj1lLnNlbnQsZS5uZXh0PTUsdHIocixCdWZmZXIuYWxsb2ModC5sZW5ndGgpLDAsdC5sZW5ndGgsdC5vZmZzZXQpO2Nhc2UgNTpyZXR1cm4gbj1lLnNlbnQsaT1uLmJ1ZmZlcixlLmFicnVwdCgicmV0dXJuIixpLmJ1ZmZlcik7Y2FzZSA4OmNhc2UiZW5kIjpyZXR1cm4gZS5zdG9wKCl9fSksZSx0aGlzKX0pKSksZnVuY3Rpb24oZSl7cmV0dXJuIHIuYXBwbHkodGhpcyxhcmd1bWVudHMpfSl9LHtrZXk6ImNsb3NlIix2YWx1ZToodD11KHgubWFyaygoZnVuY3Rpb24gZSgpe3ZhciB0O3JldHVybiB4LndyYXAoKGZ1bmN0aW9uKGUpe2Zvcig7Oylzd2l0Y2goZS5wcmV2PWUubmV4dCl7Y2FzZSAwOnJldHVybiBlLm5leHQ9Mix0aGlzLm9wZW5SZXF1ZXN0O2Nhc2UgMjpyZXR1cm4gdD1lLnNlbnQsZS5uZXh0PTUsZXIodCk7Y2FzZSA1OmNhc2UiZW5kIjpyZXR1cm4gZS5zdG9wKCl9fSksZSx0aGlzKX0pKSksZnVuY3Rpb24oKXtyZXR1cm4gdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9KX1dKSxpfSgkZSk7ZnVuY3Rpb24gbnIoZSl7cmV0dXJuIG5ldyBycihlKX1mdW5jdGlvbiBpcihlLHQpe3ZhciByPSJ1bmRlZmluZWQiIT10eXBlb2YgU3ltYm9sJiZlW1N5bWJvbC5pdGVyYXRvcl18fGVbIkBAaXRlcmF0b3IiXTtpZighcil7aWYoQXJyYXkuaXNBcnJheShlKXx8KHI9ZnVuY3Rpb24oZSx0KXtpZighZSlyZXR1cm47aWYoInN0cmluZyI9PXR5cGVvZiBlKXJldHVybiBhcihlLHQpO3ZhciByPU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChlKS5zbGljZSg4LC0xKTsiT2JqZWN0Ij09PXImJmUuY29uc3RydWN0b3ImJihyPWUuY29uc3RydWN0b3IubmFtZSk7aWYoIk1hcCI9PT1yfHwiU2V0Ij09PXIpcmV0dXJuIEFycmF5LmZyb20oZSk7aWYoIkFyZ3VtZW50cyI9PT1yfHwvXig/OlVpfEkpbnQoPzo4fDE2fDMyKSg/OkNsYW1wZWQpP0FycmF5JC8udGVzdChyKSlyZXR1cm4gYXIoZSx0KX0oZSkpfHx0JiZlJiYibnVtYmVyIj09dHlwZW9mIGUubGVuZ3RoKXtyJiYoZT1yKTt2YXIgbj0wLGk9ZnVuY3Rpb24oKXt9O3JldHVybiB7czppLG46ZnVuY3Rpb24oKXtyZXR1cm4gbj49ZS5sZW5ndGg/e2RvbmU6ITB9Ontkb25lOiExLHZhbHVlOmVbbisrXX19LGU6ZnVuY3Rpb24oZSl7dGhyb3cgZX0sZjppfX10aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIGF0dGVtcHQgdG8gaXRlcmF0ZSBub24taXRlcmFibGUgaW5zdGFuY2UuXG5JbiBvcmRlciB0byBiZSBpdGVyYWJsZSwgbm9uLWFycmF5IG9iamVjdHMgbXVzdCBoYXZlIGEgW1N5bWJvbC5pdGVyYXRvcl0oKSBtZXRob2QuIil9dmFyIGEsbz0hMCxzPSExO3JldHVybiB7czpmdW5jdGlvbigpe3I9ci5jYWxsKGUpO30sbjpmdW5jdGlvbigpe3ZhciBlPXIubmV4dCgpO3JldHVybiBvPWUuZG9uZSxlfSxlOmZ1bmN0aW9uKGUpe3M9ITAsYT1lO30sZjpmdW5jdGlvbigpe3RyeXtvfHxudWxsPT1yLnJldHVybnx8ci5yZXR1cm4oKTt9ZmluYWxseXtpZihzKXRocm93IGF9fX19ZnVuY3Rpb24gYXIoZSx0KXsobnVsbD09dHx8dD5lLmxlbmd0aCkmJih0PWUubGVuZ3RoKTtmb3IodmFyIHI9MCxuPW5ldyBBcnJheSh0KTtyPHQ7cisrKW5bcl09ZVtyXTtyZXR1cm4gbn12YXIgb3I9c3QoUSksc3I9c3QoY2UpLHVyPXt9O2F0KHVyLG9yKSxhdCh1cixzcik7dmFyIGZyPXN0KG5lKSxjcj0xZTMsbHI9e25leHRaZXJvOmZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByPXQ7MCE9PWVbcl07KXIrKztyZXR1cm4gcn0scmVhZFVzaG9ydDpmdW5jdGlvbihlLHQpe3JldHVybiBlW3RdPDw4fGVbdCsxXX0scmVhZFNob3J0OmZ1bmN0aW9uKGUsdCl7dmFyIHI9bHIudWk4O3JldHVybiByWzBdPWVbdCsxXSxyWzFdPWVbdCswXSxsci5pMTZbMF19LHJlYWRJbnQ6ZnVuY3Rpb24oZSx0KXt2YXIgcj1sci51aTg7cmV0dXJuIHJbMF09ZVt0KzNdLHJbMV09ZVt0KzJdLHJbMl09ZVt0KzFdLHJbM109ZVt0KzBdLGxyLmkzMlswXX0scmVhZFVpbnQ6ZnVuY3Rpb24oZSx0KXt2YXIgcj1sci51aTg7cmV0dXJuIHJbMF09ZVt0KzNdLHJbMV09ZVt0KzJdLHJbMl09ZVt0KzFdLHJbM109ZVt0KzBdLGxyLnVpMzJbMF19LHJlYWRBU0NJSTpmdW5jdGlvbihlLHQscil7cmV0dXJuIHIubWFwKChmdW5jdGlvbihyKXtyZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZShlW3Qrcl0pfSkpLmpvaW4oIiIpfSxyZWFkRmxvYXQ6ZnVuY3Rpb24oZSx0KXt2YXIgcj1sci51aTg7cmV0dXJuIHV0KDQsKGZ1bmN0aW9uKG4pe3Jbbl09ZVt0KzMtbl07fSkpLGxyLmZsMzJbMF19LHJlYWREb3VibGU6ZnVuY3Rpb24oZSx0KXt2YXIgcj1sci51aTg7cmV0dXJuIHV0KDgsKGZ1bmN0aW9uKG4pe3Jbbl09ZVt0Kzctbl07fSkpLGxyLmZsNjRbMF19LHdyaXRlVXNob3J0OmZ1bmN0aW9uKGUsdCxyKXtlW3RdPXI+PjgmMjU1LGVbdCsxXT0yNTUmcjt9LHdyaXRlVWludDpmdW5jdGlvbihlLHQscil7ZVt0XT1yPj4yNCYyNTUsZVt0KzFdPXI+PjE2JjI1NSxlW3QrMl09cj4+OCYyNTUsZVt0KzNdPXI+PjAmMjU1O30sd3JpdGVBU0NJSTpmdW5jdGlvbihlLHQscil7dXQoci5sZW5ndGgsKGZ1bmN0aW9uKG4pe2VbdCtuXT1yLmNoYXJDb2RlQXQobik7fSkpO30sdWk4Om5ldyBVaW50OEFycmF5KDgpfTtsci5mbDY0PW5ldyBGbG9hdDY0QXJyYXkobHIudWk4LmJ1ZmZlciksbHIud3JpdGVEb3VibGU9ZnVuY3Rpb24oZSx0LHIpe2xyLmZsNjRbMF09cix1dCg4LChmdW5jdGlvbihyKXtlW3Qrcl09bHIudWk4Wzctcl07fSkpO307dmFyIGhyPWZ1bmN0aW9uKGUpe3ZhciB0PW5ldyBVaW50OEFycmF5KGNyKSxyPTQsbj1scjt0WzBdPTc3LHRbMV09NzcsdFszXT00Mjt2YXIgaT04O2lmKG4ud3JpdGVVaW50KHQscixpKSxyKz00LGUuZm9yRWFjaCgoZnVuY3Rpb24ocixhKXt2YXIgbz1mdW5jdGlvbihlLHQscixuKXt2YXIgaT1yLGE9T2JqZWN0LmtleXMobikuZmlsdGVyKChmdW5jdGlvbihlKXtyZXR1cm4gbnVsbCE9ZSYmInVuZGVmaW5lZCIhPT1lfSkpO2Uud3JpdGVVc2hvcnQodCxpLGEubGVuZ3RoKTt2YXIgbyxzPShpKz0yKSsxMiphLmxlbmd0aCs0LHU9aXIoYSk7dHJ5e3ZhciBmPWZ1bmN0aW9uKCl7dmFyIHI9by52YWx1ZSxhPW51bGw7Im51bWJlciI9PXR5cGVvZiByP2E9cjoic3RyaW5nIj09dHlwZW9mIHImJihhPXBhcnNlSW50KHIsMTApKTt2YXIgdT10ZVthXSxmPWZyW3VdO2lmKG51bGw9PXV8fHZvaWQgMD09PXV8fHZvaWQgMD09PXUpdGhyb3cgbmV3IEVycm9yKCJ1bmtub3duIHR5cGUgb2YgdGFnOiAiLmNvbmNhdChhKSk7dmFyIGM9bltyXTtpZih2b2lkIDA9PT1jKXRocm93IG5ldyBFcnJvcigiZmFpbGVkIHRvIGdldCB2YWx1ZSBmb3Iga2V5ICIuY29uY2F0KHIpKTsiQVNDSUkiPT09dSYmInN0cmluZyI9PXR5cGVvZiBjJiYhMT09PW90KGMsIlwwIikmJihjKz0iXDAiKTt2YXIgbD1jLmxlbmd0aDtlLndyaXRlVXNob3J0KHQsaSxhKSxpKz0yLGUud3JpdGVVc2hvcnQodCxpLGYpLGkrPTIsZS53cml0ZVVpbnQodCxpLGwpO3ZhciBoPVstMSwxLDEsMiw0LDgsMCwwLDAsMCwwLDAsOF1bZl0qbCxkPWkrPTQ7aD40JiYoZS53cml0ZVVpbnQodCxpLHMpLGQ9cyksIkFTQ0lJIj09PXU/ZS53cml0ZUFTQ0lJKHQsZCxjKToiU0hPUlQiPT09dT91dChsLChmdW5jdGlvbihyKXtlLndyaXRlVXNob3J0KHQsZCsyKnIsY1tyXSk7fSkpOiJMT05HIj09PXU/dXQobCwoZnVuY3Rpb24ocil7ZS53cml0ZVVpbnQodCxkKzQqcixjW3JdKTt9KSk6IlJBVElPTkFMIj09PXU/dXQobCwoZnVuY3Rpb24ocil7ZS53cml0ZVVpbnQodCxkKzgqcixNYXRoLnJvdW5kKDFlNCpjW3JdKSksZS53cml0ZVVpbnQodCxkKzgqcis0LDFlNCk7fSkpOiJET1VCTEUiPT09dSYmdXQobCwoZnVuY3Rpb24ocil7ZS53cml0ZURvdWJsZSh0LGQrOCpyLGNbcl0pO30pKSxoPjQmJihzKz1oKz0xJmgpLGkrPTQ7fTtmb3IodS5zKCk7IShvPXUubigpKS5kb25lOylmKCk7fWNhdGNoKGUpe3UuZShlKTt9ZmluYWxseXt1LmYoKTt9cmV0dXJuIFtpLHNdfShuLHQsaSxyKTtpPW9bMV0sYTxlLmxlbmd0aC0xJiZuLndyaXRlVWludCh0LG9bMF0saSk7fSkpLHQuc2xpY2UpcmV0dXJuIHQuc2xpY2UoMCxpKS5idWZmZXI7Zm9yKHZhciBhPW5ldyBVaW50OEFycmF5KGkpLG89MDtvPGk7bysrKWFbb109dFtvXTtyZXR1cm4gYS5idWZmZXJ9LGRyPVtbIkNvbXByZXNzaW9uIiwxXSxbIlBsYW5hckNvbmZpZ3VyYXRpb24iLDFdLFsiRXh0cmFTYW1wbGVzIiwwXV07ZnVuY3Rpb24gcHIoZSx0KXt2YXIgcixuLGksYTsibnVtYmVyIj09dHlwZW9mIGVbMF0/KHI9dC5oZWlnaHR8fHQuSW1hZ2VMZW5ndGgsaT10LndpZHRofHx0LkltYWdlV2lkdGgsbj1lLmxlbmd0aC8ocippKSxhPWUpOihuPWUubGVuZ3RoLHI9ZVswXS5sZW5ndGgsaT1lWzBdWzBdLmxlbmd0aCxhPVtdLHV0KHIsKGZ1bmN0aW9uKHQpe3V0KGksKGZ1bmN0aW9uKHIpe3V0KG4sKGZ1bmN0aW9uKG4pe2EucHVzaChlW25dW3RdW3JdKTt9KSk7fSkpO30pKSksdC5JbWFnZUxlbmd0aD1yLGRlbGV0ZSB0LmhlaWdodCx0LkltYWdlV2lkdGg9aSxkZWxldGUgdC53aWR0aCx0LkJpdHNQZXJTYW1wbGV8fCh0LkJpdHNQZXJTYW1wbGU9dXQobiwoZnVuY3Rpb24oKXtyZXR1cm4gOH0pKSksZHIuZm9yRWFjaCgoZnVuY3Rpb24oZSl7dmFyIHI9ZVswXTtpZighdFtyXSl7dmFyIG49ZVsxXTt0W3JdPW47fX0pKSx0LlBob3RvbWV0cmljSW50ZXJwcmV0YXRpb258fCh0LlBob3RvbWV0cmljSW50ZXJwcmV0YXRpb249Mz09PXQuQml0c1BlclNhbXBsZS5sZW5ndGg/MjoxKSx0LlNhbXBsZXNQZXJQaXhlbHx8KHQuU2FtcGxlc1BlclBpeGVsPVtuXSksdC5TdHJpcEJ5dGVDb3VudHN8fCh0LlN0cmlwQnl0ZUNvdW50cz1bbipyKmldKSx0Lk1vZGVsUGl4ZWxTY2FsZXx8KHQuTW9kZWxQaXhlbFNjYWxlPVszNjAvaSwxODAvciwwXSksdC5TYW1wbGVGb3JtYXR8fCh0LlNhbXBsZUZvcm1hdD11dChuLChmdW5jdGlvbigpe3JldHVybiAxfSkpKSx0Lmhhc093blByb3BlcnR5KCJHZW9ncmFwaGljVHlwZUdlb0tleSIpfHx0Lmhhc093blByb3BlcnR5KCJQcm9qZWN0ZWRDU1R5cGVHZW9LZXkiKXx8KHQuR2VvZ3JhcGhpY1R5cGVHZW9LZXk9NDMyNix0Lk1vZGVsVGllcG9pbnQ9WzAsMCwwLC0xODAsOTAsMF0sdC5HZW9nQ2l0YXRpb25HZW9LZXk9IldHUyA4NCIsdC5HVE1vZGVsVHlwZUdlb0tleT0yKTt2YXIgbz1PYmplY3Qua2V5cyh0KS5maWx0ZXIoKGZ1bmN0aW9uKGUpe3JldHVybiBvdChlLCJHZW9LZXkiKX0pKS5zb3J0KChmdW5jdGlvbihlLHQpe3JldHVybiB1cltlXS11clt0XX0pKTtpZighdC5HZW9Bc2NpaVBhcmFtcyl7dmFyIHM9IiI7by5mb3JFYWNoKChmdW5jdGlvbihlKXt2YXIgcj1OdW1iZXIodXJbZV0pOyJBU0NJSSI9PT10ZVtyXSYmKHMrPSIiLmNvbmNhdCh0W2VdLnRvU3RyaW5nKCksIlwwIikpO30pKSxzLmxlbmd0aD4wJiYodC5HZW9Bc2NpaVBhcmFtcz1zKTt9aWYoIXQuR2VvS2V5RGlyZWN0b3J5KXt2YXIgdT1bMSwxLDAsby5sZW5ndGhdO28uZm9yRWFjaCgoZnVuY3Rpb24oZSl7dmFyIHIsbixpLGE9TnVtYmVyKHVyW2VdKTt1LnB1c2goYSksIlNIT1JUIj09PXRlW2FdPyhyPTEsbj0wLGk9dFtlXSk6Ikdlb2dDaXRhdGlvbkdlb0tleSI9PT1lPyhyPXQuR2VvQXNjaWlQYXJhbXMubGVuZ3RoLG49TnVtYmVyKHVyLkdlb0FzY2lpUGFyYW1zKSxpPTApOmNvbnNvbGUubG9nKCJbZ2VvdGlmZi5qc10gY291bGRuJ3QgZ2V0IFRJRkZUYWdMb2NhdGlvbiBmb3IgIi5jb25jYXQoZSkpLHUucHVzaChuKSx1LnB1c2gociksdS5wdXNoKGkpO30pKSx0Lkdlb0tleURpcmVjdG9yeT11O31mb3IodmFyIGYgaW4gbylvLmhhc093blByb3BlcnR5KGYpJiZkZWxldGUgdFtmXTtbIkNvbXByZXNzaW9uIiwiRXh0cmFTYW1wbGVzIiwiR2VvZ3JhcGhpY1R5cGVHZW9LZXkiLCJHVE1vZGVsVHlwZUdlb0tleSIsIkdUUmFzdGVyVHlwZUdlb0tleSIsIkltYWdlTGVuZ3RoIiwiSW1hZ2VXaWR0aCIsIk9yaWVudGF0aW9uIiwiUGhvdG9tZXRyaWNJbnRlcnByZXRhdGlvbiIsIlByb2plY3RlZENTVHlwZUdlb0tleSIsIlBsYW5hckNvbmZpZ3VyYXRpb24iLCJSZXNvbHV0aW9uVW5pdCIsIlNhbXBsZXNQZXJQaXhlbCIsIlhQb3NpdGlvbiIsIllQb3NpdGlvbiJdLmZvckVhY2goKGZ1bmN0aW9uKGUpe3ZhciByO3RbZV0mJih0W2VdPShyPXRbZV0sQXJyYXkuaXNBcnJheShyKT9yOltyXSkpO30pKTt2YXIgYz1mdW5jdGlvbihlKXt2YXIgdD17fTtmb3IodmFyIHIgaW4gZSkiU3RyaXBPZmZzZXRzIiE9PXImJih1cltyXXx8Y29uc29sZS5lcnJvcihyLCJub3QgaW4gbmFtZTJjb2RlOiIsT2JqZWN0LmtleXModXIpKSx0W3VyW3JdXT1lW3JdKTtyZXR1cm4gdH0odCksbD1mdW5jdGlvbihlLHQscixuKXtpZihudWxsPT1yKXRocm93IG5ldyBFcnJvcigieW91IHBhc3NlZCBpbnRvIGVuY29kZUltYWdlIGEgd2lkdGggb2YgdHlwZSAiLmNvbmNhdChyKSk7aWYobnVsbD09dCl0aHJvdyBuZXcgRXJyb3IoInlvdSBwYXNzZWQgaW50byBlbmNvZGVJbWFnZSBhIHdpZHRoIG9mIHR5cGUgIi5jb25jYXQodCkpO3ZhciBpPXsyNTY6W3RdLDI1Nzpbcl0sMjczOltjcl0sMjc4OltyXSwzMDU6Imdlb3RpZmYuanMifTtpZihuKWZvcih2YXIgYSBpbiBuKW4uaGFzT3duUHJvcGVydHkoYSkmJihpW2FdPW5bYV0pO3ZhciBvPW5ldyBVaW50OEFycmF5KGhyKFtpXSkpLHM9bmV3IFVpbnQ4QXJyYXkoZSksdT1pWzI3N10sZj1uZXcgVWludDhBcnJheShjcit0KnIqdSk7cmV0dXJuIHV0KG8ubGVuZ3RoLChmdW5jdGlvbihlKXtmW2VdPW9bZV07fSkpLGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByPWUubGVuZ3RoLG49MDtuPHI7bisrKXQoZVtuXSxuKTt9KHMsKGZ1bmN0aW9uKGUsdCl7Zltjcit0XT1lO30pKSxmLmJ1ZmZlcn0oYSxpLHIsYyk7cmV0dXJuIGx9dmFyIG1yPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe2IodGhpcyxlKTt9cmV0dXJuIGMoZSxbe2tleToibG9nIix2YWx1ZTpmdW5jdGlvbigpe319LHtrZXk6ImRlYnVnIix2YWx1ZTpmdW5jdGlvbigpe319LHtrZXk6ImluZm8iLHZhbHVlOmZ1bmN0aW9uKCl7fX0se2tleToid2FybiIsdmFsdWU6ZnVuY3Rpb24oKXt9fSx7a2V5OiJlcnJvciIsdmFsdWU6ZnVuY3Rpb24oKXt9fSx7a2V5OiJ0aW1lIix2YWx1ZTpmdW5jdGlvbigpe319LHtrZXk6InRpbWVFbmQiLHZhbHVlOmZ1bmN0aW9uKCl7fX1dKSxlfSgpO2Z1bmN0aW9uIHZyKGUsdCl7dmFyIHI9ZS5sZW5ndGgtdCxuPTA7ZG97Zm9yKHZhciBpPXQ7aT4wO2ktLSllW24rdF0rPWVbbl0sbisrO3ItPXQ7fXdoaWxlKHI+MCl9ZnVuY3Rpb24geXIoZSx0LHIpe2Zvcih2YXIgbj0wLGk9ZS5sZW5ndGgsYT1pL3I7aT50Oyl7Zm9yKHZhciBvPXQ7bz4wOy0tbyllW24rdF0rPWVbbl0sKytuO2ktPXQ7fWZvcih2YXIgcz1lLnNsaWNlKCksdT0wO3U8YTsrK3UpZm9yKHZhciBmPTA7ZjxyOysrZillW3IqdStmXT1zWyhyLWYtMSkqYSt1XTt9ZnVuY3Rpb24gZ3IoZSx0LHIsbixpLGEpe2lmKCF0fHwxPT09dClyZXR1cm4gZTtmb3IodmFyIG89MDtvPGkubGVuZ3RoOysrbyl7aWYoaVtvXSU4IT0wKXRocm93IG5ldyBFcnJvcigiV2hlbiBkZWNvZGluZyB3aXRoIHByZWRpY3Rvciwgb25seSBtdWx0aXBsZSBvZiA4IGJpdHMgYXJlIHN1cHBvcnRlZC4iKTtpZihpW29dIT09aVswXSl0aHJvdyBuZXcgRXJyb3IoIldoZW4gZGVjb2Rpbmcgd2l0aCBwcmVkaWN0b3IsIGFsbCBzYW1wbGVzIG11c3QgaGF2ZSB0aGUgc2FtZSBzaXplLiIpfWZvcih2YXIgcz1pWzBdLzgsdT0yPT09YT8xOmkubGVuZ3RoLGY9MDtmPG4mJiEoZip1KnIqcz49ZS5ieXRlTGVuZ3RoKTsrK2Ype3ZhciBjPXZvaWQgMDtpZigyPT09dCl7c3dpdGNoKGlbMF0pe2Nhc2UgODpjPW5ldyBVaW50OEFycmF5KGUsZip1KnIqcyx1KnIqcyk7YnJlYWs7Y2FzZSAxNjpjPW5ldyBVaW50MTZBcnJheShlLGYqdSpyKnMsdSpyKnMvMik7YnJlYWs7Y2FzZSAzMjpjPW5ldyBVaW50MzJBcnJheShlLGYqdSpyKnMsdSpyKnMvNCk7YnJlYWs7ZGVmYXVsdDp0aHJvdyBuZXcgRXJyb3IoIlByZWRpY3RvciAyIG5vdCBhbGxvd2VkIHdpdGggIi5jb25jYXQoaVswXSwiIGJpdHMgcGVyIHNhbXBsZS4iKSl9dnIoYyx1KTt9ZWxzZSAzPT09dCYmeXIoYz1uZXcgVWludDhBcnJheShlLGYqdSpyKnMsdSpyKnMpLHUscyk7fXJldHVybiBlfW5ldyBtcjt2YXIgd3I9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7Yih0aGlzLGUpO312YXIgdDtyZXR1cm4gYyhlLFt7a2V5OiJkZWNvZGUiLHZhbHVlOih0PXUoeC5tYXJrKChmdW5jdGlvbiBlKHQscil7dmFyIG4saSxhLG8scztyZXR1cm4geC53cmFwKChmdW5jdGlvbihlKXtmb3IoOzspc3dpdGNoKGUucHJldj1lLm5leHQpe2Nhc2UgMDpyZXR1cm4gZS5uZXh0PTIsdGhpcy5kZWNvZGVCbG9jayhyKTtjYXNlIDI6aWYobj1lLnNlbnQsMT09PShpPXQuUHJlZGljdG9yfHwxKSl7ZS5uZXh0PTk7YnJlYWt9cmV0dXJuIGE9IXQuU3RyaXBPZmZzZXRzLG89YT90LlRpbGVXaWR0aDp0LkltYWdlV2lkdGgscz1hP3QuVGlsZUxlbmd0aDp0LlJvd3NQZXJTdHJpcHx8dC5JbWFnZUxlbmd0aCxlLmFicnVwdCgicmV0dXJuIixncihuLGksbyxzLHQuQml0c1BlclNhbXBsZSx0LlBsYW5hckNvbmZpZ3VyYXRpb24pKTtjYXNlIDk6cmV0dXJuIGUuYWJydXB0KCJyZXR1cm4iLG4pO2Nhc2UgMTA6Y2FzZSJlbmQiOnJldHVybiBlLnN0b3AoKX19KSxlLHRoaXMpfSkpKSxmdW5jdGlvbihlLHIpe3JldHVybiB0LmFwcGx5KHRoaXMsYXJndW1lbnRzKX0pfV0pLGV9KCk7ZnVuY3Rpb24gYnIoZSx0KXt2YXIgcj1PYmplY3Qua2V5cyhlKTtpZihPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKXt2YXIgbj1PYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKGUpO3QmJihuPW4uZmlsdGVyKChmdW5jdGlvbih0KXtyZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihlLHQpLmVudW1lcmFibGV9KSkpLHIucHVzaC5hcHBseShyLG4pO31yZXR1cm4gcn1mdW5jdGlvbiBrcihlKXtmb3IodmFyIHI9MTtyPGFyZ3VtZW50cy5sZW5ndGg7cisrKXt2YXIgbj1udWxsIT1hcmd1bWVudHNbcl0/YXJndW1lbnRzW3JdOnt9O3IlMj9icihPYmplY3QobiksITApLmZvckVhY2goKGZ1bmN0aW9uKHIpe3QoZSxyLG5bcl0pO30pKTpPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycz9PYmplY3QuZGVmaW5lUHJvcGVydGllcyhlLE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKG4pKTpicihPYmplY3QobikpLmZvckVhY2goKGZ1bmN0aW9uKHQpe09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLHQsT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihuLHQpKTt9KSk7fXJldHVybiBlfWZ1bmN0aW9uIHhyKGUpe3ZhciB0PWZ1bmN0aW9uKCl7aWYoInVuZGVmaW5lZCI9PXR5cGVvZiBSZWZsZWN0fHwhUmVmbGVjdC5jb25zdHJ1Y3QpcmV0dXJuICExO2lmKFJlZmxlY3QuY29uc3RydWN0LnNoYW0pcmV0dXJuICExO2lmKCJmdW5jdGlvbiI9PXR5cGVvZiBQcm94eSlyZXR1cm4gITA7dHJ5e3JldHVybiBCb29sZWFuLnByb3RvdHlwZS52YWx1ZU9mLmNhbGwoUmVmbGVjdC5jb25zdHJ1Y3QoQm9vbGVhbixbXSwoZnVuY3Rpb24oKXt9KSkpLCEwfWNhdGNoKGUpe3JldHVybiAhMX19KCk7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIHIsbj12KGUpO2lmKHQpe3ZhciBpPXYodGhpcykuY29uc3RydWN0b3I7cj1SZWZsZWN0LmNvbnN0cnVjdChuLGFyZ3VtZW50cyxpKTt9ZWxzZSByPW4uYXBwbHkodGhpcyxhcmd1bWVudHMpO3JldHVybiBtKHRoaXMscil9fWZ1bmN0aW9uIEFyKGUpe3N3aXRjaChlKXtjYXNlIGllLkJZVEU6Y2FzZSBpZS5BU0NJSTpjYXNlIGllLlNCWVRFOmNhc2UgaWUuVU5ERUZJTkVEOnJldHVybiAxO2Nhc2UgaWUuU0hPUlQ6Y2FzZSBpZS5TU0hPUlQ6cmV0dXJuIDI7Y2FzZSBpZS5MT05HOmNhc2UgaWUuU0xPTkc6Y2FzZSBpZS5GTE9BVDpjYXNlIGllLklGRDpyZXR1cm4gNDtjYXNlIGllLlJBVElPTkFMOmNhc2UgaWUuU1JBVElPTkFMOmNhc2UgaWUuRE9VQkxFOmNhc2UgaWUuTE9ORzg6Y2FzZSBpZS5TTE9ORzg6Y2FzZSBpZS5JRkQ4OnJldHVybiA4O2RlZmF1bHQ6dGhyb3cgbmV3IFJhbmdlRXJyb3IoIkludmFsaWQgZmllbGQgdHlwZTogIi5jb25jYXQoZSkpfX1mdW5jdGlvbiBfcihlKXt2YXIgdD1lLkdlb0tleURpcmVjdG9yeTtpZighdClyZXR1cm4gbnVsbDtmb3IodmFyIHI9e30sbj00O248PTQqdFszXTtuKz00KXt2YXIgaT1jZVt0W25dXSxhPXRbbisxXT9RW3RbbisxXV06bnVsbCxvPXRbbisyXSxzPXRbbiszXSx1PW51bGw7aWYoYSl7aWYobnVsbD09KHU9ZVthXSkpdGhyb3cgbmV3IEVycm9yKCJDb3VsZCBub3QgZ2V0IHZhbHVlIG9mIGdlb0tleSAnIi5jb25jYXQoaSwiJy4iKSk7InN0cmluZyI9PXR5cGVvZiB1P3U9dS5zdWJzdHJpbmcocyxzK28tMSk6dS5zdWJhcnJheSYmKHU9dS5zdWJhcnJheShzLHMrbyksMT09PW8mJih1PXVbMF0pKTt9ZWxzZSB1PXM7cltpXT11O31yZXR1cm4gcn1mdW5jdGlvbiBJcihlLHQscixuKXt2YXIgaT1udWxsLGE9bnVsbCxvPUFyKHQpO3N3aXRjaCh0KXtjYXNlIGllLkJZVEU6Y2FzZSBpZS5BU0NJSTpjYXNlIGllLlVOREVGSU5FRDppPW5ldyBVaW50OEFycmF5KHIpLGE9ZS5yZWFkVWludDg7YnJlYWs7Y2FzZSBpZS5TQllURTppPW5ldyBJbnQ4QXJyYXkociksYT1lLnJlYWRJbnQ4O2JyZWFrO2Nhc2UgaWUuU0hPUlQ6aT1uZXcgVWludDE2QXJyYXkociksYT1lLnJlYWRVaW50MTY7YnJlYWs7Y2FzZSBpZS5TU0hPUlQ6aT1uZXcgSW50MTZBcnJheShyKSxhPWUucmVhZEludDE2O2JyZWFrO2Nhc2UgaWUuTE9ORzpjYXNlIGllLklGRDppPW5ldyBVaW50MzJBcnJheShyKSxhPWUucmVhZFVpbnQzMjticmVhaztjYXNlIGllLlNMT05HOmk9bmV3IEludDMyQXJyYXkociksYT1lLnJlYWRJbnQzMjticmVhaztjYXNlIGllLkxPTkc4OmNhc2UgaWUuSUZEODppPW5ldyBBcnJheShyKSxhPWUucmVhZFVpbnQ2NDticmVhaztjYXNlIGllLlNMT05HODppPW5ldyBBcnJheShyKSxhPWUucmVhZEludDY0O2JyZWFrO2Nhc2UgaWUuUkFUSU9OQUw6aT1uZXcgVWludDMyQXJyYXkoMipyKSxhPWUucmVhZFVpbnQzMjticmVhaztjYXNlIGllLlNSQVRJT05BTDppPW5ldyBJbnQzMkFycmF5KDIqciksYT1lLnJlYWRJbnQzMjticmVhaztjYXNlIGllLkZMT0FUOmk9bmV3IEZsb2F0MzJBcnJheShyKSxhPWUucmVhZEZsb2F0MzI7YnJlYWs7Y2FzZSBpZS5ET1VCTEU6aT1uZXcgRmxvYXQ2NEFycmF5KHIpLGE9ZS5yZWFkRmxvYXQ2NDticmVhaztkZWZhdWx0OnRocm93IG5ldyBSYW5nZUVycm9yKCJJbnZhbGlkIGZpZWxkIHR5cGU6ICIuY29uY2F0KHQpKX1pZih0IT09aWUuUkFUSU9OQUwmJnQhPT1pZS5TUkFUSU9OQUwpZm9yKHZhciBzPTA7czxyOysrcylpW3NdPWEuY2FsbChlLG4rcypvKTtlbHNlIGZvcih2YXIgdT0wO3U8cjt1Kz0yKWlbdV09YS5jYWxsKGUsbit1Km8pLGlbdSsxXT1hLmNhbGwoZSxuKyh1Km8rNCkpO3JldHVybiB0PT09aWUuQVNDSUk/bmV3IFRleHREZWNvZGVyKCJ1dGYtOCIpLmRlY29kZShpKTppfXZhciBQcj1mdW5jdGlvbiBlKHQscixuKXtiKHRoaXMsZSksdGhpcy5maWxlRGlyZWN0b3J5PXQsdGhpcy5nZW9LZXlEaXJlY3Rvcnk9cix0aGlzLm5leHRJRkRCeXRlT2Zmc2V0PW47fSxTcj1mdW5jdGlvbihlKXtoKHIsZSk7dmFyIHQ9eHIocik7ZnVuY3Rpb24gcihlKXt2YXIgbjtyZXR1cm4gYih0aGlzLHIpLChuPXQuY2FsbCh0aGlzLCJObyBpbWFnZSBhdCBpbmRleCAiLmNvbmNhdChlKSkpLmluZGV4PWUsbn1yZXR1cm4gcn0odyhFcnJvcikpLFRyPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe2IodGhpcyxlKTt9dmFyIHQ7cmV0dXJuIGMoZSxbe2tleToicmVhZFJhc3RlcnMiLHZhbHVlOih0PXUoeC5tYXJrKChmdW5jdGlvbiBlKCl7dmFyIHQscixuLGksYSxzLHUsZixjLGwsaCxkLHAsbSx2LHksZyx3LGIsayxBLF8sSSxQLFMsVCxVLE8sRCxFLFIsTSxCLEMsTCxGLFYsRyxqLHo9YXJndW1lbnRzO3JldHVybiB4LndyYXAoKGZ1bmN0aW9uKGUpe2Zvcig7Oylzd2l0Y2goZS5wcmV2PWUubmV4dCl7Y2FzZSAwOnJldHVybiB0PXoubGVuZ3RoPjAmJnZvaWQgMCE9PXpbMF0/elswXTp7fSxyPXQud2luZG93LG49dC53aWR0aCxpPXQuaGVpZ2h0LGE9dC5yZXNYLHM9dC5yZXNZLHU9dC5iYm94LGUubmV4dD01LHRoaXMuZ2V0SW1hZ2UoKTtjYXNlIDU6cmV0dXJuIGY9ZS5zZW50LGM9ZixlLm5leHQ9OSx0aGlzLmdldEltYWdlQ291bnQoKTtjYXNlIDk6aWYobD1lLnNlbnQsaD1mLmdldEJvdW5kaW5nQm94KCksIXJ8fCF1KXtlLm5leHQ9MTM7YnJlYWt9dGhyb3cgbmV3IEVycm9yKCdCb3RoICJiYm94IiBhbmQgIndpbmRvdyIgcGFzc2VkLicpO2Nhc2UgMTM6aWYoIW4mJiFpKXtlLm5leHQ9MjQ7YnJlYWt9aWYociYmKGQ9Zi5nZXRPcmlnaW4oKSxwPW8oZCwyKSxtPXBbMF0sdj1wWzFdLHk9Zi5nZXRSZXNvbHV0aW9uKCksZz1vKHksMiksdz1nWzBdLGI9Z1sxXSx1PVttK3JbMF0qdyx2K3JbMV0qYixtK3JbMl0qdyx2K3JbM10qYl0pLGs9dXx8aCwhbil7ZS5uZXh0PTIwO2JyZWFrfWlmKCFhKXtlLm5leHQ9MTk7YnJlYWt9dGhyb3cgbmV3IEVycm9yKCJCb3RoIHdpZHRoIGFuZCByZXNYIHBhc3NlZCIpO2Nhc2UgMTk6YT0oa1syXS1rWzBdKS9uO2Nhc2UgMjA6aWYoIWkpe2UubmV4dD0yNDticmVha31pZighcyl7ZS5uZXh0PTIzO2JyZWFrfXRocm93IG5ldyBFcnJvcigiQm90aCB3aWR0aCBhbmQgcmVzWSBwYXNzZWQiKTtjYXNlIDIzOnM9KGtbM10ta1sxXSkvaTtjYXNlIDI0OmlmKCFhJiYhcyl7ZS5uZXh0PTQ4O2JyZWFrfUE9W10sXz0wO2Nhc2UgMjc6aWYoIShfPGwpKXtlLm5leHQ9MzY7YnJlYWt9cmV0dXJuIGUubmV4dD0zMCx0aGlzLmdldEltYWdlKF8pO2Nhc2UgMzA6ST1lLnNlbnQsUD1JLmZpbGVEaXJlY3RvcnksUz1QLlN1YmZpbGVUeXBlLFQ9UC5OZXdTdWJmaWxlVHlwZSwoMD09PV98fDI9PT1TfHwxJlQpJiZBLnB1c2goSSk7Y2FzZSAzMzorK18sZS5uZXh0PTI3O2JyZWFrO2Nhc2UgMzY6QS5zb3J0KChmdW5jdGlvbihlLHQpe3JldHVybiBlLmdldFdpZHRoKCktdC5nZXRXaWR0aCgpfSkpLFU9MDtjYXNlIDM4OmlmKCEoVTxBLmxlbmd0aCkpe2UubmV4dD00ODticmVha31pZihPPUFbVV0sRD0oaFsyXS1oWzBdKS9PLmdldFdpZHRoKCksRT0oaFszXS1oWzFdKS9PLmdldEhlaWdodCgpLGM9TywhKGEmJmE+RHx8cyYmcz5FKSl7ZS5uZXh0PTQ1O2JyZWFrfXJldHVybiBlLmFicnVwdCgiYnJlYWsiLDQ4KTtjYXNlIDQ1OisrVSxlLm5leHQ9Mzg7YnJlYWs7Y2FzZSA0ODpyZXR1cm4gUj1yLHUmJihNPWYuZ2V0T3JpZ2luKCksQj1vKE0sMiksQz1CWzBdLEw9QlsxXSxGPWMuZ2V0UmVzb2x1dGlvbihmKSxWPW8oRiwyKSxHPVZbMF0saj1WWzFdLFI9W01hdGgucm91bmQoKHVbMF0tQykvRyksTWF0aC5yb3VuZCgodVsxXS1MKS9qKSxNYXRoLnJvdW5kKCh1WzJdLUMpL0cpLE1hdGgucm91bmQoKHVbM10tTCkvaildLFI9W01hdGgubWluKFJbMF0sUlsyXSksTWF0aC5taW4oUlsxXSxSWzNdKSxNYXRoLm1heChSWzBdLFJbMl0pLE1hdGgubWF4KFJbMV0sUlszXSldKSxlLmFicnVwdCgicmV0dXJuIixjLnJlYWRSYXN0ZXJzKGtyKGtyKHt9LHQpLHt9LHt3aW5kb3c6Un0pKSk7Y2FzZSA1MTpjYXNlImVuZCI6cmV0dXJuIGUuc3RvcCgpfX0pLGUsdGhpcyl9KSkpLGZ1bmN0aW9uKCl7cmV0dXJuIHQuYXBwbHkodGhpcyxhcmd1bWVudHMpfSl9XSksZX0oKSxVcj1mdW5jdGlvbihlKXtoKGQsZSk7dmFyIHQscixuLGksYSxzLGYsbD14cihkKTtmdW5jdGlvbiBkKGUsdCxyLG4pe3ZhciBpLGE9YXJndW1lbnRzLmxlbmd0aD40JiZ2b2lkIDAhPT1hcmd1bWVudHNbNF0/YXJndW1lbnRzWzRdOnt9O3JldHVybiBiKHRoaXMsZCksKGk9bC5jYWxsKHRoaXMpKS5zb3VyY2U9ZSxpLmxpdHRsZUVuZGlhbj10LGkuYmlnVGlmZj1yLGkuZmlyc3RJRkRPZmZzZXQ9bixpLmNhY2hlPWEuY2FjaGV8fCExLGkuaWZkUmVxdWVzdHM9W10saS5naG9zdFZhbHVlcz1udWxsLGl9cmV0dXJuIGMoZCxbe2tleToiZ2V0U2xpY2UiLHZhbHVlOihmPXUoeC5tYXJrKChmdW5jdGlvbiBlKHQscil7dmFyIG47cmV0dXJuIHgud3JhcCgoZnVuY3Rpb24oZSl7Zm9yKDs7KXN3aXRjaChlLnByZXY9ZS5uZXh0KXtjYXNlIDA6cmV0dXJuIG49dGhpcy5iaWdUaWZmPzQwNDg6MTAyNCxlLnQwPUdlLGUubmV4dD00LHRoaXMuc291cmNlLmZldGNoKFt7b2Zmc2V0OnQsbGVuZ3RoOnZvaWQgMCE9PXI/cjpufV0pO2Nhc2UgNDpyZXR1cm4gZS50MT1lLnNlbnRbMF0sZS50Mj10LGUudDM9dGhpcy5saXR0bGVFbmRpYW4sZS50ND10aGlzLmJpZ1RpZmYsZS5hYnJ1cHQoInJldHVybiIsbmV3IGUudDAoZS50MSxlLnQyLGUudDMsZS50NCkpO2Nhc2UgOTpjYXNlImVuZCI6cmV0dXJuIGUuc3RvcCgpfX0pLGUsdGhpcyl9KSkpLGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGYuYXBwbHkodGhpcyxhcmd1bWVudHMpfSl9LHtrZXk6InBhcnNlRmlsZURpcmVjdG9yeUF0Iix2YWx1ZToocz11KHgubWFyaygoZnVuY3Rpb24gZSh0KXt2YXIgcixuLGksYSxvLHMsdSxmLGMsbCxoLGQscCxtLHYseSxnLHcsYixrO3JldHVybiB4LndyYXAoKGZ1bmN0aW9uKGUpe2Zvcig7Oylzd2l0Y2goZS5wcmV2PWUubmV4dCl7Y2FzZSAwOnJldHVybiByPXRoaXMuYmlnVGlmZj8yMDoxMixuPXRoaXMuYmlnVGlmZj84OjIsZS5uZXh0PTQsdGhpcy5nZXRTbGljZSh0KTtjYXNlIDQ6aWYoaT1lLnNlbnQsYT10aGlzLmJpZ1RpZmY/aS5yZWFkVWludDY0KHQpOmkucmVhZFVpbnQxNih0KSxvPWEqcisodGhpcy5iaWdUaWZmPzE2OjYpLGkuY292ZXJzKHQsbykpe2UubmV4dD0xMTticmVha31yZXR1cm4gZS5uZXh0PTEwLHRoaXMuZ2V0U2xpY2UodCxvKTtjYXNlIDEwOmk9ZS5zZW50O2Nhc2UgMTE6cz17fSx1PXQrKHRoaXMuYmlnVGlmZj84OjIpLGY9MDtjYXNlIDE0OmlmKCEoZjxhKSl7ZS5uZXh0PTQxO2JyZWFrfWlmKGM9aS5yZWFkVWludDE2KHUpLGw9aS5yZWFkVWludDE2KHUrMiksaD10aGlzLmJpZ1RpZmY/aS5yZWFkVWludDY0KHUrNCk6aS5yZWFkVWludDMyKHUrNCksZD12b2lkIDAscD12b2lkIDAsbT1BcihsKSx2PXUrKHRoaXMuYmlnVGlmZj8xMjo4KSwhKG0qaDw9KHRoaXMuYmlnVGlmZj84OjQpKSl7ZS5uZXh0PTI2O2JyZWFrfWQ9SXIoaSxsLGgsdiksZS5uZXh0PTM2O2JyZWFrO2Nhc2UgMjY6aWYoeT1pLnJlYWRPZmZzZXQodiksZz1BcihsKSpoLCFpLmNvdmVycyh5LGcpKXtlLm5leHQ9MzI7YnJlYWt9ZD1JcihpLGwsaCx5KSxlLm5leHQ9MzY7YnJlYWs7Y2FzZSAzMjpyZXR1cm4gZS5uZXh0PTM0LHRoaXMuZ2V0U2xpY2UoeSxnKTtjYXNlIDM0Onc9ZS5zZW50LGQ9SXIodyxsLGgseSk7Y2FzZSAzNjpwPTE9PT1oJiYtMT09PXJlLmluZGV4T2YoYykmJmwhPT1pZS5SQVRJT05BTCYmbCE9PWllLlNSQVRJT05BTD9kWzBdOmQsc1tRW2NdXT1wO2Nhc2UgMzg6dSs9ciwrK2YsZS5uZXh0PTE0O2JyZWFrO2Nhc2UgNDE6cmV0dXJuIGI9X3Iocyksaz1pLnJlYWRPZmZzZXQodCtuK3IqYSksZS5hYnJ1cHQoInJldHVybiIsbmV3IFByKHMsYixrKSk7Y2FzZSA0NDpjYXNlImVuZCI6cmV0dXJuIGUuc3RvcCgpfX0pLGUsdGhpcyl9KSkpLGZ1bmN0aW9uKGUpe3JldHVybiBzLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0pfSx7a2V5OiJyZXF1ZXN0SUZEIix2YWx1ZTooYT11KHgubWFyaygoZnVuY3Rpb24gZSh0KXt2YXIgcj10aGlzO3JldHVybiB4LndyYXAoKGZ1bmN0aW9uKGUpe2Zvcig7Oylzd2l0Y2goZS5wcmV2PWUubmV4dCl7Y2FzZSAwOmlmKCF0aGlzLmlmZFJlcXVlc3RzW3RdKXtlLm5leHQ9NDticmVha31yZXR1cm4gZS5hYnJ1cHQoInJldHVybiIsdGhpcy5pZmRSZXF1ZXN0c1t0XSk7Y2FzZSA0OmlmKDAhPT10KXtlLm5leHQ9OTticmVha31yZXR1cm4gdGhpcy5pZmRSZXF1ZXN0c1t0XT10aGlzLnBhcnNlRmlsZURpcmVjdG9yeUF0KHRoaXMuZmlyc3RJRkRPZmZzZXQpLGUuYWJydXB0KCJyZXR1cm4iLHRoaXMuaWZkUmVxdWVzdHNbdF0pO2Nhc2UgOTppZih0aGlzLmlmZFJlcXVlc3RzW3QtMV0pe2UubmV4dD0xOTticmVha31lLnByZXY9MTAsdGhpcy5pZmRSZXF1ZXN0c1t0LTFdPXRoaXMucmVxdWVzdElGRCh0LTEpLGUubmV4dD0xOTticmVhaztjYXNlIDE0OmlmKGUucHJldj0xNCxlLnQwPWUuY2F0Y2goMTApLCEoZS50MCBpbnN0YW5jZW9mIFNyKSl7ZS5uZXh0PTE4O2JyZWFrfXRocm93IG5ldyBTcih0KTtjYXNlIDE4OnRocm93IGUudDA7Y2FzZSAxOTpyZXR1cm4gdGhpcy5pZmRSZXF1ZXN0c1t0XT11KHgubWFyaygoZnVuY3Rpb24gZSgpe3ZhciBuO3JldHVybiB4LndyYXAoKGZ1bmN0aW9uKGUpe2Zvcig7Oylzd2l0Y2goZS5wcmV2PWUubmV4dCl7Y2FzZSAwOnJldHVybiBlLm5leHQ9MixyLmlmZFJlcXVlc3RzW3QtMV07Y2FzZSAyOmlmKDAhPT0obj1lLnNlbnQpLm5leHRJRkRCeXRlT2Zmc2V0KXtlLm5leHQ9NTticmVha310aHJvdyBuZXcgU3IodCk7Y2FzZSA1OnJldHVybiBlLmFicnVwdCgicmV0dXJuIixyLnBhcnNlRmlsZURpcmVjdG9yeUF0KG4ubmV4dElGREJ5dGVPZmZzZXQpKTtjYXNlIDY6Y2FzZSJlbmQiOnJldHVybiBlLnN0b3AoKX19KSxlKX0pKSkoKSxlLmFicnVwdCgicmV0dXJuIix0aGlzLmlmZFJlcXVlc3RzW3RdKTtjYXNlIDIxOmNhc2UiZW5kIjpyZXR1cm4gZS5zdG9wKCl9fSksZSx0aGlzLFtbMTAsMTRdXSl9KSkpLGZ1bmN0aW9uKGUpe3JldHVybiBhLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0pfSx7a2V5OiJnZXRJbWFnZSIsdmFsdWU6KGk9dSh4Lm1hcmsoKGZ1bmN0aW9uIGUoKXt2YXIgdCxyLG49YXJndW1lbnRzO3JldHVybiB4LndyYXAoKGZ1bmN0aW9uKGUpe2Zvcig7Oylzd2l0Y2goZS5wcmV2PWUubmV4dCl7Y2FzZSAwOnJldHVybiB0PW4ubGVuZ3RoPjAmJnZvaWQgMCE9PW5bMF0/blswXTowLGUubmV4dD0zLHRoaXMucmVxdWVzdElGRCh0KTtjYXNlIDM6cmV0dXJuIHI9ZS5zZW50LGUuYWJydXB0KCJyZXR1cm4iLG5ldyBGZShyLmZpbGVEaXJlY3Rvcnksci5nZW9LZXlEaXJlY3RvcnksdGhpcy5kYXRhVmlldyx0aGlzLmxpdHRsZUVuZGlhbix0aGlzLmNhY2hlLHRoaXMuc291cmNlKSk7Y2FzZSA1OmNhc2UiZW5kIjpyZXR1cm4gZS5zdG9wKCl9fSksZSx0aGlzKX0pKSksZnVuY3Rpb24oKXtyZXR1cm4gaS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9KX0se2tleToiZ2V0SW1hZ2VDb3VudCIsdmFsdWU6KG49dSh4Lm1hcmsoKGZ1bmN0aW9uIGUoKXt2YXIgdCxyO3JldHVybiB4LndyYXAoKGZ1bmN0aW9uKGUpe2Zvcig7Oylzd2l0Y2goZS5wcmV2PWUubmV4dCl7Y2FzZSAwOnQ9MCxyPSEwO2Nhc2UgMjppZighcil7ZS5uZXh0PTE4O2JyZWFrfXJldHVybiBlLnByZXY9MyxlLm5leHQ9Nix0aGlzLnJlcXVlc3RJRkQodCk7Y2FzZSA2OisrdCxlLm5leHQ9MTY7YnJlYWs7Y2FzZSA5OmlmKGUucHJldj05LGUudDA9ZS5jYXRjaCgzKSwhKGUudDAgaW5zdGFuY2VvZiBTcikpe2UubmV4dD0xNTticmVha31yPSExLGUubmV4dD0xNjticmVhaztjYXNlIDE1OnRocm93IGUudDA7Y2FzZSAxNjplLm5leHQ9MjticmVhaztjYXNlIDE4OnJldHVybiBlLmFicnVwdCgicmV0dXJuIix0KTtjYXNlIDE5OmNhc2UiZW5kIjpyZXR1cm4gZS5zdG9wKCl9fSksZSx0aGlzLFtbMyw5XV0pfSkpKSxmdW5jdGlvbigpe3JldHVybiBuLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0pfSx7a2V5OiJnZXRHaG9zdFZhbHVlcyIsdmFsdWU6KHI9dSh4Lm1hcmsoKGZ1bmN0aW9uIGUoKXt2YXIgdCxyLG4saSxhLHMsdSxmLGM9dGhpcztyZXR1cm4geC53cmFwKChmdW5jdGlvbihlKXtmb3IoOzspc3dpdGNoKGUucHJldj1lLm5leHQpe2Nhc2UgMDppZih0PXRoaXMuYmlnVGlmZj8xNjo4LCF0aGlzLmdob3N0VmFsdWVzKXtlLm5leHQ9MzticmVha31yZXR1cm4gZS5hYnJ1cHQoInJldHVybiIsdGhpcy5naG9zdFZhbHVlcyk7Y2FzZSAzOnJldHVybiBuPShyPSJHREFMX1NUUlVDVFVSQUxfTUVUQURBVEFfU0laRT0iKS5sZW5ndGgrMTAwLGUubmV4dD03LHRoaXMuZ2V0U2xpY2UodCxuKTtjYXNlIDc6aWYoaT1lLnNlbnQsciE9PUlyKGksaWUuQVNDSUksci5sZW5ndGgsdCkpe2UubmV4dD0xOTticmVha31pZihhPUlyKGksaWUuQVNDSUksbix0KSxzPWEuc3BsaXQoIlxuIilbMF0sISgodT1OdW1iZXIocy5zcGxpdCgiPSIpWzFdLnNwbGl0KCIgIilbMF0pK3MubGVuZ3RoKT5uKSl7ZS5uZXh0PTE2O2JyZWFrfXJldHVybiBlLm5leHQ9MTUsdGhpcy5nZXRTbGljZSh0LHUpO2Nhc2UgMTU6aT1lLnNlbnQ7Y2FzZSAxNjpmPUlyKGksaWUuQVNDSUksdSx0KSx0aGlzLmdob3N0VmFsdWVzPXt9LGYuc3BsaXQoIlxuIikuZmlsdGVyKChmdW5jdGlvbihlKXtyZXR1cm4gZS5sZW5ndGg+MH0pKS5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybiBlLnNwbGl0KCI9Iil9KSkuZm9yRWFjaCgoZnVuY3Rpb24oZSl7dmFyIHQ9byhlLDIpLHI9dFswXSxuPXRbMV07Yy5naG9zdFZhbHVlc1tyXT1uO30pKTtjYXNlIDE5OnJldHVybiBlLmFicnVwdCgicmV0dXJuIix0aGlzLmdob3N0VmFsdWVzKTtjYXNlIDIwOmNhc2UiZW5kIjpyZXR1cm4gZS5zdG9wKCl9fSksZSx0aGlzKX0pKSksZnVuY3Rpb24oKXtyZXR1cm4gci5hcHBseSh0aGlzLGFyZ3VtZW50cyl9KX0se2tleToiY2xvc2UiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuICJmdW5jdGlvbiI9PXR5cGVvZiB0aGlzLnNvdXJjZS5jbG9zZSYmdGhpcy5zb3VyY2UuY2xvc2UoKX19XSxbe2tleToiZnJvbVNvdXJjZSIsdmFsdWU6KHQ9dSh4Lm1hcmsoKGZ1bmN0aW9uIGUodCxyLG4pe3ZhciBpLGEsbyxzLHUsZixjO3JldHVybiB4LndyYXAoKGZ1bmN0aW9uKGUpe2Zvcig7Oylzd2l0Y2goZS5wcmV2PWUubmV4dCl7Y2FzZSAwOnJldHVybiBlLm5leHQ9Mix0LmZldGNoKFt7b2Zmc2V0OjAsbGVuZ3RoOjEwMjR9XSxuKTtjYXNlIDI6aWYoaT1lLnNlbnRbMF0sYT1uZXcgVmUoaSksMTg3NjEhPT0obz1hLmdldFVpbnQxNigwLDApKSl7ZS5uZXh0PTk7YnJlYWt9cz0hMCxlLm5leHQ9MTQ7YnJlYWs7Y2FzZSA5OmlmKDE5Nzg5IT09byl7ZS5uZXh0PTEzO2JyZWFrfXM9ITEsZS5uZXh0PTE0O2JyZWFrO2Nhc2UgMTM6dGhyb3cgbmV3IFR5cGVFcnJvcigiSW52YWxpZCBieXRlIG9yZGVyIHZhbHVlLiIpO2Nhc2UgMTQ6aWYoNDIhPT0odT1hLmdldFVpbnQxNigyLHMpKSl7ZS5uZXh0PTE5O2JyZWFrfWY9ITEsZS5uZXh0PTI3O2JyZWFrO2Nhc2UgMTk6aWYoNDMhPT11KXtlLm5leHQ9MjY7YnJlYWt9aWYoZj0hMCw4PT09YS5nZXRVaW50MTYoNCxzKSl7ZS5uZXh0PTI0O2JyZWFrfXRocm93IG5ldyBFcnJvcigiVW5zdXBwb3J0ZWQgb2Zmc2V0IGJ5dGUtc2l6ZS4iKTtjYXNlIDI0OmUubmV4dD0yNzticmVhaztjYXNlIDI2OnRocm93IG5ldyBUeXBlRXJyb3IoIkludmFsaWQgbWFnaWMgbnVtYmVyLiIpO2Nhc2UgMjc6cmV0dXJuIGM9Zj9hLmdldFVpbnQ2NCg4LHMpOmEuZ2V0VWludDMyKDQscyksZS5hYnJ1cHQoInJldHVybiIsbmV3IGQodCxzLGYsYyxyKSk7Y2FzZSAyOTpjYXNlImVuZCI6cmV0dXJuIGUuc3RvcCgpfX0pLGUpfSkpKSxmdW5jdGlvbihlLHIsbil7cmV0dXJuIHQuYXBwbHkodGhpcyxhcmd1bWVudHMpfSl9XSksZH0oVHIpLE9yPWZ1bmN0aW9uKGUpe2goYSxlKTt2YXIgdCxyLG4saT14cihhKTtmdW5jdGlvbiBhKGUsdCl7dmFyIHI7cmV0dXJuIGIodGhpcyxhKSwocj1pLmNhbGwodGhpcykpLm1haW5GaWxlPWUsci5vdmVydmlld0ZpbGVzPXQsci5pbWFnZUZpbGVzPVtlXS5jb25jYXQodCksci5maWxlRGlyZWN0b3JpZXNQZXJGaWxlPW51bGwsci5maWxlRGlyZWN0b3JpZXNQZXJGaWxlUGFyc2luZz1udWxsLHIuaW1hZ2VDb3VudD1udWxsLHJ9cmV0dXJuIGMoYSxbe2tleToicGFyc2VGaWxlRGlyZWN0b3JpZXNQZXJGaWxlIix2YWx1ZToobj11KHgubWFyaygoZnVuY3Rpb24gZSgpe3ZhciB0O3JldHVybiB4LndyYXAoKGZ1bmN0aW9uKGUpe2Zvcig7Oylzd2l0Y2goZS5wcmV2PWUubmV4dCl7Y2FzZSAwOnJldHVybiB0PVt0aGlzLm1haW5GaWxlLnBhcnNlRmlsZURpcmVjdG9yeUF0KHRoaXMubWFpbkZpbGUuZmlyc3RJRkRPZmZzZXQpXS5jb25jYXQodGhpcy5vdmVydmlld0ZpbGVzLm1hcCgoZnVuY3Rpb24oZSl7cmV0dXJuIGUucGFyc2VGaWxlRGlyZWN0b3J5QXQoZS5maXJzdElGRE9mZnNldCl9KSkpLGUubmV4dD0zLFByb21pc2UuYWxsKHQpO2Nhc2UgMzpyZXR1cm4gdGhpcy5maWxlRGlyZWN0b3JpZXNQZXJGaWxlPWUuc2VudCxlLmFicnVwdCgicmV0dXJuIix0aGlzLmZpbGVEaXJlY3Rvcmllc1BlckZpbGUpO2Nhc2UgNTpjYXNlImVuZCI6cmV0dXJuIGUuc3RvcCgpfX0pLGUsdGhpcyl9KSkpLGZ1bmN0aW9uKCl7cmV0dXJuIG4uYXBwbHkodGhpcyxhcmd1bWVudHMpfSl9LHtrZXk6ImdldEltYWdlIix2YWx1ZToocj11KHgubWFyaygoZnVuY3Rpb24gZSgpe3ZhciB0LHIsbixpLGEsbyxzLHU9YXJndW1lbnRzO3JldHVybiB4LndyYXAoKGZ1bmN0aW9uKGUpe2Zvcig7Oylzd2l0Y2goZS5wcmV2PWUubmV4dCl7Y2FzZSAwOnJldHVybiB0PXUubGVuZ3RoPjAmJnZvaWQgMCE9PXVbMF0/dVswXTowLGUubmV4dD0zLHRoaXMuZ2V0SW1hZ2VDb3VudCgpO2Nhc2UgMzpyZXR1cm4gZS5uZXh0PTUsdGhpcy5wYXJzZUZpbGVEaXJlY3Rvcmllc1BlckZpbGUoKTtjYXNlIDU6cj0wLG49MCxpPTA7Y2FzZSA4OmlmKCEoaTx0aGlzLmltYWdlRmlsZXMubGVuZ3RoKSl7ZS5uZXh0PTI2O2JyZWFrfWE9dGhpcy5pbWFnZUZpbGVzW2ldLG89MDtjYXNlIDExOmlmKCEobzx0aGlzLmltYWdlQ291bnRzW2ldKSl7ZS5uZXh0PTIyO2JyZWFrfWlmKHQhPT1yKXtlLm5leHQ9MTc7YnJlYWt9cmV0dXJuIGUubmV4dD0xNSxhLnJlcXVlc3RJRkQobik7Y2FzZSAxNTpyZXR1cm4gcz1lLnNlbnQsZS5hYnJ1cHQoInJldHVybiIsbmV3IEZlKHMuZmlsZURpcmVjdG9yeSxzLmdlb0tleURpcmVjdG9yeSxhLmRhdGFWaWV3LGEubGl0dGxlRW5kaWFuLGEuY2FjaGUsYS5zb3VyY2UpKTtjYXNlIDE3OnIrKyxuKys7Y2FzZSAxOTpvKyssZS5uZXh0PTExO2JyZWFrO2Nhc2UgMjI6bj0wO2Nhc2UgMjM6aSsrLGUubmV4dD04O2JyZWFrO2Nhc2UgMjY6dGhyb3cgbmV3IFJhbmdlRXJyb3IoIkludmFsaWQgaW1hZ2UgaW5kZXgiKTtjYXNlIDI3OmNhc2UiZW5kIjpyZXR1cm4gZS5zdG9wKCl9fSksZSx0aGlzKX0pKSksZnVuY3Rpb24oKXtyZXR1cm4gci5hcHBseSh0aGlzLGFyZ3VtZW50cyl9KX0se2tleToiZ2V0SW1hZ2VDb3VudCIsdmFsdWU6KHQ9dSh4Lm1hcmsoKGZ1bmN0aW9uIGUoKXt2YXIgdDtyZXR1cm4geC53cmFwKChmdW5jdGlvbihlKXtmb3IoOzspc3dpdGNoKGUucHJldj1lLm5leHQpe2Nhc2UgMDppZihudWxsPT09dGhpcy5pbWFnZUNvdW50KXtlLm5leHQ9MjticmVha31yZXR1cm4gZS5hYnJ1cHQoInJldHVybiIsdGhpcy5pbWFnZUNvdW50KTtjYXNlIDI6cmV0dXJuIHQ9W3RoaXMubWFpbkZpbGUuZ2V0SW1hZ2VDb3VudCgpXS5jb25jYXQodGhpcy5vdmVydmlld0ZpbGVzLm1hcCgoZnVuY3Rpb24oZSl7cmV0dXJuIGUuZ2V0SW1hZ2VDb3VudCgpfSkpKSxlLm5leHQ9NSxQcm9taXNlLmFsbCh0KTtjYXNlIDU6cmV0dXJuIHRoaXMuaW1hZ2VDb3VudHM9ZS5zZW50LHRoaXMuaW1hZ2VDb3VudD10aGlzLmltYWdlQ291bnRzLnJlZHVjZSgoZnVuY3Rpb24oZSx0KXtyZXR1cm4gZSt0fSksMCksZS5hYnJ1cHQoInJldHVybiIsdGhpcy5pbWFnZUNvdW50KTtjYXNlIDg6Y2FzZSJlbmQiOnJldHVybiBlLnN0b3AoKX19KSxlLHRoaXMpfSkpKSxmdW5jdGlvbigpe3JldHVybiB0LmFwcGx5KHRoaXMsYXJndW1lbnRzKX0pfV0pLGF9KFRyKTtmdW5jdGlvbiBEcigpe3JldHVybiBEcj11KHgubWFyaygoZnVuY3Rpb24gZSh0KXt2YXIgcixuLGk9YXJndW1lbnRzO3JldHVybiB4LndyYXAoKGZ1bmN0aW9uKGUpe2Zvcig7Oylzd2l0Y2goZS5wcmV2PWUubmV4dCl7Y2FzZSAwOnJldHVybiByPWkubGVuZ3RoPjEmJnZvaWQgMCE9PWlbMV0/aVsxXTp7fSxuPWkubGVuZ3RoPjI/aVsyXTp2b2lkIDAsZS5hYnJ1cHQoInJldHVybiIsVXIuZnJvbVNvdXJjZShIdCh0LHIpLG4pKTtjYXNlIDM6Y2FzZSJlbmQiOnJldHVybiBlLnN0b3AoKX19KSxlKX0pKSksRHIuYXBwbHkodGhpcyxhcmd1bWVudHMpfWZ1bmN0aW9uIEVyKCl7cmV0dXJuIChFcj11KHgubWFyaygoZnVuY3Rpb24gZSh0LHIpe3JldHVybiB4LndyYXAoKGZ1bmN0aW9uKGUpe2Zvcig7Oylzd2l0Y2goZS5wcmV2PWUubmV4dCl7Y2FzZSAwOnJldHVybiBlLmFicnVwdCgicmV0dXJuIixVci5mcm9tU291cmNlKFh0KHQpLHIpKTtjYXNlIDE6Y2FzZSJlbmQiOnJldHVybiBlLnN0b3AoKX19KSxlKX0pKSkpLmFwcGx5KHRoaXMsYXJndW1lbnRzKX1mdW5jdGlvbiBScigpe3JldHVybiAoUnI9dSh4Lm1hcmsoKGZ1bmN0aW9uIGUodCxyKXtyZXR1cm4geC53cmFwKChmdW5jdGlvbihlKXtmb3IoOzspc3dpdGNoKGUucHJldj1lLm5leHQpe2Nhc2UgMDpyZXR1cm4gZS5hYnJ1cHQoInJldHVybiIsVXIuZnJvbVNvdXJjZShucih0KSxyKSk7Y2FzZSAxOmNhc2UiZW5kIjpyZXR1cm4gZS5zdG9wKCl9fSksZSl9KSkpKS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9ZnVuY3Rpb24gTXIoKXtyZXR1cm4gKE1yPXUoeC5tYXJrKChmdW5jdGlvbiBlKHQscil7cmV0dXJuIHgud3JhcCgoZnVuY3Rpb24oZSl7Zm9yKDs7KXN3aXRjaChlLnByZXY9ZS5uZXh0KXtjYXNlIDA6cmV0dXJuIGUuYWJydXB0KCJyZXR1cm4iLFVyLmZyb21Tb3VyY2UoUXQodCkscikpO2Nhc2UgMTpjYXNlImVuZCI6cmV0dXJuIGUuc3RvcCgpfX0pLGUpfSkpKSkuYXBwbHkodGhpcyxhcmd1bWVudHMpfWZ1bmN0aW9uIEJyKCl7cmV0dXJuIEJyPXUoeC5tYXJrKChmdW5jdGlvbiBlKHQpe3ZhciByLG4saSxhLG8scz1hcmd1bWVudHM7cmV0dXJuIHgud3JhcCgoZnVuY3Rpb24oZSl7Zm9yKDs7KXN3aXRjaChlLnByZXY9ZS5uZXh0KXtjYXNlIDA6cmV0dXJuIHI9cy5sZW5ndGg+MSYmdm9pZCAwIT09c1sxXT9zWzFdOltdLG49cy5sZW5ndGg+MiYmdm9pZCAwIT09c1syXT9zWzJdOnt9LGk9cy5sZW5ndGg+Mz9zWzNdOnZvaWQgMCxlLm5leHQ9NSxVci5mcm9tU291cmNlKEh0KHQsbiksaSk7Y2FzZSA1OnJldHVybiBhPWUuc2VudCxlLm5leHQ9OCxQcm9taXNlLmFsbChyLm1hcCgoZnVuY3Rpb24oZSl7cmV0dXJuIFVyLmZyb21Tb3VyY2UoSHQoZSxuKSl9KSkpO2Nhc2UgODpyZXR1cm4gbz1lLnNlbnQsZS5hYnJ1cHQoInJldHVybiIsbmV3IE9yKGEsbykpO2Nhc2UgMTA6Y2FzZSJlbmQiOnJldHVybiBlLnN0b3AoKX19KSxlKX0pKSksQnIuYXBwbHkodGhpcyxhcmd1bWVudHMpfWZ1bmN0aW9uIENyKGUpe3ZhciB0PWZ1bmN0aW9uKCl7aWYoInVuZGVmaW5lZCI9PXR5cGVvZiBSZWZsZWN0fHwhUmVmbGVjdC5jb25zdHJ1Y3QpcmV0dXJuICExO2lmKFJlZmxlY3QuY29uc3RydWN0LnNoYW0pcmV0dXJuICExO2lmKCJmdW5jdGlvbiI9PXR5cGVvZiBQcm94eSlyZXR1cm4gITA7dHJ5e3JldHVybiBCb29sZWFuLnByb3RvdHlwZS52YWx1ZU9mLmNhbGwoUmVmbGVjdC5jb25zdHJ1Y3QoQm9vbGVhbixbXSwoZnVuY3Rpb24oKXt9KSkpLCEwfWNhdGNoKGUpe3JldHVybiAhMX19KCk7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIHIsbj12KGUpO2lmKHQpe3ZhciBpPXYodGhpcykuY29uc3RydWN0b3I7cj1SZWZsZWN0LmNvbnN0cnVjdChuLGFyZ3VtZW50cyxpKTt9ZWxzZSByPW4uYXBwbHkodGhpcyxhcmd1bWVudHMpO3JldHVybiBtKHRoaXMscil9fXZhciBMcj1mdW5jdGlvbihlKXtoKHIsZSk7dmFyIHQ9Q3Iocik7ZnVuY3Rpb24gcigpe3JldHVybiBiKHRoaXMsciksdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9cmV0dXJuIGMocixbe2tleToiZGVjb2RlQmxvY2siLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiBlfX1dKSxyfSh3ciksRnI9T2JqZWN0LmZyZWV6ZSh7X19wcm90b19fOm51bGwsZGVmYXVsdDpMcn0pO2Z1bmN0aW9uIFZyKGUpe3ZhciB0PWZ1bmN0aW9uKCl7aWYoInVuZGVmaW5lZCI9PXR5cGVvZiBSZWZsZWN0fHwhUmVmbGVjdC5jb25zdHJ1Y3QpcmV0dXJuICExO2lmKFJlZmxlY3QuY29uc3RydWN0LnNoYW0pcmV0dXJuICExO2lmKCJmdW5jdGlvbiI9PXR5cGVvZiBQcm94eSlyZXR1cm4gITA7dHJ5e3JldHVybiBCb29sZWFuLnByb3RvdHlwZS52YWx1ZU9mLmNhbGwoUmVmbGVjdC5jb25zdHJ1Y3QoQm9vbGVhbixbXSwoZnVuY3Rpb24oKXt9KSkpLCEwfWNhdGNoKGUpe3JldHVybiAhMX19KCk7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIHIsbj12KGUpO2lmKHQpe3ZhciBpPXYodGhpcykuY29uc3RydWN0b3I7cj1SZWZsZWN0LmNvbnN0cnVjdChuLGFyZ3VtZW50cyxpKTt9ZWxzZSByPW4uYXBwbHkodGhpcyxhcmd1bWVudHMpO3JldHVybiBtKHRoaXMscil9fWZ1bmN0aW9uIEdyKGUsdCl7Zm9yKHZhciByPXQubGVuZ3RoLTE7cj49MDtyLS0pZS5wdXNoKHRbcl0pO3JldHVybiBlfWZ1bmN0aW9uIGpyKGUpe2Zvcih2YXIgdD1uZXcgVWludDE2QXJyYXkoNDA5Mykscj1uZXcgVWludDhBcnJheSg0MDkzKSxuPTA7bjw9MjU3O24rKyl0W25dPTQwOTYscltuXT1uO3ZhciBpPTI1OCxhPTksbz0wO2Z1bmN0aW9uIHMoKXtpPTI1OCxhPTk7fWZ1bmN0aW9uIHUoZSl7dmFyIHQ9ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXQlOCxpPU1hdGguZmxvb3IodC84KSxhPTgtbixvPXQrci04KihpKzEpLHM9OCooaSsyKS0odCtyKSx1PTgqKGkrMiktdDtpZihzPU1hdGgubWF4KDAscyksaT49ZS5sZW5ndGgpcmV0dXJuIGNvbnNvbGUud2FybigicmFuIG9mZiB0aGUgZW5kIG9mIHRoZSBidWZmZXIgYmVmb3JlIGZpbmRpbmcgRU9JX0NPREUgKGVuZCBvbiBpbnB1dCBjb2RlKSIpLDI1Nzt2YXIgZj1lW2ldJk1hdGgucG93KDIsOC1uKS0xLGM9Zjw8PXItYTtpZihpKzE8ZS5sZW5ndGgpe3ZhciBsPWVbaSsxXT4+PnM7Yys9bDw8PU1hdGgubWF4KDAsci11KTt9aWYobz44JiZpKzI8ZS5sZW5ndGgpe3ZhciBoPTgqKGkrMyktKHQrcik7Yys9ZVtpKzJdPj4+aDt9cmV0dXJuIGN9KGUsbyxhKTtyZXR1cm4gbys9YSx0fWZ1bmN0aW9uIGYoZSxuKXtyZXR1cm4gcltpXT1uLHRbaV09ZSwrK2ktMX1mdW5jdGlvbiBjKGUpe2Zvcih2YXIgbj1bXSxpPWU7NDA5NiE9PWk7aT10W2ldKW4ucHVzaChyW2ldKTtyZXR1cm4gbn12YXIgbD1bXTtzKCk7Zm9yKHZhciBoLGQ9bmV3IFVpbnQ4QXJyYXkoZSkscD11KGQpOzI1NyE9PXA7KXtpZigyNTY9PT1wKXtmb3IocygpLHA9dShkKTsyNTY9PT1wOylwPXUoZCk7aWYoMjU3PT09cClicmVhaztpZihwPjI1Nil0aHJvdyBuZXcgRXJyb3IoImNvcnJ1cHRlZCBjb2RlIGF0IHNjYW5saW5lICIuY29uY2F0KHApKTtHcihsLGMocCkpLGg9cDt9ZWxzZSBpZihwPGkpe3ZhciBtPWMocCk7R3IobCxtKSxmKGgsbVttLmxlbmd0aC0xXSksaD1wO31lbHNlIHt2YXIgdj1jKGgpO2lmKCF2KXRocm93IG5ldyBFcnJvcigiQm9ndXMgZW50cnkuIE5vdCBpbiBkaWN0aW9uYXJ5LCAiLmNvbmNhdChoLCIgLyAiKS5jb25jYXQoaSwiLCBwb3NpdGlvbjogIikuY29uY2F0KG8pKTtHcihsLHYpLGwucHVzaCh2W3YubGVuZ3RoLTFdKSxmKGgsdlt2Lmxlbmd0aC0xXSksaD1wO31pKzE+PU1hdGgucG93KDIsYSkmJigxMj09PWE/aD12b2lkIDA6YSsrKSxwPXUoZCk7fXJldHVybiBuZXcgVWludDhBcnJheShsKX12YXIgenI9ZnVuY3Rpb24oZSl7aChyLGUpO3ZhciB0PVZyKHIpO2Z1bmN0aW9uIHIoKXtyZXR1cm4gYih0aGlzLHIpLHQuYXBwbHkodGhpcyxhcmd1bWVudHMpfXJldHVybiBjKHIsW3trZXk6ImRlY29kZUJsb2NrIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4ganIoZSkuYnVmZmVyfX1dKSxyfSh3ciksTnI9T2JqZWN0LmZyZWV6ZSh7X19wcm90b19fOm51bGwsZGVmYXVsdDp6cn0pO2Z1bmN0aW9uIEtyKGUpe3ZhciB0PWZ1bmN0aW9uKCl7aWYoInVuZGVmaW5lZCI9PXR5cGVvZiBSZWZsZWN0fHwhUmVmbGVjdC5jb25zdHJ1Y3QpcmV0dXJuICExO2lmKFJlZmxlY3QuY29uc3RydWN0LnNoYW0pcmV0dXJuICExO2lmKCJmdW5jdGlvbiI9PXR5cGVvZiBQcm94eSlyZXR1cm4gITA7dHJ5e3JldHVybiBCb29sZWFuLnByb3RvdHlwZS52YWx1ZU9mLmNhbGwoUmVmbGVjdC5jb25zdHJ1Y3QoQm9vbGVhbixbXSwoZnVuY3Rpb24oKXt9KSkpLCEwfWNhdGNoKGUpe3JldHVybiAhMX19KCk7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIHIsbj12KGUpO2lmKHQpe3ZhciBpPXYodGhpcykuY29uc3RydWN0b3I7cj1SZWZsZWN0LmNvbnN0cnVjdChuLGFyZ3VtZW50cyxpKTt9ZWxzZSByPW4uYXBwbHkodGhpcyxhcmd1bWVudHMpO3JldHVybiBtKHRoaXMscil9fXZhciBacj1uZXcgSW50MzJBcnJheShbMCwxLDgsMTYsOSwyLDMsMTAsMTcsMjQsMzIsMjUsMTgsMTEsNCw1LDEyLDE5LDI2LDMzLDQwLDQ4LDQxLDM0LDI3LDIwLDEzLDYsNywxNCwyMSwyOCwzNSw0Miw0OSw1Niw1Nyw1MCw0MywzNiwyOSwyMiwxNSwyMywzMCwzNyw0NCw1MSw1OCw1OSw1Miw0NSwzOCwzMSwzOSw0Niw1Myw2MCw2MSw1NCw0Nyw1NSw2Miw2M10pLEhyPTQwMTcsWXI9Nzk5LHFyPTM0MDYsWHI9MjI3NixXcj0xNTY3LEpyPTM3ODQsUXI9NTc5Mywkcj0yODk2O2Z1bmN0aW9uIGVuKGUsdCl7Zm9yKHZhciByPTAsbj1bXSxpPTE2O2k+MCYmIWVbaS0xXTspLS1pO24ucHVzaCh7Y2hpbGRyZW46W10saW5kZXg6MH0pO2Zvcih2YXIgYSxvPW5bMF0scz0wO3M8aTtzKyspe2Zvcih2YXIgdT0wO3U8ZVtzXTt1Kyspe2Zvcigobz1uLnBvcCgpKS5jaGlsZHJlbltvLmluZGV4XT10W3JdO28uaW5kZXg+MDspbz1uLnBvcCgpO2ZvcihvLmluZGV4Kyssbi5wdXNoKG8pO24ubGVuZ3RoPD1zOyluLnB1c2goYT17Y2hpbGRyZW46W10saW5kZXg6MH0pLG8uY2hpbGRyZW5bby5pbmRleF09YS5jaGlsZHJlbixvPWE7cisrO31zKzE8aSYmKG4ucHVzaChhPXtjaGlsZHJlbjpbXSxpbmRleDowfSksby5jaGlsZHJlbltvLmluZGV4XT1hLmNoaWxkcmVuLG89YSk7fXJldHVybiBuWzBdLmNoaWxkcmVufWZ1bmN0aW9uIHRuKGUsdCxyLG4saSxhLG8scyx1KXt2YXIgZj1yLm1jdXNQZXJMaW5lLGM9ci5wcm9ncmVzc2l2ZSxsPXQsaD10LHA9MCxtPTA7ZnVuY3Rpb24gdigpe2lmKG0+MClyZXR1cm4gbS0tLHA+Pm0mMTtpZigyNTU9PT0ocD1lW2grK10pKXt2YXIgdD1lW2grK107aWYodCl0aHJvdyBuZXcgRXJyb3IoInVuZXhwZWN0ZWQgbWFya2VyOiAiLmNvbmNhdCgocDw8OHx0KS50b1N0cmluZygxNikpKX1yZXR1cm4gbT03LHA+Pj43fWZ1bmN0aW9uIHkoZSl7Zm9yKHZhciB0LHI9ZTtudWxsIT09KHQ9digpKTspe2lmKCJudW1iZXIiPT10eXBlb2Yocj1yW3RdKSlyZXR1cm4gcjtpZigib2JqZWN0IiE9PWQocikpdGhyb3cgbmV3IEVycm9yKCJpbnZhbGlkIGh1ZmZtYW4gc2VxdWVuY2UiKX1yZXR1cm4gbnVsbH1mdW5jdGlvbiBnKGUpe2Zvcih2YXIgdD1lLHI9MDt0PjA7KXt2YXIgbj12KCk7aWYobnVsbD09PW4pcmV0dXJuO3I9cjw8MXxuLC0tdDt9cmV0dXJuIHJ9ZnVuY3Rpb24gdyhlKXt2YXIgdD1nKGUpO3JldHVybiB0Pj0xPDxlLTE/dDp0KygtMTw8ZSkrMX12YXIgYj0wO3ZhciBrLHg9MDtmdW5jdGlvbiBBKGUsdCxyLG4saSl7dmFyIGE9ciVmLG89KHIvZnwwKSplLnYrbixzPWEqZS5oK2k7dChlLGUuYmxvY2tzW29dW3NdKTt9ZnVuY3Rpb24gXyhlLHQscil7dmFyIG49ci9lLmJsb2Nrc1BlckxpbmV8MCxpPXIlZS5ibG9ja3NQZXJMaW5lO3QoZSxlLmJsb2Nrc1tuXVtpXSk7fXZhciBJLFAsUyxULFUsTyxEPW4ubGVuZ3RoO089Yz8wPT09YT8wPT09cz9mdW5jdGlvbihlLHQpe3ZhciByPXkoZS5odWZmbWFuVGFibGVEQyksbj0wPT09cj8wOncocik8PHU7ZS5wcmVkKz1uLHRbMF09ZS5wcmVkO306ZnVuY3Rpb24oZSx0KXt0WzBdfD12KCk8PHU7fTowPT09cz9mdW5jdGlvbihlLHQpe2lmKGI+MCliLS07ZWxzZSBmb3IodmFyIHI9YSxuPW87cjw9bjspe3ZhciBpPXkoZS5odWZmbWFuVGFibGVBQykscz0xNSZpLGY9aT4+NDtpZigwPT09cyl7aWYoZjwxNSl7Yj1nKGYpKygxPDxmKS0xO2JyZWFrfXIrPTE2O31lbHNlIHRbWnJbcis9Zl1dPXcocykqKDE8PHUpLHIrKzt9fTpmdW5jdGlvbihlLHQpe2Zvcih2YXIgcj1hLG49byxpPTA7cjw9bjspe3ZhciBzPVpyW3JdLGY9dFtzXTwwPy0xOjE7c3dpdGNoKHgpe2Nhc2UgMDp2YXIgYz15KGUuaHVmZm1hblRhYmxlQUMpLGw9MTUmYztpZihpPWM+PjQsMD09PWwpaTwxNT8oYj1nKGkpKygxPDxpKSx4PTQpOihpPTE2LHg9MSk7ZWxzZSB7aWYoMSE9PWwpdGhyb3cgbmV3IEVycm9yKCJpbnZhbGlkIEFDbiBlbmNvZGluZyIpO2s9dyhsKSx4PWk/MjozO31jb250aW51ZTtjYXNlIDE6Y2FzZSAyOnRbc10/dFtzXSs9KHYoKTw8dSkqZjowPT0tLWkmJih4PTI9PT14PzM6MCk7YnJlYWs7Y2FzZSAzOnRbc10/dFtzXSs9KHYoKTw8dSkqZjoodFtzXT1rPDx1LHg9MCk7YnJlYWs7Y2FzZSA0OnRbc10mJih0W3NdKz0odigpPDx1KSpmKTt9cisrO300PT09eCYmMD09LS1iJiYoeD0wKTt9OmZ1bmN0aW9uKGUsdCl7dmFyIHI9eShlLmh1ZmZtYW5UYWJsZURDKSxuPTA9PT1yPzA6dyhyKTtlLnByZWQrPW4sdFswXT1lLnByZWQ7Zm9yKHZhciBpPTE7aTw2NDspe3ZhciBhPXkoZS5odWZmbWFuVGFibGVBQyksbz0xNSZhLHM9YT4+NDtpZigwPT09byl7aWYoczwxNSlicmVhaztpKz0xNjt9ZWxzZSB0W1pyW2krPXNdXT13KG8pLGkrKzt9fTt2YXIgRSxSLE09MDtSPTE9PT1EP25bMF0uYmxvY2tzUGVyTGluZSpuWzBdLmJsb2Nrc1BlckNvbHVtbjpmKnIubWN1c1BlckNvbHVtbjtmb3IodmFyIEI9aXx8UjtNPFI7KXtmb3IoUD0wO1A8RDtQKyspbltQXS5wcmVkPTA7aWYoYj0wLDE9PT1EKWZvcihJPW5bMF0sVT0wO1U8QjtVKyspXyhJLE8sTSksTSsrO2Vsc2UgZm9yKFU9MDtVPEI7VSsrKXtmb3IoUD0wO1A8RDtQKyspe3ZhciBDPUk9bltQXSxMPUMuaCxGPUMudjtmb3IoUz0wO1M8RjtTKyspZm9yKFQ9MDtUPEw7VCsrKUEoSSxPLE0sUyxUKTt9aWYoKytNPT09UilicmVha31pZihtPTAsKEU9ZVtoXTw8OHxlW2grMV0pPDY1MjgwKXRocm93IG5ldyBFcnJvcigibWFya2VyIHdhcyBub3QgZm91bmQiKTtpZighKEU+PTY1NDg4JiZFPD02NTQ5NSkpYnJlYWs7aCs9Mjt9cmV0dXJuIGgtbH1mdW5jdGlvbiBybihlLHQpe3ZhciByPVtdLG49dC5ibG9ja3NQZXJMaW5lLGk9dC5ibG9ja3NQZXJDb2x1bW4sYT1uPDwzLG89bmV3IEludDMyQXJyYXkoNjQpLHM9bmV3IFVpbnQ4QXJyYXkoNjQpO2Z1bmN0aW9uIHUoZSxyLG4pe3ZhciBpLGEsbyxzLHUsZixjLGwsaCxkLHA9dC5xdWFudGl6YXRpb25UYWJsZSxtPW47Zm9yKGQ9MDtkPDY0O2QrKyltW2RdPWVbZF0qcFtkXTtmb3IoZD0wO2Q8ODsrK2Qpe3ZhciB2PTgqZDswIT09bVsxK3ZdfHwwIT09bVsyK3ZdfHwwIT09bVszK3ZdfHwwIT09bVs0K3ZdfHwwIT09bVs1K3ZdfHwwIT09bVs2K3ZdfHwwIT09bVs3K3ZdPyhpPVFyKm1bMCt2XSsxMjg+PjgsYT1RciptWzQrdl0rMTI4Pj44LG89bVsyK3ZdLHM9bVs2K3ZdLHU9JHIqKG1bMSt2XS1tWzcrdl0pKzEyOD4+OCxsPSRyKihtWzErdl0rbVs3K3ZdKSsxMjg+PjgsZj1tWzMrdl08PDQsYz1tWzUrdl08PDQsaD1pLWErMT4+MSxpPWkrYSsxPj4xLGE9aCxoPW8qSnIrcypXcisxMjg+Pjgsbz1vKldyLXMqSnIrMTI4Pj44LHM9aCxoPXUtYysxPj4xLHU9dStjKzE+PjEsYz1oLGg9bCtmKzE+PjEsZj1sLWYrMT4+MSxsPWgsaD1pLXMrMT4+MSxpPWkrcysxPj4xLHM9aCxoPWEtbysxPj4xLGE9YStvKzE+PjEsbz1oLGg9dSpYcitsKnFyKzIwNDg+PjEyLHU9dSpxci1sKlhyKzIwNDg+PjEyLGw9aCxoPWYqWXIrYypIcisyMDQ4Pj4xMixmPWYqSHItYypZcisyMDQ4Pj4xMixjPWgsbVswK3ZdPWkrbCxtWzcrdl09aS1sLG1bMSt2XT1hK2MsbVs2K3ZdPWEtYyxtWzIrdl09bytmLG1bNSt2XT1vLWYsbVszK3ZdPXMrdSxtWzQrdl09cy11KTooaD1RciptWzArdl0rNTEyPj4xMCxtWzArdl09aCxtWzErdl09aCxtWzIrdl09aCxtWzMrdl09aCxtWzQrdl09aCxtWzUrdl09aCxtWzYrdl09aCxtWzcrdl09aCk7fWZvcihkPTA7ZDw4OysrZCl7dmFyIHk9ZDswIT09bVs4K3ldfHwwIT09bVsxNit5XXx8MCE9PW1bMjQreV18fDAhPT1tWzMyK3ldfHwwIT09bVs0MCt5XXx8MCE9PW1bNDgreV18fDAhPT1tWzU2K3ldPyhpPVFyKm1bMCt5XSsyMDQ4Pj4xMixhPVFyKm1bMzIreV0rMjA0OD4+MTIsbz1tWzE2K3ldLHM9bVs0OCt5XSx1PSRyKihtWzgreV0tbVs1Nit5XSkrMjA0OD4+MTIsbD0kcioobVs4K3ldK21bNTYreV0pKzIwNDg+PjEyLGY9bVsyNCt5XSxjPW1bNDAreV0saD1pLWErMT4+MSxpPWkrYSsxPj4xLGE9aCxoPW8qSnIrcypXcisyMDQ4Pj4xMixvPW8qV3ItcypKcisyMDQ4Pj4xMixzPWgsaD11LWMrMT4+MSx1PXUrYysxPj4xLGM9aCxoPWwrZisxPj4xLGY9bC1mKzE+PjEsbD1oLGg9aS1zKzE+PjEsaT1pK3MrMT4+MSxzPWgsaD1hLW8rMT4+MSxhPWErbysxPj4xLG89aCxoPXUqWHIrbCpxcisyMDQ4Pj4xMix1PXUqcXItbCpYcisyMDQ4Pj4xMixsPWgsaD1mKllyK2MqSHIrMjA0OD4+MTIsZj1mKkhyLWMqWXIrMjA0OD4+MTIsYz1oLG1bMCt5XT1pK2wsbVs1Nit5XT1pLWwsbVs4K3ldPWErYyxtWzQ4K3ldPWEtYyxtWzE2K3ldPW8rZixtWzQwK3ldPW8tZixtWzI0K3ldPXMrdSxtWzMyK3ldPXMtdSk6KGg9UXIqbltkKzBdKzgxOTI+PjE0LG1bMCt5XT1oLG1bOCt5XT1oLG1bMTYreV09aCxtWzI0K3ldPWgsbVszMit5XT1oLG1bNDAreV09aCxtWzQ4K3ldPWgsbVs1Nit5XT1oKTt9Zm9yKGQ9MDtkPDY0OysrZCl7dmFyIGc9MTI4KyhtW2RdKzg+PjQpO3JbZF09ZzwwPzA6Zz4yNTU/MjU1Omc7fX1mb3IodmFyIGY9MDtmPGk7ZisrKXtmb3IodmFyIGM9Zjw8MyxsPTA7bDw4O2wrKylyLnB1c2gobmV3IFVpbnQ4QXJyYXkoYSkpO2Zvcih2YXIgaD0wO2g8bjtoKyspe3UodC5ibG9ja3NbZl1baF0scyxvKTtmb3IodmFyIGQ9MCxwPWg8PDMsbT0wO208ODttKyspZm9yKHZhciB2PXJbYyttXSx5PTA7eTw4O3krKyl2W3AreV09c1tkKytdO319cmV0dXJuIHJ9dmFyIG5uPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe2IodGhpcyxlKSx0aGlzLmpmaWY9bnVsbCx0aGlzLmFkb2JlPW51bGwsdGhpcy5xdWFudGl6YXRpb25UYWJsZXM9W10sdGhpcy5odWZmbWFuVGFibGVzQUM9W10sdGhpcy5odWZmbWFuVGFibGVzREM9W10sdGhpcy5yZXNldEZyYW1lcygpO31yZXR1cm4gYyhlLFt7a2V5OiJyZXNldEZyYW1lcyIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLmZyYW1lcz1bXTt9fSx7a2V5OiJwYXJzZSIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9MDtmdW5jdGlvbiByKCl7dmFyIHI9ZVt0XTw8OHxlW3QrMV07cmV0dXJuIHQrPTIscn1mdW5jdGlvbiBuKGUpe3ZhciB0LHIsbj0wLGk9MDtmb3IociBpbiBlLmNvbXBvbmVudHMpZS5jb21wb25lbnRzLmhhc093blByb3BlcnR5KHIpJiYobjwodD1lLmNvbXBvbmVudHNbcl0pLmgmJihuPXQuaCksaTx0LnYmJihpPXQudikpO3ZhciBhPU1hdGguY2VpbChlLnNhbXBsZXNQZXJMaW5lLzgvbiksbz1NYXRoLmNlaWwoZS5zY2FuTGluZXMvOC9pKTtmb3IociBpbiBlLmNvbXBvbmVudHMpaWYoZS5jb21wb25lbnRzLmhhc093blByb3BlcnR5KHIpKXt0PWUuY29tcG9uZW50c1tyXTtmb3IodmFyIHM9TWF0aC5jZWlsKE1hdGguY2VpbChlLnNhbXBsZXNQZXJMaW5lLzgpKnQuaC9uKSx1PU1hdGguY2VpbChNYXRoLmNlaWwoZS5zY2FuTGluZXMvOCkqdC52L2kpLGY9YSp0LmgsYz1vKnQudixsPVtdLGg9MDtoPGM7aCsrKXtmb3IodmFyIGQ9W10scD0wO3A8ZjtwKyspZC5wdXNoKG5ldyBJbnQzMkFycmF5KDY0KSk7bC5wdXNoKGQpO310LmJsb2Nrc1BlckxpbmU9cyx0LmJsb2Nrc1BlckNvbHVtbj11LHQuYmxvY2tzPWw7fWUubWF4SD1uLGUubWF4Vj1pLGUubWN1c1BlckxpbmU9YSxlLm1jdXNQZXJDb2x1bW49bzt9dmFyIGksYSxvPXIoKTtpZig2NTQ5NiE9PW8pdGhyb3cgbmV3IEVycm9yKCJTT0kgbm90IGZvdW5kIik7Zm9yKG89cigpOzY1NDk3IT09bzspe3N3aXRjaChvKXtjYXNlIDY1MjgwOmJyZWFrO2Nhc2UgNjU1MDQ6Y2FzZSA2NTUwNTpjYXNlIDY1NTA2OmNhc2UgNjU1MDc6Y2FzZSA2NTUwODpjYXNlIDY1NTA5OmNhc2UgNjU1MTA6Y2FzZSA2NTUxMTpjYXNlIDY1NTEyOmNhc2UgNjU1MTM6Y2FzZSA2NTUxNDpjYXNlIDY1NTE1OmNhc2UgNjU1MTY6Y2FzZSA2NTUxNzpjYXNlIDY1NTE4OmNhc2UgNjU1MTk6Y2FzZSA2NTUzNDp2YXIgcz0oaT12b2lkIDAsYT12b2lkIDAsaT1yKCksYT1lLnN1YmFycmF5KHQsdCtpLTIpLHQrPWEubGVuZ3RoLGEpOzY1NTA0PT09byYmNzQ9PT1zWzBdJiY3MD09PXNbMV0mJjczPT09c1syXSYmNzA9PT1zWzNdJiYwPT09c1s0XSYmKHRoaXMuamZpZj17dmVyc2lvbjp7bWFqb3I6c1s1XSxtaW5vcjpzWzZdfSxkZW5zaXR5VW5pdHM6c1s3XSx4RGVuc2l0eTpzWzhdPDw4fHNbOV0seURlbnNpdHk6c1sxMF08PDh8c1sxMV0sdGh1bWJXaWR0aDpzWzEyXSx0aHVtYkhlaWdodDpzWzEzXSx0aHVtYkRhdGE6cy5zdWJhcnJheSgxNCwxNCszKnNbMTJdKnNbMTNdKX0pLDY1NTE4PT09byYmNjU9PT1zWzBdJiYxMDA9PT1zWzFdJiYxMTE9PT1zWzJdJiY5OD09PXNbM10mJjEwMT09PXNbNF0mJjA9PT1zWzVdJiYodGhpcy5hZG9iZT17dmVyc2lvbjpzWzZdLGZsYWdzMDpzWzddPDw4fHNbOF0sZmxhZ3MxOnNbOV08PDh8c1sxMF0sdHJhbnNmb3JtQ29kZTpzWzExXX0pO2JyZWFrO2Nhc2UgNjU0OTk6Zm9yKHZhciB1PXIoKSt0LTI7dDx1Oyl7dmFyIGY9ZVt0KytdLGM9bmV3IEludDMyQXJyYXkoNjQpO2lmKGY+PjQ9PTApZm9yKHZhciBsPTA7bDw2NDtsKyspe2NbWnJbbF1dPWVbdCsrXTt9ZWxzZSB7aWYoZj4+NCE9MSl0aHJvdyBuZXcgRXJyb3IoIkRRVDogaW52YWxpZCB0YWJsZSBzcGVjIik7Zm9yKHZhciBoPTA7aDw2NDtoKyspe2NbWnJbaF1dPXIoKTt9fXRoaXMucXVhbnRpemF0aW9uVGFibGVzWzE1JmZdPWM7fWJyZWFrO2Nhc2UgNjU0NzI6Y2FzZSA2NTQ3MzpjYXNlIDY1NDc0OnIoKTtmb3IodmFyIGQ9e2V4dGVuZGVkOjY1NDczPT09byxwcm9ncmVzc2l2ZTo2NTQ3ND09PW8scHJlY2lzaW9uOmVbdCsrXSxzY2FuTGluZXM6cigpLHNhbXBsZXNQZXJMaW5lOnIoKSxjb21wb25lbnRzOnt9LGNvbXBvbmVudHNPcmRlcjpbXX0scD1lW3QrK10sbT12b2lkIDAsdj0wO3Y8cDt2Kyspe209ZVt0XTt2YXIgeT1lW3QrMV0+PjQsZz0xNSZlW3QrMV0sdz1lW3QrMl07ZC5jb21wb25lbnRzT3JkZXIucHVzaChtKSxkLmNvbXBvbmVudHNbbV09e2g6eSx2OmcscXVhbnRpemF0aW9uSWR4Ond9LHQrPTM7fW4oZCksdGhpcy5mcmFtZXMucHVzaChkKTticmVhaztjYXNlIDY1NDc2OmZvcih2YXIgYj1yKCksaz0yO2s8Yjspe2Zvcih2YXIgeD1lW3QrK10sQT1uZXcgVWludDhBcnJheSgxNiksXz0wLEk9MDtJPDE2O0krKyx0KyspQVtJXT1lW3RdLF8rPUFbSV07Zm9yKHZhciBQPW5ldyBVaW50OEFycmF5KF8pLFM9MDtTPF87UysrLHQrKylQW1NdPWVbdF07ays9MTcrXyx4Pj40PT0wP3RoaXMuaHVmZm1hblRhYmxlc0RDWzE1JnhdPWVuKEEsUCk6dGhpcy5odWZmbWFuVGFibGVzQUNbMTUmeF09ZW4oQSxQKTt9YnJlYWs7Y2FzZSA2NTUwMTpyKCksdGhpcy5yZXNldEludGVydmFsPXIoKTticmVhaztjYXNlIDY1NDk4OnIoKTtmb3IodmFyIFQ9ZVt0KytdLFU9W10sTz10aGlzLmZyYW1lc1swXSxEPTA7RDxUO0QrKyl7dmFyIEU9Ty5jb21wb25lbnRzW2VbdCsrXV0sUj1lW3QrK107RS5odWZmbWFuVGFibGVEQz10aGlzLmh1ZmZtYW5UYWJsZXNEQ1tSPj40XSxFLmh1ZmZtYW5UYWJsZUFDPXRoaXMuaHVmZm1hblRhYmxlc0FDWzE1JlJdLFUucHVzaChFKTt9dmFyIE09ZVt0KytdLEI9ZVt0KytdLEM9ZVt0KytdLEw9dG4oZSx0LE8sVSx0aGlzLnJlc2V0SW50ZXJ2YWwsTSxCLEM+PjQsMTUmQyk7dCs9TDticmVhaztjYXNlIDY1NTM1OjI1NSE9PWVbdF0mJnQtLTticmVhaztkZWZhdWx0OmlmKDI1NT09PWVbdC0zXSYmZVt0LTJdPj0xOTImJmVbdC0yXTw9MjU0KXt0LT0zO2JyZWFrfXRocm93IG5ldyBFcnJvcigidW5rbm93biBKUEVHIG1hcmtlciAiLmNvbmNhdChvLnRvU3RyaW5nKDE2KSkpfW89cigpO319fSx7a2V5OiJnZXRSZXN1bHQiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5mcmFtZXM7aWYoMD09PXRoaXMuZnJhbWVzLmxlbmd0aCl0aHJvdyBuZXcgRXJyb3IoIm5vIGZyYW1lcyB3ZXJlIGRlY29kZWQiKTt0aGlzLmZyYW1lcy5sZW5ndGg+MSYmY29uc29sZS53YXJuKCJtb3JlIHRoYW4gb25lIGZyYW1lIGlzIG5vdCBzdXBwb3J0ZWQiKTtmb3IodmFyIHQ9MDt0PHRoaXMuZnJhbWVzLmxlbmd0aDt0KyspZm9yKHZhciByPXRoaXMuZnJhbWVzW3RdLmNvbXBvbmVudHMsbj0wLGk9T2JqZWN0LmtleXMocik7bjxpLmxlbmd0aDtuKyspe3ZhciBhPWlbbl07clthXS5xdWFudGl6YXRpb25UYWJsZT10aGlzLnF1YW50aXphdGlvblRhYmxlc1tyW2FdLnF1YW50aXphdGlvbklkeF0sZGVsZXRlIHJbYV0ucXVhbnRpemF0aW9uSWR4O31mb3IodmFyIG89ZVswXSxzPW8uY29tcG9uZW50cyx1PW8uY29tcG9uZW50c09yZGVyLGY9W10sYz1vLnNhbXBsZXNQZXJMaW5lLGw9by5zY2FuTGluZXMsaD0wO2g8dS5sZW5ndGg7aCsrKXt2YXIgZD1zW3VbaF1dO2YucHVzaCh7bGluZXM6cm4oMCxkKSxzY2FsZVg6ZC5oL28ubWF4SCxzY2FsZVk6ZC52L28ubWF4Vn0pO31mb3IodmFyIHA9bmV3IFVpbnQ4QXJyYXkoYypsKmYubGVuZ3RoKSxtPTAsdj0wO3Y8bDsrK3YpZm9yKHZhciB5PTA7eTxjOysreSlmb3IodmFyIGc9MDtnPGYubGVuZ3RoOysrZyl7dmFyIHc9ZltnXTtwW21dPXcubGluZXNbMHx2Kncuc2NhbGVZXVswfHkqdy5zY2FsZVhdLCsrbTt9cmV0dXJuIHB9fV0pLGV9KCksYW49ZnVuY3Rpb24oZSl7aChyLGUpO3ZhciB0PUtyKHIpO2Z1bmN0aW9uIHIoZSl7dmFyIG47cmV0dXJuIGIodGhpcyxyKSwobj10LmNhbGwodGhpcykpLnJlYWRlcj1uZXcgbm4sZS5KUEVHVGFibGVzJiZuLnJlYWRlci5wYXJzZShlLkpQRUdUYWJsZXMpLG59cmV0dXJuIGMocixbe2tleToiZGVjb2RlQmxvY2siLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnJlYWRlci5yZXNldEZyYW1lcygpLHRoaXMucmVhZGVyLnBhcnNlKG5ldyBVaW50OEFycmF5KGUpKSx0aGlzLnJlYWRlci5nZXRSZXN1bHQoKS5idWZmZXJ9fV0pLHJ9KHdyKSxvbj1PYmplY3QuZnJlZXplKHtfX3Byb3RvX186bnVsbCxkZWZhdWx0OmFufSk7ZnVuY3Rpb24gc24oZSl7Zm9yKHZhciB0PWUubGVuZ3RoOy0tdD49MDspZVt0XT0wO31zbihuZXcgQXJyYXkoNTc2KSksc24obmV3IEFycmF5KDYwKSksc24obmV3IEFycmF5KDUxMikpLHNuKG5ldyBBcnJheSgyNTYpKSxzbihuZXcgQXJyYXkoMjkpKSxzbihuZXcgQXJyYXkoMzApKTt2YXIgdW49ZnVuY3Rpb24oZSx0LHIsbil7Zm9yKHZhciBpPTY1NTM1JmV8MCxhPWU+Pj4xNiY2NTUzNXwwLG89MDswIT09cjspe3ItPW89cj4yZTM/MmUzOnI7ZG97YT1hKyhpPWkrdFtuKytdfDApfDA7fXdoaWxlKC0tbyk7aSU9NjU1MjEsYSU9NjU1MjE7fXJldHVybiBpfGE8PDE2fDB9LGZuPW5ldyBVaW50MzJBcnJheShmdW5jdGlvbigpe2Zvcih2YXIgZSx0PVtdLHI9MDtyPDI1NjtyKyspe2U9cjtmb3IodmFyIG49MDtuPDg7bisrKWU9MSZlPzM5ODgyOTIzODReZT4+PjE6ZT4+PjE7dFtyXT1lO31yZXR1cm4gdH0oKSksY249ZnVuY3Rpb24oZSx0LHIsbil7dmFyIGk9Zm4sYT1uK3I7ZV49LTE7Zm9yKHZhciBvPW47bzxhO28rKyllPWU+Pj44XmlbMjU1JihlXnRbb10pXTtyZXR1cm4gLTFeZX0sbG49ezI6Im5lZWQgZGljdGlvbmFyeSIsMToic3RyZWFtIGVuZCIsMDoiIiwiLTEiOiJmaWxlIGVycm9yIiwiLTIiOiJzdHJlYW0gZXJyb3IiLCItMyI6ImRhdGEgZXJyb3IiLCItNCI6Imluc3VmZmljaWVudCBtZW1vcnkiLCItNSI6ImJ1ZmZlciBlcnJvciIsIi02IjoiaW5jb21wYXRpYmxlIHZlcnNpb24ifSxobj17Wl9OT19GTFVTSDowLFpfUEFSVElBTF9GTFVTSDoxLFpfU1lOQ19GTFVTSDoyLFpfRlVMTF9GTFVTSDozLFpfRklOSVNIOjQsWl9CTE9DSzo1LFpfVFJFRVM6NixaX09LOjAsWl9TVFJFQU1fRU5EOjEsWl9ORUVEX0RJQ1Q6MixaX0VSUk5POi0xLFpfU1RSRUFNX0VSUk9SOi0yLFpfREFUQV9FUlJPUjotMyxaX01FTV9FUlJPUjotNCxaX0JVRl9FUlJPUjotNSxaX05PX0NPTVBSRVNTSU9OOjAsWl9CRVNUX1NQRUVEOjEsWl9CRVNUX0NPTVBSRVNTSU9OOjksWl9ERUZBVUxUX0NPTVBSRVNTSU9OOi0xLFpfRklMVEVSRUQ6MSxaX0hVRkZNQU5fT05MWToyLFpfUkxFOjMsWl9GSVhFRDo0LFpfREVGQVVMVF9TVFJBVEVHWTowLFpfQklOQVJZOjAsWl9URVhUOjEsWl9VTktOT1dOOjIsWl9ERUZMQVRFRDo4fSxkbj1mdW5jdGlvbihlLHQpe3JldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSx0KX0scG49ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywxKTt0Lmxlbmd0aDspe3ZhciByPXQuc2hpZnQoKTtpZihyKXtpZigib2JqZWN0IiE9PWQocikpdGhyb3cgbmV3IFR5cGVFcnJvcihyKyJtdXN0IGJlIG5vbi1vYmplY3QiKTtmb3IodmFyIG4gaW4gcilkbihyLG4pJiYoZVtuXT1yW25dKTt9fXJldHVybiBlfSxtbj1mdW5jdGlvbihlKXtmb3IodmFyIHQ9MCxyPTAsbj1lLmxlbmd0aDtyPG47cisrKXQrPWVbcl0ubGVuZ3RoO2Zvcih2YXIgaT1uZXcgVWludDhBcnJheSh0KSxhPTAsbz0wLHM9ZS5sZW5ndGg7YTxzO2ErKyl7dmFyIHU9ZVthXTtpLnNldCh1LG8pLG8rPXUubGVuZ3RoO31yZXR1cm4gaX0sdm49ITA7dHJ5e1N0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkobnVsbCxuZXcgVWludDhBcnJheSgxKSk7fWNhdGNoKGUpe3ZuPSExO31mb3IodmFyIHluPW5ldyBVaW50OEFycmF5KDI1NiksZ249MDtnbjwyNTY7Z24rKyl5bltnbl09Z24+PTI1Mj82OmduPj0yNDg/NTpnbj49MjQwPzQ6Z24+PTIyND8zOmduPj0xOTI/MjoxO3luWzI1NF09eW5bMjU0XT0xO3ZhciB3bj1mdW5jdGlvbihlKXtpZigiZnVuY3Rpb24iPT10eXBlb2YgVGV4dEVuY29kZXImJlRleHRFbmNvZGVyLnByb3RvdHlwZS5lbmNvZGUpcmV0dXJuIChuZXcgVGV4dEVuY29kZXIpLmVuY29kZShlKTt2YXIgdCxyLG4saSxhLG89ZS5sZW5ndGgscz0wO2ZvcihpPTA7aTxvO2krKyk1NTI5Nj09KDY0NTEyJihyPWUuY2hhckNvZGVBdChpKSkpJiZpKzE8byYmNTYzMjA9PSg2NDUxMiYobj1lLmNoYXJDb2RlQXQoaSsxKSkpJiYocj02NTUzNisoci01NTI5Njw8MTApKyhuLTU2MzIwKSxpKyspLHMrPXI8MTI4PzE6cjwyMDQ4PzI6cjw2NTUzNj8zOjQ7Zm9yKHQ9bmV3IFVpbnQ4QXJyYXkocyksYT0wLGk9MDthPHM7aSsrKTU1Mjk2PT0oNjQ1MTImKHI9ZS5jaGFyQ29kZUF0KGkpKSkmJmkrMTxvJiY1NjMyMD09KDY0NTEyJihuPWUuY2hhckNvZGVBdChpKzEpKSkmJihyPTY1NTM2KyhyLTU1Mjk2PDwxMCkrKG4tNTYzMjApLGkrKykscjwxMjg/dFthKytdPXI6cjwyMDQ4Pyh0W2ErK109MTkyfHI+Pj42LHRbYSsrXT0xMjh8NjMmcik6cjw2NTUzNj8odFthKytdPTIyNHxyPj4+MTIsdFthKytdPTEyOHxyPj4+NiY2Myx0W2ErK109MTI4fDYzJnIpOih0W2ErK109MjQwfHI+Pj4xOCx0W2ErK109MTI4fHI+Pj4xMiY2Myx0W2ErK109MTI4fHI+Pj42JjYzLHRbYSsrXT0xMjh8NjMmcik7cmV0dXJuIHR9LGJuPWZ1bmN0aW9uKGUsdCl7dmFyIHIsbixpPXR8fGUubGVuZ3RoO2lmKCJmdW5jdGlvbiI9PXR5cGVvZiBUZXh0RGVjb2RlciYmVGV4dERlY29kZXIucHJvdG90eXBlLmRlY29kZSlyZXR1cm4gKG5ldyBUZXh0RGVjb2RlcikuZGVjb2RlKGUuc3ViYXJyYXkoMCx0KSk7dmFyIGE9bmV3IEFycmF5KDIqaSk7Zm9yKG49MCxyPTA7cjxpOyl7dmFyIG89ZVtyKytdO2lmKG88MTI4KWFbbisrXT1vO2Vsc2Uge3ZhciBzPXluW29dO2lmKHM+NClhW24rK109NjU1MzMscis9cy0xO2Vsc2Uge2ZvcihvJj0yPT09cz8zMTozPT09cz8xNTo3O3M+MSYmcjxpOylvPW88PDZ8NjMmZVtyKytdLHMtLTtzPjE/YVtuKytdPTY1NTMzOm88NjU1MzY/YVtuKytdPW86KG8tPTY1NTM2LGFbbisrXT01NTI5NnxvPj4xMCYxMDIzLGFbbisrXT01NjMyMHwxMDIzJm8pO319fXJldHVybiBmdW5jdGlvbihlLHQpe2lmKHQ8NjU1MzQmJmUuc3ViYXJyYXkmJnZuKXJldHVybiBTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KG51bGwsZS5sZW5ndGg9PT10P2U6ZS5zdWJhcnJheSgwLHQpKTtmb3IodmFyIHI9IiIsbj0wO248dDtuKyspcis9U3RyaW5nLmZyb21DaGFyQ29kZShlW25dKTtyZXR1cm4gcn0oYSxuKX0sa249ZnVuY3Rpb24oZSx0KXsodD10fHxlLmxlbmd0aCk+ZS5sZW5ndGgmJih0PWUubGVuZ3RoKTtmb3IodmFyIHI9dC0xO3I+PTAmJjEyOD09KDE5MiZlW3JdKTspci0tO3JldHVybiByPDB8fDA9PT1yP3Q6cit5bltlW3JdXT50P3I6dH07dmFyIHhuPWZ1bmN0aW9uKCl7dGhpcy5pbnB1dD1udWxsLHRoaXMubmV4dF9pbj0wLHRoaXMuYXZhaWxfaW49MCx0aGlzLnRvdGFsX2luPTAsdGhpcy5vdXRwdXQ9bnVsbCx0aGlzLm5leHRfb3V0PTAsdGhpcy5hdmFpbF9vdXQ9MCx0aGlzLnRvdGFsX291dD0wLHRoaXMubXNnPSIiLHRoaXMuc3RhdGU9bnVsbCx0aGlzLmRhdGFfdHlwZT0yLHRoaXMuYWRsZXI9MDt9LEFuPWZ1bmN0aW9uKGUsdCl7dmFyIHIsbixpLGEsbyxzLHUsZixjLGwsaCxkLHAsbSx2LHksZyx3LGIsayx4LEEsXyxJLFA9ZS5zdGF0ZTtyPWUubmV4dF9pbixfPWUuaW5wdXQsbj1yKyhlLmF2YWlsX2luLTUpLGk9ZS5uZXh0X291dCxJPWUub3V0cHV0LGE9aS0odC1lLmF2YWlsX291dCksbz1pKyhlLmF2YWlsX291dC0yNTcpLHM9UC5kbWF4LHU9UC53c2l6ZSxmPVAud2hhdmUsYz1QLnduZXh0LGw9UC53aW5kb3csaD1QLmhvbGQsZD1QLmJpdHMscD1QLmxlbmNvZGUsbT1QLmRpc3Rjb2RlLHY9KDE8PFAubGVuYml0cyktMSx5PSgxPDxQLmRpc3RiaXRzKS0xO2U6ZG97ZDwxNSYmKGgrPV9bcisrXTw8ZCxkKz04LGgrPV9bcisrXTw8ZCxkKz04KSxnPXBbaCZ2XTt0OmZvcig7Oyl7aWYoaD4+Pj13PWc+Pj4yNCxkLT13LDA9PT0odz1nPj4+MTYmMjU1KSlJW2krK109NjU1MzUmZztlbHNlIHtpZighKDE2JncpKXtpZigwPT0oNjQmdykpe2c9cFsoNjU1MzUmZykrKGgmKDE8PHcpLTEpXTtjb250aW51ZSB0fWlmKDMyJncpe1AubW9kZT0xMjticmVhayBlfWUubXNnPSJpbnZhbGlkIGxpdGVyYWwvbGVuZ3RoIGNvZGUiLFAubW9kZT0zMDticmVhayBlfWI9NjU1MzUmZywodyY9MTUpJiYoZDx3JiYoaCs9X1tyKytdPDxkLGQrPTgpLGIrPWgmKDE8PHcpLTEsaD4+Pj13LGQtPXcpLGQ8MTUmJihoKz1fW3IrK108PGQsZCs9OCxoKz1fW3IrK108PGQsZCs9OCksZz1tW2gmeV07cjpmb3IoOzspe2lmKGg+Pj49dz1nPj4+MjQsZC09dywhKDE2Jih3PWc+Pj4xNiYyNTUpKSl7aWYoMD09KDY0JncpKXtnPW1bKDY1NTM1JmcpKyhoJigxPDx3KS0xKV07Y29udGludWUgcn1lLm1zZz0iaW52YWxpZCBkaXN0YW5jZSBjb2RlIixQLm1vZGU9MzA7YnJlYWsgZX1pZihrPTY1NTM1JmcsZDwodyY9MTUpJiYoaCs9X1tyKytdPDxkLChkKz04KTx3JiYoaCs9X1tyKytdPDxkLGQrPTgpKSwoays9aCYoMTw8dyktMSk+cyl7ZS5tc2c9ImludmFsaWQgZGlzdGFuY2UgdG9vIGZhciBiYWNrIixQLm1vZGU9MzA7YnJlYWsgZX1pZihoPj4+PXcsZC09dyxrPih3PWktYSkpe2lmKCh3PWstdyk+ZiYmUC5zYW5lKXtlLm1zZz0iaW52YWxpZCBkaXN0YW5jZSB0b28gZmFyIGJhY2siLFAubW9kZT0zMDticmVhayBlfWlmKHg9MCxBPWwsMD09PWMpe2lmKHgrPXUtdyx3PGIpe2ItPXc7ZG97SVtpKytdPWxbeCsrXTt9d2hpbGUoLS13KTt4PWktayxBPUk7fX1lbHNlIGlmKGM8dyl7aWYoeCs9dStjLXcsKHctPWMpPGIpe2ItPXc7ZG97SVtpKytdPWxbeCsrXTt9d2hpbGUoLS13KTtpZih4PTAsYzxiKXtiLT13PWM7ZG97SVtpKytdPWxbeCsrXTt9d2hpbGUoLS13KTt4PWktayxBPUk7fX19ZWxzZSBpZih4Kz1jLXcsdzxiKXtiLT13O2Rve0lbaSsrXT1sW3grK107fXdoaWxlKC0tdyk7eD1pLWssQT1JO31mb3IoO2I+MjspSVtpKytdPUFbeCsrXSxJW2krK109QVt4KytdLElbaSsrXT1BW3grK10sYi09MztiJiYoSVtpKytdPUFbeCsrXSxiPjEmJihJW2krK109QVt4KytdKSk7fWVsc2Uge3g9aS1rO2Rve0lbaSsrXT1JW3grK10sSVtpKytdPUlbeCsrXSxJW2krK109SVt4KytdLGItPTM7fXdoaWxlKGI+Mik7YiYmKElbaSsrXT1JW3grK10sYj4xJiYoSVtpKytdPUlbeCsrXSkpO31icmVha319YnJlYWt9fXdoaWxlKHI8biYmaTxvKTtyLT1iPWQ+PjMsaCY9KDE8PChkLT1iPDwzKSktMSxlLm5leHRfaW49cixlLm5leHRfb3V0PWksZS5hdmFpbF9pbj1yPG4/bi1yKzU6NS0oci1uKSxlLmF2YWlsX291dD1pPG8/by1pKzI1NzoyNTctKGktbyksUC5ob2xkPWgsUC5iaXRzPWQ7fSxfbj0xNSxJbj1uZXcgVWludDE2QXJyYXkoWzMsNCw1LDYsNyw4LDksMTAsMTEsMTMsMTUsMTcsMTksMjMsMjcsMzEsMzUsNDMsNTEsNTksNjcsODMsOTksMTE1LDEzMSwxNjMsMTk1LDIyNywyNTgsMCwwXSksUG49bmV3IFVpbnQ4QXJyYXkoWzE2LDE2LDE2LDE2LDE2LDE2LDE2LDE2LDE3LDE3LDE3LDE3LDE4LDE4LDE4LDE4LDE5LDE5LDE5LDE5LDIwLDIwLDIwLDIwLDIxLDIxLDIxLDIxLDE2LDcyLDc4XSksU249bmV3IFVpbnQxNkFycmF5KFsxLDIsMyw0LDUsNyw5LDEzLDE3LDI1LDMzLDQ5LDY1LDk3LDEyOSwxOTMsMjU3LDM4NSw1MTMsNzY5LDEwMjUsMTUzNywyMDQ5LDMwNzMsNDA5Nyw2MTQ1LDgxOTMsMTIyODksMTYzODUsMjQ1NzcsMCwwXSksVG49bmV3IFVpbnQ4QXJyYXkoWzE2LDE2LDE2LDE2LDE3LDE3LDE4LDE4LDE5LDE5LDIwLDIwLDIxLDIxLDIyLDIyLDIzLDIzLDI0LDI0LDI1LDI1LDI2LDI2LDI3LDI3LDI4LDI4LDI5LDI5LDY0LDY0XSksVW49ZnVuY3Rpb24oZSx0LHIsbixpLGEsbyxzKXt2YXIgdSxmLGMsbCxoLGQscCxtLHYseT1zLmJpdHMsZz0wLHc9MCxiPTAsaz0wLHg9MCxBPTAsXz0wLEk9MCxQPTAsUz0wLFQ9bnVsbCxVPTAsTz1uZXcgVWludDE2QXJyYXkoMTYpLEQ9bmV3IFVpbnQxNkFycmF5KDE2KSxFPW51bGwsUj0wO2ZvcihnPTA7Zzw9X247ZysrKU9bZ109MDtmb3Iodz0wO3c8bjt3KyspT1t0W3Ird11dKys7Zm9yKHg9eSxrPV9uO2s+PTEmJjA9PT1PW2tdO2stLSk7aWYoeD5rJiYoeD1rKSwwPT09aylyZXR1cm4gaVthKytdPTIwOTcxNTIwLGlbYSsrXT0yMDk3MTUyMCxzLmJpdHM9MSwwO2ZvcihiPTE7YjxrJiYwPT09T1tiXTtiKyspO2Zvcih4PGImJih4PWIpLEk9MSxnPTE7Zzw9X247ZysrKWlmKEk8PD0xLChJLT1PW2ddKTwwKXJldHVybiAtMTtpZihJPjAmJigwPT09ZXx8MSE9PWspKXJldHVybiAtMTtmb3IoRFsxXT0wLGc9MTtnPF9uO2crKylEW2crMV09RFtnXStPW2ddO2Zvcih3PTA7dzxuO3crKykwIT09dFtyK3ddJiYob1tEW3Rbcit3XV0rK109dyk7aWYoMD09PWU/KFQ9RT1vLGQ9MTkpOjE9PT1lPyhUPUluLFUtPTI1NyxFPVBuLFItPTI1NyxkPTI1Nik6KFQ9U24sRT1UbixkPS0xKSxTPTAsdz0wLGc9YixoPWEsQT14LF89MCxjPS0xLGw9KFA9MTw8eCktMSwxPT09ZSYmUD44NTJ8fDI9PT1lJiZQPjU5MilyZXR1cm4gMTtmb3IoOzspe3A9Zy1fLG9bd108ZD8obT0wLHY9b1t3XSk6b1t3XT5kPyhtPUVbUitvW3ddXSx2PVRbVStvW3ddXSk6KG09OTYsdj0wKSx1PTE8PGctXyxiPWY9MTw8QTtkb3tpW2grKFM+Pl8pKyhmLT11KV09cDw8MjR8bTw8MTZ8dnwwO313aGlsZSgwIT09Zik7Zm9yKHU9MTw8Zy0xO1MmdTspdT4+PTE7aWYoMCE9PXU/KFMmPXUtMSxTKz11KTpTPTAsdysrLDA9PS0tT1tnXSl7aWYoZz09PWspYnJlYWs7Zz10W3Irb1t3XV07fWlmKGc+eCYmKFMmbCkhPT1jKXtmb3IoMD09PV8mJihfPXgpLGgrPWIsST0xPDwoQT1nLV8pO0ErXzxrJiYhKChJLT1PW0ErX10pPD0wKTspQSsrLEk8PD0xO2lmKFArPTE8PEEsMT09PWUmJlA+ODUyfHwyPT09ZSYmUD41OTIpcmV0dXJuIDE7aVtjPVMmbF09eDw8MjR8QTw8MTZ8aC1hfDA7fX1yZXR1cm4gMCE9PVMmJihpW2grU109Zy1fPDwyNHw2NDw8MTZ8MCkscy5iaXRzPXgsMH0sT249aG4uWl9GSU5JU0gsRG49aG4uWl9CTE9DSyxFbj1obi5aX1RSRUVTLFJuPWhuLlpfT0ssTW49aG4uWl9TVFJFQU1fRU5ELEJuPWhuLlpfTkVFRF9ESUNULENuPWhuLlpfU1RSRUFNX0VSUk9SLExuPWhuLlpfREFUQV9FUlJPUixGbj1obi5aX01FTV9FUlJPUixWbj1obi5aX0JVRl9FUlJPUixHbj1obi5aX0RFRkxBVEVELGpuPTEyLHpuPTMwLE5uPWZ1bmN0aW9uKGUpe3JldHVybiAoZT4+PjI0JjI1NSkrKGU+Pj44JjY1MjgwKSsoKDY1MjgwJmUpPDw4KSsoKDI1NSZlKTw8MjQpfTtmdW5jdGlvbiBLbigpe3RoaXMubW9kZT0wLHRoaXMubGFzdD0hMSx0aGlzLndyYXA9MCx0aGlzLmhhdmVkaWN0PSExLHRoaXMuZmxhZ3M9MCx0aGlzLmRtYXg9MCx0aGlzLmNoZWNrPTAsdGhpcy50b3RhbD0wLHRoaXMuaGVhZD1udWxsLHRoaXMud2JpdHM9MCx0aGlzLndzaXplPTAsdGhpcy53aGF2ZT0wLHRoaXMud25leHQ9MCx0aGlzLndpbmRvdz1udWxsLHRoaXMuaG9sZD0wLHRoaXMuYml0cz0wLHRoaXMubGVuZ3RoPTAsdGhpcy5vZmZzZXQ9MCx0aGlzLmV4dHJhPTAsdGhpcy5sZW5jb2RlPW51bGwsdGhpcy5kaXN0Y29kZT1udWxsLHRoaXMubGVuYml0cz0wLHRoaXMuZGlzdGJpdHM9MCx0aGlzLm5jb2RlPTAsdGhpcy5ubGVuPTAsdGhpcy5uZGlzdD0wLHRoaXMuaGF2ZT0wLHRoaXMubmV4dD1udWxsLHRoaXMubGVucz1uZXcgVWludDE2QXJyYXkoMzIwKSx0aGlzLndvcms9bmV3IFVpbnQxNkFycmF5KDI4OCksdGhpcy5sZW5keW49bnVsbCx0aGlzLmRpc3RkeW49bnVsbCx0aGlzLnNhbmU9MCx0aGlzLmJhY2s9MCx0aGlzLndhcz0wO312YXIgWm4sSG4sWW49ZnVuY3Rpb24oZSl7aWYoIWV8fCFlLnN0YXRlKXJldHVybiBDbjt2YXIgdD1lLnN0YXRlO3JldHVybiBlLnRvdGFsX2luPWUudG90YWxfb3V0PXQudG90YWw9MCxlLm1zZz0iIix0LndyYXAmJihlLmFkbGVyPTEmdC53cmFwKSx0Lm1vZGU9MSx0Lmxhc3Q9MCx0LmhhdmVkaWN0PTAsdC5kbWF4PTMyNzY4LHQuaGVhZD1udWxsLHQuaG9sZD0wLHQuYml0cz0wLHQubGVuY29kZT10LmxlbmR5bj1uZXcgSW50MzJBcnJheSg4NTIpLHQuZGlzdGNvZGU9dC5kaXN0ZHluPW5ldyBJbnQzMkFycmF5KDU5MiksdC5zYW5lPTEsdC5iYWNrPS0xLFJufSxxbj1mdW5jdGlvbihlKXtpZighZXx8IWUuc3RhdGUpcmV0dXJuIENuO3ZhciB0PWUuc3RhdGU7cmV0dXJuIHQud3NpemU9MCx0LndoYXZlPTAsdC53bmV4dD0wLFluKGUpfSxYbj1mdW5jdGlvbihlLHQpe3ZhciByO2lmKCFlfHwhZS5zdGF0ZSlyZXR1cm4gQ247dmFyIG49ZS5zdGF0ZTtyZXR1cm4gdDwwPyhyPTAsdD0tdCk6KHI9MSsodD4+NCksdDw0OCYmKHQmPTE1KSksdCYmKHQ8OHx8dD4xNSk/Q246KG51bGwhPT1uLndpbmRvdyYmbi53Yml0cyE9PXQmJihuLndpbmRvdz1udWxsKSxuLndyYXA9cixuLndiaXRzPXQscW4oZSkpfSxXbj1mdW5jdGlvbihlLHQpe2lmKCFlKXJldHVybiBDbjt2YXIgcj1uZXcgS247ZS5zdGF0ZT1yLHIud2luZG93PW51bGw7dmFyIG49WG4oZSx0KTtyZXR1cm4gbiE9PVJuJiYoZS5zdGF0ZT1udWxsKSxufSxKbj0hMCxRbj1mdW5jdGlvbihlKXtpZihKbil7Wm49bmV3IEludDMyQXJyYXkoNTEyKSxIbj1uZXcgSW50MzJBcnJheSgzMik7Zm9yKHZhciB0PTA7dDwxNDQ7KWUubGVuc1t0KytdPTg7Zm9yKDt0PDI1NjspZS5sZW5zW3QrK109OTtmb3IoO3Q8MjgwOyllLmxlbnNbdCsrXT03O2Zvcig7dDwyODg7KWUubGVuc1t0KytdPTg7Zm9yKFVuKDEsZS5sZW5zLDAsMjg4LFpuLDAsZS53b3JrLHtiaXRzOjl9KSx0PTA7dDwzMjspZS5sZW5zW3QrK109NTtVbigyLGUubGVucywwLDMyLEhuLDAsZS53b3JrLHtiaXRzOjV9KSxKbj0hMTt9ZS5sZW5jb2RlPVpuLGUubGVuYml0cz05LGUuZGlzdGNvZGU9SG4sZS5kaXN0Yml0cz01O30sJG49ZnVuY3Rpb24oZSx0LHIsbil7dmFyIGksYT1lLnN0YXRlO3JldHVybiBudWxsPT09YS53aW5kb3cmJihhLndzaXplPTE8PGEud2JpdHMsYS53bmV4dD0wLGEud2hhdmU9MCxhLndpbmRvdz1uZXcgVWludDhBcnJheShhLndzaXplKSksbj49YS53c2l6ZT8oYS53aW5kb3cuc2V0KHQuc3ViYXJyYXkoci1hLndzaXplLHIpLDApLGEud25leHQ9MCxhLndoYXZlPWEud3NpemUpOigoaT1hLndzaXplLWEud25leHQpPm4mJihpPW4pLGEud2luZG93LnNldCh0LnN1YmFycmF5KHItbixyLW4raSksYS53bmV4dCksKG4tPWkpPyhhLndpbmRvdy5zZXQodC5zdWJhcnJheShyLW4sciksMCksYS53bmV4dD1uLGEud2hhdmU9YS53c2l6ZSk6KGEud25leHQrPWksYS53bmV4dD09PWEud3NpemUmJihhLnduZXh0PTApLGEud2hhdmU8YS53c2l6ZSYmKGEud2hhdmUrPWkpKSksMH0sZWk9e2luZmxhdGVSZXNldDpxbixpbmZsYXRlUmVzZXQyOlhuLGluZmxhdGVSZXNldEtlZXA6WW4saW5mbGF0ZUluaXQ6ZnVuY3Rpb24oZSl7cmV0dXJuIFduKGUsMTUpfSxpbmZsYXRlSW5pdDI6V24saW5mbGF0ZTpmdW5jdGlvbihlLHQpe3ZhciByLG4saSxhLG8scyx1LGYsYyxsLGgsZCxwLG0sdix5LGcsdyxiLGsseCxBLF8sSSxQPTAsUz1uZXcgVWludDhBcnJheSg0KSxUPW5ldyBVaW50OEFycmF5KFsxNiwxNywxOCwwLDgsNyw5LDYsMTAsNSwxMSw0LDEyLDMsMTMsMiwxNCwxLDE1XSk7aWYoIWV8fCFlLnN0YXRlfHwhZS5vdXRwdXR8fCFlLmlucHV0JiYwIT09ZS5hdmFpbF9pbilyZXR1cm4gQ247KHI9ZS5zdGF0ZSkubW9kZT09PWpuJiYoci5tb2RlPTEzKSxvPWUubmV4dF9vdXQsaT1lLm91dHB1dCx1PWUuYXZhaWxfb3V0LGE9ZS5uZXh0X2luLG49ZS5pbnB1dCxzPWUuYXZhaWxfaW4sZj1yLmhvbGQsYz1yLmJpdHMsbD1zLGg9dSxBPVJuO2U6Zm9yKDs7KXN3aXRjaChyLm1vZGUpe2Nhc2UgMTppZigwPT09ci53cmFwKXtyLm1vZGU9MTM7YnJlYWt9Zm9yKDtjPDE2Oyl7aWYoMD09PXMpYnJlYWsgZTtzLS0sZis9blthKytdPDxjLGMrPTg7fWlmKDImci53cmFwJiYzNTYxNT09PWYpe3IuY2hlY2s9MCxTWzBdPTI1NSZmLFNbMV09Zj4+PjgmMjU1LHIuY2hlY2s9Y24oci5jaGVjayxTLDIsMCksZj0wLGM9MCxyLm1vZGU9MjticmVha31pZihyLmZsYWdzPTAsci5oZWFkJiYoci5oZWFkLmRvbmU9ITEpLCEoMSZyLndyYXApfHwoKCgyNTUmZik8PDgpKyhmPj44KSklMzEpe2UubXNnPSJpbmNvcnJlY3QgaGVhZGVyIGNoZWNrIixyLm1vZGU9em47YnJlYWt9aWYoKDE1JmYpIT09R24pe2UubXNnPSJ1bmtub3duIGNvbXByZXNzaW9uIG1ldGhvZCIsci5tb2RlPXpuO2JyZWFrfWlmKGMtPTQseD04KygxNSYoZj4+Pj00KSksMD09PXIud2JpdHMpci53Yml0cz14O2Vsc2UgaWYoeD5yLndiaXRzKXtlLm1zZz0iaW52YWxpZCB3aW5kb3cgc2l6ZSIsci5tb2RlPXpuO2JyZWFrfXIuZG1heD0xPDxyLndiaXRzLGUuYWRsZXI9ci5jaGVjaz0xLHIubW9kZT01MTImZj8xMDpqbixmPTAsYz0wO2JyZWFrO2Nhc2UgMjpmb3IoO2M8MTY7KXtpZigwPT09cylicmVhayBlO3MtLSxmKz1uW2ErK108PGMsYys9ODt9aWYoci5mbGFncz1mLCgyNTUmci5mbGFncykhPT1Hbil7ZS5tc2c9InVua25vd24gY29tcHJlc3Npb24gbWV0aG9kIixyLm1vZGU9em47YnJlYWt9aWYoNTczNDQmci5mbGFncyl7ZS5tc2c9InVua25vd24gaGVhZGVyIGZsYWdzIHNldCIsci5tb2RlPXpuO2JyZWFrfXIuaGVhZCYmKHIuaGVhZC50ZXh0PWY+PjgmMSksNTEyJnIuZmxhZ3MmJihTWzBdPTI1NSZmLFNbMV09Zj4+PjgmMjU1LHIuY2hlY2s9Y24oci5jaGVjayxTLDIsMCkpLGY9MCxjPTAsci5tb2RlPTM7Y2FzZSAzOmZvcig7YzwzMjspe2lmKDA9PT1zKWJyZWFrIGU7cy0tLGYrPW5bYSsrXTw8YyxjKz04O31yLmhlYWQmJihyLmhlYWQudGltZT1mKSw1MTImci5mbGFncyYmKFNbMF09MjU1JmYsU1sxXT1mPj4+OCYyNTUsU1syXT1mPj4+MTYmMjU1LFNbM109Zj4+PjI0JjI1NSxyLmNoZWNrPWNuKHIuY2hlY2ssUyw0LDApKSxmPTAsYz0wLHIubW9kZT00O2Nhc2UgNDpmb3IoO2M8MTY7KXtpZigwPT09cylicmVhayBlO3MtLSxmKz1uW2ErK108PGMsYys9ODt9ci5oZWFkJiYoci5oZWFkLnhmbGFncz0yNTUmZixyLmhlYWQub3M9Zj4+OCksNTEyJnIuZmxhZ3MmJihTWzBdPTI1NSZmLFNbMV09Zj4+PjgmMjU1LHIuY2hlY2s9Y24oci5jaGVjayxTLDIsMCkpLGY9MCxjPTAsci5tb2RlPTU7Y2FzZSA1OmlmKDEwMjQmci5mbGFncyl7Zm9yKDtjPDE2Oyl7aWYoMD09PXMpYnJlYWsgZTtzLS0sZis9blthKytdPDxjLGMrPTg7fXIubGVuZ3RoPWYsci5oZWFkJiYoci5oZWFkLmV4dHJhX2xlbj1mKSw1MTImci5mbGFncyYmKFNbMF09MjU1JmYsU1sxXT1mPj4+OCYyNTUsci5jaGVjaz1jbihyLmNoZWNrLFMsMiwwKSksZj0wLGM9MDt9ZWxzZSByLmhlYWQmJihyLmhlYWQuZXh0cmE9bnVsbCk7ci5tb2RlPTY7Y2FzZSA2OmlmKDEwMjQmci5mbGFncyYmKChkPXIubGVuZ3RoKT5zJiYoZD1zKSxkJiYoci5oZWFkJiYoeD1yLmhlYWQuZXh0cmFfbGVuLXIubGVuZ3RoLHIuaGVhZC5leHRyYXx8KHIuaGVhZC5leHRyYT1uZXcgVWludDhBcnJheShyLmhlYWQuZXh0cmFfbGVuKSksci5oZWFkLmV4dHJhLnNldChuLnN1YmFycmF5KGEsYStkKSx4KSksNTEyJnIuZmxhZ3MmJihyLmNoZWNrPWNuKHIuY2hlY2ssbixkLGEpKSxzLT1kLGErPWQsci5sZW5ndGgtPWQpLHIubGVuZ3RoKSlicmVhayBlO3IubGVuZ3RoPTAsci5tb2RlPTc7Y2FzZSA3OmlmKDIwNDgmci5mbGFncyl7aWYoMD09PXMpYnJlYWsgZTtkPTA7ZG97eD1uW2ErZCsrXSxyLmhlYWQmJngmJnIubGVuZ3RoPDY1NTM2JiYoci5oZWFkLm5hbWUrPVN0cmluZy5mcm9tQ2hhckNvZGUoeCkpO313aGlsZSh4JiZkPHMpO2lmKDUxMiZyLmZsYWdzJiYoci5jaGVjaz1jbihyLmNoZWNrLG4sZCxhKSkscy09ZCxhKz1kLHgpYnJlYWsgZX1lbHNlIHIuaGVhZCYmKHIuaGVhZC5uYW1lPW51bGwpO3IubGVuZ3RoPTAsci5tb2RlPTg7Y2FzZSA4OmlmKDQwOTYmci5mbGFncyl7aWYoMD09PXMpYnJlYWsgZTtkPTA7ZG97eD1uW2ErZCsrXSxyLmhlYWQmJngmJnIubGVuZ3RoPDY1NTM2JiYoci5oZWFkLmNvbW1lbnQrPVN0cmluZy5mcm9tQ2hhckNvZGUoeCkpO313aGlsZSh4JiZkPHMpO2lmKDUxMiZyLmZsYWdzJiYoci5jaGVjaz1jbihyLmNoZWNrLG4sZCxhKSkscy09ZCxhKz1kLHgpYnJlYWsgZX1lbHNlIHIuaGVhZCYmKHIuaGVhZC5jb21tZW50PW51bGwpO3IubW9kZT05O2Nhc2UgOTppZig1MTImci5mbGFncyl7Zm9yKDtjPDE2Oyl7aWYoMD09PXMpYnJlYWsgZTtzLS0sZis9blthKytdPDxjLGMrPTg7fWlmKGYhPT0oNjU1MzUmci5jaGVjaykpe2UubXNnPSJoZWFkZXIgY3JjIG1pc21hdGNoIixyLm1vZGU9em47YnJlYWt9Zj0wLGM9MDt9ci5oZWFkJiYoci5oZWFkLmhjcmM9ci5mbGFncz4+OSYxLHIuaGVhZC5kb25lPSEwKSxlLmFkbGVyPXIuY2hlY2s9MCxyLm1vZGU9am47YnJlYWs7Y2FzZSAxMDpmb3IoO2M8MzI7KXtpZigwPT09cylicmVhayBlO3MtLSxmKz1uW2ErK108PGMsYys9ODt9ZS5hZGxlcj1yLmNoZWNrPU5uKGYpLGY9MCxjPTAsci5tb2RlPTExO2Nhc2UgMTE6aWYoMD09PXIuaGF2ZWRpY3QpcmV0dXJuIGUubmV4dF9vdXQ9byxlLmF2YWlsX291dD11LGUubmV4dF9pbj1hLGUuYXZhaWxfaW49cyxyLmhvbGQ9ZixyLmJpdHM9YyxCbjtlLmFkbGVyPXIuY2hlY2s9MSxyLm1vZGU9am47Y2FzZSBqbjppZih0PT09RG58fHQ9PT1FbilicmVhayBlO2Nhc2UgMTM6aWYoci5sYXN0KXtmPj4+PTcmYyxjLT03JmMsci5tb2RlPTI3O2JyZWFrfWZvcig7YzwzOyl7aWYoMD09PXMpYnJlYWsgZTtzLS0sZis9blthKytdPDxjLGMrPTg7fXN3aXRjaChyLmxhc3Q9MSZmLGMtPTEsMyYoZj4+Pj0xKSl7Y2FzZSAwOnIubW9kZT0xNDticmVhaztjYXNlIDE6aWYoUW4ociksci5tb2RlPTIwLHQ9PT1Fbil7Zj4+Pj0yLGMtPTI7YnJlYWsgZX1icmVhaztjYXNlIDI6ci5tb2RlPTE3O2JyZWFrO2Nhc2UgMzplLm1zZz0iaW52YWxpZCBibG9jayB0eXBlIixyLm1vZGU9em47fWY+Pj49MixjLT0yO2JyZWFrO2Nhc2UgMTQ6Zm9yKGY+Pj49NyZjLGMtPTcmYztjPDMyOyl7aWYoMD09PXMpYnJlYWsgZTtzLS0sZis9blthKytdPDxjLGMrPTg7fWlmKCg2NTUzNSZmKSE9KGY+Pj4xNl42NTUzNSkpe2UubXNnPSJpbnZhbGlkIHN0b3JlZCBibG9jayBsZW5ndGhzIixyLm1vZGU9em47YnJlYWt9aWYoci5sZW5ndGg9NjU1MzUmZixmPTAsYz0wLHIubW9kZT0xNSx0PT09RW4pYnJlYWsgZTtjYXNlIDE1OnIubW9kZT0xNjtjYXNlIDE2OmlmKGQ9ci5sZW5ndGgpe2lmKGQ+cyYmKGQ9cyksZD51JiYoZD11KSwwPT09ZClicmVhayBlO2kuc2V0KG4uc3ViYXJyYXkoYSxhK2QpLG8pLHMtPWQsYSs9ZCx1LT1kLG8rPWQsci5sZW5ndGgtPWQ7YnJlYWt9ci5tb2RlPWpuO2JyZWFrO2Nhc2UgMTc6Zm9yKDtjPDE0Oyl7aWYoMD09PXMpYnJlYWsgZTtzLS0sZis9blthKytdPDxjLGMrPTg7fWlmKHIubmxlbj0yNTcrKDMxJmYpLGY+Pj49NSxjLT01LHIubmRpc3Q9MSsoMzEmZiksZj4+Pj01LGMtPTUsci5uY29kZT00KygxNSZmKSxmPj4+PTQsYy09NCxyLm5sZW4+Mjg2fHxyLm5kaXN0PjMwKXtlLm1zZz0idG9vIG1hbnkgbGVuZ3RoIG9yIGRpc3RhbmNlIHN5bWJvbHMiLHIubW9kZT16bjticmVha31yLmhhdmU9MCxyLm1vZGU9MTg7Y2FzZSAxODpmb3IoO3IuaGF2ZTxyLm5jb2RlOyl7Zm9yKDtjPDM7KXtpZigwPT09cylicmVhayBlO3MtLSxmKz1uW2ErK108PGMsYys9ODt9ci5sZW5zW1Rbci5oYXZlKytdXT03JmYsZj4+Pj0zLGMtPTM7fWZvcig7ci5oYXZlPDE5OylyLmxlbnNbVFtyLmhhdmUrK11dPTA7aWYoci5sZW5jb2RlPXIubGVuZHluLHIubGVuYml0cz03LF89e2JpdHM6ci5sZW5iaXRzfSxBPVVuKDAsci5sZW5zLDAsMTksci5sZW5jb2RlLDAsci53b3JrLF8pLHIubGVuYml0cz1fLmJpdHMsQSl7ZS5tc2c9ImludmFsaWQgY29kZSBsZW5ndGhzIHNldCIsci5tb2RlPXpuO2JyZWFrfXIuaGF2ZT0wLHIubW9kZT0xOTtjYXNlIDE5OmZvcig7ci5oYXZlPHIubmxlbityLm5kaXN0Oyl7Zm9yKDt5PShQPXIubGVuY29kZVtmJigxPDxyLmxlbmJpdHMpLTFdKT4+PjE2JjI1NSxnPTY1NTM1JlAsISgodj1QPj4+MjQpPD1jKTspe2lmKDA9PT1zKWJyZWFrIGU7cy0tLGYrPW5bYSsrXTw8YyxjKz04O31pZihnPDE2KWY+Pj49dixjLT12LHIubGVuc1tyLmhhdmUrK109ZztlbHNlIHtpZigxNj09PWcpe2ZvcihJPXYrMjtjPEk7KXtpZigwPT09cylicmVhayBlO3MtLSxmKz1uW2ErK108PGMsYys9ODt9aWYoZj4+Pj12LGMtPXYsMD09PXIuaGF2ZSl7ZS5tc2c9ImludmFsaWQgYml0IGxlbmd0aCByZXBlYXQiLHIubW9kZT16bjticmVha314PXIubGVuc1tyLmhhdmUtMV0sZD0zKygzJmYpLGY+Pj49MixjLT0yO31lbHNlIGlmKDE3PT09Zyl7Zm9yKEk9diszO2M8STspe2lmKDA9PT1zKWJyZWFrIGU7cy0tLGYrPW5bYSsrXTw8YyxjKz04O31jLT12LHg9MCxkPTMrKDcmKGY+Pj49dikpLGY+Pj49MyxjLT0zO31lbHNlIHtmb3IoST12Kzc7YzxJOyl7aWYoMD09PXMpYnJlYWsgZTtzLS0sZis9blthKytdPDxjLGMrPTg7fWMtPXYseD0wLGQ9MTErKDEyNyYoZj4+Pj12KSksZj4+Pj03LGMtPTc7fWlmKHIuaGF2ZStkPnIubmxlbityLm5kaXN0KXtlLm1zZz0iaW52YWxpZCBiaXQgbGVuZ3RoIHJlcGVhdCIsci5tb2RlPXpuO2JyZWFrfWZvcig7ZC0tOylyLmxlbnNbci5oYXZlKytdPXg7fX1pZihyLm1vZGU9PT16bilicmVhaztpZigwPT09ci5sZW5zWzI1Nl0pe2UubXNnPSJpbnZhbGlkIGNvZGUgLS0gbWlzc2luZyBlbmQtb2YtYmxvY2siLHIubW9kZT16bjticmVha31pZihyLmxlbmJpdHM9OSxfPXtiaXRzOnIubGVuYml0c30sQT1VbigxLHIubGVucywwLHIubmxlbixyLmxlbmNvZGUsMCxyLndvcmssXyksci5sZW5iaXRzPV8uYml0cyxBKXtlLm1zZz0iaW52YWxpZCBsaXRlcmFsL2xlbmd0aHMgc2V0IixyLm1vZGU9em47YnJlYWt9aWYoci5kaXN0Yml0cz02LHIuZGlzdGNvZGU9ci5kaXN0ZHluLF89e2JpdHM6ci5kaXN0Yml0c30sQT1VbigyLHIubGVucyxyLm5sZW4sci5uZGlzdCxyLmRpc3Rjb2RlLDAsci53b3JrLF8pLHIuZGlzdGJpdHM9Xy5iaXRzLEEpe2UubXNnPSJpbnZhbGlkIGRpc3RhbmNlcyBzZXQiLHIubW9kZT16bjticmVha31pZihyLm1vZGU9MjAsdD09PUVuKWJyZWFrIGU7Y2FzZSAyMDpyLm1vZGU9MjE7Y2FzZSAyMTppZihzPj02JiZ1Pj0yNTgpe2UubmV4dF9vdXQ9byxlLmF2YWlsX291dD11LGUubmV4dF9pbj1hLGUuYXZhaWxfaW49cyxyLmhvbGQ9ZixyLmJpdHM9YyxBbihlLGgpLG89ZS5uZXh0X291dCxpPWUub3V0cHV0LHU9ZS5hdmFpbF9vdXQsYT1lLm5leHRfaW4sbj1lLmlucHV0LHM9ZS5hdmFpbF9pbixmPXIuaG9sZCxjPXIuYml0cyxyLm1vZGU9PT1qbiYmKHIuYmFjaz0tMSk7YnJlYWt9Zm9yKHIuYmFjaz0wO3k9KFA9ci5sZW5jb2RlW2YmKDE8PHIubGVuYml0cyktMV0pPj4+MTYmMjU1LGc9NjU1MzUmUCwhKCh2PVA+Pj4yNCk8PWMpOyl7aWYoMD09PXMpYnJlYWsgZTtzLS0sZis9blthKytdPDxjLGMrPTg7fWlmKHkmJjA9PSgyNDAmeSkpe2Zvcih3PXYsYj15LGs9Zzt5PShQPXIubGVuY29kZVtrKygoZiYoMTw8dytiKS0xKT4+dyldKT4+PjE2JjI1NSxnPTY1NTM1JlAsISh3Kyh2PVA+Pj4yNCk8PWMpOyl7aWYoMD09PXMpYnJlYWsgZTtzLS0sZis9blthKytdPDxjLGMrPTg7fWY+Pj49dyxjLT13LHIuYmFjays9dzt9aWYoZj4+Pj12LGMtPXYsci5iYWNrKz12LHIubGVuZ3RoPWcsMD09PXkpe3IubW9kZT0yNjticmVha31pZigzMiZ5KXtyLmJhY2s9LTEsci5tb2RlPWpuO2JyZWFrfWlmKDY0Jnkpe2UubXNnPSJpbnZhbGlkIGxpdGVyYWwvbGVuZ3RoIGNvZGUiLHIubW9kZT16bjticmVha31yLmV4dHJhPTE1Jnksci5tb2RlPTIyO2Nhc2UgMjI6aWYoci5leHRyYSl7Zm9yKEk9ci5leHRyYTtjPEk7KXtpZigwPT09cylicmVhayBlO3MtLSxmKz1uW2ErK108PGMsYys9ODt9ci5sZW5ndGgrPWYmKDE8PHIuZXh0cmEpLTEsZj4+Pj1yLmV4dHJhLGMtPXIuZXh0cmEsci5iYWNrKz1yLmV4dHJhO31yLndhcz1yLmxlbmd0aCxyLm1vZGU9MjM7Y2FzZSAyMzpmb3IoO3k9KFA9ci5kaXN0Y29kZVtmJigxPDxyLmRpc3RiaXRzKS0xXSk+Pj4xNiYyNTUsZz02NTUzNSZQLCEoKHY9UD4+PjI0KTw9Yyk7KXtpZigwPT09cylicmVhayBlO3MtLSxmKz1uW2ErK108PGMsYys9ODt9aWYoMD09KDI0MCZ5KSl7Zm9yKHc9dixiPXksaz1nO3k9KFA9ci5kaXN0Y29kZVtrKygoZiYoMTw8dytiKS0xKT4+dyldKT4+PjE2JjI1NSxnPTY1NTM1JlAsISh3Kyh2PVA+Pj4yNCk8PWMpOyl7aWYoMD09PXMpYnJlYWsgZTtzLS0sZis9blthKytdPDxjLGMrPTg7fWY+Pj49dyxjLT13LHIuYmFjays9dzt9aWYoZj4+Pj12LGMtPXYsci5iYWNrKz12LDY0Jnkpe2UubXNnPSJpbnZhbGlkIGRpc3RhbmNlIGNvZGUiLHIubW9kZT16bjticmVha31yLm9mZnNldD1nLHIuZXh0cmE9MTUmeSxyLm1vZGU9MjQ7Y2FzZSAyNDppZihyLmV4dHJhKXtmb3IoST1yLmV4dHJhO2M8STspe2lmKDA9PT1zKWJyZWFrIGU7cy0tLGYrPW5bYSsrXTw8YyxjKz04O31yLm9mZnNldCs9ZiYoMTw8ci5leHRyYSktMSxmPj4+PXIuZXh0cmEsYy09ci5leHRyYSxyLmJhY2srPXIuZXh0cmE7fWlmKHIub2Zmc2V0PnIuZG1heCl7ZS5tc2c9ImludmFsaWQgZGlzdGFuY2UgdG9vIGZhciBiYWNrIixyLm1vZGU9em47YnJlYWt9ci5tb2RlPTI1O2Nhc2UgMjU6aWYoMD09PXUpYnJlYWsgZTtpZihkPWgtdSxyLm9mZnNldD5kKXtpZigoZD1yLm9mZnNldC1kKT5yLndoYXZlJiZyLnNhbmUpe2UubXNnPSJpbnZhbGlkIGRpc3RhbmNlIHRvbyBmYXIgYmFjayIsci5tb2RlPXpuO2JyZWFrfWQ+ci53bmV4dD8oZC09ci53bmV4dCxwPXIud3NpemUtZCk6cD1yLnduZXh0LWQsZD5yLmxlbmd0aCYmKGQ9ci5sZW5ndGgpLG09ci53aW5kb3c7fWVsc2UgbT1pLHA9by1yLm9mZnNldCxkPXIubGVuZ3RoO2Q+dSYmKGQ9dSksdS09ZCxyLmxlbmd0aC09ZDtkb3tpW28rK109bVtwKytdO313aGlsZSgtLWQpOzA9PT1yLmxlbmd0aCYmKHIubW9kZT0yMSk7YnJlYWs7Y2FzZSAyNjppZigwPT09dSlicmVhayBlO2lbbysrXT1yLmxlbmd0aCx1LS0sci5tb2RlPTIxO2JyZWFrO2Nhc2UgMjc6aWYoci53cmFwKXtmb3IoO2M8MzI7KXtpZigwPT09cylicmVhayBlO3MtLSxmfD1uW2ErK108PGMsYys9ODt9aWYoaC09dSxlLnRvdGFsX291dCs9aCxyLnRvdGFsKz1oLGgmJihlLmFkbGVyPXIuY2hlY2s9ci5mbGFncz9jbihyLmNoZWNrLGksaCxvLWgpOnVuKHIuY2hlY2ssaSxoLG8taCkpLGg9dSwoci5mbGFncz9mOk5uKGYpKSE9PXIuY2hlY2spe2UubXNnPSJpbmNvcnJlY3QgZGF0YSBjaGVjayIsci5tb2RlPXpuO2JyZWFrfWY9MCxjPTA7fXIubW9kZT0yODtjYXNlIDI4OmlmKHIud3JhcCYmci5mbGFncyl7Zm9yKDtjPDMyOyl7aWYoMD09PXMpYnJlYWsgZTtzLS0sZis9blthKytdPDxjLGMrPTg7fWlmKGYhPT0oNDI5NDk2NzI5NSZyLnRvdGFsKSl7ZS5tc2c9ImluY29ycmVjdCBsZW5ndGggY2hlY2siLHIubW9kZT16bjticmVha31mPTAsYz0wO31yLm1vZGU9Mjk7Y2FzZSAyOTpBPU1uO2JyZWFrIGU7Y2FzZSB6bjpBPUxuO2JyZWFrIGU7Y2FzZSAzMTpyZXR1cm4gRm47ZGVmYXVsdDpyZXR1cm4gQ259cmV0dXJuIGUubmV4dF9vdXQ9byxlLmF2YWlsX291dD11LGUubmV4dF9pbj1hLGUuYXZhaWxfaW49cyxyLmhvbGQ9ZixyLmJpdHM9Yywoci53c2l6ZXx8aCE9PWUuYXZhaWxfb3V0JiZyLm1vZGU8em4mJihyLm1vZGU8Mjd8fHQhPT1PbikpJiYkbihlLGUub3V0cHV0LGUubmV4dF9vdXQsaC1lLmF2YWlsX291dCksbC09ZS5hdmFpbF9pbixoLT1lLmF2YWlsX291dCxlLnRvdGFsX2luKz1sLGUudG90YWxfb3V0Kz1oLHIudG90YWwrPWgsci53cmFwJiZoJiYoZS5hZGxlcj1yLmNoZWNrPXIuZmxhZ3M/Y24oci5jaGVjayxpLGgsZS5uZXh0X291dC1oKTp1bihyLmNoZWNrLGksaCxlLm5leHRfb3V0LWgpKSxlLmRhdGFfdHlwZT1yLmJpdHMrKHIubGFzdD82NDowKSsoci5tb2RlPT09am4/MTI4OjApKygyMD09PXIubW9kZXx8MTU9PT1yLm1vZGU/MjU2OjApLCgwPT09bCYmMD09PWh8fHQ9PT1PbikmJkE9PT1SbiYmKEE9Vm4pLEF9LGluZmxhdGVFbmQ6ZnVuY3Rpb24oZSl7aWYoIWV8fCFlLnN0YXRlKXJldHVybiBDbjt2YXIgdD1lLnN0YXRlO3JldHVybiB0LndpbmRvdyYmKHQud2luZG93PW51bGwpLGUuc3RhdGU9bnVsbCxSbn0saW5mbGF0ZUdldEhlYWRlcjpmdW5jdGlvbihlLHQpe2lmKCFlfHwhZS5zdGF0ZSlyZXR1cm4gQ247dmFyIHI9ZS5zdGF0ZTtyZXR1cm4gMD09KDImci53cmFwKT9Dbjooci5oZWFkPXQsdC5kb25lPSExLFJuKX0saW5mbGF0ZVNldERpY3Rpb25hcnk6ZnVuY3Rpb24oZSx0KXt2YXIgcixuPXQubGVuZ3RoO3JldHVybiBlJiZlLnN0YXRlPzAhPT0ocj1lLnN0YXRlKS53cmFwJiYxMSE9PXIubW9kZT9DbjoxMT09PXIubW9kZSYmdW4oMSx0LG4sMCkhPT1yLmNoZWNrP0xuOiRuKGUsdCxuLG4pPyhyLm1vZGU9MzEsRm4pOihyLmhhdmVkaWN0PTEsUm4pOkNufSxpbmZsYXRlSW5mbzoicGFrbyBpbmZsYXRlIChmcm9tIE5vZGVjYSBwcm9qZWN0KSJ9O3ZhciB0aT1mdW5jdGlvbigpe3RoaXMudGV4dD0wLHRoaXMudGltZT0wLHRoaXMueGZsYWdzPTAsdGhpcy5vcz0wLHRoaXMuZXh0cmE9bnVsbCx0aGlzLmV4dHJhX2xlbj0wLHRoaXMubmFtZT0iIix0aGlzLmNvbW1lbnQ9IiIsdGhpcy5oY3JjPTAsdGhpcy5kb25lPSExO30scmk9T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZyxuaT1obi5aX05PX0ZMVVNILGlpPWhuLlpfRklOSVNILGFpPWhuLlpfT0ssb2k9aG4uWl9TVFJFQU1fRU5ELHNpPWhuLlpfTkVFRF9ESUNULHVpPWhuLlpfU1RSRUFNX0VSUk9SLGZpPWhuLlpfREFUQV9FUlJPUixjaT1obi5aX01FTV9FUlJPUjtmdW5jdGlvbiBsaShlKXt0aGlzLm9wdGlvbnM9cG4oe2NodW5rU2l6ZTo2NTUzNix3aW5kb3dCaXRzOjE1LHRvOiIifSxlfHx7fSk7dmFyIHQ9dGhpcy5vcHRpb25zO3QucmF3JiZ0LndpbmRvd0JpdHM+PTAmJnQud2luZG93Qml0czwxNiYmKHQud2luZG93Qml0cz0tdC53aW5kb3dCaXRzLDA9PT10LndpbmRvd0JpdHMmJih0LndpbmRvd0JpdHM9LTE1KSksISh0LndpbmRvd0JpdHM+PTAmJnQud2luZG93Qml0czwxNil8fGUmJmUud2luZG93Qml0c3x8KHQud2luZG93Qml0cys9MzIpLHQud2luZG93Qml0cz4xNSYmdC53aW5kb3dCaXRzPDQ4JiYwPT0oMTUmdC53aW5kb3dCaXRzKSYmKHQud2luZG93Qml0c3w9MTUpLHRoaXMuZXJyPTAsdGhpcy5tc2c9IiIsdGhpcy5lbmRlZD0hMSx0aGlzLmNodW5rcz1bXSx0aGlzLnN0cm09bmV3IHhuLHRoaXMuc3RybS5hdmFpbF9vdXQ9MDt2YXIgcj1laS5pbmZsYXRlSW5pdDIodGhpcy5zdHJtLHQud2luZG93Qml0cyk7aWYociE9PWFpKXRocm93IG5ldyBFcnJvcihsbltyXSk7aWYodGhpcy5oZWFkZXI9bmV3IHRpLGVpLmluZmxhdGVHZXRIZWFkZXIodGhpcy5zdHJtLHRoaXMuaGVhZGVyKSx0LmRpY3Rpb25hcnkmJigic3RyaW5nIj09dHlwZW9mIHQuZGljdGlvbmFyeT90LmRpY3Rpb25hcnk9d24odC5kaWN0aW9uYXJ5KToiW29iamVjdCBBcnJheUJ1ZmZlcl0iPT09cmkuY2FsbCh0LmRpY3Rpb25hcnkpJiYodC5kaWN0aW9uYXJ5PW5ldyBVaW50OEFycmF5KHQuZGljdGlvbmFyeSkpLHQucmF3JiYocj1laS5pbmZsYXRlU2V0RGljdGlvbmFyeSh0aGlzLnN0cm0sdC5kaWN0aW9uYXJ5KSkhPT1haSkpdGhyb3cgbmV3IEVycm9yKGxuW3JdKX1mdW5jdGlvbiBoaShlLHQpe3ZhciByPW5ldyBsaSh0KTtpZihyLnB1c2goZSksci5lcnIpdGhyb3cgci5tc2d8fGxuW3IuZXJyXTtyZXR1cm4gci5yZXN1bHR9bGkucHJvdG90eXBlLnB1c2g9ZnVuY3Rpb24oZSx0KXt2YXIgcixuLGksYT10aGlzLnN0cm0sbz10aGlzLm9wdGlvbnMuY2h1bmtTaXplLHM9dGhpcy5vcHRpb25zLmRpY3Rpb25hcnk7aWYodGhpcy5lbmRlZClyZXR1cm4gITE7Zm9yKG49dD09PX5+dD90OiEwPT09dD9paTpuaSwiW29iamVjdCBBcnJheUJ1ZmZlcl0iPT09cmkuY2FsbChlKT9hLmlucHV0PW5ldyBVaW50OEFycmF5KGUpOmEuaW5wdXQ9ZSxhLm5leHRfaW49MCxhLmF2YWlsX2luPWEuaW5wdXQubGVuZ3RoOzspe2ZvcigwPT09YS5hdmFpbF9vdXQmJihhLm91dHB1dD1uZXcgVWludDhBcnJheShvKSxhLm5leHRfb3V0PTAsYS5hdmFpbF9vdXQ9byksKHI9ZWkuaW5mbGF0ZShhLG4pKT09PXNpJiZzJiYoKHI9ZWkuaW5mbGF0ZVNldERpY3Rpb25hcnkoYSxzKSk9PT1haT9yPWVpLmluZmxhdGUoYSxuKTpyPT09ZmkmJihyPXNpKSk7YS5hdmFpbF9pbj4wJiZyPT09b2kmJmEuc3RhdGUud3JhcD4wJiYwIT09ZVthLm5leHRfaW5dOyllaS5pbmZsYXRlUmVzZXQoYSkscj1laS5pbmZsYXRlKGEsbik7c3dpdGNoKHIpe2Nhc2UgdWk6Y2FzZSBmaTpjYXNlIHNpOmNhc2UgY2k6cmV0dXJuIHRoaXMub25FbmQociksdGhpcy5lbmRlZD0hMCwhMX1pZihpPWEuYXZhaWxfb3V0LGEubmV4dF9vdXQmJigwPT09YS5hdmFpbF9vdXR8fHI9PT1vaSkpaWYoInN0cmluZyI9PT10aGlzLm9wdGlvbnMudG8pe3ZhciB1PWtuKGEub3V0cHV0LGEubmV4dF9vdXQpLGY9YS5uZXh0X291dC11LGM9Ym4oYS5vdXRwdXQsdSk7YS5uZXh0X291dD1mLGEuYXZhaWxfb3V0PW8tZixmJiZhLm91dHB1dC5zZXQoYS5vdXRwdXQuc3ViYXJyYXkodSx1K2YpLDApLHRoaXMub25EYXRhKGMpO31lbHNlIHRoaXMub25EYXRhKGEub3V0cHV0Lmxlbmd0aD09PWEubmV4dF9vdXQ/YS5vdXRwdXQ6YS5vdXRwdXQuc3ViYXJyYXkoMCxhLm5leHRfb3V0KSk7aWYociE9PWFpfHwwIT09aSl7aWYocj09PW9pKXJldHVybiByPWVpLmluZmxhdGVFbmQodGhpcy5zdHJtKSx0aGlzLm9uRW5kKHIpLHRoaXMuZW5kZWQ9ITAsITA7aWYoMD09PWEuYXZhaWxfaW4pYnJlYWt9fXJldHVybiAhMH0sbGkucHJvdG90eXBlLm9uRGF0YT1mdW5jdGlvbihlKXt0aGlzLmNodW5rcy5wdXNoKGUpO30sbGkucHJvdG90eXBlLm9uRW5kPWZ1bmN0aW9uKGUpe2U9PT1haSYmKCJzdHJpbmciPT09dGhpcy5vcHRpb25zLnRvP3RoaXMucmVzdWx0PXRoaXMuY2h1bmtzLmpvaW4oIiIpOnRoaXMucmVzdWx0PW1uKHRoaXMuY2h1bmtzKSksdGhpcy5jaHVua3M9W10sdGhpcy5lcnI9ZSx0aGlzLm1zZz10aGlzLnN0cm0ubXNnO307dmFyIGRpPXtJbmZsYXRlOmxpLGluZmxhdGU6aGksaW5mbGF0ZVJhdzpmdW5jdGlvbihlLHQpe3JldHVybiAodD10fHx7fSkucmF3PSEwLGhpKGUsdCl9LHVuZ3ppcDpoaSxjb25zdGFudHM6aG59LmluZmxhdGU7ZnVuY3Rpb24gcGkoZSl7dmFyIHQ9ZnVuY3Rpb24oKXtpZigidW5kZWZpbmVkIj09dHlwZW9mIFJlZmxlY3R8fCFSZWZsZWN0LmNvbnN0cnVjdClyZXR1cm4gITE7aWYoUmVmbGVjdC5jb25zdHJ1Y3Quc2hhbSlyZXR1cm4gITE7aWYoImZ1bmN0aW9uIj09dHlwZW9mIFByb3h5KXJldHVybiAhMDt0cnl7cmV0dXJuIEJvb2xlYW4ucHJvdG90eXBlLnZhbHVlT2YuY2FsbChSZWZsZWN0LmNvbnN0cnVjdChCb29sZWFuLFtdLChmdW5jdGlvbigpe30pKSksITB9Y2F0Y2goZSl7cmV0dXJuICExfX0oKTtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgcixuPXYoZSk7aWYodCl7dmFyIGk9dih0aGlzKS5jb25zdHJ1Y3RvcjtyPVJlZmxlY3QuY29uc3RydWN0KG4sYXJndW1lbnRzLGkpO31lbHNlIHI9bi5hcHBseSh0aGlzLGFyZ3VtZW50cyk7cmV0dXJuIG0odGhpcyxyKX19dmFyIG1pPWZ1bmN0aW9uKGUpe2gocixlKTt2YXIgdD1waShyKTtmdW5jdGlvbiByKCl7cmV0dXJuIGIodGhpcyxyKSx0LmFwcGx5KHRoaXMsYXJndW1lbnRzKX1yZXR1cm4gYyhyLFt7a2V5OiJkZWNvZGVCbG9jayIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIGRpKG5ldyBVaW50OEFycmF5KGUpKS5idWZmZXJ9fV0pLHJ9KHdyKSx2aT1PYmplY3QuZnJlZXplKHtfX3Byb3RvX186bnVsbCxkZWZhdWx0Om1pfSk7ZnVuY3Rpb24geWkoZSl7dmFyIHQ9ZnVuY3Rpb24oKXtpZigidW5kZWZpbmVkIj09dHlwZW9mIFJlZmxlY3R8fCFSZWZsZWN0LmNvbnN0cnVjdClyZXR1cm4gITE7aWYoUmVmbGVjdC5jb25zdHJ1Y3Quc2hhbSlyZXR1cm4gITE7aWYoImZ1bmN0aW9uIj09dHlwZW9mIFByb3h5KXJldHVybiAhMDt0cnl7cmV0dXJuIEJvb2xlYW4ucHJvdG90eXBlLnZhbHVlT2YuY2FsbChSZWZsZWN0LmNvbnN0cnVjdChCb29sZWFuLFtdLChmdW5jdGlvbigpe30pKSksITB9Y2F0Y2goZSl7cmV0dXJuICExfX0oKTtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgcixuPXYoZSk7aWYodCl7dmFyIGk9dih0aGlzKS5jb25zdHJ1Y3RvcjtyPVJlZmxlY3QuY29uc3RydWN0KG4sYXJndW1lbnRzLGkpO31lbHNlIHI9bi5hcHBseSh0aGlzLGFyZ3VtZW50cyk7cmV0dXJuIG0odGhpcyxyKX19dmFyIGdpPWZ1bmN0aW9uKGUpe2gocixlKTt2YXIgdD15aShyKTtmdW5jdGlvbiByKCl7cmV0dXJuIGIodGhpcyxyKSx0LmFwcGx5KHRoaXMsYXJndW1lbnRzKX1yZXR1cm4gYyhyLFt7a2V5OiJkZWNvZGVCbG9jayIsdmFsdWU6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PW5ldyBEYXRhVmlldyhlKSxyPVtdLG49MDtuPGUuYnl0ZUxlbmd0aDsrK24pe3ZhciBpPXQuZ2V0SW50OChuKTtpZihpPDApe3ZhciBhPXQuZ2V0VWludDgobisxKTtpPS1pO2Zvcih2YXIgbz0wO288PWk7KytvKXIucHVzaChhKTtuKz0xO31lbHNlIHtmb3IodmFyIHM9MDtzPD1pOysrcylyLnB1c2godC5nZXRVaW50OChuK3MrMSkpO24rPWkrMTt9fXJldHVybiBuZXcgVWludDhBcnJheShyKS5idWZmZXJ9fV0pLHJ9KHdyKSx3aT1PYmplY3QuZnJlZXplKHtfX3Byb3RvX186bnVsbCxkZWZhdWx0OmdpfSksYmk9e2V4cG9ydHM6e319OyFmdW5jdGlvbihlKXsKCS8qIENvcHlyaWdodCAyMDE1LTIwMjEgRXNyaS4gTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4gWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0IGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMCBAcHJlc2VydmUgKi8KCSFmdW5jdGlvbigpe3ZhciB0LHIsbixpLGEsbyxzLHUsZj0odD17ZGVmYXVsdE5vRGF0YVZhbHVlOi0zNDAyNzk5OTM4NzkwMTQ4NGUyMixkZWNvZGU6ZnVuY3Rpb24oZSxvKXt2YXIgcz0obz1vfHx7fSkuZW5jb2RlZE1hc2tEYXRhfHxudWxsPT09by5lbmNvZGVkTWFza0RhdGEsdT1hKGUsby5pbnB1dE9mZnNldHx8MCxzKSxmPW51bGwhPT1vLm5vRGF0YVZhbHVlP28ubm9EYXRhVmFsdWU6dC5kZWZhdWx0Tm9EYXRhVmFsdWUsYz1yKHUsby5waXhlbFR5cGV8fEZsb2F0MzJBcnJheSxvLmVuY29kZWRNYXNrRGF0YSxmLG8ucmV0dXJuTWFzayksbD17d2lkdGg6dS53aWR0aCxoZWlnaHQ6dS5oZWlnaHQscGl4ZWxEYXRhOmMucmVzdWx0UGl4ZWxzLG1pblZhbHVlOmMubWluVmFsdWUsbWF4VmFsdWU6dS5waXhlbHMubWF4VmFsdWUsbm9EYXRhVmFsdWU6Zn07cmV0dXJuIGMucmVzdWx0TWFzayYmKGwubWFza0RhdGE9Yy5yZXN1bHRNYXNrKSxvLnJldHVybkVuY29kZWRNYXNrJiZ1Lm1hc2smJihsLmVuY29kZWRNYXNrRGF0YT11Lm1hc2suYml0c2V0P3UubWFzay5iaXRzZXQ6bnVsbCksby5yZXR1cm5GaWxlSW5mbyYmKGwuZmlsZUluZm89bih1KSxvLmNvbXB1dGVVc2VkQml0RGVwdGhzJiYobC5maWxlSW5mby5iaXREZXB0aHM9aSh1KSkpLGx9fSxyPWZ1bmN0aW9uKGUsdCxyLG4saSl7dmFyIGEscyx1LGY9MCxjPWUucGl4ZWxzLm51bUJsb2Nrc1gsbD1lLnBpeGVscy5udW1CbG9ja3NZLGg9TWF0aC5mbG9vcihlLndpZHRoL2MpLGQ9TWF0aC5mbG9vcihlLmhlaWdodC9sKSxwPTIqZS5tYXhaRXJyb3IsbT1OdW1iZXIuTUFYX1ZBTFVFO3I9cnx8KGUubWFzaz9lLm1hc2suYml0c2V0Om51bGwpLHM9bmV3IHQoZS53aWR0aCplLmhlaWdodCksaSYmciYmKHU9bmV3IFVpbnQ4QXJyYXkoZS53aWR0aCplLmhlaWdodCkpO2Zvcih2YXIgdix5LGc9bmV3IEZsb2F0MzJBcnJheShoKmQpLHc9MDt3PD1sO3crKyl7dmFyIGI9dyE9PWw/ZDplLmhlaWdodCVsO2lmKDAhPT1iKWZvcih2YXIgaz0wO2s8PWM7aysrKXt2YXIgeD1rIT09Yz9oOmUud2lkdGglYztpZigwIT09eCl7dmFyIEEsXyxJLFAsUz13KmUud2lkdGgqZCtrKmgsVD1lLndpZHRoLXgsVT1lLnBpeGVscy5ibG9ja3NbZl07aWYoVS5lbmNvZGluZzwyPygwPT09VS5lbmNvZGluZz9BPVUucmF3RGF0YToobyhVLnN0dWZmZWREYXRhLFUuYml0c1BlclBpeGVsLFUubnVtVmFsaWRQaXhlbHMsVS5vZmZzZXQscCxnLGUucGl4ZWxzLm1heFZhbHVlKSxBPWcpLF89MCk6ST0yPT09VS5lbmNvZGluZz8wOlUub2Zmc2V0LHIpZm9yKHk9MDt5PGI7eSsrKXtmb3IoNyZTJiYoUD1yW1M+PjNdLFA8PD03JlMpLHY9MDt2PHg7disrKTcmU3x8KFA9cltTPj4zXSksMTI4JlA/KHUmJih1W1NdPTEpLG09bT4oYT1VLmVuY29kaW5nPDI/QVtfKytdOkkpP2E6bSxzW1MrK109YSk6KHUmJih1W1NdPTApLHNbUysrXT1uKSxQPDw9MTtTKz1UO31lbHNlIGlmKFUuZW5jb2Rpbmc8Milmb3IoeT0wO3k8Yjt5Kyspe2Zvcih2PTA7djx4O3YrKyltPW0+KGE9QVtfKytdKT9hOm0sc1tTKytdPWE7Uys9VDt9ZWxzZSBmb3IobT1tPkk/STptLHk9MDt5PGI7eSsrKXtmb3Iodj0wO3Y8eDt2Kyspc1tTKytdPUk7Uys9VDt9aWYoMT09PVUuZW5jb2RpbmcmJl8hPT1VLm51bVZhbGlkUGl4ZWxzKXRocm93ICJCbG9jayBhbmQgTWFzayBkbyBub3QgbWF0Y2giO2YrKzt9fX1yZXR1cm4ge3Jlc3VsdFBpeGVsczpzLHJlc3VsdE1hc2s6dSxtaW5WYWx1ZTptfX0sbj1mdW5jdGlvbihlKXtyZXR1cm4ge2ZpbGVJZGVudGlmaWVyU3RyaW5nOmUuZmlsZUlkZW50aWZpZXJTdHJpbmcsZmlsZVZlcnNpb246ZS5maWxlVmVyc2lvbixpbWFnZVR5cGU6ZS5pbWFnZVR5cGUsaGVpZ2h0OmUuaGVpZ2h0LHdpZHRoOmUud2lkdGgsbWF4WkVycm9yOmUubWF4WkVycm9yLGVvZk9mZnNldDplLmVvZk9mZnNldCxtYXNrOmUubWFzaz97bnVtQmxvY2tzWDplLm1hc2subnVtQmxvY2tzWCxudW1CbG9ja3NZOmUubWFzay5udW1CbG9ja3NZLG51bUJ5dGVzOmUubWFzay5udW1CeXRlcyxtYXhWYWx1ZTplLm1hc2subWF4VmFsdWV9Om51bGwscGl4ZWxzOntudW1CbG9ja3NYOmUucGl4ZWxzLm51bUJsb2Nrc1gsbnVtQmxvY2tzWTplLnBpeGVscy5udW1CbG9ja3NZLG51bUJ5dGVzOmUucGl4ZWxzLm51bUJ5dGVzLG1heFZhbHVlOmUucGl4ZWxzLm1heFZhbHVlLG5vRGF0YVZhbHVlOmUubm9EYXRhVmFsdWV9fX0saT1mdW5jdGlvbihlKXtmb3IodmFyIHQ9ZS5waXhlbHMubnVtQmxvY2tzWCplLnBpeGVscy5udW1CbG9ja3NZLHI9e30sbj0wO248dDtuKyspe3ZhciBpPWUucGl4ZWxzLmJsb2Nrc1tuXTswPT09aS5lbmNvZGluZz9yLmZsb2F0MzI9ITA6MT09PWkuZW5jb2Rpbmc/cltpLmJpdHNQZXJQaXhlbF09ITA6clswXT0hMDt9cmV0dXJuIE9iamVjdC5rZXlzKHIpfSxhPWZ1bmN0aW9uKGUsdCxyKXt2YXIgbj17fSxpPW5ldyBVaW50OEFycmF5KGUsdCwxMCk7aWYobi5maWxlSWRlbnRpZmllclN0cmluZz1TdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KG51bGwsaSksIkNudFpJbWFnZSIhPT1uLmZpbGVJZGVudGlmaWVyU3RyaW5nLnRyaW0oKSl0aHJvdyAiVW5leHBlY3RlZCBmaWxlIGlkZW50aWZpZXIgc3RyaW5nOiAiK24uZmlsZUlkZW50aWZpZXJTdHJpbmc7dCs9MTA7dmFyIGE9bmV3IERhdGFWaWV3KGUsdCwyNCk7aWYobi5maWxlVmVyc2lvbj1hLmdldEludDMyKDAsITApLG4uaW1hZ2VUeXBlPWEuZ2V0SW50MzIoNCwhMCksbi5oZWlnaHQ9YS5nZXRVaW50MzIoOCwhMCksbi53aWR0aD1hLmdldFVpbnQzMigxMiwhMCksbi5tYXhaRXJyb3I9YS5nZXRGbG9hdDY0KDE2LCEwKSx0Kz0yNCwhcilpZihhPW5ldyBEYXRhVmlldyhlLHQsMTYpLG4ubWFzaz17fSxuLm1hc2subnVtQmxvY2tzWT1hLmdldFVpbnQzMigwLCEwKSxuLm1hc2subnVtQmxvY2tzWD1hLmdldFVpbnQzMig0LCEwKSxuLm1hc2subnVtQnl0ZXM9YS5nZXRVaW50MzIoOCwhMCksbi5tYXNrLm1heFZhbHVlPWEuZ2V0RmxvYXQzMigxMiwhMCksdCs9MTYsbi5tYXNrLm51bUJ5dGVzPjApe3ZhciBvPW5ldyBVaW50OEFycmF5KE1hdGguY2VpbChuLndpZHRoKm4uaGVpZ2h0LzgpKSxzPShhPW5ldyBEYXRhVmlldyhlLHQsbi5tYXNrLm51bUJ5dGVzKSkuZ2V0SW50MTYoMCwhMCksdT0yLGY9MDtkb3tpZihzPjApZm9yKDtzLS07KW9bZisrXT1hLmdldFVpbnQ4KHUrKyk7ZWxzZSB7dmFyIGM9YS5nZXRVaW50OCh1KyspO2ZvcihzPS1zO3MtLTspb1tmKytdPWM7fXM9YS5nZXRJbnQxNih1LCEwKSx1Kz0yO313aGlsZSh1PG4ubWFzay5udW1CeXRlcyk7aWYoLTMyNzY4IT09c3x8ZjxvLmxlbmd0aCl0aHJvdyAiVW5leHBlY3RlZCBlbmQgb2YgbWFzayBSTEUgZW5jb2RpbmciO24ubWFzay5iaXRzZXQ9byx0Kz1uLm1hc2subnVtQnl0ZXM7fWVsc2UgMD09KG4ubWFzay5udW1CeXRlc3xuLm1hc2subnVtQmxvY2tzWXxuLm1hc2subWF4VmFsdWUpJiYobi5tYXNrLmJpdHNldD1uZXcgVWludDhBcnJheShNYXRoLmNlaWwobi53aWR0aCpuLmhlaWdodC84KSkpO2E9bmV3IERhdGFWaWV3KGUsdCwxNiksbi5waXhlbHM9e30sbi5waXhlbHMubnVtQmxvY2tzWT1hLmdldFVpbnQzMigwLCEwKSxuLnBpeGVscy5udW1CbG9ja3NYPWEuZ2V0VWludDMyKDQsITApLG4ucGl4ZWxzLm51bUJ5dGVzPWEuZ2V0VWludDMyKDgsITApLG4ucGl4ZWxzLm1heFZhbHVlPWEuZ2V0RmxvYXQzMigxMiwhMCksdCs9MTY7dmFyIGw9bi5waXhlbHMubnVtQmxvY2tzWCxoPW4ucGl4ZWxzLm51bUJsb2Nrc1ksZD1sKyhuLndpZHRoJWw+MD8xOjApLHA9aCsobi5oZWlnaHQlaD4wPzE6MCk7bi5waXhlbHMuYmxvY2tzPW5ldyBBcnJheShkKnApO2Zvcih2YXIgbT0wLHY9MDt2PHA7disrKWZvcih2YXIgeT0wO3k8ZDt5Kyspe3ZhciBnPTAsdz1lLmJ5dGVMZW5ndGgtdDthPW5ldyBEYXRhVmlldyhlLHQsTWF0aC5taW4oMTAsdykpO3ZhciBiPXt9O24ucGl4ZWxzLmJsb2Nrc1ttKytdPWI7dmFyIGs9YS5nZXRVaW50OCgwKTtpZihnKyssYi5lbmNvZGluZz02MyZrLGIuZW5jb2Rpbmc+Myl0aHJvdyAiSW52YWxpZCBibG9jayBlbmNvZGluZyAoIitiLmVuY29kaW5nKyIpIjtpZigyIT09Yi5lbmNvZGluZyl7aWYoMCE9PWsmJjIhPT1rKXtpZihrPj49NixiLm9mZnNldFR5cGU9aywyPT09ayliLm9mZnNldD1hLmdldEludDgoMSksZysrO2Vsc2UgaWYoMT09PWspYi5vZmZzZXQ9YS5nZXRJbnQxNigxLCEwKSxnKz0yO2Vsc2Uge2lmKDAhPT1rKXRocm93ICJJbnZhbGlkIGJsb2NrIG9mZnNldCB0eXBlIjtiLm9mZnNldD1hLmdldEZsb2F0MzIoMSwhMCksZys9NDt9aWYoMT09PWIuZW5jb2RpbmcpaWYoaz1hLmdldFVpbnQ4KGcpLGcrKyxiLmJpdHNQZXJQaXhlbD02MyZrLGs+Pj02LGIubnVtVmFsaWRQaXhlbHNUeXBlPWssMj09PWspYi5udW1WYWxpZFBpeGVscz1hLmdldFVpbnQ4KGcpLGcrKztlbHNlIGlmKDE9PT1rKWIubnVtVmFsaWRQaXhlbHM9YS5nZXRVaW50MTYoZywhMCksZys9MjtlbHNlIHtpZigwIT09ayl0aHJvdyAiSW52YWxpZCB2YWxpZCBwaXhlbCBjb3VudCB0eXBlIjtiLm51bVZhbGlkUGl4ZWxzPWEuZ2V0VWludDMyKGcsITApLGcrPTQ7fX12YXIgeDtpZih0Kz1nLDMhPT1iLmVuY29kaW5nKWlmKDA9PT1iLmVuY29kaW5nKXt2YXIgQT0obi5waXhlbHMubnVtQnl0ZXMtMSkvNDtpZihBIT09TWF0aC5mbG9vcihBKSl0aHJvdyAidW5jb21wcmVzc2VkIGJsb2NrIGhhcyBpbnZhbGlkIGxlbmd0aCI7eD1uZXcgQXJyYXlCdWZmZXIoNCpBKSxuZXcgVWludDhBcnJheSh4KS5zZXQobmV3IFVpbnQ4QXJyYXkoZSx0LDQqQSkpO3ZhciBfPW5ldyBGbG9hdDMyQXJyYXkoeCk7Yi5yYXdEYXRhPV8sdCs9NCpBO31lbHNlIGlmKDE9PT1iLmVuY29kaW5nKXt2YXIgST1NYXRoLmNlaWwoYi5udW1WYWxpZFBpeGVscypiLmJpdHNQZXJQaXhlbC84KSxQPU1hdGguY2VpbChJLzQpO3g9bmV3IEFycmF5QnVmZmVyKDQqUCksbmV3IFVpbnQ4QXJyYXkoeCkuc2V0KG5ldyBVaW50OEFycmF5KGUsdCxJKSksYi5zdHVmZmVkRGF0YT1uZXcgVWludDMyQXJyYXkoeCksdCs9STt9fWVsc2UgdCsrO31yZXR1cm4gbi5lb2ZPZmZzZXQ9dCxufSxvPWZ1bmN0aW9uKGUsdCxyLG4saSxhLG8pe3ZhciBzLHUsZixjPSgxPDx0KS0xLGw9MCxoPTAsZD1NYXRoLmNlaWwoKG8tbikvaSkscD00KmUubGVuZ3RoLU1hdGguY2VpbCh0KnIvOCk7Zm9yKGVbZS5sZW5ndGgtMV08PD04KnAscz0wO3M8cjtzKyspe2lmKDA9PT1oJiYoZj1lW2wrK10saD0zMiksaD49dCl1PWY+Pj5oLXQmYyxoLT10O2Vsc2Uge3ZhciBtPXQtaDt1PShmJmMpPDxtJmMsdSs9KGY9ZVtsKytdKT4+PihoPTMyLW0pO31hW3NdPXU8ZD9uK3UqaTpvO31yZXR1cm4gYX0sdCksYz1mdW5jdGlvbigpe3ZhciBlPWZ1bmN0aW9uKGUsdCxyLG4saSxhLG8scyl7dmFyIHUsZixjLGwsaCxkPSgxPDxyKS0xLHA9MCxtPTAsdj00KmUubGVuZ3RoLU1hdGguY2VpbChyKm4vOCk7aWYoZVtlLmxlbmd0aC0xXTw8PTgqdixpKWZvcih1PTA7dTxuO3UrKykwPT09bSYmKGM9ZVtwKytdLG09MzIpLG0+PXI/KGY9Yz4+Pm0tciZkLG0tPXIpOihmPShjJmQpPDwobD1yLW0pJmQsZis9KGM9ZVtwKytdKT4+PihtPTMyLWwpKSx0W3VdPWlbZl07ZWxzZSBmb3IoaD1NYXRoLmNlaWwoKHMtYSkvbyksdT0wO3U8bjt1KyspMD09PW0mJihjPWVbcCsrXSxtPTMyKSxtPj1yPyhmPWM+Pj5tLXImZCxtLT1yKTooZj0oYyZkKTw8KGw9ci1tKSZkLGYrPShjPWVbcCsrXSk+Pj4obT0zMi1sKSksdFt1XT1mPGg/YStmKm86czt9LHQ9ZnVuY3Rpb24oZSx0LHIsbixpLGEpe3ZhciBvLHM9KDE8PHQpLTEsdT0wLGY9MCxjPTAsbD0wLGg9MCxkPVtdLHA9NCplLmxlbmd0aC1NYXRoLmNlaWwodCpyLzgpO2VbZS5sZW5ndGgtMV08PD04KnA7dmFyIG09TWF0aC5jZWlsKChhLW4pL2kpO2ZvcihmPTA7ZjxyO2YrKykwPT09bCYmKG89ZVt1KytdLGw9MzIpLGw+PXQ/KGg9bz4+PmwtdCZzLGwtPXQpOihoPShvJnMpPDwoYz10LWwpJnMsaCs9KG89ZVt1KytdKT4+PihsPTMyLWMpKSxkW2ZdPWg8bT9uK2gqaTphO3JldHVybiBkLnVuc2hpZnQobiksZH0scj1mdW5jdGlvbihlLHQscixuLGksYSxvLHMpe3ZhciB1LGYsYyxsLGg9KDE8PHIpLTEsZD0wLHA9MCxtPTA7aWYoaSlmb3IodT0wO3U8bjt1KyspMD09PXAmJihjPWVbZCsrXSxwPTMyLG09MCkscD49cj8oZj1jPj4+bSZoLHAtPXIsbSs9cik6KGY9Yz4+Pm0maCxwPTMyLShsPXItcCksZnw9KChjPWVbZCsrXSkmKDE8PGwpLTEpPDxyLWwsbT1sKSx0W3VdPWlbZl07ZWxzZSB7dmFyIHY9TWF0aC5jZWlsKChzLWEpL28pO2Zvcih1PTA7dTxuO3UrKykwPT09cCYmKGM9ZVtkKytdLHA9MzIsbT0wKSxwPj1yPyhmPWM+Pj5tJmgscC09cixtKz1yKTooZj1jPj4+bSZoLHA9MzItKGw9ci1wKSxmfD0oKGM9ZVtkKytdKSYoMTw8bCktMSk8PHItbCxtPWwpLHRbdV09Zjx2P2ErZipvOnM7fXJldHVybiB0fSxuPWZ1bmN0aW9uKGUsdCxyLG4saSxhKXt2YXIgbyxzPSgxPDx0KS0xLHU9MCxmPTAsYz0wLGw9MCxoPTAsZD0wLHA9W10sbT1NYXRoLmNlaWwoKGEtbikvaSk7Zm9yKGY9MDtmPHI7ZisrKTA9PT1sJiYobz1lW3UrK10sbD0zMixkPTApLGw+PXQ/KGg9bz4+PmQmcyxsLT10LGQrPXQpOihoPW8+Pj5kJnMsbD0zMi0oYz10LWwpLGh8PSgobz1lW3UrK10pJigxPDxjKS0xKTw8dC1jLGQ9YykscFtmXT1oPG0/bitoKmk6YTtyZXR1cm4gcC51bnNoaWZ0KG4pLHB9LGk9ZnVuY3Rpb24oZSx0LHIsbil7dmFyIGksYSxvLHMsdT0oMTw8ciktMSxmPTAsYz0wLGw9NCplLmxlbmd0aC1NYXRoLmNlaWwocipuLzgpO2ZvcihlW2UubGVuZ3RoLTFdPDw9OCpsLGk9MDtpPG47aSsrKTA9PT1jJiYobz1lW2YrK10sYz0zMiksYz49cj8oYT1vPj4+Yy1yJnUsYy09cik6KGE9KG8mdSk8PChzPXItYykmdSxhKz0obz1lW2YrK10pPj4+KGM9MzItcykpLHRbaV09YTtyZXR1cm4gdH0sYT1mdW5jdGlvbihlLHQscixuKXt2YXIgaSxhLG8scyx1PSgxPDxyKS0xLGY9MCxjPTAsbD0wO2ZvcihpPTA7aTxuO2krKykwPT09YyYmKG89ZVtmKytdLGM9MzIsbD0wKSxjPj1yPyhhPW8+Pj5sJnUsYy09cixsKz1yKTooYT1vPj4+bCZ1LGM9MzItKHM9ci1jKSxhfD0oKG89ZVtmKytdKSYoMTw8cyktMSk8PHItcyxsPXMpLHRbaV09YTtyZXR1cm4gdH0sbz17SFVGRk1BTl9MVVRfQklUU19NQVg6MTIsY29tcHV0ZUNoZWNrc3VtRmxldGNoZXIzMjpmdW5jdGlvbihlKXtmb3IodmFyIHQ9NjU1MzUscj02NTUzNSxuPWUubGVuZ3RoLGk9TWF0aC5mbG9vcihuLzIpLGE9MDtpOyl7dmFyIG89aT49MzU5PzM1OTppO2ktPW87ZG97dCs9ZVthKytdPDw4LHIrPXQrPWVbYSsrXTt9d2hpbGUoLS1vKTt0PSg2NTUzNSZ0KSsodD4+PjE2KSxyPSg2NTUzNSZyKSsocj4+PjE2KTt9cmV0dXJuIDEmbiYmKHIrPXQrPWVbYV08PDgpLCgocj0oNjU1MzUmcikrKHI+Pj4xNikpPDwxNnwodD0oNjU1MzUmdCkrKHQ+Pj4xNikpKT4+PjB9LHJlYWRIZWFkZXJJbmZvOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dC5wdHIsbj1uZXcgVWludDhBcnJheShlLHIsNiksaT17fTtpZihpLmZpbGVJZGVudGlmaWVyU3RyaW5nPVN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkobnVsbCxuKSwwIT09aS5maWxlSWRlbnRpZmllclN0cmluZy5sYXN0SW5kZXhPZigiTGVyYzIiLDApKXRocm93ICJVbmV4cGVjdGVkIGZpbGUgaWRlbnRpZmllciBzdHJpbmcgKGV4cGVjdCBMZXJjMiApOiAiK2kuZmlsZUlkZW50aWZpZXJTdHJpbmc7cis9Njt2YXIgYSxvPW5ldyBEYXRhVmlldyhlLHIsOCkscz1vLmdldEludDMyKDAsITApO2lmKGkuZmlsZVZlcnNpb249cyxyKz00LHM+PTMmJihpLmNoZWNrc3VtPW8uZ2V0VWludDMyKDQsITApLHIrPTQpLG89bmV3IERhdGFWaWV3KGUsciwxMiksaS5oZWlnaHQ9by5nZXRVaW50MzIoMCwhMCksaS53aWR0aD1vLmdldFVpbnQzMig0LCEwKSxyKz04LHM+PTQ/KGkubnVtRGltcz1vLmdldFVpbnQzMig4LCEwKSxyKz00KTppLm51bURpbXM9MSxvPW5ldyBEYXRhVmlldyhlLHIsNDApLGkubnVtVmFsaWRQaXhlbD1vLmdldFVpbnQzMigwLCEwKSxpLm1pY3JvQmxvY2tTaXplPW8uZ2V0SW50MzIoNCwhMCksaS5ibG9iU2l6ZT1vLmdldEludDMyKDgsITApLGkuaW1hZ2VUeXBlPW8uZ2V0SW50MzIoMTIsITApLGkubWF4WkVycm9yPW8uZ2V0RmxvYXQ2NCgxNiwhMCksaS56TWluPW8uZ2V0RmxvYXQ2NCgyNCwhMCksaS56TWF4PW8uZ2V0RmxvYXQ2NCgzMiwhMCkscis9NDAsdC5oZWFkZXJJbmZvPWksdC5wdHI9cixzPj0zJiYoYT1zPj00PzUyOjQ4LHRoaXMuY29tcHV0ZUNoZWNrc3VtRmxldGNoZXIzMihuZXcgVWludDhBcnJheShlLHItYSxpLmJsb2JTaXplLTE0KSkhPT1pLmNoZWNrc3VtKSl0aHJvdyAiQ2hlY2tzdW0gZmFpbGVkLiI7cmV0dXJuICEwfSxjaGVja01pbk1heFJhbmdlczpmdW5jdGlvbihlLHQpe3ZhciByPXQuaGVhZGVySW5mbyxuPXRoaXMuZ2V0RGF0YVR5cGVBcnJheShyLmltYWdlVHlwZSksaT1yLm51bURpbXMqdGhpcy5nZXREYXRhVHlwZVNpemUoci5pbWFnZVR5cGUpLGE9dGhpcy5yZWFkU3ViQXJyYXkoZSx0LnB0cixuLGkpLG89dGhpcy5yZWFkU3ViQXJyYXkoZSx0LnB0citpLG4saSk7dC5wdHIrPTIqaTt2YXIgcyx1PSEwO2ZvcihzPTA7czxyLm51bURpbXM7cysrKWlmKGFbc10hPT1vW3NdKXt1PSExO2JyZWFrfXJldHVybiByLm1pblZhbHVlcz1hLHIubWF4VmFsdWVzPW8sdX0scmVhZFN1YkFycmF5OmZ1bmN0aW9uKGUsdCxyLG4pe3ZhciBpO2lmKHI9PT1VaW50OEFycmF5KWk9bmV3IFVpbnQ4QXJyYXkoZSx0LG4pO2Vsc2Uge3ZhciBhPW5ldyBBcnJheUJ1ZmZlcihuKTtuZXcgVWludDhBcnJheShhKS5zZXQobmV3IFVpbnQ4QXJyYXkoZSx0LG4pKSxpPW5ldyByKGEpO31yZXR1cm4gaX0scmVhZE1hc2s6ZnVuY3Rpb24oZSx0KXt2YXIgcixuLGk9dC5wdHIsYT10LmhlYWRlckluZm8sbz1hLndpZHRoKmEuaGVpZ2h0LHM9YS5udW1WYWxpZFBpeGVsLHU9bmV3IERhdGFWaWV3KGUsaSw0KSxmPXt9O2lmKGYubnVtQnl0ZXM9dS5nZXRVaW50MzIoMCwhMCksaSs9NCwoMD09PXN8fG89PT1zKSYmMCE9PWYubnVtQnl0ZXMpdGhyb3cgImludmFsaWQgbWFzayI7aWYoMD09PXMpcj1uZXcgVWludDhBcnJheShNYXRoLmNlaWwoby84KSksZi5iaXRzZXQ9cixuPW5ldyBVaW50OEFycmF5KG8pLHQucGl4ZWxzLnJlc3VsdE1hc2s9bixpKz1mLm51bUJ5dGVzO2Vsc2UgaWYoZi5udW1CeXRlcz4wKXtyPW5ldyBVaW50OEFycmF5KE1hdGguY2VpbChvLzgpKTt2YXIgYz0odT1uZXcgRGF0YVZpZXcoZSxpLGYubnVtQnl0ZXMpKS5nZXRJbnQxNigwLCEwKSxsPTIsaD0wLGQ9MDtkb3tpZihjPjApZm9yKDtjLS07KXJbaCsrXT11LmdldFVpbnQ4KGwrKyk7ZWxzZSBmb3IoZD11LmdldFVpbnQ4KGwrKyksYz0tYztjLS07KXJbaCsrXT1kO2M9dS5nZXRJbnQxNihsLCEwKSxsKz0yO313aGlsZShsPGYubnVtQnl0ZXMpO2lmKC0zMjc2OCE9PWN8fGg8ci5sZW5ndGgpdGhyb3cgIlVuZXhwZWN0ZWQgZW5kIG9mIG1hc2sgUkxFIGVuY29kaW5nIjtuPW5ldyBVaW50OEFycmF5KG8pO3ZhciBwPTAsbT0wO2ZvcihtPTA7bTxvO20rKyk3Jm0/KHA9clttPj4zXSxwPDw9NyZtKTpwPXJbbT4+M10sMTI4JnAmJihuW21dPTEpO3QucGl4ZWxzLnJlc3VsdE1hc2s9bixmLmJpdHNldD1yLGkrPWYubnVtQnl0ZXM7fXJldHVybiB0LnB0cj1pLHQubWFzaz1mLCEwfSxyZWFkRGF0YU9uZVN3ZWVwOmZ1bmN0aW9uKGUsdCxyLG4pe3ZhciBpLGE9dC5wdHIscz10LmhlYWRlckluZm8sdT1zLm51bURpbXMsZj1zLndpZHRoKnMuaGVpZ2h0LGM9cy5pbWFnZVR5cGUsbD1zLm51bVZhbGlkUGl4ZWwqby5nZXREYXRhVHlwZVNpemUoYykqdSxoPXQucGl4ZWxzLnJlc3VsdE1hc2s7aWYocj09PVVpbnQ4QXJyYXkpaT1uZXcgVWludDhBcnJheShlLGEsbCk7ZWxzZSB7dmFyIGQ9bmV3IEFycmF5QnVmZmVyKGwpO25ldyBVaW50OEFycmF5KGQpLnNldChuZXcgVWludDhBcnJheShlLGEsbCkpLGk9bmV3IHIoZCk7fWlmKGkubGVuZ3RoPT09Zip1KXQucGl4ZWxzLnJlc3VsdFBpeGVscz1uP28uc3dhcERpbWVuc2lvbk9yZGVyKGksZix1LHIsITApOmk7ZWxzZSB7dC5waXhlbHMucmVzdWx0UGl4ZWxzPW5ldyByKGYqdSk7dmFyIHA9MCxtPTAsdj0wLHk9MDtpZih1PjEpe2lmKG4pe2ZvcihtPTA7bTxmO20rKylpZihoW21dKWZvcih5PW0sdj0wO3Y8dTt2KysseSs9Zil0LnBpeGVscy5yZXN1bHRQaXhlbHNbeV09aVtwKytdO31lbHNlIGZvcihtPTA7bTxmO20rKylpZihoW21dKWZvcih5PW0qdSx2PTA7djx1O3YrKyl0LnBpeGVscy5yZXN1bHRQaXhlbHNbeSt2XT1pW3ArK107fWVsc2UgZm9yKG09MDttPGY7bSsrKWhbbV0mJih0LnBpeGVscy5yZXN1bHRQaXhlbHNbbV09aVtwKytdKTt9cmV0dXJuIGErPWwsdC5wdHI9YSwhMH0scmVhZEh1ZmZtYW5UcmVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcy5IVUZGTUFOX0xVVF9CSVRTX01BWCxuPW5ldyBEYXRhVmlldyhlLHQucHRyLDE2KTtpZih0LnB0cis9MTYsbi5nZXRJbnQzMigwLCEwKTwyKXRocm93ICJ1bnN1cHBvcnRlZCBIdWZmbWFuIHZlcnNpb24iO3ZhciBpPW4uZ2V0SW50MzIoNCwhMCksYT1uLmdldEludDMyKDgsITApLHU9bi5nZXRJbnQzMigxMiwhMCk7aWYoYT49dSlyZXR1cm4gITE7dmFyIGY9bmV3IFVpbnQzMkFycmF5KHUtYSk7by5kZWNvZGVCaXRzKGUsdCxmKTt2YXIgYyxsLGgsZCxwPVtdO2ZvcihjPWE7Yzx1O2MrKylwW2w9Yy0oYzxpPzA6aSldPXtmaXJzdDpmW2MtYV0sc2Vjb25kOm51bGx9O3ZhciBtPWUuYnl0ZUxlbmd0aC10LnB0cix2PU1hdGguY2VpbChtLzQpLHk9bmV3IEFycmF5QnVmZmVyKDQqdik7bmV3IFVpbnQ4QXJyYXkoeSkuc2V0KG5ldyBVaW50OEFycmF5KGUsdC5wdHIsbSkpO3ZhciBnLHc9bmV3IFVpbnQzMkFycmF5KHkpLGI9MCxrPTA7Zm9yKGc9d1swXSxjPWE7Yzx1O2MrKykoZD1wW2w9Yy0oYzxpPzA6aSldLmZpcnN0KT4wJiYocFtsXS5zZWNvbmQ9Zzw8Yj4+PjMyLWQsMzItYj49ZD8zMj09PShiKz1kKSYmKGI9MCxnPXdbKytrXSk6KGIrPWQtMzIsZz13Wysra10scFtsXS5zZWNvbmR8PWc+Pj4zMi1iKSk7dmFyIHg9MCxBPTAsXz1uZXcgcztmb3IoYz0wO2M8cC5sZW5ndGg7YysrKXZvaWQgMCE9PXBbY10mJih4PU1hdGgubWF4KHgscFtjXS5maXJzdCkpO0E9eD49cj9yOng7dmFyIEksUCxTLFQsVSxPPVtdO2ZvcihjPWE7Yzx1O2MrKylpZigoZD1wW2w9Yy0oYzxpPzA6aSldLmZpcnN0KT4wKWlmKEk9W2QsbF0sZDw9QSlmb3IoUD1wW2xdLnNlY29uZDw8QS1kLFM9MTw8QS1kLGg9MDtoPFM7aCsrKU9bUHxoXT1JO2Vsc2UgZm9yKFA9cFtsXS5zZWNvbmQsVT1fLFQ9ZC0xO1Q+PTA7VC0tKVA+Pj5UJjE/KFUucmlnaHR8fChVLnJpZ2h0PW5ldyBzKSxVPVUucmlnaHQpOihVLmxlZnR8fChVLmxlZnQ9bmV3IHMpLFU9VS5sZWZ0KSwwIT09VHx8VS52YWx8fChVLnZhbD1JWzFdKTtyZXR1cm4ge2RlY29kZUx1dDpPLG51bUJpdHNMVVRRaWNrOkEsbnVtQml0c0xVVDp4LHRyZWU6XyxzdHVmZmVkRGF0YTp3LHNyY1B0cjprLGJpdFBvczpifX0scmVhZEh1ZmZtYW46ZnVuY3Rpb24oZSx0LHIsbil7dmFyIGksYSxzLHUsZixjLGwsaCxkLHA9dC5oZWFkZXJJbmZvLm51bURpbXMsbT10LmhlYWRlckluZm8uaGVpZ2h0LHY9dC5oZWFkZXJJbmZvLndpZHRoLHk9diptLGc9dGhpcy5yZWFkSHVmZm1hblRyZWUoZSx0KSx3PWcuZGVjb2RlTHV0LGI9Zy50cmVlLGs9Zy5zdHVmZmVkRGF0YSx4PWcuc3JjUHRyLEE9Zy5iaXRQb3MsXz1nLm51bUJpdHNMVVRRaWNrLEk9Zy5udW1CaXRzTFVULFA9MD09PXQuaGVhZGVySW5mby5pbWFnZVR5cGU/MTI4OjAsUz10LnBpeGVscy5yZXN1bHRNYXNrLFQ9MDtBPjAmJih4KyssQT0wKTt2YXIgVSxPPWtbeF0sRD0xPT09dC5lbmNvZGVNb2RlLEU9bmV3IHIoeSpwKSxSPUU7aWYocDwyfHxEKXtmb3IoVT0wO1U8cDtVKyspaWYocD4xJiYoUj1uZXcgcihFLmJ1ZmZlcix5KlUseSksVD0wKSx0LmhlYWRlckluZm8ubnVtVmFsaWRQaXhlbD09PXYqbSlmb3IoaD0wLGM9MDtjPG07YysrKWZvcihsPTA7bDx2O2wrKyxoKyspe2lmKGE9MCxmPXU9Tzw8QT4+PjMyLV8sMzItQTxfJiYoZj11fD1rW3grMV0+Pj42NC1BLV8pLHdbZl0pYT13W2ZdWzFdLEErPXdbZl1bMF07ZWxzZSBmb3IoZj11PU88PEE+Pj4zMi1JLDMyLUE8SSYmKGY9dXw9a1t4KzFdPj4+NjQtQS1JKSxpPWIsZD0wO2Q8STtkKyspaWYoIShpPXU+Pj5JLWQtMSYxP2kucmlnaHQ6aS5sZWZ0KS5sZWZ0JiYhaS5yaWdodCl7YT1pLnZhbCxBPUErZCsxO2JyZWFrfUE+PTMyJiYoQS09MzIsTz1rWysreF0pLHM9YS1QLEQ/KHMrPWw+MD9UOmM+MD9SW2gtdl06VCxzJj0yNTUsUltoXT1zLFQ9cyk6UltoXT1zO31lbHNlIGZvcihoPTAsYz0wO2M8bTtjKyspZm9yKGw9MDtsPHY7bCsrLGgrKylpZihTW2hdKXtpZihhPTAsZj11PU88PEE+Pj4zMi1fLDMyLUE8XyYmKGY9dXw9a1t4KzFdPj4+NjQtQS1fKSx3W2ZdKWE9d1tmXVsxXSxBKz13W2ZdWzBdO2Vsc2UgZm9yKGY9dT1PPDxBPj4+MzItSSwzMi1BPEkmJihmPXV8PWtbeCsxXT4+PjY0LUEtSSksaT1iLGQ9MDtkPEk7ZCsrKWlmKCEoaT11Pj4+SS1kLTEmMT9pLnJpZ2h0OmkubGVmdCkubGVmdCYmIWkucmlnaHQpe2E9aS52YWwsQT1BK2QrMTticmVha31BPj0zMiYmKEEtPTMyLE89a1srK3hdKSxzPWEtUCxEPyhsPjAmJlNbaC0xXT9zKz1UOmM+MCYmU1toLXZdP3MrPVJbaC12XTpzKz1ULHMmPTI1NSxSW2hdPXMsVD1zKTpSW2hdPXM7fX1lbHNlIGZvcihoPTAsYz0wO2M8bTtjKyspZm9yKGw9MDtsPHY7bCsrKWlmKGg9Yyp2K2wsIVN8fFNbaF0pZm9yKFU9MDtVPHA7VSsrLGgrPXkpe2lmKGE9MCxmPXU9Tzw8QT4+PjMyLV8sMzItQTxfJiYoZj11fD1rW3grMV0+Pj42NC1BLV8pLHdbZl0pYT13W2ZdWzFdLEErPXdbZl1bMF07ZWxzZSBmb3IoZj11PU88PEE+Pj4zMi1JLDMyLUE8SSYmKGY9dXw9a1t4KzFdPj4+NjQtQS1JKSxpPWIsZD0wO2Q8STtkKyspaWYoIShpPXU+Pj5JLWQtMSYxP2kucmlnaHQ6aS5sZWZ0KS5sZWZ0JiYhaS5yaWdodCl7YT1pLnZhbCxBPUErZCsxO2JyZWFrfUE+PTMyJiYoQS09MzIsTz1rWysreF0pLHM9YS1QLFJbaF09czt9dC5wdHI9dC5wdHIrNCooeCsxKSsoQT4wPzQ6MCksdC5waXhlbHMucmVzdWx0UGl4ZWxzPUUscD4xJiYhbiYmKHQucGl4ZWxzLnJlc3VsdFBpeGVscz1vLnN3YXBEaW1lbnNpb25PcmRlcihFLHkscCxyKSk7fSxkZWNvZGVCaXRzOmZ1bmN0aW9uKG8scyx1LGYsYyl7dmFyIGw9cy5oZWFkZXJJbmZvLGg9bC5maWxlVmVyc2lvbixkPTAscD1vLmJ5dGVMZW5ndGgtcy5wdHI+PTU/NTpvLmJ5dGVMZW5ndGgtcy5wdHIsbT1uZXcgRGF0YVZpZXcobyxzLnB0cixwKSx2PW0uZ2V0VWludDgoMCk7ZCsrO3ZhciB5PXY+PjYsZz0wPT09eT80OjMteSx3PSgzMiZ2KT4wLGI9MzEmdixrPTA7aWYoMT09PWcpaz1tLmdldFVpbnQ4KGQpLGQrKztlbHNlIGlmKDI9PT1nKWs9bS5nZXRVaW50MTYoZCwhMCksZCs9MjtlbHNlIHtpZig0IT09Zyl0aHJvdyAiSW52YWxpZCB2YWxpZCBwaXhlbCBjb3VudCB0eXBlIjtrPW0uZ2V0VWludDMyKGQsITApLGQrPTQ7fXZhciB4LEEsXyxJLFAsUyxULFUsTyxEPTIqbC5tYXhaRXJyb3IsRT1sLm51bURpbXM+MT9sLm1heFZhbHVlc1tjXTpsLnpNYXg7aWYodyl7Zm9yKHMuY291bnRlci5sdXQrKyxVPW0uZ2V0VWludDgoZCksZCsrLEk9TWF0aC5jZWlsKChVLTEpKmIvOCksUD1NYXRoLmNlaWwoSS80KSxBPW5ldyBBcnJheUJ1ZmZlcig0KlApLF89bmV3IFVpbnQ4QXJyYXkoQSkscy5wdHIrPWQsXy5zZXQobmV3IFVpbnQ4QXJyYXkobyxzLnB0cixJKSksVD1uZXcgVWludDMyQXJyYXkoQSkscy5wdHIrPUksTz0wO1UtMT4+Pk87KU8rKztJPU1hdGguY2VpbChrKk8vOCksUD1NYXRoLmNlaWwoSS80KSxBPW5ldyBBcnJheUJ1ZmZlcig0KlApLChfPW5ldyBVaW50OEFycmF5KEEpKS5zZXQobmV3IFVpbnQ4QXJyYXkobyxzLnB0cixJKSkseD1uZXcgVWludDMyQXJyYXkoQSkscy5wdHIrPUksUz1oPj0zP24oVCxiLFUtMSxmLEQsRSk6dChULGIsVS0xLGYsRCxFKSxoPj0zP3IoeCx1LE8sayxTKTplKHgsdSxPLGssUyk7fWVsc2Ugcy5jb3VudGVyLmJpdHN0dWZmZXIrKyxPPWIscy5wdHIrPWQsTz4wJiYoST1NYXRoLmNlaWwoaypPLzgpLFA9TWF0aC5jZWlsKEkvNCksQT1uZXcgQXJyYXlCdWZmZXIoNCpQKSwoXz1uZXcgVWludDhBcnJheShBKSkuc2V0KG5ldyBVaW50OEFycmF5KG8scy5wdHIsSSkpLHg9bmV3IFVpbnQzMkFycmF5KEEpLHMucHRyKz1JLGg+PTM/bnVsbD09Zj9hKHgsdSxPLGspOnIoeCx1LE8saywhMSxmLEQsRSk6bnVsbD09Zj9pKHgsdSxPLGspOmUoeCx1LE8saywhMSxmLEQsRSkpO30scmVhZFRpbGVzOmZ1bmN0aW9uKGUsdCxyLG4pe3ZhciBpPXQuaGVhZGVySW5mbyxhPWkud2lkdGgscz1pLmhlaWdodCx1PWEqcyxmPWkubWljcm9CbG9ja1NpemUsYz1pLmltYWdlVHlwZSxsPW8uZ2V0RGF0YVR5cGVTaXplKGMpLGg9TWF0aC5jZWlsKGEvZiksZD1NYXRoLmNlaWwocy9mKTt0LnBpeGVscy5udW1CbG9ja3NZPWQsdC5waXhlbHMubnVtQmxvY2tzWD1oLHQucGl4ZWxzLnB0cj0wO3ZhciBwLG0sdix5LGcsdyxiLGsseCxBLF89MCxJPTAsUD0wLFM9MCxUPTAsVT0wLE89MCxEPTAsRT0wLFI9MCxNPTAsQj0wLEM9MCxMPTAsRj0wLFY9bmV3IHIoZipmKSxHPXMlZnx8ZixqPWElZnx8Zix6PWkubnVtRGltcyxOPXQucGl4ZWxzLnJlc3VsdE1hc2ssSz10LnBpeGVscy5yZXN1bHRQaXhlbHMsWj1pLmZpbGVWZXJzaW9uPj01PzE0OjE1LEg9aS56TWF4O2ZvcihQPTA7UDxkO1ArKylmb3IoVD1QIT09ZC0xP2Y6RyxTPTA7UzxoO1MrKylmb3IoUj1QKmEqZitTKmYsTT1hLShVPVMhPT1oLTE/ZjpqKSxrPTA7azx6O2srKyl7aWYoej4xPyhBPUssUj1QKmEqZitTKmYsSz1uZXcgcih0LnBpeGVscy5yZXN1bHRQaXhlbHMuYnVmZmVyLHUqaypsLHUpLEg9aS5tYXhWYWx1ZXNba10pOkE9bnVsbCxPPWUuYnl0ZUxlbmd0aC10LnB0cixtPXt9LEY9MCxEPShwPW5ldyBEYXRhVmlldyhlLHQucHRyLE1hdGgubWluKDEwLE8pKSkuZ2V0VWludDgoMCksRisrLHg9aS5maWxlVmVyc2lvbj49NT80JkQ6MCxFPUQ+PjYmMjU1LChEPj4yJlopIT09KFMqZj4+MyZaKSl0aHJvdyAiaW50ZWdyaXR5IGlzc3VlIjtpZih4JiYwPT09ayl0aHJvdyAiaW50ZWdyaXR5IGlzc3VlIjtpZigoZz0zJkQpPjMpdGhyb3cgdC5wdHIrPUYsIkludmFsaWQgYmxvY2sgZW5jb2RpbmcgKCIrZysiKSI7aWYoMiE9PWcpaWYoMD09PWcpe2lmKHgpdGhyb3cgImludGVncml0eSBpc3N1ZSI7aWYodC5jb3VudGVyLnVuY29tcHJlc3NlZCsrLHQucHRyKz1GLEI9KEI9VCpVKmwpPChDPWUuYnl0ZUxlbmd0aC10LnB0cik/QjpDLHY9bmV3IEFycmF5QnVmZmVyKEIlbD09MD9COkIrbC1CJWwpLG5ldyBVaW50OEFycmF5KHYpLnNldChuZXcgVWludDhBcnJheShlLHQucHRyLEIpKSx5PW5ldyByKHYpLEw9MCxOKWZvcihfPTA7XzxUO18rKyl7Zm9yKEk9MDtJPFU7SSsrKU5bUl0mJihLW1JdPXlbTCsrXSksUisrO1IrPU07fWVsc2UgZm9yKF89MDtfPFQ7XysrKXtmb3IoST0wO0k8VTtJKyspS1tSKytdPXlbTCsrXTtSKz1NO310LnB0cis9TCpsO31lbHNlIGlmKHc9by5nZXREYXRhVHlwZVVzZWQoeCYmYzw2PzQ6YyxFKSxiPW8uZ2V0T25lUGl4ZWwobSxGLHcscCksRis9by5nZXREYXRhVHlwZVNpemUodyksMz09PWcpaWYodC5wdHIrPUYsdC5jb3VudGVyLmNvbnN0YW50b2Zmc2V0KyssTilmb3IoXz0wO188VDtfKyspe2ZvcihJPTA7STxVO0krKylOW1JdJiYoS1tSXT14P01hdGgubWluKEgsQVtSXStiKTpiKSxSKys7Uis9TTt9ZWxzZSBmb3IoXz0wO188VDtfKyspe2ZvcihJPTA7STxVO0krKylLW1JdPXg/TWF0aC5taW4oSCxBW1JdK2IpOmIsUisrO1IrPU07fWVsc2UgaWYodC5wdHIrPUYsby5kZWNvZGVCaXRzKGUsdCxWLGIsayksRj0wLHgpaWYoTilmb3IoXz0wO188VDtfKyspe2ZvcihJPTA7STxVO0krKylOW1JdJiYoS1tSXT1WW0YrK10rQVtSXSksUisrO1IrPU07fWVsc2UgZm9yKF89MDtfPFQ7XysrKXtmb3IoST0wO0k8VTtJKyspS1tSXT1WW0YrK10rQVtSXSxSKys7Uis9TTt9ZWxzZSBpZihOKWZvcihfPTA7XzxUO18rKyl7Zm9yKEk9MDtJPFU7SSsrKU5bUl0mJihLW1JdPVZbRisrXSksUisrO1IrPU07fWVsc2UgZm9yKF89MDtfPFQ7XysrKXtmb3IoST0wO0k8VTtJKyspS1tSKytdPVZbRisrXTtSKz1NO31lbHNlIHtpZih4KWlmKE4pZm9yKF89MDtfPFQ7XysrKWZvcihJPTA7STxVO0krKylOW1JdJiYoS1tSXT1BW1JdKSxSKys7ZWxzZSBmb3IoXz0wO188VDtfKyspZm9yKEk9MDtJPFU7SSsrKUtbUl09QVtSXSxSKys7dC5jb3VudGVyLmNvbnN0YW50KyssdC5wdHIrPUY7fX16PjEmJiFuJiYodC5waXhlbHMucmVzdWx0UGl4ZWxzPW8uc3dhcERpbWVuc2lvbk9yZGVyKHQucGl4ZWxzLnJlc3VsdFBpeGVscyx1LHoscikpO30sZm9ybWF0RmlsZUluZm86ZnVuY3Rpb24oZSl7cmV0dXJuIHtmaWxlSWRlbnRpZmllclN0cmluZzplLmhlYWRlckluZm8uZmlsZUlkZW50aWZpZXJTdHJpbmcsZmlsZVZlcnNpb246ZS5oZWFkZXJJbmZvLmZpbGVWZXJzaW9uLGltYWdlVHlwZTplLmhlYWRlckluZm8uaW1hZ2VUeXBlLGhlaWdodDplLmhlYWRlckluZm8uaGVpZ2h0LHdpZHRoOmUuaGVhZGVySW5mby53aWR0aCxudW1WYWxpZFBpeGVsOmUuaGVhZGVySW5mby5udW1WYWxpZFBpeGVsLG1pY3JvQmxvY2tTaXplOmUuaGVhZGVySW5mby5taWNyb0Jsb2NrU2l6ZSxibG9iU2l6ZTplLmhlYWRlckluZm8uYmxvYlNpemUsbWF4WkVycm9yOmUuaGVhZGVySW5mby5tYXhaRXJyb3IscGl4ZWxUeXBlOm8uZ2V0UGl4ZWxUeXBlKGUuaGVhZGVySW5mby5pbWFnZVR5cGUpLGVvZk9mZnNldDplLmVvZk9mZnNldCxtYXNrOmUubWFzaz97bnVtQnl0ZXM6ZS5tYXNrLm51bUJ5dGVzfTpudWxsLHBpeGVsczp7bnVtQmxvY2tzWDplLnBpeGVscy5udW1CbG9ja3NYLG51bUJsb2Nrc1k6ZS5waXhlbHMubnVtQmxvY2tzWSxtYXhWYWx1ZTplLmhlYWRlckluZm8uek1heCxtaW5WYWx1ZTplLmhlYWRlckluZm8uek1pbixub0RhdGFWYWx1ZTplLm5vRGF0YVZhbHVlfX19LGNvbnN0cnVjdENvbnN0YW50U3VyZmFjZTpmdW5jdGlvbihlLHQpe3ZhciByPWUuaGVhZGVySW5mby56TWF4LG49ZS5oZWFkZXJJbmZvLnpNaW4saT1lLmhlYWRlckluZm8ubWF4VmFsdWVzLGE9ZS5oZWFkZXJJbmZvLm51bURpbXMsbz1lLmhlYWRlckluZm8uaGVpZ2h0KmUuaGVhZGVySW5mby53aWR0aCxzPTAsdT0wLGY9MCxjPWUucGl4ZWxzLnJlc3VsdE1hc2ssbD1lLnBpeGVscy5yZXN1bHRQaXhlbHM7aWYoYylpZihhPjEpe2lmKHQpZm9yKHM9MDtzPGE7cysrKWZvcihmPXMqbyxyPWlbc10sdT0wO3U8bzt1KyspY1t1XSYmKGxbZit1XT1yKTtlbHNlIGZvcih1PTA7dTxvO3UrKylpZihjW3VdKWZvcihmPXUqYSxzPTA7czxhO3MrKylsW2YrYV09aVtzXTt9ZWxzZSBmb3IodT0wO3U8bzt1KyspY1t1XSYmKGxbdV09cik7ZWxzZSBpZihhPjEmJm4hPT1yKWlmKHQpZm9yKHM9MDtzPGE7cysrKWZvcihmPXMqbyxyPWlbc10sdT0wO3U8bzt1KyspbFtmK3VdPXI7ZWxzZSBmb3IodT0wO3U8bzt1KyspZm9yKGY9dSphLHM9MDtzPGE7cysrKWxbZitzXT1pW3NdO2Vsc2UgZm9yKHU9MDt1PG8qYTt1KyspbFt1XT1yO30sZ2V0RGF0YVR5cGVBcnJheTpmdW5jdGlvbihlKXt2YXIgdDtzd2l0Y2goZSl7Y2FzZSAwOnQ9SW50OEFycmF5O2JyZWFrO2Nhc2UgMTp0PVVpbnQ4QXJyYXk7YnJlYWs7Y2FzZSAyOnQ9SW50MTZBcnJheTticmVhaztjYXNlIDM6dD1VaW50MTZBcnJheTticmVhaztjYXNlIDQ6dD1JbnQzMkFycmF5O2JyZWFrO2Nhc2UgNTp0PVVpbnQzMkFycmF5O2JyZWFrO2Nhc2UgNjpkZWZhdWx0OnQ9RmxvYXQzMkFycmF5O2JyZWFrO2Nhc2UgNzp0PUZsb2F0NjRBcnJheTt9cmV0dXJuIHR9LGdldFBpeGVsVHlwZTpmdW5jdGlvbihlKXt2YXIgdDtzd2l0Y2goZSl7Y2FzZSAwOnQ9IlM4IjticmVhaztjYXNlIDE6dD0iVTgiO2JyZWFrO2Nhc2UgMjp0PSJTMTYiO2JyZWFrO2Nhc2UgMzp0PSJVMTYiO2JyZWFrO2Nhc2UgNDp0PSJTMzIiO2JyZWFrO2Nhc2UgNTp0PSJVMzIiO2JyZWFrO2Nhc2UgNjpkZWZhdWx0OnQ9IkYzMiI7YnJlYWs7Y2FzZSA3OnQ9IkY2NCI7fXJldHVybiB0fSxpc1ZhbGlkUGl4ZWxWYWx1ZTpmdW5jdGlvbihlLHQpe2lmKG51bGw9PXQpcmV0dXJuICExO3ZhciByO3N3aXRjaChlKXtjYXNlIDA6cj10Pj0tMTI4JiZ0PD0xMjc7YnJlYWs7Y2FzZSAxOnI9dD49MCYmdDw9MjU1O2JyZWFrO2Nhc2UgMjpyPXQ+PS0zMjc2OCYmdDw9MzI3Njc7YnJlYWs7Y2FzZSAzOnI9dD49MCYmdDw9NjU1MzY7YnJlYWs7Y2FzZSA0OnI9dD49LTIxNDc0ODM2NDgmJnQ8PTIxNDc0ODM2NDc7YnJlYWs7Y2FzZSA1OnI9dD49MCYmdDw9NDI5NDk2NzI5NjticmVhaztjYXNlIDY6cj10Pj0tMzQwMjc5OTkzODc5MDE0ODRlMjImJnQ8PTM0MDI3OTk5Mzg3OTAxNDg0ZTIyO2JyZWFrO2Nhc2UgNzpyPXQ+PS0xNzk3NjkzMTM0ODYyMzE1N2UyOTImJnQ8PTE3OTc2OTMxMzQ4NjIzMTU3ZTI5MjticmVhaztkZWZhdWx0OnI9ITE7fXJldHVybiByfSxnZXREYXRhVHlwZVNpemU6ZnVuY3Rpb24oZSl7dmFyIHQ9MDtzd2l0Y2goZSl7Y2FzZSAwOmNhc2UgMTp0PTE7YnJlYWs7Y2FzZSAyOmNhc2UgMzp0PTI7YnJlYWs7Y2FzZSA0OmNhc2UgNTpjYXNlIDY6dD00O2JyZWFrO2Nhc2UgNzp0PTg7YnJlYWs7ZGVmYXVsdDp0PWU7fXJldHVybiB0fSxnZXREYXRhVHlwZVVzZWQ6ZnVuY3Rpb24oZSx0KXt2YXIgcj1lO3N3aXRjaChlKXtjYXNlIDI6Y2FzZSA0OnI9ZS10O2JyZWFrO2Nhc2UgMzpjYXNlIDU6cj1lLTIqdDticmVhaztjYXNlIDY6cj0wPT09dD9lOjE9PT10PzI6MTticmVhaztjYXNlIDc6cj0wPT09dD9lOmUtMip0KzE7YnJlYWs7ZGVmYXVsdDpyPWU7fXJldHVybiByfSxnZXRPbmVQaXhlbDpmdW5jdGlvbihlLHQscixuKXt2YXIgaT0wO3N3aXRjaChyKXtjYXNlIDA6aT1uLmdldEludDgodCk7YnJlYWs7Y2FzZSAxOmk9bi5nZXRVaW50OCh0KTticmVhaztjYXNlIDI6aT1uLmdldEludDE2KHQsITApO2JyZWFrO2Nhc2UgMzppPW4uZ2V0VWludDE2KHQsITApO2JyZWFrO2Nhc2UgNDppPW4uZ2V0SW50MzIodCwhMCk7YnJlYWs7Y2FzZSA1Omk9bi5nZXRVSW50MzIodCwhMCk7YnJlYWs7Y2FzZSA2Omk9bi5nZXRGbG9hdDMyKHQsITApO2JyZWFrO2Nhc2UgNzppPW4uZ2V0RmxvYXQ2NCh0LCEwKTticmVhaztkZWZhdWx0OnRocm93ICJ0aGUgZGVjb2RlciBkb2VzIG5vdCB1bmRlcnN0YW5kIHRoaXMgcGl4ZWwgdHlwZSJ9cmV0dXJuIGl9LHN3YXBEaW1lbnNpb25PcmRlcjpmdW5jdGlvbihlLHQscixuLGkpe3ZhciBhPTAsbz0wLHM9MCx1PTAsZj1lO2lmKHI+MSlpZihmPW5ldyBuKHQqciksaSlmb3IoYT0wO2E8dDthKyspZm9yKHU9YSxzPTA7czxyO3MrKyx1Kz10KWZbdV09ZVtvKytdO2Vsc2UgZm9yKGE9MDthPHQ7YSsrKWZvcih1PWEscz0wO3M8cjtzKyssdSs9dClmW28rK109ZVt1XTtyZXR1cm4gZn19LHM9ZnVuY3Rpb24oZSx0LHIpe3RoaXMudmFsPWUsdGhpcy5sZWZ0PXQsdGhpcy5yaWdodD1yO30sdT17ZGVjb2RlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9KHQ9dHx8e30pLm5vRGF0YVZhbHVlLG49MCxpPXt9O2kucHRyPXQuaW5wdXRPZmZzZXR8fDAsaS5waXhlbHM9e30sby5yZWFkSGVhZGVySW5mbyhlLGkpO3ZhciBhPWkuaGVhZGVySW5mbyxzPWEuZmlsZVZlcnNpb24sdT1vLmdldERhdGFUeXBlQXJyYXkoYS5pbWFnZVR5cGUpO2lmKHM+NSl0aHJvdyAidW5zdXBwb3J0ZWQgbGVyYyB2ZXJzaW9uIDIuIitzO28ucmVhZE1hc2soZSxpKSxhLm51bVZhbGlkUGl4ZWw9PT1hLndpZHRoKmEuaGVpZ2h0fHxpLnBpeGVscy5yZXN1bHRNYXNrfHwoaS5waXhlbHMucmVzdWx0TWFzaz10Lm1hc2tEYXRhKTt2YXIgZj1hLndpZHRoKmEuaGVpZ2h0O2kucGl4ZWxzLnJlc3VsdFBpeGVscz1uZXcgdShmKmEubnVtRGltcyksaS5jb3VudGVyPXtvbmVzd2VlcDowLHVuY29tcHJlc3NlZDowLGx1dDowLGJpdHN0dWZmZXI6MCxjb25zdGFudDowLGNvbnN0YW50b2Zmc2V0OjB9O3ZhciBjLGw9IXQucmV0dXJuUGl4ZWxJbnRlcmxlYXZlZERpbXM7aWYoMCE9PWEubnVtVmFsaWRQaXhlbClpZihhLnpNYXg9PT1hLnpNaW4pby5jb25zdHJ1Y3RDb25zdGFudFN1cmZhY2UoaSxsKTtlbHNlIGlmKHM+PTQmJm8uY2hlY2tNaW5NYXhSYW5nZXMoZSxpKSlvLmNvbnN0cnVjdENvbnN0YW50U3VyZmFjZShpLGwpO2Vsc2Uge3ZhciBoPW5ldyBEYXRhVmlldyhlLGkucHRyLDIpLGQ9aC5nZXRVaW50OCgwKTtpZihpLnB0cisrLGQpby5yZWFkRGF0YU9uZVN3ZWVwKGUsaSx1LGwpO2Vsc2UgaWYocz4xJiZhLmltYWdlVHlwZTw9MSYmTWF0aC5hYnMoYS5tYXhaRXJyb3ItLjUpPDFlLTUpe3ZhciBwPWguZ2V0VWludDgoMSk7aWYoaS5wdHIrKyxpLmVuY29kZU1vZGU9cCxwPjJ8fHM8NCYmcD4xKXRocm93ICJJbnZhbGlkIEh1ZmZtYW4gZmxhZyAiK3A7cD9vLnJlYWRIdWZmbWFuKGUsaSx1LGwpOm8ucmVhZFRpbGVzKGUsaSx1LGwpO31lbHNlIG8ucmVhZFRpbGVzKGUsaSx1LGwpO31pLmVvZk9mZnNldD1pLnB0cix0LmlucHV0T2Zmc2V0PyhjPWkuaGVhZGVySW5mby5ibG9iU2l6ZSt0LmlucHV0T2Zmc2V0LWkucHRyLE1hdGguYWJzKGMpPj0xJiYoaS5lb2ZPZmZzZXQ9dC5pbnB1dE9mZnNldCtpLmhlYWRlckluZm8uYmxvYlNpemUpKTooYz1pLmhlYWRlckluZm8uYmxvYlNpemUtaS5wdHIsTWF0aC5hYnMoYyk+PTEmJihpLmVvZk9mZnNldD1pLmhlYWRlckluZm8uYmxvYlNpemUpKTt2YXIgbT17d2lkdGg6YS53aWR0aCxoZWlnaHQ6YS5oZWlnaHQscGl4ZWxEYXRhOmkucGl4ZWxzLnJlc3VsdFBpeGVscyxtaW5WYWx1ZTphLnpNaW4sbWF4VmFsdWU6YS56TWF4LHZhbGlkUGl4ZWxDb3VudDphLm51bVZhbGlkUGl4ZWwsZGltQ291bnQ6YS5udW1EaW1zLGRpbVN0YXRzOnttaW5WYWx1ZXM6YS5taW5WYWx1ZXMsbWF4VmFsdWVzOmEubWF4VmFsdWVzfSxtYXNrRGF0YTppLnBpeGVscy5yZXN1bHRNYXNrfTtpZihpLnBpeGVscy5yZXN1bHRNYXNrJiZvLmlzVmFsaWRQaXhlbFZhbHVlKGEuaW1hZ2VUeXBlLHIpKXt2YXIgdj1pLnBpeGVscy5yZXN1bHRNYXNrO2ZvcihuPTA7bjxmO24rKyl2W25dfHwobS5waXhlbERhdGFbbl09cik7bS5ub0RhdGFWYWx1ZT1yO31yZXR1cm4gaS5ub0RhdGFWYWx1ZT1yLHQucmV0dXJuRmlsZUluZm8mJihtLmZpbGVJbmZvPW8uZm9ybWF0RmlsZUluZm8oaSkpLG19LGdldEJhbmRDb3VudDpmdW5jdGlvbihlKXtmb3IodmFyIHQ9MCxyPTAsbj17cHRyOjAscGl4ZWxzOnt9fTtyPGUuYnl0ZUxlbmd0aC01ODspby5yZWFkSGVhZGVySW5mbyhlLG4pLHIrPW4uaGVhZGVySW5mby5ibG9iU2l6ZSx0Kyssbi5wdHI9cjtyZXR1cm4gdH19O3JldHVybiB1fSgpLGw9KHM9bmV3IEFycmF5QnVmZmVyKDQpLHU9bmV3IFVpbnQ4QXJyYXkocyksbmV3IFVpbnQzMkFycmF5KHMpWzBdPTEsMT09PXVbMF0pLGg9e2RlY29kZTpmdW5jdGlvbihlLHQpe2lmKCFsKXRocm93ICJCaWcgZW5kaWFuIHN5c3RlbSBpcyBub3Qgc3VwcG9ydGVkLiI7dmFyIHIsbixpPSh0PXR8fHt9KS5pbnB1dE9mZnNldHx8MCxhPW5ldyBVaW50OEFycmF5KGUsaSwxMCksbz1TdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KG51bGwsYSk7aWYoIkNudFpJbWFnZSI9PT1vLnRyaW0oKSlyPWYsbj0xO2Vsc2Uge2lmKCJMZXJjMiIhPT1vLnN1YnN0cmluZygwLDUpKXRocm93ICJVbmV4cGVjdGVkIGZpbGUgaWRlbnRpZmllciBzdHJpbmc6ICIrbztyPWMsbj0yO31mb3IodmFyIHMsdSxoLGQscCxtLHY9MCx5PWUuYnl0ZUxlbmd0aC0xMCxnPVtdLHc9e3dpZHRoOjAsaGVpZ2h0OjAscGl4ZWxzOltdLHBpeGVsVHlwZTp0LnBpeGVsVHlwZSxtYXNrOm51bGwsc3RhdGlzdGljczpbXX0sYj0wO2k8eTspe3ZhciBrPXIuZGVjb2RlKGUse2lucHV0T2Zmc2V0OmksZW5jb2RlZE1hc2tEYXRhOnMsbWFza0RhdGE6aCxyZXR1cm5NYXNrOjA9PT12LHJldHVybkVuY29kZWRNYXNrOjA9PT12LHJldHVybkZpbGVJbmZvOiEwLHJldHVyblBpeGVsSW50ZXJsZWF2ZWREaW1zOnQucmV0dXJuUGl4ZWxJbnRlcmxlYXZlZERpbXMscGl4ZWxUeXBlOnQucGl4ZWxUeXBlfHxudWxsLG5vRGF0YVZhbHVlOnQubm9EYXRhVmFsdWV8fG51bGx9KTtpPWsuZmlsZUluZm8uZW9mT2Zmc2V0LGg9ay5tYXNrRGF0YSwwPT09diYmKHM9ay5lbmNvZGVkTWFza0RhdGEsdy53aWR0aD1rLndpZHRoLHcuaGVpZ2h0PWsuaGVpZ2h0LHcuZGltQ291bnQ9ay5kaW1Db3VudHx8MSx3LnBpeGVsVHlwZT1rLnBpeGVsVHlwZXx8ay5maWxlSW5mby5waXhlbFR5cGUsdy5tYXNrPWgpLG4+MSYmKGgmJmcucHVzaChoKSxrLmZpbGVJbmZvLm1hc2smJmsuZmlsZUluZm8ubWFzay5udW1CeXRlcz4wJiZiKyspLHYrKyx3LnBpeGVscy5wdXNoKGsucGl4ZWxEYXRhKSx3LnN0YXRpc3RpY3MucHVzaCh7bWluVmFsdWU6ay5taW5WYWx1ZSxtYXhWYWx1ZTprLm1heFZhbHVlLG5vRGF0YVZhbHVlOmsubm9EYXRhVmFsdWUsZGltU3RhdHM6ay5kaW1TdGF0c30pO31pZihuPjEmJmI+MSl7Zm9yKG09dy53aWR0aCp3LmhlaWdodCx3LmJhbmRNYXNrcz1nLChoPW5ldyBVaW50OEFycmF5KG0pKS5zZXQoZ1swXSksZD0xO2Q8Zy5sZW5ndGg7ZCsrKWZvcih1PWdbZF0scD0wO3A8bTtwKyspaFtwXT1oW3BdJnVbcF07dy5tYXNrRGF0YT1oO31yZXR1cm4gd319O2UuZXhwb3J0cz9lLmV4cG9ydHM9aDp0aGlzLkxlcmM9aDt9KCk7fShiaSk7dmFyIGtpPWJpLmV4cG9ydHM7ZnVuY3Rpb24geGkoZSl7dmFyIHQ9ZnVuY3Rpb24oKXtpZigidW5kZWZpbmVkIj09dHlwZW9mIFJlZmxlY3R8fCFSZWZsZWN0LmNvbnN0cnVjdClyZXR1cm4gITE7aWYoUmVmbGVjdC5jb25zdHJ1Y3Quc2hhbSlyZXR1cm4gITE7aWYoImZ1bmN0aW9uIj09dHlwZW9mIFByb3h5KXJldHVybiAhMDt0cnl7cmV0dXJuIEJvb2xlYW4ucHJvdG90eXBlLnZhbHVlT2YuY2FsbChSZWZsZWN0LmNvbnN0cnVjdChCb29sZWFuLFtdLChmdW5jdGlvbigpe30pKSksITB9Y2F0Y2goZSl7cmV0dXJuICExfX0oKTtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgcixuPXYoZSk7aWYodCl7dmFyIGk9dih0aGlzKS5jb25zdHJ1Y3RvcjtyPVJlZmxlY3QuY29uc3RydWN0KG4sYXJndW1lbnRzLGkpO31lbHNlIHI9bi5hcHBseSh0aGlzLGFyZ3VtZW50cyk7cmV0dXJuIG0odGhpcyxyKX19dmFyIEFpPWZ1bmN0aW9uKGUpe2gocixlKTt2YXIgdD14aShyKTtmdW5jdGlvbiByKGUpe3ZhciBuO3JldHVybiBiKHRoaXMsciksKG49dC5jYWxsKHRoaXMpKS5wbGFuYXJDb25maWd1cmF0aW9uPXZvaWQgMCE9PWUuUGxhbmFyQ29uZmlndXJhdGlvbj9lLlBsYW5hckNvbmZpZ3VyYXRpb246MSxuLnNhbXBsZXNQZXJQaXhlbD12b2lkIDAhPT1lLlNhbXBsZXNQZXJQaXhlbD9lLlNhbXBsZXNQZXJQaXhlbDoxLG4uYWRkQ29tcHJlc3Npb249ZS5MZXJjUGFyYW1ldGVyc1t1ZS5BZGRDb21wcmVzc2lvbl0sbn1yZXR1cm4gYyhyLFt7a2V5OiJkZWNvZGVCbG9jayIsdmFsdWU6ZnVuY3Rpb24oZSl7c3dpdGNoKHRoaXMuYWRkQ29tcHJlc3Npb24pe2Nhc2UgZmUuTm9uZTpicmVhaztjYXNlIGZlLkRlZmxhdGU6ZT1kaShuZXcgVWludDhBcnJheShlKSkuYnVmZmVyO2JyZWFrO2RlZmF1bHQ6dGhyb3cgbmV3IEVycm9yKCJVbnN1cHBvcnRlZCBMRVJDIGFkZGl0aW9uYWwgY29tcHJlc3Npb24gbWV0aG9kIGlkZW50aWZpZXI6ICIuY29uY2F0KHRoaXMuYWRkQ29tcHJlc3Npb24pKX1yZXR1cm4ga2kuZGVjb2RlKGUse3JldHVyblBpeGVsSW50ZXJsZWF2ZWREaW1zOjE9PT10aGlzLnBsYW5hckNvbmZpZ3VyYXRpb259KS5waXhlbHNbMF0uYnVmZmVyfX1dKSxyfSh3ciksX2k9T2JqZWN0LmZyZWV6ZSh7X19wcm90b19fOm51bGwsZGVmYXVsdDpBaX0pO2Z1bmN0aW9uIElpKGUpe3ZhciB0PWZ1bmN0aW9uKCl7aWYoInVuZGVmaW5lZCI9PXR5cGVvZiBSZWZsZWN0fHwhUmVmbGVjdC5jb25zdHJ1Y3QpcmV0dXJuICExO2lmKFJlZmxlY3QuY29uc3RydWN0LnNoYW0pcmV0dXJuICExO2lmKCJmdW5jdGlvbiI9PXR5cGVvZiBQcm94eSlyZXR1cm4gITA7dHJ5e3JldHVybiBCb29sZWFuLnByb3RvdHlwZS52YWx1ZU9mLmNhbGwoUmVmbGVjdC5jb25zdHJ1Y3QoQm9vbGVhbixbXSwoZnVuY3Rpb24oKXt9KSkpLCEwfWNhdGNoKGUpe3JldHVybiAhMX19KCk7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIHIsbj12KGUpO2lmKHQpe3ZhciBpPXYodGhpcykuY29uc3RydWN0b3I7cj1SZWZsZWN0LmNvbnN0cnVjdChuLGFyZ3VtZW50cyxpKTt9ZWxzZSByPW4uYXBwbHkodGhpcyxhcmd1bWVudHMpO3JldHVybiBtKHRoaXMscil9fXZhciBQaT1mdW5jdGlvbihlKXtoKG4sZSk7dmFyIHQscj1JaShuKTtmdW5jdGlvbiBuKCl7dmFyIGU7aWYoYih0aGlzLG4pLGU9ci5jYWxsKHRoaXMpLCJ1bmRlZmluZWQiPT10eXBlb2YgY3JlYXRlSW1hZ2VCaXRtYXApdGhyb3cgbmV3IEVycm9yKCJDYW5ub3QgZGVjb2RlIFdlYkltYWdlIGFzIGBjcmVhdGVJbWFnZUJpdG1hcGAgaXMgbm90IGF2YWlsYWJsZSIpO2lmKCJ1bmRlZmluZWQiPT10eXBlb2YgZG9jdW1lbnQmJiJ1bmRlZmluZWQiPT10eXBlb2YgT2Zmc2NyZWVuQ2FudmFzKXRocm93IG5ldyBFcnJvcigiQ2Fubm90IGRlY29kZSBXZWJJbWFnZSBhcyBuZWl0aGVyIGBkb2N1bWVudGAgbm9yIGBPZmZzY3JlZW5DYW52YXNgIGlzIG5vdCBhdmFpbGFibGUiKTtyZXR1cm4gZX1yZXR1cm4gYyhuLFt7a2V5OiJkZWNvZGUiLHZhbHVlOih0PXUoeC5tYXJrKChmdW5jdGlvbiBlKHQscil7dmFyIG4saSxhLG87cmV0dXJuIHgud3JhcCgoZnVuY3Rpb24oZSl7Zm9yKDs7KXN3aXRjaChlLnByZXY9ZS5uZXh0KXtjYXNlIDA6cmV0dXJuIG49bmV3IEJsb2IoW3JdKSxlLm5leHQ9MyxjcmVhdGVJbWFnZUJpdG1hcChuKTtjYXNlIDM6cmV0dXJuIGk9ZS5zZW50LCJ1bmRlZmluZWQiIT10eXBlb2YgZG9jdW1lbnQ/KChhPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImNhbnZhcyIpKS53aWR0aD1pLndpZHRoLGEuaGVpZ2h0PWkuaGVpZ2h0KTphPW5ldyBPZmZzY3JlZW5DYW52YXMoaS53aWR0aCxpLmhlaWdodCksKG89YS5nZXRDb250ZXh0KCIyZCIpKS5kcmF3SW1hZ2UoaSwwLDApLGUuYWJydXB0KCJyZXR1cm4iLG8uZ2V0SW1hZ2VEYXRhKDAsMCxpLndpZHRoLGkuaGVpZ2h0KS5kYXRhLmJ1ZmZlcik7Y2FzZSA4OmNhc2UiZW5kIjpyZXR1cm4gZS5zdG9wKCl9fSksZSl9KSkpLGZ1bmN0aW9uKGUscil7cmV0dXJuIHQuYXBwbHkodGhpcyxhcmd1bWVudHMpfSl9XSksbn0od3IpLFNpPU9iamVjdC5mcmVlemUoe19fcHJvdG9fXzpudWxsLGRlZmF1bHQ6UGl9KSxUaT1Xb3JrZXI7dmFyIFVpPU9iamVjdC5mcmVlemUoe19fcHJvdG9fXzpudWxsLGNyZWF0ZTpmdW5jdGlvbigpe3ZhciBlPSdmdW5jdGlvbiBlKGUsdCxyLG4saSxhLG8pe3RyeXt2YXIgcz1lW2FdKG8pLGY9cy52YWx1ZX1jYXRjaChlKXtyZXR1cm4gdm9pZCByKGUpfXMuZG9uZT90KGYpOlByb21pc2UucmVzb2x2ZShmKS50aGVuKG4saSl9ZnVuY3Rpb24gdCh0KXtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgcj10aGlzLG49YXJndW1lbnRzO3JldHVybiBuZXcgUHJvbWlzZSgoZnVuY3Rpb24oaSxhKXt2YXIgbz10LmFwcGx5KHIsbik7ZnVuY3Rpb24gcyh0KXtlKG8saSxhLHMsZiwibmV4dCIsdCl9ZnVuY3Rpb24gZih0KXtlKG8saSxhLHMsZiwidGhyb3ciLHQpfXModm9pZCAwKX0pKX19ZnVuY3Rpb24gcihlKXtyZXR1cm4gcj0iZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sJiYic3ltYm9sIj09dHlwZW9mIFN5bWJvbC5pdGVyYXRvcj9mdW5jdGlvbihlKXtyZXR1cm4gdHlwZW9mIGV9OmZ1bmN0aW9uKGUpe3JldHVybiBlJiYiZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sJiZlLmNvbnN0cnVjdG9yPT09U3ltYm9sJiZlIT09U3ltYm9sLnByb3RvdHlwZT8ic3ltYm9sIjp0eXBlb2YgZX0scihlKX12YXIgbj17ZXhwb3J0czp7fX07IWZ1bmN0aW9uKGUpe3ZhciB0PWZ1bmN0aW9uKGUpe3ZhciB0LG49T2JqZWN0LnByb3RvdHlwZSxpPW4uaGFzT3duUHJvcGVydHksYT0iZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sP1N5bWJvbDp7fSxvPWEuaXRlcmF0b3J8fCJAQGl0ZXJhdG9yIixzPWEuYXN5bmNJdGVyYXRvcnx8IkBAYXN5bmNJdGVyYXRvciIsZj1hLnRvU3RyaW5nVGFnfHwiQEB0b1N0cmluZ1RhZyI7ZnVuY3Rpb24gbChlLHQscil7cmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLHQse3ZhbHVlOnIsZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITB9KSxlW3RdfXRyeXtsKHt9LCIiKX1jYXRjaChlKXtsPWZ1bmN0aW9uKGUsdCxyKXtyZXR1cm4gZVt0XT1yfX1mdW5jdGlvbiB1KGUsdCxyLG4pe3ZhciBpPXQmJnQucHJvdG90eXBlIGluc3RhbmNlb2YgeT90OnksYT1PYmplY3QuY3JlYXRlKGkucHJvdG90eXBlKSxvPW5ldyBUKG58fFtdKTtyZXR1cm4gYS5faW52b2tlPWZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1oO3JldHVybiBmdW5jdGlvbihpLGEpe2lmKG49PT1wKXRocm93IG5ldyBFcnJvcigiR2VuZXJhdG9yIGlzIGFscmVhZHkgcnVubmluZyIpO2lmKG49PT1tKXtpZigidGhyb3ciPT09aSl0aHJvdyBhO3JldHVybiBFKCl9Zm9yKHIubWV0aG9kPWksci5hcmc9YTs7KXt2YXIgbz1yLmRlbGVnYXRlO2lmKG8pe3ZhciBzPUkobyxyKTtpZihzKXtpZihzPT09diljb250aW51ZTtyZXR1cm4gc319aWYoIm5leHQiPT09ci5tZXRob2Qpci5zZW50PXIuX3NlbnQ9ci5hcmc7ZWxzZSBpZigidGhyb3ciPT09ci5tZXRob2Qpe2lmKG49PT1oKXRocm93IG49bSxyLmFyZztyLmRpc3BhdGNoRXhjZXB0aW9uKHIuYXJnKX1lbHNlInJldHVybiI9PT1yLm1ldGhvZCYmci5hYnJ1cHQoInJldHVybiIsci5hcmcpO249cDt2YXIgZj1jKGUsdCxyKTtpZigibm9ybWFsIj09PWYudHlwZSl7aWYobj1yLmRvbmU/bTpkLGYuYXJnPT09diljb250aW51ZTtyZXR1cm57dmFsdWU6Zi5hcmcsZG9uZTpyLmRvbmV9fSJ0aHJvdyI9PT1mLnR5cGUmJihuPW0sci5tZXRob2Q9InRocm93IixyLmFyZz1mLmFyZyl9fX0oZSxyLG8pLGF9ZnVuY3Rpb24gYyhlLHQscil7dHJ5e3JldHVybnt0eXBlOiJub3JtYWwiLGFyZzplLmNhbGwodCxyKX19Y2F0Y2goZSl7cmV0dXJue3R5cGU6InRocm93Iixhcmc6ZX19fWUud3JhcD11O3ZhciBoPSJzdXNwZW5kZWRTdGFydCIsZD0ic3VzcGVuZGVkWWllbGQiLHA9ImV4ZWN1dGluZyIsbT0iY29tcGxldGVkIix2PXt9O2Z1bmN0aW9uIHkoKXt9ZnVuY3Rpb24gdygpe31mdW5jdGlvbiBnKCl7fXZhciBiPXt9O2woYixvLChmdW5jdGlvbigpe3JldHVybiB0aGlzfSkpO3ZhciBrPU9iamVjdC5nZXRQcm90b3R5cGVPZix4PWsmJmsoayhEKFtdKSkpO3gmJnghPT1uJiZpLmNhbGwoeCxvKSYmKGI9eCk7dmFyIF89Zy5wcm90b3R5cGU9eS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShiKTtmdW5jdGlvbiBBKGUpe1sibmV4dCIsInRocm93IiwicmV0dXJuIl0uZm9yRWFjaCgoZnVuY3Rpb24odCl7bChlLHQsKGZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9pbnZva2UodCxlKX0pKX0pKX1mdW5jdGlvbiBQKGUsdCl7ZnVuY3Rpb24gbihhLG8scyxmKXt2YXIgbD1jKGVbYV0sZSxvKTtpZigidGhyb3ciIT09bC50eXBlKXt2YXIgdT1sLmFyZyxoPXUudmFsdWU7cmV0dXJuIGgmJiJvYmplY3QiPT09cihoKSYmaS5jYWxsKGgsIl9fYXdhaXQiKT90LnJlc29sdmUoaC5fX2F3YWl0KS50aGVuKChmdW5jdGlvbihlKXtuKCJuZXh0IixlLHMsZil9KSwoZnVuY3Rpb24oZSl7bigidGhyb3ciLGUscyxmKX0pKTp0LnJlc29sdmUoaCkudGhlbigoZnVuY3Rpb24oZSl7dS52YWx1ZT1lLHModSl9KSwoZnVuY3Rpb24oZSl7cmV0dXJuIG4oInRocm93IixlLHMsZil9KSl9ZihsLmFyZyl9dmFyIGE7dGhpcy5faW52b2tlPWZ1bmN0aW9uKGUscil7ZnVuY3Rpb24gaSgpe3JldHVybiBuZXcgdCgoZnVuY3Rpb24odCxpKXtuKGUscix0LGkpfSkpfXJldHVybiBhPWE/YS50aGVuKGksaSk6aSgpfX1mdW5jdGlvbiBJKGUscil7dmFyIG49ZS5pdGVyYXRvcltyLm1ldGhvZF07aWYobj09PXQpe2lmKHIuZGVsZWdhdGU9bnVsbCwidGhyb3ciPT09ci5tZXRob2Qpe2lmKGUuaXRlcmF0b3IucmV0dXJuJiYoci5tZXRob2Q9InJldHVybiIsci5hcmc9dCxJKGUsciksInRocm93Ij09PXIubWV0aG9kKSlyZXR1cm4gdjtyLm1ldGhvZD0idGhyb3ciLHIuYXJnPW5ldyBUeXBlRXJyb3IoIlRoZSBpdGVyYXRvciBkb2VzIG5vdCBwcm92aWRlIGEgXCd0aHJvd1wnIG1ldGhvZCIpfXJldHVybiB2fXZhciBpPWMobixlLml0ZXJhdG9yLHIuYXJnKTtpZigidGhyb3ciPT09aS50eXBlKXJldHVybiByLm1ldGhvZD0idGhyb3ciLHIuYXJnPWkuYXJnLHIuZGVsZWdhdGU9bnVsbCx2O3ZhciBhPWkuYXJnO3JldHVybiBhP2EuZG9uZT8ocltlLnJlc3VsdE5hbWVdPWEudmFsdWUsci5uZXh0PWUubmV4dExvYywicmV0dXJuIiE9PXIubWV0aG9kJiYoci5tZXRob2Q9Im5leHQiLHIuYXJnPXQpLHIuZGVsZWdhdGU9bnVsbCx2KTphOihyLm1ldGhvZD0idGhyb3ciLHIuYXJnPW5ldyBUeXBlRXJyb3IoIml0ZXJhdG9yIHJlc3VsdCBpcyBub3QgYW4gb2JqZWN0Iiksci5kZWxlZ2F0ZT1udWxsLHYpfWZ1bmN0aW9uIFUoZSl7dmFyIHQ9e3RyeUxvYzplWzBdfTsxIGluIGUmJih0LmNhdGNoTG9jPWVbMV0pLDIgaW4gZSYmKHQuZmluYWxseUxvYz1lWzJdLHQuYWZ0ZXJMb2M9ZVszXSksdGhpcy50cnlFbnRyaWVzLnB1c2godCl9ZnVuY3Rpb24gUyhlKXt2YXIgdD1lLmNvbXBsZXRpb258fHt9O3QudHlwZT0ibm9ybWFsIixkZWxldGUgdC5hcmcsZS5jb21wbGV0aW9uPXR9ZnVuY3Rpb24gVChlKXt0aGlzLnRyeUVudHJpZXM9W3t0cnlMb2M6InJvb3QifV0sZS5mb3JFYWNoKFUsdGhpcyksdGhpcy5yZXNldCghMCl9ZnVuY3Rpb24gRChlKXtpZihlKXt2YXIgcj1lW29dO2lmKHIpcmV0dXJuIHIuY2FsbChlKTtpZigiZnVuY3Rpb24iPT10eXBlb2YgZS5uZXh0KXJldHVybiBlO2lmKCFpc05hTihlLmxlbmd0aCkpe3ZhciBuPS0xLGE9ZnVuY3Rpb24gcigpe2Zvcig7KytuPGUubGVuZ3RoOylpZihpLmNhbGwoZSxuKSlyZXR1cm4gci52YWx1ZT1lW25dLHIuZG9uZT0hMSxyO3JldHVybiByLnZhbHVlPXQsci5kb25lPSEwLHJ9O3JldHVybiBhLm5leHQ9YX19cmV0dXJue25leHQ6RX19ZnVuY3Rpb24gRSgpe3JldHVybnt2YWx1ZTp0LGRvbmU6ITB9fXJldHVybiB3LnByb3RvdHlwZT1nLGwoXywiY29uc3RydWN0b3IiLGcpLGwoZywiY29uc3RydWN0b3IiLHcpLHcuZGlzcGxheU5hbWU9bChnLGYsIkdlbmVyYXRvckZ1bmN0aW9uIiksZS5pc0dlbmVyYXRvckZ1bmN0aW9uPWZ1bmN0aW9uKGUpe3ZhciB0PSJmdW5jdGlvbiI9PXR5cGVvZiBlJiZlLmNvbnN0cnVjdG9yO3JldHVybiEhdCYmKHQ9PT13fHwiR2VuZXJhdG9yRnVuY3Rpb24iPT09KHQuZGlzcGxheU5hbWV8fHQubmFtZSkpfSxlLm1hcms9ZnVuY3Rpb24oZSl7cmV0dXJuIE9iamVjdC5zZXRQcm90b3R5cGVPZj9PYmplY3Quc2V0UHJvdG90eXBlT2YoZSxnKTooZS5fX3Byb3RvX189ZyxsKGUsZiwiR2VuZXJhdG9yRnVuY3Rpb24iKSksZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShfKSxlfSxlLmF3cmFwPWZ1bmN0aW9uKGUpe3JldHVybntfX2F3YWl0OmV9fSxBKFAucHJvdG90eXBlKSxsKFAucHJvdG90eXBlLHMsKGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9KSksZS5Bc3luY0l0ZXJhdG9yPVAsZS5hc3luYz1mdW5jdGlvbih0LHIsbixpLGEpe3ZvaWQgMD09PWEmJihhPVByb21pc2UpO3ZhciBvPW5ldyBQKHUodCxyLG4saSksYSk7cmV0dXJuIGUuaXNHZW5lcmF0b3JGdW5jdGlvbihyKT9vOm8ubmV4dCgpLnRoZW4oKGZ1bmN0aW9uKGUpe3JldHVybiBlLmRvbmU/ZS52YWx1ZTpvLm5leHQoKX0pKX0sQShfKSxsKF8sZiwiR2VuZXJhdG9yIiksbChfLG8sKGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9KSksbChfLCJ0b1N0cmluZyIsKGZ1bmN0aW9uKCl7cmV0dXJuIltvYmplY3QgR2VuZXJhdG9yXSJ9KSksZS5rZXlzPWZ1bmN0aW9uKGUpe3ZhciB0PVtdO2Zvcih2YXIgciBpbiBlKXQucHVzaChyKTtyZXR1cm4gdC5yZXZlcnNlKCksZnVuY3Rpb24gcigpe2Zvcig7dC5sZW5ndGg7KXt2YXIgbj10LnBvcCgpO2lmKG4gaW4gZSlyZXR1cm4gci52YWx1ZT1uLHIuZG9uZT0hMSxyfXJldHVybiByLmRvbmU9ITAscn19LGUudmFsdWVzPUQsVC5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOlQscmVzZXQ6ZnVuY3Rpb24oZSl7aWYodGhpcy5wcmV2PTAsdGhpcy5uZXh0PTAsdGhpcy5zZW50PXRoaXMuX3NlbnQ9dCx0aGlzLmRvbmU9ITEsdGhpcy5kZWxlZ2F0ZT1udWxsLHRoaXMubWV0aG9kPSJuZXh0Iix0aGlzLmFyZz10LHRoaXMudHJ5RW50cmllcy5mb3JFYWNoKFMpLCFlKWZvcih2YXIgciBpbiB0aGlzKSJ0Ij09PXIuY2hhckF0KDApJiZpLmNhbGwodGhpcyxyKSYmIWlzTmFOKCtyLnNsaWNlKDEpKSYmKHRoaXNbcl09dCl9LHN0b3A6ZnVuY3Rpb24oKXt0aGlzLmRvbmU9ITA7dmFyIGU9dGhpcy50cnlFbnRyaWVzWzBdLmNvbXBsZXRpb247aWYoInRocm93Ij09PWUudHlwZSl0aHJvdyBlLmFyZztyZXR1cm4gdGhpcy5ydmFsfSxkaXNwYXRjaEV4Y2VwdGlvbjpmdW5jdGlvbihlKXtpZih0aGlzLmRvbmUpdGhyb3cgZTt2YXIgcj10aGlzO2Z1bmN0aW9uIG4obixpKXtyZXR1cm4gcy50eXBlPSJ0aHJvdyIscy5hcmc9ZSxyLm5leHQ9bixpJiYoci5tZXRob2Q9Im5leHQiLHIuYXJnPXQpLCEhaX1mb3IodmFyIGE9dGhpcy50cnlFbnRyaWVzLmxlbmd0aC0xO2E+PTA7LS1hKXt2YXIgbz10aGlzLnRyeUVudHJpZXNbYV0scz1vLmNvbXBsZXRpb247aWYoInJvb3QiPT09by50cnlMb2MpcmV0dXJuIG4oImVuZCIpO2lmKG8udHJ5TG9jPD10aGlzLnByZXYpe3ZhciBmPWkuY2FsbChvLCJjYXRjaExvYyIpLGw9aS5jYWxsKG8sImZpbmFsbHlMb2MiKTtpZihmJiZsKXtpZih0aGlzLnByZXY8by5jYXRjaExvYylyZXR1cm4gbihvLmNhdGNoTG9jLCEwKTtpZih0aGlzLnByZXY8by5maW5hbGx5TG9jKXJldHVybiBuKG8uZmluYWxseUxvYyl9ZWxzZSBpZihmKXtpZih0aGlzLnByZXY8by5jYXRjaExvYylyZXR1cm4gbihvLmNhdGNoTG9jLCEwKX1lbHNle2lmKCFsKXRocm93IG5ldyBFcnJvcigidHJ5IHN0YXRlbWVudCB3aXRob3V0IGNhdGNoIG9yIGZpbmFsbHkiKTtpZih0aGlzLnByZXY8by5maW5hbGx5TG9jKXJldHVybiBuKG8uZmluYWxseUxvYyl9fX19LGFicnVwdDpmdW5jdGlvbihlLHQpe2Zvcih2YXIgcj10aGlzLnRyeUVudHJpZXMubGVuZ3RoLTE7cj49MDstLXIpe3ZhciBuPXRoaXMudHJ5RW50cmllc1tyXTtpZihuLnRyeUxvYzw9dGhpcy5wcmV2JiZpLmNhbGwobiwiZmluYWxseUxvYyIpJiZ0aGlzLnByZXY8bi5maW5hbGx5TG9jKXt2YXIgYT1uO2JyZWFrfX1hJiYoImJyZWFrIj09PWV8fCJjb250aW51ZSI9PT1lKSYmYS50cnlMb2M8PXQmJnQ8PWEuZmluYWxseUxvYyYmKGE9bnVsbCk7dmFyIG89YT9hLmNvbXBsZXRpb246e307cmV0dXJuIG8udHlwZT1lLG8uYXJnPXQsYT8odGhpcy5tZXRob2Q9Im5leHQiLHRoaXMubmV4dD1hLmZpbmFsbHlMb2Msdik6dGhpcy5jb21wbGV0ZShvKX0sY29tcGxldGU6ZnVuY3Rpb24oZSx0KXtpZigidGhyb3ciPT09ZS50eXBlKXRocm93IGUuYXJnO3JldHVybiJicmVhayI9PT1lLnR5cGV8fCJjb250aW51ZSI9PT1lLnR5cGU/dGhpcy5uZXh0PWUuYXJnOiJyZXR1cm4iPT09ZS50eXBlPyh0aGlzLnJ2YWw9dGhpcy5hcmc9ZS5hcmcsdGhpcy5tZXRob2Q9InJldHVybiIsdGhpcy5uZXh0PSJlbmQiKToibm9ybWFsIj09PWUudHlwZSYmdCYmKHRoaXMubmV4dD10KSx2fSxmaW5pc2g6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PXRoaXMudHJ5RW50cmllcy5sZW5ndGgtMTt0Pj0wOy0tdCl7dmFyIHI9dGhpcy50cnlFbnRyaWVzW3RdO2lmKHIuZmluYWxseUxvYz09PWUpcmV0dXJuIHRoaXMuY29tcGxldGUoci5jb21wbGV0aW9uLHIuYWZ0ZXJMb2MpLFMociksdn19LGNhdGNoOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdD10aGlzLnRyeUVudHJpZXMubGVuZ3RoLTE7dD49MDstLXQpe3ZhciByPXRoaXMudHJ5RW50cmllc1t0XTtpZihyLnRyeUxvYz09PWUpe3ZhciBuPXIuY29tcGxldGlvbjtpZigidGhyb3ciPT09bi50eXBlKXt2YXIgaT1uLmFyZztTKHIpfXJldHVybiBpfX10aHJvdyBuZXcgRXJyb3IoImlsbGVnYWwgY2F0Y2ggYXR0ZW1wdCIpfSxkZWxlZ2F0ZVlpZWxkOmZ1bmN0aW9uKGUscixuKXtyZXR1cm4gdGhpcy5kZWxlZ2F0ZT17aXRlcmF0b3I6RChlKSxyZXN1bHROYW1lOnIsbmV4dExvYzpufSwibmV4dCI9PT10aGlzLm1ldGhvZCYmKHRoaXMuYXJnPXQpLHZ9fSxlfShlLmV4cG9ydHMpO3RyeXtyZWdlbmVyYXRvclJ1bnRpbWU9dH1jYXRjaChlKXsib2JqZWN0Ij09PSgidW5kZWZpbmVkIj09dHlwZW9mIGdsb2JhbFRoaXM/InVuZGVmaW5lZCI6cihnbG9iYWxUaGlzKSk/Z2xvYmFsVGhpcy5yZWdlbmVyYXRvclJ1bnRpbWU9dDpGdW5jdGlvbigiciIsInJlZ2VuZXJhdG9yUnVudGltZSA9IHIiKSh0KX19KG4pO3ZhciBpPW4uZXhwb3J0cyxhPW5ldyBNYXA7ZnVuY3Rpb24gbyhlLHQpe0FycmF5LmlzQXJyYXkoZSl8fChlPVtlXSksZS5mb3JFYWNoKChmdW5jdGlvbihlKXtyZXR1cm4gYS5zZXQoZSx0KX0pKX1mdW5jdGlvbiBzKGUpe3JldHVybiBmLmFwcGx5KHRoaXMsYXJndW1lbnRzKX1mdW5jdGlvbiBmKCl7cmV0dXJuKGY9dChpLm1hcmsoKGZ1bmN0aW9uIGUodCl7dmFyIHIsbjtyZXR1cm4gaS53cmFwKChmdW5jdGlvbihlKXtmb3IoOzspc3dpdGNoKGUucHJldj1lLm5leHQpe2Nhc2UgMDppZihyPWEuZ2V0KHQuQ29tcHJlc3Npb24pKXtlLm5leHQ9MzticmVha310aHJvdyBuZXcgRXJyb3IoIlVua25vd24gY29tcHJlc3Npb24gbWV0aG9kIGlkZW50aWZpZXI6ICIuY29uY2F0KHQuQ29tcHJlc3Npb24pKTtjYXNlIDM6cmV0dXJuIGUubmV4dD01LHIoKTtjYXNlIDU6cmV0dXJuIG49ZS5zZW50LGUuYWJydXB0KCJyZXR1cm4iLG5ldyBuKHQpKTtjYXNlIDc6Y2FzZSJlbmQiOnJldHVybiBlLnN0b3AoKX19KSxlKX0pKSkpLmFwcGx5KHRoaXMsYXJndW1lbnRzKX1vKFt2b2lkIDAsMV0sKGZ1bmN0aW9uKCl7cmV0dXJuIFByb21pc2UucmVzb2x2ZSgpLnRoZW4oKGZ1bmN0aW9uKCl7cmV0dXJuIF99KSkudGhlbigoZnVuY3Rpb24oZSl7cmV0dXJuIGUuZGVmYXVsdH0pKX0pKSxvKDUsKGZ1bmN0aW9uKCl7cmV0dXJuIFByb21pc2UucmVzb2x2ZSgpLnRoZW4oKGZ1bmN0aW9uKCl7cmV0dXJuIFN9KSkudGhlbigoZnVuY3Rpb24oZSl7cmV0dXJuIGUuZGVmYXVsdH0pKX0pKSxvKDYsKGZ1bmN0aW9uKCl7dGhyb3cgbmV3IEVycm9yKCJvbGQgc3R5bGUgSlBFRyBjb21wcmVzc2lvbiBpcyBub3Qgc3VwcG9ydGVkLiIpfSkpLG8oNywoZnVuY3Rpb24oKXtyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCkudGhlbigoZnVuY3Rpb24oKXtyZXR1cm4gTH0pKS50aGVuKChmdW5jdGlvbihlKXtyZXR1cm4gZS5kZWZhdWx0fSkpfSkpLG8oWzgsMzI5NDZdLChmdW5jdGlvbigpe3JldHVybiBQcm9taXNlLnJlc29sdmUoKS50aGVuKChmdW5jdGlvbigpe3JldHVybiBOZX0pKS50aGVuKChmdW5jdGlvbihlKXtyZXR1cm4gZS5kZWZhdWx0fSkpfSkpLG8oMzI3NzMsKGZ1bmN0aW9uKCl7cmV0dXJuIFByb21pc2UucmVzb2x2ZSgpLnRoZW4oKGZ1bmN0aW9uKCl7cmV0dXJuIFllfSkpLnRoZW4oKGZ1bmN0aW9uKGUpe3JldHVybiBlLmRlZmF1bHR9KSl9KSksbygzNDg4NywoZnVuY3Rpb24oKXtyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCkudGhlbigoZnVuY3Rpb24oKXtyZXR1cm4gdXR9KSkudGhlbigoZnVuY3Rpb24oZSl7cmV0dXJuIGUuZGVmYXVsdH0pKX0pKSxvKDUwMDAxLChmdW5jdGlvbigpe3JldHVybiBQcm9taXNlLnJlc29sdmUoKS50aGVuKChmdW5jdGlvbigpe3JldHVybiBkdH0pKS50aGVuKChmdW5jdGlvbihlKXtyZXR1cm4gZS5kZWZhdWx0fSkpfSkpO3ZhciBsPWdsb2JhbFRoaXM7ZnVuY3Rpb24gdShlLHQpe2lmKCEoZSBpbnN0YW5jZW9mIHQpKXRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpfWZ1bmN0aW9uIGMoZSx0KXtmb3IodmFyIHI9MDtyPHQubGVuZ3RoO3IrKyl7dmFyIG49dFtyXTtuLmVudW1lcmFibGU9bi5lbnVtZXJhYmxlfHwhMSxuLmNvbmZpZ3VyYWJsZT0hMCwidmFsdWUiaW4gbiYmKG4ud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLG4ua2V5LG4pfX1mdW5jdGlvbiBoKGUsdCxyKXtyZXR1cm4gdCYmYyhlLnByb3RvdHlwZSx0KSxyJiZjKGUsciksZX1mdW5jdGlvbiBkKGUsdCl7cmV0dXJuIGQ9T2JqZWN0LnNldFByb3RvdHlwZU9mfHxmdW5jdGlvbihlLHQpe3JldHVybiBlLl9fcHJvdG9fXz10LGV9LGQoZSx0KX1mdW5jdGlvbiBwKGUsdCl7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIHQmJm51bGwhPT10KXRocm93IG5ldyBUeXBlRXJyb3IoIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uIik7ZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh0JiZ0LnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOmUsd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfX0pLHQmJmQoZSx0KX1mdW5jdGlvbiBtKGUsdCl7aWYodCYmKCJvYmplY3QiPT09cih0KXx8ImZ1bmN0aW9uIj09dHlwZW9mIHQpKXJldHVybiB0O2lmKHZvaWQgMCE9PXQpdGhyb3cgbmV3IFR5cGVFcnJvcigiRGVyaXZlZCBjb25zdHJ1Y3RvcnMgbWF5IG9ubHkgcmV0dXJuIG9iamVjdCBvciB1bmRlZmluZWQiKTtyZXR1cm4gZnVuY3Rpb24oZSl7aWYodm9pZCAwPT09ZSl0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoInRoaXMgaGFzblwndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuXCd0IGJlZW4gY2FsbGVkIik7cmV0dXJuIGV9KGUpfWZ1bmN0aW9uIHYoZSl7cmV0dXJuIHY9T2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5nZXRQcm90b3R5cGVPZjpmdW5jdGlvbihlKXtyZXR1cm4gZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKX0sdihlKX1mdW5jdGlvbiB5KGUsdCl7dmFyIHI9ZS5sZW5ndGgtdCxuPTA7ZG97Zm9yKHZhciBpPXQ7aT4wO2ktLSllW24rdF0rPWVbbl0sbisrO3ItPXR9d2hpbGUocj4wKX1mdW5jdGlvbiB3KGUsdCxyKXtmb3IodmFyIG49MCxpPWUubGVuZ3RoLGE9aS9yO2k+dDspe2Zvcih2YXIgbz10O28+MDstLW8pZVtuK3RdKz1lW25dLCsrbjtpLT10fWZvcih2YXIgcz1lLnNsaWNlKCksZj0wO2Y8YTsrK2YpZm9yKHZhciBsPTA7bDxyOysrbCllW3IqZitsXT1zWyhyLWwtMSkqYStmXX1mdW5jdGlvbiBnKGUsdCxyLG4saSxhKXtpZighdHx8MT09PXQpcmV0dXJuIGU7Zm9yKHZhciBvPTA7bzxpLmxlbmd0aDsrK28pe2lmKGlbb10lOCE9MCl0aHJvdyBuZXcgRXJyb3IoIldoZW4gZGVjb2Rpbmcgd2l0aCBwcmVkaWN0b3IsIG9ubHkgbXVsdGlwbGUgb2YgOCBiaXRzIGFyZSBzdXBwb3J0ZWQuIik7aWYoaVtvXSE9PWlbMF0pdGhyb3cgbmV3IEVycm9yKCJXaGVuIGRlY29kaW5nIHdpdGggcHJlZGljdG9yLCBhbGwgc2FtcGxlcyBtdXN0IGhhdmUgdGhlIHNhbWUgc2l6ZS4iKX1mb3IodmFyIHM9aVswXS84LGY9Mj09PWE/MTppLmxlbmd0aCxsPTA7bDxuJiYhKGwqZipyKnM+PWUuYnl0ZUxlbmd0aCk7KytsKXt2YXIgdT12b2lkIDA7aWYoMj09PXQpe3N3aXRjaChpWzBdKXtjYXNlIDg6dT1uZXcgVWludDhBcnJheShlLGwqZipyKnMsZipyKnMpO2JyZWFrO2Nhc2UgMTY6dT1uZXcgVWludDE2QXJyYXkoZSxsKmYqcipzLGYqcipzLzIpO2JyZWFrO2Nhc2UgMzI6dT1uZXcgVWludDMyQXJyYXkoZSxsKmYqcipzLGYqcipzLzQpO2JyZWFrO2RlZmF1bHQ6dGhyb3cgbmV3IEVycm9yKCJQcmVkaWN0b3IgMiBub3QgYWxsb3dlZCB3aXRoICIuY29uY2F0KGlbMF0sIiBiaXRzIHBlciBzYW1wbGUuIikpfXkodSxmKX1lbHNlIDM9PT10JiZ3KHU9bmV3IFVpbnQ4QXJyYXkoZSxsKmYqcipzLGYqcipzKSxmLHMpfXJldHVybiBlfWwuYWRkRXZlbnRMaXN0ZW5lcigibWVzc2FnZSIsZnVuY3Rpb24oKXt2YXIgZT10KGkubWFyaygoZnVuY3Rpb24gZSh0KXt2YXIgcixuLGEsbyxmLHU7cmV0dXJuIGkud3JhcCgoZnVuY3Rpb24oZSl7Zm9yKDs7KXN3aXRjaChlLnByZXY9ZS5uZXh0KXtjYXNlIDA6cmV0dXJuIHI9dC5kYXRhLG49ci5pZCxhPXIuZmlsZURpcmVjdG9yeSxvPXIuYnVmZmVyLGUubmV4dD0zLHMoYSk7Y2FzZSAzOnJldHVybiBmPWUuc2VudCxlLm5leHQ9NixmLmRlY29kZShhLG8pO2Nhc2UgNjp1PWUuc2VudCxsLnBvc3RNZXNzYWdlKHtkZWNvZGVkOnUsaWQ6bn0sW3VdKTtjYXNlIDg6Y2FzZSJlbmQiOnJldHVybiBlLnN0b3AoKX19KSxlKX0pKSk7cmV0dXJuIGZ1bmN0aW9uKHQpe3JldHVybiBlLmFwcGx5KHRoaXMsYXJndW1lbnRzKX19KCkpO3ZhciBiPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe3UodGhpcyxlKX12YXIgcjtyZXR1cm4gaChlLFt7a2V5OiJkZWNvZGUiLHZhbHVlOihyPXQoaS5tYXJrKChmdW5jdGlvbiBlKHQscil7dmFyIG4sYSxvLHMsZjtyZXR1cm4gaS53cmFwKChmdW5jdGlvbihlKXtmb3IoOzspc3dpdGNoKGUucHJldj1lLm5leHQpe2Nhc2UgMDpyZXR1cm4gZS5uZXh0PTIsdGhpcy5kZWNvZGVCbG9jayhyKTtjYXNlIDI6aWYobj1lLnNlbnQsMT09PShhPXQuUHJlZGljdG9yfHwxKSl7ZS5uZXh0PTk7YnJlYWt9cmV0dXJuIG89IXQuU3RyaXBPZmZzZXRzLHM9bz90LlRpbGVXaWR0aDp0LkltYWdlV2lkdGgsZj1vP3QuVGlsZUxlbmd0aDp0LlJvd3NQZXJTdHJpcHx8dC5JbWFnZUxlbmd0aCxlLmFicnVwdCgicmV0dXJuIixnKG4sYSxzLGYsdC5CaXRzUGVyU2FtcGxlLHQuUGxhbmFyQ29uZmlndXJhdGlvbikpO2Nhc2UgOTpyZXR1cm4gZS5hYnJ1cHQoInJldHVybiIsbik7Y2FzZSAxMDpjYXNlImVuZCI6cmV0dXJuIGUuc3RvcCgpfX0pLGUsdGhpcyl9KSkpLGZ1bmN0aW9uKGUsdCl7cmV0dXJuIHIuYXBwbHkodGhpcyxhcmd1bWVudHMpfSl9XSksZX0oKTtmdW5jdGlvbiBrKGUpe3ZhciB0PWZ1bmN0aW9uKCl7aWYoInVuZGVmaW5lZCI9PXR5cGVvZiBSZWZsZWN0fHwhUmVmbGVjdC5jb25zdHJ1Y3QpcmV0dXJuITE7aWYoUmVmbGVjdC5jb25zdHJ1Y3Quc2hhbSlyZXR1cm4hMTtpZigiZnVuY3Rpb24iPT10eXBlb2YgUHJveHkpcmV0dXJuITA7dHJ5e3JldHVybiBCb29sZWFuLnByb3RvdHlwZS52YWx1ZU9mLmNhbGwoUmVmbGVjdC5jb25zdHJ1Y3QoQm9vbGVhbixbXSwoZnVuY3Rpb24oKXt9KSkpLCEwfWNhdGNoKGUpe3JldHVybiExfX0oKTtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgcixuPXYoZSk7aWYodCl7dmFyIGk9dih0aGlzKS5jb25zdHJ1Y3RvcjtyPVJlZmxlY3QuY29uc3RydWN0KG4sYXJndW1lbnRzLGkpfWVsc2Ugcj1uLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtyZXR1cm4gbSh0aGlzLHIpfX12YXIgeD1mdW5jdGlvbihlKXtwKHIsYik7dmFyIHQ9ayhyKTtmdW5jdGlvbiByKCl7cmV0dXJuIHUodGhpcyxyKSx0LmFwcGx5KHRoaXMsYXJndW1lbnRzKX1yZXR1cm4gaChyLFt7a2V5OiJkZWNvZGVCbG9jayIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIGV9fV0pLHJ9KCksXz1PYmplY3QuZnJlZXplKHtfX3Byb3RvX186bnVsbCxkZWZhdWx0Onh9KTtmdW5jdGlvbiBBKGUpe3ZhciB0PWZ1bmN0aW9uKCl7aWYoInVuZGVmaW5lZCI9PXR5cGVvZiBSZWZsZWN0fHwhUmVmbGVjdC5jb25zdHJ1Y3QpcmV0dXJuITE7aWYoUmVmbGVjdC5jb25zdHJ1Y3Quc2hhbSlyZXR1cm4hMTtpZigiZnVuY3Rpb24iPT10eXBlb2YgUHJveHkpcmV0dXJuITA7dHJ5e3JldHVybiBCb29sZWFuLnByb3RvdHlwZS52YWx1ZU9mLmNhbGwoUmVmbGVjdC5jb25zdHJ1Y3QoQm9vbGVhbixbXSwoZnVuY3Rpb24oKXt9KSkpLCEwfWNhdGNoKGUpe3JldHVybiExfX0oKTtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgcixuPXYoZSk7aWYodCl7dmFyIGk9dih0aGlzKS5jb25zdHJ1Y3RvcjtyPVJlZmxlY3QuY29uc3RydWN0KG4sYXJndW1lbnRzLGkpfWVsc2Ugcj1uLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtyZXR1cm4gbSh0aGlzLHIpfX1mdW5jdGlvbiBQKGUsdCl7Zm9yKHZhciByPXQubGVuZ3RoLTE7cj49MDtyLS0pZS5wdXNoKHRbcl0pO3JldHVybiBlfWZ1bmN0aW9uIEkoZSl7Zm9yKHZhciB0PW5ldyBVaW50MTZBcnJheSg0MDkzKSxyPW5ldyBVaW50OEFycmF5KDQwOTMpLG49MDtuPD0yNTc7bisrKXRbbl09NDA5NixyW25dPW47dmFyIGk9MjU4LGE9OSxvPTA7ZnVuY3Rpb24gcygpe2k9MjU4LGE9OX1mdW5jdGlvbiBmKGUpe3ZhciB0PWZ1bmN0aW9uKGUsdCxyKXt2YXIgbj10JTgsaT1NYXRoLmZsb29yKHQvOCksYT04LW4sbz10K3ItOCooaSsxKSxzPTgqKGkrMiktKHQrciksZj04KihpKzIpLXQ7aWYocz1NYXRoLm1heCgwLHMpLGk+PWUubGVuZ3RoKXJldHVybiBjb25zb2xlLndhcm4oInJhbiBvZmYgdGhlIGVuZCBvZiB0aGUgYnVmZmVyIGJlZm9yZSBmaW5kaW5nIEVPSV9DT0RFIChlbmQgb24gaW5wdXQgY29kZSkiKSwyNTc7dmFyIGw9ZVtpXSZNYXRoLnBvdygyLDgtbiktMSx1PWw8PD1yLWE7aWYoaSsxPGUubGVuZ3RoKXt2YXIgYz1lW2krMV0+Pj5zO3UrPWM8PD1NYXRoLm1heCgwLHItZil9aWYobz44JiZpKzI8ZS5sZW5ndGgpe3ZhciBoPTgqKGkrMyktKHQrcik7dSs9ZVtpKzJdPj4+aH1yZXR1cm4gdX0oZSxvLGEpO3JldHVybiBvKz1hLHR9ZnVuY3Rpb24gbChlLG4pe3JldHVybiByW2ldPW4sdFtpXT1lLCsraS0xfWZ1bmN0aW9uIHUoZSl7Zm9yKHZhciBuPVtdLGk9ZTs0MDk2IT09aTtpPXRbaV0pbi5wdXNoKHJbaV0pO3JldHVybiBufXZhciBjPVtdO3MoKTtmb3IodmFyIGgsZD1uZXcgVWludDhBcnJheShlKSxwPWYoZCk7MjU3IT09cDspe2lmKDI1Nj09PXApe2ZvcihzKCkscD1mKGQpOzI1Nj09PXA7KXA9ZihkKTtpZigyNTc9PT1wKWJyZWFrO2lmKHA+MjU2KXRocm93IG5ldyBFcnJvcigiY29ycnVwdGVkIGNvZGUgYXQgc2NhbmxpbmUgIi5jb25jYXQocCkpO1AoYyx1KHApKSxoPXB9ZWxzZSBpZihwPGkpe3ZhciBtPXUocCk7UChjLG0pLGwoaCxtW20ubGVuZ3RoLTFdKSxoPXB9ZWxzZXt2YXIgdj11KGgpO2lmKCF2KXRocm93IG5ldyBFcnJvcigiQm9ndXMgZW50cnkuIE5vdCBpbiBkaWN0aW9uYXJ5LCAiLmNvbmNhdChoLCIgLyAiKS5jb25jYXQoaSwiLCBwb3NpdGlvbjogIikuY29uY2F0KG8pKTtQKGMsdiksYy5wdXNoKHZbdi5sZW5ndGgtMV0pLGwoaCx2W3YubGVuZ3RoLTFdKSxoPXB9aSsxPj1NYXRoLnBvdygyLGEpJiYoMTI9PT1hP2g9dm9pZCAwOmErKykscD1mKGQpfXJldHVybiBuZXcgVWludDhBcnJheShjKX12YXIgVT1mdW5jdGlvbihlKXtwKHIsYik7dmFyIHQ9QShyKTtmdW5jdGlvbiByKCl7cmV0dXJuIHUodGhpcyxyKSx0LmFwcGx5KHRoaXMsYXJndW1lbnRzKX1yZXR1cm4gaChyLFt7a2V5OiJkZWNvZGVCbG9jayIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIEkoZSkuYnVmZmVyfX1dKSxyfSgpLFM9T2JqZWN0LmZyZWV6ZSh7X19wcm90b19fOm51bGwsZGVmYXVsdDpVfSk7ZnVuY3Rpb24gVChlKXt2YXIgdD1mdW5jdGlvbigpe2lmKCJ1bmRlZmluZWQiPT10eXBlb2YgUmVmbGVjdHx8IVJlZmxlY3QuY29uc3RydWN0KXJldHVybiExO2lmKFJlZmxlY3QuY29uc3RydWN0LnNoYW0pcmV0dXJuITE7aWYoImZ1bmN0aW9uIj09dHlwZW9mIFByb3h5KXJldHVybiEwO3RyeXtyZXR1cm4gQm9vbGVhbi5wcm90b3R5cGUudmFsdWVPZi5jYWxsKFJlZmxlY3QuY29uc3RydWN0KEJvb2xlYW4sW10sKGZ1bmN0aW9uKCl7fSkpKSwhMH1jYXRjaChlKXtyZXR1cm4hMX19KCk7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIHIsbj12KGUpO2lmKHQpe3ZhciBpPXYodGhpcykuY29uc3RydWN0b3I7cj1SZWZsZWN0LmNvbnN0cnVjdChuLGFyZ3VtZW50cyxpKX1lbHNlIHI9bi5hcHBseSh0aGlzLGFyZ3VtZW50cyk7cmV0dXJuIG0odGhpcyxyKX19dmFyIEQ9bmV3IEludDMyQXJyYXkoWzAsMSw4LDE2LDksMiwzLDEwLDE3LDI0LDMyLDI1LDE4LDExLDQsNSwxMiwxOSwyNiwzMyw0MCw0OCw0MSwzNCwyNywyMCwxMyw2LDcsMTQsMjEsMjgsMzUsNDIsNDksNTYsNTcsNTAsNDMsMzYsMjksMjIsMTUsMjMsMzAsMzcsNDQsNTEsNTgsNTksNTIsNDUsMzgsMzEsMzksNDYsNTMsNjAsNjEsNTQsNDcsNTUsNjIsNjNdKTtmdW5jdGlvbiBFKGUsdCl7Zm9yKHZhciByPTAsbj1bXSxpPTE2O2k+MCYmIWVbaS0xXTspLS1pO24ucHVzaCh7Y2hpbGRyZW46W10saW5kZXg6MH0pO2Zvcih2YXIgYSxvPW5bMF0scz0wO3M8aTtzKyspe2Zvcih2YXIgZj0wO2Y8ZVtzXTtmKyspe2Zvcigobz1uLnBvcCgpKS5jaGlsZHJlbltvLmluZGV4XT10W3JdO28uaW5kZXg+MDspbz1uLnBvcCgpO2ZvcihvLmluZGV4Kyssbi5wdXNoKG8pO24ubGVuZ3RoPD1zOyluLnB1c2goYT17Y2hpbGRyZW46W10saW5kZXg6MH0pLG8uY2hpbGRyZW5bby5pbmRleF09YS5jaGlsZHJlbixvPWE7cisrfXMrMTxpJiYobi5wdXNoKGE9e2NoaWxkcmVuOltdLGluZGV4OjB9KSxvLmNoaWxkcmVuW28uaW5kZXhdPWEuY2hpbGRyZW4sbz1hKX1yZXR1cm4gblswXS5jaGlsZHJlbn1mdW5jdGlvbiBCKGUsdCxuLGksYSxvLHMsZixsKXt2YXIgdT1uLm1jdXNQZXJMaW5lLGM9bi5wcm9ncmVzc2l2ZSxoPXQsZD10LHA9MCxtPTA7ZnVuY3Rpb24gdigpe2lmKG0+MClyZXR1cm4gbS0tLHA+Pm0mMTtpZigyNTU9PT0ocD1lW2QrK10pKXt2YXIgdD1lW2QrK107aWYodCl0aHJvdyBuZXcgRXJyb3IoInVuZXhwZWN0ZWQgbWFya2VyOiAiLmNvbmNhdCgocDw8OHx0KS50b1N0cmluZygxNikpKX1yZXR1cm4gbT03LHA+Pj43fWZ1bmN0aW9uIHkoZSl7Zm9yKHZhciB0LG49ZTtudWxsIT09KHQ9digpKTspe2lmKCJudW1iZXIiPT10eXBlb2Yobj1uW3RdKSlyZXR1cm4gbjtpZigib2JqZWN0IiE9PXIobikpdGhyb3cgbmV3IEVycm9yKCJpbnZhbGlkIGh1ZmZtYW4gc2VxdWVuY2UiKX1yZXR1cm4gbnVsbH1mdW5jdGlvbiB3KGUpe2Zvcih2YXIgdD1lLHI9MDt0PjA7KXt2YXIgbj12KCk7aWYobnVsbD09PW4pcmV0dXJuO3I9cjw8MXxuLC0tdH1yZXR1cm4gcn1mdW5jdGlvbiBnKGUpe3ZhciB0PXcoZSk7cmV0dXJuIHQ+PTE8PGUtMT90OnQrKC0xPDxlKSsxfXZhciBiPTA7dmFyIGsseD0wO2Z1bmN0aW9uIF8oZSx0LHIsbixpKXt2YXIgYT1yJXUsbz0oci91fDApKmUudituLHM9YSplLmgraTt0KGUsZS5ibG9ja3Nbb11bc10pfWZ1bmN0aW9uIEEoZSx0LHIpe3ZhciBuPXIvZS5ibG9ja3NQZXJMaW5lfDAsaT1yJWUuYmxvY2tzUGVyTGluZTt0KGUsZS5ibG9ja3Nbbl1baV0pfXZhciBQLEksVSxTLFQsRSxCPWkubGVuZ3RoO0U9Yz8wPT09bz8wPT09Zj9mdW5jdGlvbihlLHQpe3ZhciByPXkoZS5odWZmbWFuVGFibGVEQyksbj0wPT09cj8wOmcocik8PGw7ZS5wcmVkKz1uLHRbMF09ZS5wcmVkfTpmdW5jdGlvbihlLHQpe3RbMF18PXYoKTw8bH06MD09PWY/ZnVuY3Rpb24oZSx0KXtpZihiPjApYi0tO2Vsc2UgZm9yKHZhciByPW8sbj1zO3I8PW47KXt2YXIgaT15KGUuaHVmZm1hblRhYmxlQUMpLGE9MTUmaSxmPWk+PjQ7aWYoMD09PWEpe2lmKGY8MTUpe2I9dyhmKSsoMTw8ZiktMTticmVha31yKz0xNn1lbHNlIHRbRFtyKz1mXV09ZyhhKSooMTw8bCkscisrfX06ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHI9byxuPXMsaT0wO3I8PW47KXt2YXIgYT1EW3JdLGY9dFthXTwwPy0xOjE7c3dpdGNoKHgpe2Nhc2UgMDp2YXIgdT15KGUuaHVmZm1hblRhYmxlQUMpLGM9MTUmdTtpZihpPXU+PjQsMD09PWMpaTwxNT8oYj13KGkpKygxPDxpKSx4PTQpOihpPTE2LHg9MSk7ZWxzZXtpZigxIT09Yyl0aHJvdyBuZXcgRXJyb3IoImludmFsaWQgQUNuIGVuY29kaW5nIik7az1nKGMpLHg9aT8yOjN9Y29udGludWU7Y2FzZSAxOmNhc2UgMjp0W2FdP3RbYV0rPSh2KCk8PGwpKmY6MD09LS1pJiYoeD0yPT09eD8zOjApO2JyZWFrO2Nhc2UgMzp0W2FdP3RbYV0rPSh2KCk8PGwpKmY6KHRbYV09azw8bCx4PTApO2JyZWFrO2Nhc2UgNDp0W2FdJiYodFthXSs9KHYoKTw8bCkqZil9cisrfTQ9PT14JiYwPT0tLWImJih4PTApfTpmdW5jdGlvbihlLHQpe3ZhciByPXkoZS5odWZmbWFuVGFibGVEQyksbj0wPT09cj8wOmcocik7ZS5wcmVkKz1uLHRbMF09ZS5wcmVkO2Zvcih2YXIgaT0xO2k8NjQ7KXt2YXIgYT15KGUuaHVmZm1hblRhYmxlQUMpLG89MTUmYSxzPWE+PjQ7aWYoMD09PW8pe2lmKHM8MTUpYnJlYWs7aSs9MTZ9ZWxzZSB0W0RbaSs9c11dPWcobyksaSsrfX07dmFyIE8sTSxDPTA7TT0xPT09Qj9pWzBdLmJsb2Nrc1BlckxpbmUqaVswXS5ibG9ja3NQZXJDb2x1bW46dSpuLm1jdXNQZXJDb2x1bW47Zm9yKHZhciBMPWF8fE07QzxNOyl7Zm9yKEk9MDtJPEI7SSsrKWlbSV0ucHJlZD0wO2lmKGI9MCwxPT09Qilmb3IoUD1pWzBdLFQ9MDtUPEw7VCsrKUEoUCxFLEMpLEMrKztlbHNlIGZvcihUPTA7VDxMO1QrKyl7Zm9yKEk9MDtJPEI7SSsrKXt2YXIgUj1QPWlbSV0sVj1SLmgsRz1SLnY7Zm9yKFU9MDtVPEc7VSsrKWZvcihTPTA7UzxWO1MrKylfKFAsRSxDLFUsUyl9aWYoKytDPT09TSlicmVha31pZihtPTAsKE89ZVtkXTw8OHxlW2QrMV0pPDY1MjgwKXRocm93IG5ldyBFcnJvcigibWFya2VyIHdhcyBub3QgZm91bmQiKTtpZighKE8+PTY1NDg4JiZPPD02NTQ5NSkpYnJlYWs7ZCs9Mn1yZXR1cm4gZC1ofWZ1bmN0aW9uIE8oZSx0KXt2YXIgcj1bXSxuPXQuYmxvY2tzUGVyTGluZSxpPXQuYmxvY2tzUGVyQ29sdW1uLGE9bjw8MyxvPW5ldyBJbnQzMkFycmF5KDY0KSxzPW5ldyBVaW50OEFycmF5KDY0KTtmdW5jdGlvbiBmKGUscixuKXt2YXIgaSxhLG8scyxmLGwsdSxjLGgsZCxwPXQucXVhbnRpemF0aW9uVGFibGUsbT1uO2ZvcihkPTA7ZDw2NDtkKyspbVtkXT1lW2RdKnBbZF07Zm9yKGQ9MDtkPDg7KytkKXt2YXIgdj04KmQ7MCE9PW1bMSt2XXx8MCE9PW1bMit2XXx8MCE9PW1bMyt2XXx8MCE9PW1bNCt2XXx8MCE9PW1bNSt2XXx8MCE9PW1bNit2XXx8MCE9PW1bNyt2XT8oaT01NzkzKm1bMCt2XSsxMjg+PjgsYT01NzkzKm1bNCt2XSsxMjg+Pjgsbz1tWzIrdl0scz1tWzYrdl0sZj0yODk2KihtWzErdl0tbVs3K3ZdKSsxMjg+PjgsYz0yODk2KihtWzErdl0rbVs3K3ZdKSsxMjg+PjgsbD1tWzMrdl08PDQsaD1pLWErMT4+MSxpPWkrYSsxPj4xLGE9aCxoPTM3ODQqbysxNTY3KnMrMTI4Pj44LG89MTU2NypvLTM3ODQqcysxMjg+Pjgscz1oLGg9Zi0odT1tWzUrdl08PDQpKzE+PjEsZj1mK3UrMT4+MSx1PWgsaD1jK2wrMT4+MSxsPWMtbCsxPj4xLGM9aCxoPWktcysxPj4xLGk9aStzKzE+PjEscz1oLGg9YS1vKzE+PjEsYT1hK28rMT4+MSxvPWgsaD0yMjc2KmYrMzQwNipjKzIwNDg+PjEyLGY9MzQwNipmLTIyNzYqYysyMDQ4Pj4xMixjPWgsaD03OTkqbCs0MDE3KnUrMjA0OD4+MTIsbD00MDE3KmwtNzk5KnUrMjA0OD4+MTIsdT1oLG1bMCt2XT1pK2MsbVs3K3ZdPWktYyxtWzErdl09YSt1LG1bNit2XT1hLXUsbVsyK3ZdPW8rbCxtWzUrdl09by1sLG1bMyt2XT1zK2YsbVs0K3ZdPXMtZik6KGg9NTc5MyptWzArdl0rNTEyPj4xMCxtWzArdl09aCxtWzErdl09aCxtWzIrdl09aCxtWzMrdl09aCxtWzQrdl09aCxtWzUrdl09aCxtWzYrdl09aCxtWzcrdl09aCl9Zm9yKGQ9MDtkPDg7KytkKXt2YXIgeT1kOzAhPT1tWzgreV18fDAhPT1tWzE2K3ldfHwwIT09bVsyNCt5XXx8MCE9PW1bMzIreV18fDAhPT1tWzQwK3ldfHwwIT09bVs0OCt5XXx8MCE9PW1bNTYreV0/KGk9NTc5MyptWzAreV0rMjA0OD4+MTIsYT01NzkzKm1bMzIreV0rMjA0OD4+MTIsbz1tWzE2K3ldLHM9bVs0OCt5XSxmPTI4OTYqKG1bOCt5XS1tWzU2K3ldKSsyMDQ4Pj4xMixjPTI4OTYqKG1bOCt5XSttWzU2K3ldKSsyMDQ4Pj4xMixsPW1bMjQreV0saD1pLWErMT4+MSxpPWkrYSsxPj4xLGE9aCxoPTM3ODQqbysxNTY3KnMrMjA0OD4+MTIsbz0xNTY3Km8tMzc4NCpzKzIwNDg+PjEyLHM9aCxoPWYtKHU9bVs0MCt5XSkrMT4+MSxmPWYrdSsxPj4xLHU9aCxoPWMrbCsxPj4xLGw9Yy1sKzE+PjEsYz1oLGg9aS1zKzE+PjEsaT1pK3MrMT4+MSxzPWgsaD1hLW8rMT4+MSxhPWErbysxPj4xLG89aCxoPTIyNzYqZiszNDA2KmMrMjA0OD4+MTIsZj0zNDA2KmYtMjI3NipjKzIwNDg+PjEyLGM9aCxoPTc5OSpsKzQwMTcqdSsyMDQ4Pj4xMixsPTQwMTcqbC03OTkqdSsyMDQ4Pj4xMix1PWgsbVswK3ldPWkrYyxtWzU2K3ldPWktYyxtWzgreV09YSt1LG1bNDgreV09YS11LG1bMTYreV09bytsLG1bNDAreV09by1sLG1bMjQreV09cytmLG1bMzIreV09cy1mKTooaD01NzkzKm5bZCswXSs4MTkyPj4xNCxtWzAreV09aCxtWzgreV09aCxtWzE2K3ldPWgsbVsyNCt5XT1oLG1bMzIreV09aCxtWzQwK3ldPWgsbVs0OCt5XT1oLG1bNTYreV09aCl9Zm9yKGQ9MDtkPDY0OysrZCl7dmFyIHc9MTI4KyhtW2RdKzg+PjQpO3JbZF09dzwwPzA6dz4yNTU/MjU1Ond9fWZvcih2YXIgbD0wO2w8aTtsKyspe2Zvcih2YXIgdT1sPDwzLGM9MDtjPDg7YysrKXIucHVzaChuZXcgVWludDhBcnJheShhKSk7Zm9yKHZhciBoPTA7aDxuO2grKyl7Zih0LmJsb2Nrc1tsXVtoXSxzLG8pO2Zvcih2YXIgZD0wLHA9aDw8MyxtPTA7bTw4O20rKylmb3IodmFyIHY9clt1K21dLHk9MDt5PDg7eSsrKXZbcCt5XT1zW2QrK119fXJldHVybiByfXZhciBNPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe3UodGhpcyxlKSx0aGlzLmpmaWY9bnVsbCx0aGlzLmFkb2JlPW51bGwsdGhpcy5xdWFudGl6YXRpb25UYWJsZXM9W10sdGhpcy5odWZmbWFuVGFibGVzQUM9W10sdGhpcy5odWZmbWFuVGFibGVzREM9W10sdGhpcy5yZXNldEZyYW1lcygpfXJldHVybiBoKGUsW3trZXk6InJlc2V0RnJhbWVzIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuZnJhbWVzPVtdfX0se2tleToicGFyc2UiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PTA7ZnVuY3Rpb24gcigpe3ZhciByPWVbdF08PDh8ZVt0KzFdO3JldHVybiB0Kz0yLHJ9ZnVuY3Rpb24gbihlKXt2YXIgdCxyLG49MCxpPTA7Zm9yKHIgaW4gZS5jb21wb25lbnRzKWUuY29tcG9uZW50cy5oYXNPd25Qcm9wZXJ0eShyKSYmKG48KHQ9ZS5jb21wb25lbnRzW3JdKS5oJiYobj10LmgpLGk8dC52JiYoaT10LnYpKTt2YXIgYT1NYXRoLmNlaWwoZS5zYW1wbGVzUGVyTGluZS84L24pLG89TWF0aC5jZWlsKGUuc2NhbkxpbmVzLzgvaSk7Zm9yKHIgaW4gZS5jb21wb25lbnRzKWlmKGUuY29tcG9uZW50cy5oYXNPd25Qcm9wZXJ0eShyKSl7dD1lLmNvbXBvbmVudHNbcl07Zm9yKHZhciBzPU1hdGguY2VpbChNYXRoLmNlaWwoZS5zYW1wbGVzUGVyTGluZS84KSp0LmgvbiksZj1NYXRoLmNlaWwoTWF0aC5jZWlsKGUuc2NhbkxpbmVzLzgpKnQudi9pKSxsPWEqdC5oLHU9byp0LnYsYz1bXSxoPTA7aDx1O2grKyl7Zm9yKHZhciBkPVtdLHA9MDtwPGw7cCsrKWQucHVzaChuZXcgSW50MzJBcnJheSg2NCkpO2MucHVzaChkKX10LmJsb2Nrc1BlckxpbmU9cyx0LmJsb2Nrc1BlckNvbHVtbj1mLHQuYmxvY2tzPWN9ZS5tYXhIPW4sZS5tYXhWPWksZS5tY3VzUGVyTGluZT1hLGUubWN1c1BlckNvbHVtbj1vfXZhciBpLGEsbz1yKCk7aWYoNjU0OTYhPT1vKXRocm93IG5ldyBFcnJvcigiU09JIG5vdCBmb3VuZCIpO2ZvcihvPXIoKTs2NTQ5NyE9PW87KXtzd2l0Y2gobyl7Y2FzZSA2NTI4MDpicmVhaztjYXNlIDY1NTA0OmNhc2UgNjU1MDU6Y2FzZSA2NTUwNjpjYXNlIDY1NTA3OmNhc2UgNjU1MDg6Y2FzZSA2NTUwOTpjYXNlIDY1NTEwOmNhc2UgNjU1MTE6Y2FzZSA2NTUxMjpjYXNlIDY1NTEzOmNhc2UgNjU1MTQ6Y2FzZSA2NTUxNTpjYXNlIDY1NTE2OmNhc2UgNjU1MTc6Y2FzZSA2NTUxODpjYXNlIDY1NTE5OmNhc2UgNjU1MzQ6dmFyIHM9KGk9dm9pZCAwLGE9dm9pZCAwLGk9cigpLGE9ZS5zdWJhcnJheSh0LHQraS0yKSx0Kz1hLmxlbmd0aCxhKTs2NTUwND09PW8mJjc0PT09c1swXSYmNzA9PT1zWzFdJiY3Mz09PXNbMl0mJjcwPT09c1szXSYmMD09PXNbNF0mJih0aGlzLmpmaWY9e3ZlcnNpb246e21ham9yOnNbNV0sbWlub3I6c1s2XX0sZGVuc2l0eVVuaXRzOnNbN10seERlbnNpdHk6c1s4XTw8OHxzWzldLHlEZW5zaXR5OnNbMTBdPDw4fHNbMTFdLHRodW1iV2lkdGg6c1sxMl0sdGh1bWJIZWlnaHQ6c1sxM10sdGh1bWJEYXRhOnMuc3ViYXJyYXkoMTQsMTQrMypzWzEyXSpzWzEzXSl9KSw2NTUxOD09PW8mJjY1PT09c1swXSYmMTAwPT09c1sxXSYmMTExPT09c1syXSYmOTg9PT1zWzNdJiYxMDE9PT1zWzRdJiYwPT09c1s1XSYmKHRoaXMuYWRvYmU9e3ZlcnNpb246c1s2XSxmbGFnczA6c1s3XTw8OHxzWzhdLGZsYWdzMTpzWzldPDw4fHNbMTBdLHRyYW5zZm9ybUNvZGU6c1sxMV19KTticmVhaztjYXNlIDY1NDk5OmZvcih2YXIgZj1yKCkrdC0yO3Q8Zjspe3ZhciBsPWVbdCsrXSx1PW5ldyBJbnQzMkFycmF5KDY0KTtpZihsPj40PT0wKWZvcih2YXIgYz0wO2M8NjQ7YysrKXt1W0RbY11dPWVbdCsrXX1lbHNle2lmKGw+PjQhPTEpdGhyb3cgbmV3IEVycm9yKCJEUVQ6IGludmFsaWQgdGFibGUgc3BlYyIpO2Zvcih2YXIgaD0wO2g8NjQ7aCsrKXt1W0RbaF1dPXIoKX19dGhpcy5xdWFudGl6YXRpb25UYWJsZXNbMTUmbF09dX1icmVhaztjYXNlIDY1NDcyOmNhc2UgNjU0NzM6Y2FzZSA2NTQ3NDpyKCk7Zm9yKHZhciBkPXtleHRlbmRlZDo2NTQ3Mz09PW8scHJvZ3Jlc3NpdmU6NjU0NzQ9PT1vLHByZWNpc2lvbjplW3QrK10sc2NhbkxpbmVzOnIoKSxzYW1wbGVzUGVyTGluZTpyKCksY29tcG9uZW50czp7fSxjb21wb25lbnRzT3JkZXI6W119LHA9ZVt0KytdLG09dm9pZCAwLHY9MDt2PHA7disrKXttPWVbdF07dmFyIHk9ZVt0KzFdPj40LHc9MTUmZVt0KzFdLGc9ZVt0KzJdO2QuY29tcG9uZW50c09yZGVyLnB1c2gobSksZC5jb21wb25lbnRzW21dPXtoOnksdjp3LHF1YW50aXphdGlvbklkeDpnfSx0Kz0zfW4oZCksdGhpcy5mcmFtZXMucHVzaChkKTticmVhaztjYXNlIDY1NDc2OmZvcih2YXIgYj1yKCksaz0yO2s8Yjspe2Zvcih2YXIgeD1lW3QrK10sXz1uZXcgVWludDhBcnJheSgxNiksQT0wLFA9MDtQPDE2O1ArKyx0KyspX1tQXT1lW3RdLEErPV9bUF07Zm9yKHZhciBJPW5ldyBVaW50OEFycmF5KEEpLFU9MDtVPEE7VSsrLHQrKylJW1VdPWVbdF07ays9MTcrQSx4Pj40PT0wP3RoaXMuaHVmZm1hblRhYmxlc0RDWzE1JnhdPUUoXyxJKTp0aGlzLmh1ZmZtYW5UYWJsZXNBQ1sxNSZ4XT1FKF8sSSl9YnJlYWs7Y2FzZSA2NTUwMTpyKCksdGhpcy5yZXNldEludGVydmFsPXIoKTticmVhaztjYXNlIDY1NDk4OnIoKTtmb3IodmFyIFM9ZVt0KytdLFQ9W10sTz10aGlzLmZyYW1lc1swXSxNPTA7TTxTO00rKyl7dmFyIEM9Ty5jb21wb25lbnRzW2VbdCsrXV0sTD1lW3QrK107Qy5odWZmbWFuVGFibGVEQz10aGlzLmh1ZmZtYW5UYWJsZXNEQ1tMPj40XSxDLmh1ZmZtYW5UYWJsZUFDPXRoaXMuaHVmZm1hblRhYmxlc0FDWzE1JkxdLFQucHVzaChDKX12YXIgUj1lW3QrK10sVj1lW3QrK10sRz1lW3QrK10sRj1CKGUsdCxPLFQsdGhpcy5yZXNldEludGVydmFsLFIsVixHPj40LDE1JkcpO3QrPUY7YnJlYWs7Y2FzZSA2NTUzNToyNTUhPT1lW3RdJiZ0LS07YnJlYWs7ZGVmYXVsdDppZigyNTU9PT1lW3QtM10mJmVbdC0yXT49MTkyJiZlW3QtMl08PTI1NCl7dC09MzticmVha310aHJvdyBuZXcgRXJyb3IoInVua25vd24gSlBFRyBtYXJrZXIgIi5jb25jYXQoby50b1N0cmluZygxNikpKX1vPXIoKX19fSx7a2V5OiJnZXRSZXN1bHQiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5mcmFtZXM7aWYoMD09PXRoaXMuZnJhbWVzLmxlbmd0aCl0aHJvdyBuZXcgRXJyb3IoIm5vIGZyYW1lcyB3ZXJlIGRlY29kZWQiKTt0aGlzLmZyYW1lcy5sZW5ndGg+MSYmY29uc29sZS53YXJuKCJtb3JlIHRoYW4gb25lIGZyYW1lIGlzIG5vdCBzdXBwb3J0ZWQiKTtmb3IodmFyIHQ9MDt0PHRoaXMuZnJhbWVzLmxlbmd0aDt0KyspZm9yKHZhciByPXRoaXMuZnJhbWVzW3RdLmNvbXBvbmVudHMsbj0wLGk9T2JqZWN0LmtleXMocik7bjxpLmxlbmd0aDtuKyspe3ZhciBhPWlbbl07clthXS5xdWFudGl6YXRpb25UYWJsZT10aGlzLnF1YW50aXphdGlvblRhYmxlc1tyW2FdLnF1YW50aXphdGlvbklkeF0sZGVsZXRlIHJbYV0ucXVhbnRpemF0aW9uSWR4fWZvcih2YXIgbz1lWzBdLHM9by5jb21wb25lbnRzLGY9by5jb21wb25lbnRzT3JkZXIsbD1bXSx1PW8uc2FtcGxlc1BlckxpbmUsYz1vLnNjYW5MaW5lcyxoPTA7aDxmLmxlbmd0aDtoKyspe3ZhciBkPXNbZltoXV07bC5wdXNoKHtsaW5lczpPKDAsZCksc2NhbGVYOmQuaC9vLm1heEgsc2NhbGVZOmQudi9vLm1heFZ9KX1mb3IodmFyIHA9bmV3IFVpbnQ4QXJyYXkodSpjKmwubGVuZ3RoKSxtPTAsdj0wO3Y8YzsrK3YpZm9yKHZhciB5PTA7eTx1OysreSlmb3IodmFyIHc9MDt3PGwubGVuZ3RoOysrdyl7dmFyIGc9bFt3XTtwW21dPWcubGluZXNbMHx2Kmcuc2NhbGVZXVswfHkqZy5zY2FsZVhdLCsrbX1yZXR1cm4gcH19XSksZX0oKSxDPWZ1bmN0aW9uKGUpe3AocixiKTt2YXIgdD1UKHIpO2Z1bmN0aW9uIHIoZSl7dmFyIG47cmV0dXJuIHUodGhpcyxyKSwobj10LmNhbGwodGhpcykpLnJlYWRlcj1uZXcgTSxlLkpQRUdUYWJsZXMmJm4ucmVhZGVyLnBhcnNlKGUuSlBFR1RhYmxlcyksbn1yZXR1cm4gaChyLFt7a2V5OiJkZWNvZGVCbG9jayIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMucmVhZGVyLnJlc2V0RnJhbWVzKCksdGhpcy5yZWFkZXIucGFyc2UobmV3IFVpbnQ4QXJyYXkoZSkpLHRoaXMucmVhZGVyLmdldFJlc3VsdCgpLmJ1ZmZlcn19XSkscn0oKSxMPU9iamVjdC5mcmVlemUoe19fcHJvdG9fXzpudWxsLGRlZmF1bHQ6Q30pO2Z1bmN0aW9uIFIoZSl7Zm9yKHZhciB0PWUubGVuZ3RoOy0tdD49MDspZVt0XT0wfVIobmV3IEFycmF5KDU3NikpLFIobmV3IEFycmF5KDYwKSksUihuZXcgQXJyYXkoNTEyKSksUihuZXcgQXJyYXkoMjU2KSksUihuZXcgQXJyYXkoMjkpKSxSKG5ldyBBcnJheSgzMCkpO3ZhciBWPWZ1bmN0aW9uKGUsdCxyLG4pe2Zvcih2YXIgaT02NTUzNSZlfDAsYT1lPj4+MTYmNjU1MzV8MCxvPTA7MCE9PXI7KXtyLT1vPXI+MmUzPzJlMzpyO2Rve2E9YSsoaT1pK3RbbisrXXwwKXwwfXdoaWxlKC0tbyk7aSU9NjU1MjEsYSU9NjU1MjF9cmV0dXJuIGl8YTw8MTZ8MH0sRz1uZXcgVWludDMyQXJyYXkoZnVuY3Rpb24oKXtmb3IodmFyIGUsdD1bXSxyPTA7cjwyNTY7cisrKXtlPXI7Zm9yKHZhciBuPTA7bjw4O24rKyllPTEmZT8zOTg4MjkyMzg0XmU+Pj4xOmU+Pj4xO3Rbcl09ZX1yZXR1cm4gdH0oKSksRj1mdW5jdGlvbihlLHQscixuKXt2YXIgaT1HLGE9bityO2VePS0xO2Zvcih2YXIgbz1uO288YTtvKyspZT1lPj4+OF5pWzI1NSYoZV50W29dKV07cmV0dXJuLTFeZX0sej17MjoibmVlZCBkaWN0aW9uYXJ5IiwxOiJzdHJlYW0gZW5kIiwwOiIiLCItMSI6ImZpbGUgZXJyb3IiLCItMiI6InN0cmVhbSBlcnJvciIsIi0zIjoiZGF0YSBlcnJvciIsIi00IjoiaW5zdWZmaWNpZW50IG1lbW9yeSIsIi01IjoiYnVmZmVyIGVycm9yIiwiLTYiOiJpbmNvbXBhdGlibGUgdmVyc2lvbiJ9LGo9e1pfTk9fRkxVU0g6MCxaX1BBUlRJQUxfRkxVU0g6MSxaX1NZTkNfRkxVU0g6MixaX0ZVTExfRkxVU0g6MyxaX0ZJTklTSDo0LFpfQkxPQ0s6NSxaX1RSRUVTOjYsWl9PSzowLFpfU1RSRUFNX0VORDoxLFpfTkVFRF9ESUNUOjIsWl9FUlJOTzotMSxaX1NUUkVBTV9FUlJPUjotMixaX0RBVEFfRVJST1I6LTMsWl9NRU1fRVJST1I6LTQsWl9CVUZfRVJST1I6LTUsWl9OT19DT01QUkVTU0lPTjowLFpfQkVTVF9TUEVFRDoxLFpfQkVTVF9DT01QUkVTU0lPTjo5LFpfREVGQVVMVF9DT01QUkVTU0lPTjotMSxaX0ZJTFRFUkVEOjEsWl9IVUZGTUFOX09OTFk6MixaX1JMRTozLFpfRklYRUQ6NCxaX0RFRkFVTFRfU1RSQVRFR1k6MCxaX0JJTkFSWTowLFpfVEVYVDoxLFpfVU5LTk9XTjoyLFpfREVGTEFURUQ6OH0sTj1mdW5jdGlvbihlLHQpe3JldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSx0KX0sWj1mdW5jdGlvbihlKXtmb3IodmFyIHQ9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDEpO3QubGVuZ3RoOyl7dmFyIG49dC5zaGlmdCgpO2lmKG4pe2lmKCJvYmplY3QiIT09cihuKSl0aHJvdyBuZXcgVHlwZUVycm9yKG4rIm11c3QgYmUgbm9uLW9iamVjdCIpO2Zvcih2YXIgaSBpbiBuKU4obixpKSYmKGVbaV09bltpXSl9fXJldHVybiBlfSxLPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD0wLHI9MCxuPWUubGVuZ3RoO3I8bjtyKyspdCs9ZVtyXS5sZW5ndGg7Zm9yKHZhciBpPW5ldyBVaW50OEFycmF5KHQpLGE9MCxvPTAscz1lLmxlbmd0aDthPHM7YSsrKXt2YXIgZj1lW2FdO2kuc2V0KGYsbyksbys9Zi5sZW5ndGh9cmV0dXJuIGl9LEg9ITA7dHJ5e1N0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkobnVsbCxuZXcgVWludDhBcnJheSgxKSl9Y2F0Y2goZSl7SD0hMX1mb3IodmFyIFk9bmV3IFVpbnQ4QXJyYXkoMjU2KSxYPTA7WDwyNTY7WCsrKVlbWF09WD49MjUyPzY6WD49MjQ4PzU6WD49MjQwPzQ6WD49MjI0PzM6WD49MTkyPzI6MTtZWzI1NF09WVsyNTRdPTE7dmFyIFc9ZnVuY3Rpb24oZSl7aWYoImZ1bmN0aW9uIj09dHlwZW9mIFRleHRFbmNvZGVyJiZUZXh0RW5jb2Rlci5wcm90b3R5cGUuZW5jb2RlKXJldHVybihuZXcgVGV4dEVuY29kZXIpLmVuY29kZShlKTt2YXIgdCxyLG4saSxhLG89ZS5sZW5ndGgscz0wO2ZvcihpPTA7aTxvO2krKyk1NTI5Nj09KDY0NTEyJihyPWUuY2hhckNvZGVBdChpKSkpJiZpKzE8byYmNTYzMjA9PSg2NDUxMiYobj1lLmNoYXJDb2RlQXQoaSsxKSkpJiYocj02NTUzNisoci01NTI5Njw8MTApKyhuLTU2MzIwKSxpKyspLHMrPXI8MTI4PzE6cjwyMDQ4PzI6cjw2NTUzNj8zOjQ7Zm9yKHQ9bmV3IFVpbnQ4QXJyYXkocyksYT0wLGk9MDthPHM7aSsrKTU1Mjk2PT0oNjQ1MTImKHI9ZS5jaGFyQ29kZUF0KGkpKSkmJmkrMTxvJiY1NjMyMD09KDY0NTEyJihuPWUuY2hhckNvZGVBdChpKzEpKSkmJihyPTY1NTM2KyhyLTU1Mjk2PDwxMCkrKG4tNTYzMjApLGkrKykscjwxMjg/dFthKytdPXI6cjwyMDQ4Pyh0W2ErK109MTkyfHI+Pj42LHRbYSsrXT0xMjh8NjMmcik6cjw2NTUzNj8odFthKytdPTIyNHxyPj4+MTIsdFthKytdPTEyOHxyPj4+NiY2Myx0W2ErK109MTI4fDYzJnIpOih0W2ErK109MjQwfHI+Pj4xOCx0W2ErK109MTI4fHI+Pj4xMiY2Myx0W2ErK109MTI4fHI+Pj42JjYzLHRbYSsrXT0xMjh8NjMmcik7cmV0dXJuIHR9LHE9ZnVuY3Rpb24oZSx0KXt2YXIgcixuLGk9dHx8ZS5sZW5ndGg7aWYoImZ1bmN0aW9uIj09dHlwZW9mIFRleHREZWNvZGVyJiZUZXh0RGVjb2Rlci5wcm90b3R5cGUuZGVjb2RlKXJldHVybihuZXcgVGV4dERlY29kZXIpLmRlY29kZShlLnN1YmFycmF5KDAsdCkpO3ZhciBhPW5ldyBBcnJheSgyKmkpO2ZvcihuPTAscj0wO3I8aTspe3ZhciBvPWVbcisrXTtpZihvPDEyOClhW24rK109bztlbHNle3ZhciBzPVlbb107aWYocz40KWFbbisrXT02NTUzMyxyKz1zLTE7ZWxzZXtmb3IobyY9Mj09PXM/MzE6Mz09PXM/MTU6NztzPjEmJnI8aTspbz1vPDw2fDYzJmVbcisrXSxzLS07cz4xP2FbbisrXT02NTUzMzpvPDY1NTM2P2FbbisrXT1vOihvLT02NTUzNixhW24rK109NTUyOTZ8bz4+MTAmMTAyMyxhW24rK109NTYzMjB8MTAyMyZvKX19fXJldHVybiBmdW5jdGlvbihlLHQpe2lmKHQ8NjU1MzQmJmUuc3ViYXJyYXkmJkgpcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkobnVsbCxlLmxlbmd0aD09PXQ/ZTplLnN1YmFycmF5KDAsdCkpO2Zvcih2YXIgcj0iIixuPTA7bjx0O24rKylyKz1TdHJpbmcuZnJvbUNoYXJDb2RlKGVbbl0pO3JldHVybiByfShhLG4pfSxKPWZ1bmN0aW9uKGUsdCl7KHQ9dHx8ZS5sZW5ndGgpPmUubGVuZ3RoJiYodD1lLmxlbmd0aCk7Zm9yKHZhciByPXQtMTtyPj0wJiYxMjg9PSgxOTImZVtyXSk7KXItLTtyZXR1cm4gcjwwfHwwPT09cj90OnIrWVtlW3JdXT50P3I6dH07dmFyIFE9ZnVuY3Rpb24oKXt0aGlzLmlucHV0PW51bGwsdGhpcy5uZXh0X2luPTAsdGhpcy5hdmFpbF9pbj0wLHRoaXMudG90YWxfaW49MCx0aGlzLm91dHB1dD1udWxsLHRoaXMubmV4dF9vdXQ9MCx0aGlzLmF2YWlsX291dD0wLHRoaXMudG90YWxfb3V0PTAsdGhpcy5tc2c9IiIsdGhpcy5zdGF0ZT1udWxsLHRoaXMuZGF0YV90eXBlPTIsdGhpcy5hZGxlcj0wfSwkPWZ1bmN0aW9uKGUsdCl7dmFyIHIsbixpLGEsbyxzLGYsbCx1LGMsaCxkLHAsbSx2LHksdyxnLGIsayx4LF8sQSxQLEk9ZS5zdGF0ZTtyPWUubmV4dF9pbixBPWUuaW5wdXQsbj1yKyhlLmF2YWlsX2luLTUpLGk9ZS5uZXh0X291dCxQPWUub3V0cHV0LGE9aS0odC1lLmF2YWlsX291dCksbz1pKyhlLmF2YWlsX291dC0yNTcpLHM9SS5kbWF4LGY9SS53c2l6ZSxsPUkud2hhdmUsdT1JLnduZXh0LGM9SS53aW5kb3csaD1JLmhvbGQsZD1JLmJpdHMscD1JLmxlbmNvZGUsbT1JLmRpc3Rjb2RlLHY9KDE8PEkubGVuYml0cyktMSx5PSgxPDxJLmRpc3RiaXRzKS0xO2U6ZG97ZDwxNSYmKGgrPUFbcisrXTw8ZCxkKz04LGgrPUFbcisrXTw8ZCxkKz04KSx3PXBbaCZ2XTt0OmZvcig7Oyl7aWYoaD4+Pj1nPXc+Pj4yNCxkLT1nLDA9PT0oZz13Pj4+MTYmMjU1KSlQW2krK109NjU1MzUmdztlbHNle2lmKCEoMTYmZykpe2lmKDA9PSg2NCZnKSl7dz1wWyg2NTUzNSZ3KSsoaCYoMTw8ZyktMSldO2NvbnRpbnVlIHR9aWYoMzImZyl7SS5tb2RlPTEyO2JyZWFrIGV9ZS5tc2c9ImludmFsaWQgbGl0ZXJhbC9sZW5ndGggY29kZSIsSS5tb2RlPTMwO2JyZWFrIGV9Yj02NTUzNSZ3LChnJj0xNSkmJihkPGcmJihoKz1BW3IrK108PGQsZCs9OCksYis9aCYoMTw8ZyktMSxoPj4+PWcsZC09ZyksZDwxNSYmKGgrPUFbcisrXTw8ZCxkKz04LGgrPUFbcisrXTw8ZCxkKz04KSx3PW1baCZ5XTtyOmZvcig7Oyl7aWYoaD4+Pj1nPXc+Pj4yNCxkLT1nLCEoMTYmKGc9dz4+PjE2JjI1NSkpKXtpZigwPT0oNjQmZykpe3c9bVsoNjU1MzUmdykrKGgmKDE8PGcpLTEpXTtjb250aW51ZSByfWUubXNnPSJpbnZhbGlkIGRpc3RhbmNlIGNvZGUiLEkubW9kZT0zMDticmVhayBlfWlmKGs9NjU1MzUmdyxkPChnJj0xNSkmJihoKz1BW3IrK108PGQsKGQrPTgpPGcmJihoKz1BW3IrK108PGQsZCs9OCkpLChrKz1oJigxPDxnKS0xKT5zKXtlLm1zZz0iaW52YWxpZCBkaXN0YW5jZSB0b28gZmFyIGJhY2siLEkubW9kZT0zMDticmVhayBlfWlmKGg+Pj49ZyxkLT1nLGs+KGc9aS1hKSl7aWYoKGc9ay1nKT5sJiZJLnNhbmUpe2UubXNnPSJpbnZhbGlkIGRpc3RhbmNlIHRvbyBmYXIgYmFjayIsSS5tb2RlPTMwO2JyZWFrIGV9aWYoeD0wLF89YywwPT09dSl7aWYoeCs9Zi1nLGc8Yil7Yi09Zztkb3tQW2krK109Y1t4KytdfXdoaWxlKC0tZyk7eD1pLWssXz1QfX1lbHNlIGlmKHU8Zyl7aWYoeCs9Zit1LWcsKGctPXUpPGIpe2ItPWc7ZG97UFtpKytdPWNbeCsrXX13aGlsZSgtLWcpO2lmKHg9MCx1PGIpe2ItPWc9dTtkb3tQW2krK109Y1t4KytdfXdoaWxlKC0tZyk7eD1pLWssXz1QfX19ZWxzZSBpZih4Kz11LWcsZzxiKXtiLT1nO2Rve1BbaSsrXT1jW3grK119d2hpbGUoLS1nKTt4PWktayxfPVB9Zm9yKDtiPjI7KVBbaSsrXT1fW3grK10sUFtpKytdPV9beCsrXSxQW2krK109X1t4KytdLGItPTM7YiYmKFBbaSsrXT1fW3grK10sYj4xJiYoUFtpKytdPV9beCsrXSkpfWVsc2V7eD1pLWs7ZG97UFtpKytdPVBbeCsrXSxQW2krK109UFt4KytdLFBbaSsrXT1QW3grK10sYi09M313aGlsZShiPjIpO2ImJihQW2krK109UFt4KytdLGI+MSYmKFBbaSsrXT1QW3grK10pKX1icmVha319YnJlYWt9fXdoaWxlKHI8biYmaTxvKTtyLT1iPWQ+PjMsaCY9KDE8PChkLT1iPDwzKSktMSxlLm5leHRfaW49cixlLm5leHRfb3V0PWksZS5hdmFpbF9pbj1yPG4/bi1yKzU6NS0oci1uKSxlLmF2YWlsX291dD1pPG8/by1pKzI1NzoyNTctKGktbyksSS5ob2xkPWgsSS5iaXRzPWR9LGVlPW5ldyBVaW50MTZBcnJheShbMyw0LDUsNiw3LDgsOSwxMCwxMSwxMywxNSwxNywxOSwyMywyNywzMSwzNSw0Myw1MSw1OSw2Nyw4Myw5OSwxMTUsMTMxLDE2MywxOTUsMjI3LDI1OCwwLDBdKSx0ZT1uZXcgVWludDhBcnJheShbMTYsMTYsMTYsMTYsMTYsMTYsMTYsMTYsMTcsMTcsMTcsMTcsMTgsMTgsMTgsMTgsMTksMTksMTksMTksMjAsMjAsMjAsMjAsMjEsMjEsMjEsMjEsMTYsNzIsNzhdKSxyZT1uZXcgVWludDE2QXJyYXkoWzEsMiwzLDQsNSw3LDksMTMsMTcsMjUsMzMsNDksNjUsOTcsMTI5LDE5MywyNTcsMzg1LDUxMyw3NjksMTAyNSwxNTM3LDIwNDksMzA3Myw0MDk3LDYxNDUsODE5MywxMjI4OSwxNjM4NSwyNDU3NywwLDBdKSxuZT1uZXcgVWludDhBcnJheShbMTYsMTYsMTYsMTYsMTcsMTcsMTgsMTgsMTksMTksMjAsMjAsMjEsMjEsMjIsMjIsMjMsMjMsMjQsMjQsMjUsMjUsMjYsMjYsMjcsMjcsMjgsMjgsMjksMjksNjQsNjRdKSxpZT1mdW5jdGlvbihlLHQscixuLGksYSxvLHMpe3ZhciBmLGwsdSxjLGgsZCxwLG0sdix5PXMuYml0cyx3PTAsZz0wLGI9MCxrPTAseD0wLF89MCxBPTAsUD0wLEk9MCxVPTAsUz1udWxsLFQ9MCxEPW5ldyBVaW50MTZBcnJheSgxNiksRT1uZXcgVWludDE2QXJyYXkoMTYpLEI9bnVsbCxPPTA7Zm9yKHc9MDt3PD0xNTt3KyspRFt3XT0wO2ZvcihnPTA7ZzxuO2crKylEW3RbcitnXV0rKztmb3IoeD15LGs9MTU7az49MSYmMD09PURba107ay0tKTtpZih4PmsmJih4PWspLDA9PT1rKXJldHVybiBpW2ErK109MjA5NzE1MjAsaVthKytdPTIwOTcxNTIwLHMuYml0cz0xLDA7Zm9yKGI9MTtiPGsmJjA9PT1EW2JdO2IrKyk7Zm9yKHg8YiYmKHg9YiksUD0xLHc9MTt3PD0xNTt3KyspaWYoUDw8PTEsKFAtPURbd10pPDApcmV0dXJuLTE7aWYoUD4wJiYoMD09PWV8fDEhPT1rKSlyZXR1cm4tMTtmb3IoRVsxXT0wLHc9MTt3PDE1O3crKylFW3crMV09RVt3XStEW3ddO2ZvcihnPTA7ZzxuO2crKykwIT09dFtyK2ddJiYob1tFW3RbcitnXV0rK109Zyk7aWYoMD09PWU/KFM9Qj1vLGQ9MTkpOjE9PT1lPyhTPWVlLFQtPTI1NyxCPXRlLE8tPTI1NyxkPTI1Nik6KFM9cmUsQj1uZSxkPS0xKSxVPTAsZz0wLHc9YixoPWEsXz14LEE9MCx1PS0xLGM9KEk9MTw8eCktMSwxPT09ZSYmST44NTJ8fDI9PT1lJiZJPjU5MilyZXR1cm4gMTtmb3IoOzspe3A9dy1BLG9bZ108ZD8obT0wLHY9b1tnXSk6b1tnXT5kPyhtPUJbTytvW2ddXSx2PVNbVCtvW2ddXSk6KG09OTYsdj0wKSxmPTE8PHctQSxiPWw9MTw8Xztkb3tpW2grKFU+PkEpKyhsLT1mKV09cDw8MjR8bTw8MTZ8dnwwfXdoaWxlKDAhPT1sKTtmb3IoZj0xPDx3LTE7VSZmOylmPj49MTtpZigwIT09Zj8oVSY9Zi0xLFUrPWYpOlU9MCxnKyssMD09LS1EW3ddKXtpZih3PT09aylicmVhazt3PXRbcitvW2ddXX1pZih3PngmJihVJmMpIT09dSl7Zm9yKDA9PT1BJiYoQT14KSxoKz1iLFA9MTw8KF89dy1BKTtfK0E8ayYmISgoUC09RFtfK0FdKTw9MCk7KV8rKyxQPDw9MTtpZihJKz0xPDxfLDE9PT1lJiZJPjg1Mnx8Mj09PWUmJkk+NTkyKXJldHVybiAxO2lbdT1VJmNdPXg8PDI0fF88PDE2fGgtYXwwfX1yZXR1cm4gMCE9PVUmJihpW2grVV09dy1BPDwyNHw2NDw8MTZ8MCkscy5iaXRzPXgsMH0sYWU9ai5aX0ZJTklTSCxvZT1qLlpfQkxPQ0ssc2U9ai5aX1RSRUVTLGZlPWouWl9PSyxsZT1qLlpfU1RSRUFNX0VORCx1ZT1qLlpfTkVFRF9ESUNULGNlPWouWl9TVFJFQU1fRVJST1IsaGU9ai5aX0RBVEFfRVJST1IsZGU9ai5aX01FTV9FUlJPUixwZT1qLlpfQlVGX0VSUk9SLG1lPWouWl9ERUZMQVRFRCx2ZT1mdW5jdGlvbihlKXtyZXR1cm4oZT4+PjI0JjI1NSkrKGU+Pj44JjY1MjgwKSsoKDY1MjgwJmUpPDw4KSsoKDI1NSZlKTw8MjQpfTtmdW5jdGlvbiB5ZSgpe3RoaXMubW9kZT0wLHRoaXMubGFzdD0hMSx0aGlzLndyYXA9MCx0aGlzLmhhdmVkaWN0PSExLHRoaXMuZmxhZ3M9MCx0aGlzLmRtYXg9MCx0aGlzLmNoZWNrPTAsdGhpcy50b3RhbD0wLHRoaXMuaGVhZD1udWxsLHRoaXMud2JpdHM9MCx0aGlzLndzaXplPTAsdGhpcy53aGF2ZT0wLHRoaXMud25leHQ9MCx0aGlzLndpbmRvdz1udWxsLHRoaXMuaG9sZD0wLHRoaXMuYml0cz0wLHRoaXMubGVuZ3RoPTAsdGhpcy5vZmZzZXQ9MCx0aGlzLmV4dHJhPTAsdGhpcy5sZW5jb2RlPW51bGwsdGhpcy5kaXN0Y29kZT1udWxsLHRoaXMubGVuYml0cz0wLHRoaXMuZGlzdGJpdHM9MCx0aGlzLm5jb2RlPTAsdGhpcy5ubGVuPTAsdGhpcy5uZGlzdD0wLHRoaXMuaGF2ZT0wLHRoaXMubmV4dD1udWxsLHRoaXMubGVucz1uZXcgVWludDE2QXJyYXkoMzIwKSx0aGlzLndvcms9bmV3IFVpbnQxNkFycmF5KDI4OCksdGhpcy5sZW5keW49bnVsbCx0aGlzLmRpc3RkeW49bnVsbCx0aGlzLnNhbmU9MCx0aGlzLmJhY2s9MCx0aGlzLndhcz0wfXZhciB3ZSxnZSxiZT1mdW5jdGlvbihlKXtpZighZXx8IWUuc3RhdGUpcmV0dXJuIGNlO3ZhciB0PWUuc3RhdGU7cmV0dXJuIGUudG90YWxfaW49ZS50b3RhbF9vdXQ9dC50b3RhbD0wLGUubXNnPSIiLHQud3JhcCYmKGUuYWRsZXI9MSZ0LndyYXApLHQubW9kZT0xLHQubGFzdD0wLHQuaGF2ZWRpY3Q9MCx0LmRtYXg9MzI3NjgsdC5oZWFkPW51bGwsdC5ob2xkPTAsdC5iaXRzPTAsdC5sZW5jb2RlPXQubGVuZHluPW5ldyBJbnQzMkFycmF5KDg1MiksdC5kaXN0Y29kZT10LmRpc3RkeW49bmV3IEludDMyQXJyYXkoNTkyKSx0LnNhbmU9MSx0LmJhY2s9LTEsZmV9LGtlPWZ1bmN0aW9uKGUpe2lmKCFlfHwhZS5zdGF0ZSlyZXR1cm4gY2U7dmFyIHQ9ZS5zdGF0ZTtyZXR1cm4gdC53c2l6ZT0wLHQud2hhdmU9MCx0LnduZXh0PTAsYmUoZSl9LHhlPWZ1bmN0aW9uKGUsdCl7dmFyIHI7aWYoIWV8fCFlLnN0YXRlKXJldHVybiBjZTt2YXIgbj1lLnN0YXRlO3JldHVybiB0PDA/KHI9MCx0PS10KToocj0xKyh0Pj40KSx0PDQ4JiYodCY9MTUpKSx0JiYodDw4fHx0PjE1KT9jZToobnVsbCE9PW4ud2luZG93JiZuLndiaXRzIT09dCYmKG4ud2luZG93PW51bGwpLG4ud3JhcD1yLG4ud2JpdHM9dCxrZShlKSl9LF9lPWZ1bmN0aW9uKGUsdCl7aWYoIWUpcmV0dXJuIGNlO3ZhciByPW5ldyB5ZTtlLnN0YXRlPXIsci53aW5kb3c9bnVsbDt2YXIgbj14ZShlLHQpO3JldHVybiBuIT09ZmUmJihlLnN0YXRlPW51bGwpLG59LEFlPSEwLFBlPWZ1bmN0aW9uKGUpe2lmKEFlKXt3ZT1uZXcgSW50MzJBcnJheSg1MTIpLGdlPW5ldyBJbnQzMkFycmF5KDMyKTtmb3IodmFyIHQ9MDt0PDE0NDspZS5sZW5zW3QrK109ODtmb3IoO3Q8MjU2OyllLmxlbnNbdCsrXT05O2Zvcig7dDwyODA7KWUubGVuc1t0KytdPTc7Zm9yKDt0PDI4ODspZS5sZW5zW3QrK109ODtmb3IoaWUoMSxlLmxlbnMsMCwyODgsd2UsMCxlLndvcmsse2JpdHM6OX0pLHQ9MDt0PDMyOyllLmxlbnNbdCsrXT01O2llKDIsZS5sZW5zLDAsMzIsZ2UsMCxlLndvcmsse2JpdHM6NX0pLEFlPSExfWUubGVuY29kZT13ZSxlLmxlbmJpdHM9OSxlLmRpc3Rjb2RlPWdlLGUuZGlzdGJpdHM9NX0sSWU9ZnVuY3Rpb24oZSx0LHIsbil7dmFyIGksYT1lLnN0YXRlO3JldHVybiBudWxsPT09YS53aW5kb3cmJihhLndzaXplPTE8PGEud2JpdHMsYS53bmV4dD0wLGEud2hhdmU9MCxhLndpbmRvdz1uZXcgVWludDhBcnJheShhLndzaXplKSksbj49YS53c2l6ZT8oYS53aW5kb3cuc2V0KHQuc3ViYXJyYXkoci1hLndzaXplLHIpLDApLGEud25leHQ9MCxhLndoYXZlPWEud3NpemUpOigoaT1hLndzaXplLWEud25leHQpPm4mJihpPW4pLGEud2luZG93LnNldCh0LnN1YmFycmF5KHItbixyLW4raSksYS53bmV4dCksKG4tPWkpPyhhLndpbmRvdy5zZXQodC5zdWJhcnJheShyLW4sciksMCksYS53bmV4dD1uLGEud2hhdmU9YS53c2l6ZSk6KGEud25leHQrPWksYS53bmV4dD09PWEud3NpemUmJihhLnduZXh0PTApLGEud2hhdmU8YS53c2l6ZSYmKGEud2hhdmUrPWkpKSksMH0sVWU9e2luZmxhdGVSZXNldDprZSxpbmZsYXRlUmVzZXQyOnhlLGluZmxhdGVSZXNldEtlZXA6YmUsaW5mbGF0ZUluaXQ6ZnVuY3Rpb24oZSl7cmV0dXJuIF9lKGUsMTUpfSxpbmZsYXRlSW5pdDI6X2UsaW5mbGF0ZTpmdW5jdGlvbihlLHQpe3ZhciByLG4saSxhLG8scyxmLGwsdSxjLGgsZCxwLG0sdix5LHcsZyxiLGsseCxfLEEsUCxJPTAsVT1uZXcgVWludDhBcnJheSg0KSxTPW5ldyBVaW50OEFycmF5KFsxNiwxNywxOCwwLDgsNyw5LDYsMTAsNSwxMSw0LDEyLDMsMTMsMiwxNCwxLDE1XSk7aWYoIWV8fCFlLnN0YXRlfHwhZS5vdXRwdXR8fCFlLmlucHV0JiYwIT09ZS5hdmFpbF9pbilyZXR1cm4gY2U7MTI9PT0ocj1lLnN0YXRlKS5tb2RlJiYoci5tb2RlPTEzKSxvPWUubmV4dF9vdXQsaT1lLm91dHB1dCxmPWUuYXZhaWxfb3V0LGE9ZS5uZXh0X2luLG49ZS5pbnB1dCxzPWUuYXZhaWxfaW4sbD1yLmhvbGQsdT1yLmJpdHMsYz1zLGg9ZixfPWZlO2U6Zm9yKDs7KXN3aXRjaChyLm1vZGUpe2Nhc2UgMTppZigwPT09ci53cmFwKXtyLm1vZGU9MTM7YnJlYWt9Zm9yKDt1PDE2Oyl7aWYoMD09PXMpYnJlYWsgZTtzLS0sbCs9blthKytdPDx1LHUrPTh9aWYoMiZyLndyYXAmJjM1NjE1PT09bCl7ci5jaGVjaz0wLFVbMF09MjU1JmwsVVsxXT1sPj4+OCYyNTUsci5jaGVjaz1GKHIuY2hlY2ssVSwyLDApLGw9MCx1PTAsci5tb2RlPTI7YnJlYWt9aWYoci5mbGFncz0wLHIuaGVhZCYmKHIuaGVhZC5kb25lPSExKSwhKDEmci53cmFwKXx8KCgoMjU1JmwpPDw4KSsobD4+OCkpJTMxKXtlLm1zZz0iaW5jb3JyZWN0IGhlYWRlciBjaGVjayIsci5tb2RlPTMwO2JyZWFrfWlmKCgxNSZsKSE9PW1lKXtlLm1zZz0idW5rbm93biBjb21wcmVzc2lvbiBtZXRob2QiLHIubW9kZT0zMDticmVha31pZih1LT00LHg9OCsoMTUmKGw+Pj49NCkpLDA9PT1yLndiaXRzKXIud2JpdHM9eDtlbHNlIGlmKHg+ci53Yml0cyl7ZS5tc2c9ImludmFsaWQgd2luZG93IHNpemUiLHIubW9kZT0zMDticmVha31yLmRtYXg9MTw8ci53Yml0cyxlLmFkbGVyPXIuY2hlY2s9MSxyLm1vZGU9NTEyJmw/MTA6MTIsbD0wLHU9MDticmVhaztjYXNlIDI6Zm9yKDt1PDE2Oyl7aWYoMD09PXMpYnJlYWsgZTtzLS0sbCs9blthKytdPDx1LHUrPTh9aWYoci5mbGFncz1sLCgyNTUmci5mbGFncykhPT1tZSl7ZS5tc2c9InVua25vd24gY29tcHJlc3Npb24gbWV0aG9kIixyLm1vZGU9MzA7YnJlYWt9aWYoNTczNDQmci5mbGFncyl7ZS5tc2c9InVua25vd24gaGVhZGVyIGZsYWdzIHNldCIsci5tb2RlPTMwO2JyZWFrfXIuaGVhZCYmKHIuaGVhZC50ZXh0PWw+PjgmMSksNTEyJnIuZmxhZ3MmJihVWzBdPTI1NSZsLFVbMV09bD4+PjgmMjU1LHIuY2hlY2s9RihyLmNoZWNrLFUsMiwwKSksbD0wLHU9MCxyLm1vZGU9MztjYXNlIDM6Zm9yKDt1PDMyOyl7aWYoMD09PXMpYnJlYWsgZTtzLS0sbCs9blthKytdPDx1LHUrPTh9ci5oZWFkJiYoci5oZWFkLnRpbWU9bCksNTEyJnIuZmxhZ3MmJihVWzBdPTI1NSZsLFVbMV09bD4+PjgmMjU1LFVbMl09bD4+PjE2JjI1NSxVWzNdPWw+Pj4yNCYyNTUsci5jaGVjaz1GKHIuY2hlY2ssVSw0LDApKSxsPTAsdT0wLHIubW9kZT00O2Nhc2UgNDpmb3IoO3U8MTY7KXtpZigwPT09cylicmVhayBlO3MtLSxsKz1uW2ErK108PHUsdSs9OH1yLmhlYWQmJihyLmhlYWQueGZsYWdzPTI1NSZsLHIuaGVhZC5vcz1sPj44KSw1MTImci5mbGFncyYmKFVbMF09MjU1JmwsVVsxXT1sPj4+OCYyNTUsci5jaGVjaz1GKHIuY2hlY2ssVSwyLDApKSxsPTAsdT0wLHIubW9kZT01O2Nhc2UgNTppZigxMDI0JnIuZmxhZ3Mpe2Zvcig7dTwxNjspe2lmKDA9PT1zKWJyZWFrIGU7cy0tLGwrPW5bYSsrXTw8dSx1Kz04fXIubGVuZ3RoPWwsci5oZWFkJiYoci5oZWFkLmV4dHJhX2xlbj1sKSw1MTImci5mbGFncyYmKFVbMF09MjU1JmwsVVsxXT1sPj4+OCYyNTUsci5jaGVjaz1GKHIuY2hlY2ssVSwyLDApKSxsPTAsdT0wfWVsc2Ugci5oZWFkJiYoci5oZWFkLmV4dHJhPW51bGwpO3IubW9kZT02O2Nhc2UgNjppZigxMDI0JnIuZmxhZ3MmJigoZD1yLmxlbmd0aCk+cyYmKGQ9cyksZCYmKHIuaGVhZCYmKHg9ci5oZWFkLmV4dHJhX2xlbi1yLmxlbmd0aCxyLmhlYWQuZXh0cmF8fChyLmhlYWQuZXh0cmE9bmV3IFVpbnQ4QXJyYXkoci5oZWFkLmV4dHJhX2xlbikpLHIuaGVhZC5leHRyYS5zZXQobi5zdWJhcnJheShhLGErZCkseCkpLDUxMiZyLmZsYWdzJiYoci5jaGVjaz1GKHIuY2hlY2ssbixkLGEpKSxzLT1kLGErPWQsci5sZW5ndGgtPWQpLHIubGVuZ3RoKSlicmVhayBlO3IubGVuZ3RoPTAsci5tb2RlPTc7Y2FzZSA3OmlmKDIwNDgmci5mbGFncyl7aWYoMD09PXMpYnJlYWsgZTtkPTA7ZG97eD1uW2ErZCsrXSxyLmhlYWQmJngmJnIubGVuZ3RoPDY1NTM2JiYoci5oZWFkLm5hbWUrPVN0cmluZy5mcm9tQ2hhckNvZGUoeCkpfXdoaWxlKHgmJmQ8cyk7aWYoNTEyJnIuZmxhZ3MmJihyLmNoZWNrPUYoci5jaGVjayxuLGQsYSkpLHMtPWQsYSs9ZCx4KWJyZWFrIGV9ZWxzZSByLmhlYWQmJihyLmhlYWQubmFtZT1udWxsKTtyLmxlbmd0aD0wLHIubW9kZT04O2Nhc2UgODppZig0MDk2JnIuZmxhZ3Mpe2lmKDA9PT1zKWJyZWFrIGU7ZD0wO2Rve3g9blthK2QrK10sci5oZWFkJiZ4JiZyLmxlbmd0aDw2NTUzNiYmKHIuaGVhZC5jb21tZW50Kz1TdHJpbmcuZnJvbUNoYXJDb2RlKHgpKX13aGlsZSh4JiZkPHMpO2lmKDUxMiZyLmZsYWdzJiYoci5jaGVjaz1GKHIuY2hlY2ssbixkLGEpKSxzLT1kLGErPWQseClicmVhayBlfWVsc2Ugci5oZWFkJiYoci5oZWFkLmNvbW1lbnQ9bnVsbCk7ci5tb2RlPTk7Y2FzZSA5OmlmKDUxMiZyLmZsYWdzKXtmb3IoO3U8MTY7KXtpZigwPT09cylicmVhayBlO3MtLSxsKz1uW2ErK108PHUsdSs9OH1pZihsIT09KDY1NTM1JnIuY2hlY2spKXtlLm1zZz0iaGVhZGVyIGNyYyBtaXNtYXRjaCIsci5tb2RlPTMwO2JyZWFrfWw9MCx1PTB9ci5oZWFkJiYoci5oZWFkLmhjcmM9ci5mbGFncz4+OSYxLHIuaGVhZC5kb25lPSEwKSxlLmFkbGVyPXIuY2hlY2s9MCxyLm1vZGU9MTI7YnJlYWs7Y2FzZSAxMDpmb3IoO3U8MzI7KXtpZigwPT09cylicmVhayBlO3MtLSxsKz1uW2ErK108PHUsdSs9OH1lLmFkbGVyPXIuY2hlY2s9dmUobCksbD0wLHU9MCxyLm1vZGU9MTE7Y2FzZSAxMTppZigwPT09ci5oYXZlZGljdClyZXR1cm4gZS5uZXh0X291dD1vLGUuYXZhaWxfb3V0PWYsZS5uZXh0X2luPWEsZS5hdmFpbF9pbj1zLHIuaG9sZD1sLHIuYml0cz11LHVlO2UuYWRsZXI9ci5jaGVjaz0xLHIubW9kZT0xMjtjYXNlIDEyOmlmKHQ9PT1vZXx8dD09PXNlKWJyZWFrIGU7Y2FzZSAxMzppZihyLmxhc3Qpe2w+Pj49NyZ1LHUtPTcmdSxyLm1vZGU9Mjc7YnJlYWt9Zm9yKDt1PDM7KXtpZigwPT09cylicmVhayBlO3MtLSxsKz1uW2ErK108PHUsdSs9OH1zd2l0Y2goci5sYXN0PTEmbCx1LT0xLDMmKGw+Pj49MSkpe2Nhc2UgMDpyLm1vZGU9MTQ7YnJlYWs7Y2FzZSAxOmlmKFBlKHIpLHIubW9kZT0yMCx0PT09c2Upe2w+Pj49Mix1LT0yO2JyZWFrIGV9YnJlYWs7Y2FzZSAyOnIubW9kZT0xNzticmVhaztjYXNlIDM6ZS5tc2c9ImludmFsaWQgYmxvY2sgdHlwZSIsci5tb2RlPTMwfWw+Pj49Mix1LT0yO2JyZWFrO2Nhc2UgMTQ6Zm9yKGw+Pj49NyZ1LHUtPTcmdTt1PDMyOyl7aWYoMD09PXMpYnJlYWsgZTtzLS0sbCs9blthKytdPDx1LHUrPTh9aWYoKDY1NTM1JmwpIT0obD4+PjE2XjY1NTM1KSl7ZS5tc2c9ImludmFsaWQgc3RvcmVkIGJsb2NrIGxlbmd0aHMiLHIubW9kZT0zMDticmVha31pZihyLmxlbmd0aD02NTUzNSZsLGw9MCx1PTAsci5tb2RlPTE1LHQ9PT1zZSlicmVhayBlO2Nhc2UgMTU6ci5tb2RlPTE2O2Nhc2UgMTY6aWYoZD1yLmxlbmd0aCl7aWYoZD5zJiYoZD1zKSxkPmYmJihkPWYpLDA9PT1kKWJyZWFrIGU7aS5zZXQobi5zdWJhcnJheShhLGErZCksbykscy09ZCxhKz1kLGYtPWQsbys9ZCxyLmxlbmd0aC09ZDticmVha31yLm1vZGU9MTI7YnJlYWs7Y2FzZSAxNzpmb3IoO3U8MTQ7KXtpZigwPT09cylicmVhayBlO3MtLSxsKz1uW2ErK108PHUsdSs9OH1pZihyLm5sZW49MjU3KygzMSZsKSxsPj4+PTUsdS09NSxyLm5kaXN0PTErKDMxJmwpLGw+Pj49NSx1LT01LHIubmNvZGU9NCsoMTUmbCksbD4+Pj00LHUtPTQsci5ubGVuPjI4Nnx8ci5uZGlzdD4zMCl7ZS5tc2c9InRvbyBtYW55IGxlbmd0aCBvciBkaXN0YW5jZSBzeW1ib2xzIixyLm1vZGU9MzA7YnJlYWt9ci5oYXZlPTAsci5tb2RlPTE4O2Nhc2UgMTg6Zm9yKDtyLmhhdmU8ci5uY29kZTspe2Zvcig7dTwzOyl7aWYoMD09PXMpYnJlYWsgZTtzLS0sbCs9blthKytdPDx1LHUrPTh9ci5sZW5zW1Nbci5oYXZlKytdXT03JmwsbD4+Pj0zLHUtPTN9Zm9yKDtyLmhhdmU8MTk7KXIubGVuc1tTW3IuaGF2ZSsrXV09MDtpZihyLmxlbmNvZGU9ci5sZW5keW4sci5sZW5iaXRzPTcsQT17Yml0czpyLmxlbmJpdHN9LF89aWUoMCxyLmxlbnMsMCwxOSxyLmxlbmNvZGUsMCxyLndvcmssQSksci5sZW5iaXRzPUEuYml0cyxfKXtlLm1zZz0iaW52YWxpZCBjb2RlIGxlbmd0aHMgc2V0IixyLm1vZGU9MzA7YnJlYWt9ci5oYXZlPTAsci5tb2RlPTE5O2Nhc2UgMTk6Zm9yKDtyLmhhdmU8ci5ubGVuK3IubmRpc3Q7KXtmb3IoO3k9KEk9ci5sZW5jb2RlW2wmKDE8PHIubGVuYml0cyktMV0pPj4+MTYmMjU1LHc9NjU1MzUmSSwhKCh2PUk+Pj4yNCk8PXUpOyl7aWYoMD09PXMpYnJlYWsgZTtzLS0sbCs9blthKytdPDx1LHUrPTh9aWYodzwxNilsPj4+PXYsdS09dixyLmxlbnNbci5oYXZlKytdPXc7ZWxzZXtpZigxNj09PXcpe2ZvcihQPXYrMjt1PFA7KXtpZigwPT09cylicmVhayBlO3MtLSxsKz1uW2ErK108PHUsdSs9OH1pZihsPj4+PXYsdS09diwwPT09ci5oYXZlKXtlLm1zZz0iaW52YWxpZCBiaXQgbGVuZ3RoIHJlcGVhdCIsci5tb2RlPTMwO2JyZWFrfXg9ci5sZW5zW3IuaGF2ZS0xXSxkPTMrKDMmbCksbD4+Pj0yLHUtPTJ9ZWxzZSBpZigxNz09PXcpe2ZvcihQPXYrMzt1PFA7KXtpZigwPT09cylicmVhayBlO3MtLSxsKz1uW2ErK108PHUsdSs9OH11LT12LHg9MCxkPTMrKDcmKGw+Pj49dikpLGw+Pj49Myx1LT0zfWVsc2V7Zm9yKFA9dis3O3U8UDspe2lmKDA9PT1zKWJyZWFrIGU7cy0tLGwrPW5bYSsrXTw8dSx1Kz04fXUtPXYseD0wLGQ9MTErKDEyNyYobD4+Pj12KSksbD4+Pj03LHUtPTd9aWYoci5oYXZlK2Q+ci5ubGVuK3IubmRpc3Qpe2UubXNnPSJpbnZhbGlkIGJpdCBsZW5ndGggcmVwZWF0IixyLm1vZGU9MzA7YnJlYWt9Zm9yKDtkLS07KXIubGVuc1tyLmhhdmUrK109eH19aWYoMzA9PT1yLm1vZGUpYnJlYWs7aWYoMD09PXIubGVuc1syNTZdKXtlLm1zZz0iaW52YWxpZCBjb2RlIC0tIG1pc3NpbmcgZW5kLW9mLWJsb2NrIixyLm1vZGU9MzA7YnJlYWt9aWYoci5sZW5iaXRzPTksQT17Yml0czpyLmxlbmJpdHN9LF89aWUoMSxyLmxlbnMsMCxyLm5sZW4sci5sZW5jb2RlLDAsci53b3JrLEEpLHIubGVuYml0cz1BLmJpdHMsXyl7ZS5tc2c9ImludmFsaWQgbGl0ZXJhbC9sZW5ndGhzIHNldCIsci5tb2RlPTMwO2JyZWFrfWlmKHIuZGlzdGJpdHM9NixyLmRpc3Rjb2RlPXIuZGlzdGR5bixBPXtiaXRzOnIuZGlzdGJpdHN9LF89aWUoMixyLmxlbnMsci5ubGVuLHIubmRpc3Qsci5kaXN0Y29kZSwwLHIud29yayxBKSxyLmRpc3RiaXRzPUEuYml0cyxfKXtlLm1zZz0iaW52YWxpZCBkaXN0YW5jZXMgc2V0IixyLm1vZGU9MzA7YnJlYWt9aWYoci5tb2RlPTIwLHQ9PT1zZSlicmVhayBlO2Nhc2UgMjA6ci5tb2RlPTIxO2Nhc2UgMjE6aWYocz49NiYmZj49MjU4KXtlLm5leHRfb3V0PW8sZS5hdmFpbF9vdXQ9ZixlLm5leHRfaW49YSxlLmF2YWlsX2luPXMsci5ob2xkPWwsci5iaXRzPXUsJChlLGgpLG89ZS5uZXh0X291dCxpPWUub3V0cHV0LGY9ZS5hdmFpbF9vdXQsYT1lLm5leHRfaW4sbj1lLmlucHV0LHM9ZS5hdmFpbF9pbixsPXIuaG9sZCx1PXIuYml0cywxMj09PXIubW9kZSYmKHIuYmFjaz0tMSk7YnJlYWt9Zm9yKHIuYmFjaz0wO3k9KEk9ci5sZW5jb2RlW2wmKDE8PHIubGVuYml0cyktMV0pPj4+MTYmMjU1LHc9NjU1MzUmSSwhKCh2PUk+Pj4yNCk8PXUpOyl7aWYoMD09PXMpYnJlYWsgZTtzLS0sbCs9blthKytdPDx1LHUrPTh9aWYoeSYmMD09KDI0MCZ5KSl7Zm9yKGc9dixiPXksaz13O3k9KEk9ci5sZW5jb2RlW2srKChsJigxPDxnK2IpLTEpPj5nKV0pPj4+MTYmMjU1LHc9NjU1MzUmSSwhKGcrKHY9ST4+PjI0KTw9dSk7KXtpZigwPT09cylicmVhayBlO3MtLSxsKz1uW2ErK108PHUsdSs9OH1sPj4+PWcsdS09ZyxyLmJhY2srPWd9aWYobD4+Pj12LHUtPXYsci5iYWNrKz12LHIubGVuZ3RoPXcsMD09PXkpe3IubW9kZT0yNjticmVha31pZigzMiZ5KXtyLmJhY2s9LTEsci5tb2RlPTEyO2JyZWFrfWlmKDY0Jnkpe2UubXNnPSJpbnZhbGlkIGxpdGVyYWwvbGVuZ3RoIGNvZGUiLHIubW9kZT0zMDticmVha31yLmV4dHJhPTE1Jnksci5tb2RlPTIyO2Nhc2UgMjI6aWYoci5leHRyYSl7Zm9yKFA9ci5leHRyYTt1PFA7KXtpZigwPT09cylicmVhayBlO3MtLSxsKz1uW2ErK108PHUsdSs9OH1yLmxlbmd0aCs9bCYoMTw8ci5leHRyYSktMSxsPj4+PXIuZXh0cmEsdS09ci5leHRyYSxyLmJhY2srPXIuZXh0cmF9ci53YXM9ci5sZW5ndGgsci5tb2RlPTIzO2Nhc2UgMjM6Zm9yKDt5PShJPXIuZGlzdGNvZGVbbCYoMTw8ci5kaXN0Yml0cyktMV0pPj4+MTYmMjU1LHc9NjU1MzUmSSwhKCh2PUk+Pj4yNCk8PXUpOyl7aWYoMD09PXMpYnJlYWsgZTtzLS0sbCs9blthKytdPDx1LHUrPTh9aWYoMD09KDI0MCZ5KSl7Zm9yKGc9dixiPXksaz13O3k9KEk9ci5kaXN0Y29kZVtrKygobCYoMTw8ZytiKS0xKT4+ZyldKT4+PjE2JjI1NSx3PTY1NTM1JkksIShnKyh2PUk+Pj4yNCk8PXUpOyl7aWYoMD09PXMpYnJlYWsgZTtzLS0sbCs9blthKytdPDx1LHUrPTh9bD4+Pj1nLHUtPWcsci5iYWNrKz1nfWlmKGw+Pj49dix1LT12LHIuYmFjays9diw2NCZ5KXtlLm1zZz0iaW52YWxpZCBkaXN0YW5jZSBjb2RlIixyLm1vZGU9MzA7YnJlYWt9ci5vZmZzZXQ9dyxyLmV4dHJhPTE1Jnksci5tb2RlPTI0O2Nhc2UgMjQ6aWYoci5leHRyYSl7Zm9yKFA9ci5leHRyYTt1PFA7KXtpZigwPT09cylicmVhayBlO3MtLSxsKz1uW2ErK108PHUsdSs9OH1yLm9mZnNldCs9bCYoMTw8ci5leHRyYSktMSxsPj4+PXIuZXh0cmEsdS09ci5leHRyYSxyLmJhY2srPXIuZXh0cmF9aWYoci5vZmZzZXQ+ci5kbWF4KXtlLm1zZz0iaW52YWxpZCBkaXN0YW5jZSB0b28gZmFyIGJhY2siLHIubW9kZT0zMDticmVha31yLm1vZGU9MjU7Y2FzZSAyNTppZigwPT09ZilicmVhayBlO2lmKGQ9aC1mLHIub2Zmc2V0PmQpe2lmKChkPXIub2Zmc2V0LWQpPnIud2hhdmUmJnIuc2FuZSl7ZS5tc2c9ImludmFsaWQgZGlzdGFuY2UgdG9vIGZhciBiYWNrIixyLm1vZGU9MzA7YnJlYWt9ZD5yLnduZXh0PyhkLT1yLnduZXh0LHA9ci53c2l6ZS1kKTpwPXIud25leHQtZCxkPnIubGVuZ3RoJiYoZD1yLmxlbmd0aCksbT1yLndpbmRvd31lbHNlIG09aSxwPW8tci5vZmZzZXQsZD1yLmxlbmd0aDtkPmYmJihkPWYpLGYtPWQsci5sZW5ndGgtPWQ7ZG97aVtvKytdPW1bcCsrXX13aGlsZSgtLWQpOzA9PT1yLmxlbmd0aCYmKHIubW9kZT0yMSk7YnJlYWs7Y2FzZSAyNjppZigwPT09ZilicmVhayBlO2lbbysrXT1yLmxlbmd0aCxmLS0sci5tb2RlPTIxO2JyZWFrO2Nhc2UgMjc6aWYoci53cmFwKXtmb3IoO3U8MzI7KXtpZigwPT09cylicmVhayBlO3MtLSxsfD1uW2ErK108PHUsdSs9OH1pZihoLT1mLGUudG90YWxfb3V0Kz1oLHIudG90YWwrPWgsaCYmKGUuYWRsZXI9ci5jaGVjaz1yLmZsYWdzP0Yoci5jaGVjayxpLGgsby1oKTpWKHIuY2hlY2ssaSxoLG8taCkpLGg9Ziwoci5mbGFncz9sOnZlKGwpKSE9PXIuY2hlY2spe2UubXNnPSJpbmNvcnJlY3QgZGF0YSBjaGVjayIsci5tb2RlPTMwO2JyZWFrfWw9MCx1PTB9ci5tb2RlPTI4O2Nhc2UgMjg6aWYoci53cmFwJiZyLmZsYWdzKXtmb3IoO3U8MzI7KXtpZigwPT09cylicmVhayBlO3MtLSxsKz1uW2ErK108PHUsdSs9OH1pZihsIT09KDQyOTQ5NjcyOTUmci50b3RhbCkpe2UubXNnPSJpbmNvcnJlY3QgbGVuZ3RoIGNoZWNrIixyLm1vZGU9MzA7YnJlYWt9bD0wLHU9MH1yLm1vZGU9Mjk7Y2FzZSAyOTpfPWxlO2JyZWFrIGU7Y2FzZSAzMDpfPWhlO2JyZWFrIGU7Y2FzZSAzMTpyZXR1cm4gZGU7ZGVmYXVsdDpyZXR1cm4gY2V9cmV0dXJuIGUubmV4dF9vdXQ9byxlLmF2YWlsX291dD1mLGUubmV4dF9pbj1hLGUuYXZhaWxfaW49cyxyLmhvbGQ9bCxyLmJpdHM9dSwoci53c2l6ZXx8aCE9PWUuYXZhaWxfb3V0JiZyLm1vZGU8MzAmJihyLm1vZGU8Mjd8fHQhPT1hZSkpJiZJZShlLGUub3V0cHV0LGUubmV4dF9vdXQsaC1lLmF2YWlsX291dCksYy09ZS5hdmFpbF9pbixoLT1lLmF2YWlsX291dCxlLnRvdGFsX2luKz1jLGUudG90YWxfb3V0Kz1oLHIudG90YWwrPWgsci53cmFwJiZoJiYoZS5hZGxlcj1yLmNoZWNrPXIuZmxhZ3M/RihyLmNoZWNrLGksaCxlLm5leHRfb3V0LWgpOlYoci5jaGVjayxpLGgsZS5uZXh0X291dC1oKSksZS5kYXRhX3R5cGU9ci5iaXRzKyhyLmxhc3Q/NjQ6MCkrKDEyPT09ci5tb2RlPzEyODowKSsoMjA9PT1yLm1vZGV8fDE1PT09ci5tb2RlPzI1NjowKSwoMD09PWMmJjA9PT1ofHx0PT09YWUpJiZfPT09ZmUmJihfPXBlKSxffSxpbmZsYXRlRW5kOmZ1bmN0aW9uKGUpe2lmKCFlfHwhZS5zdGF0ZSlyZXR1cm4gY2U7dmFyIHQ9ZS5zdGF0ZTtyZXR1cm4gdC53aW5kb3cmJih0LndpbmRvdz1udWxsKSxlLnN0YXRlPW51bGwsZmV9LGluZmxhdGVHZXRIZWFkZXI6ZnVuY3Rpb24oZSx0KXtpZighZXx8IWUuc3RhdGUpcmV0dXJuIGNlO3ZhciByPWUuc3RhdGU7cmV0dXJuIDA9PSgyJnIud3JhcCk/Y2U6KHIuaGVhZD10LHQuZG9uZT0hMSxmZSl9LGluZmxhdGVTZXREaWN0aW9uYXJ5OmZ1bmN0aW9uKGUsdCl7dmFyIHIsbj10Lmxlbmd0aDtyZXR1cm4gZSYmZS5zdGF0ZT8wIT09KHI9ZS5zdGF0ZSkud3JhcCYmMTEhPT1yLm1vZGU/Y2U6MTE9PT1yLm1vZGUmJlYoMSx0LG4sMCkhPT1yLmNoZWNrP2hlOkllKGUsdCxuLG4pPyhyLm1vZGU9MzEsZGUpOihyLmhhdmVkaWN0PTEsZmUpOmNlfSxpbmZsYXRlSW5mbzoicGFrbyBpbmZsYXRlIChmcm9tIE5vZGVjYSBwcm9qZWN0KSJ9O3ZhciBTZT1mdW5jdGlvbigpe3RoaXMudGV4dD0wLHRoaXMudGltZT0wLHRoaXMueGZsYWdzPTAsdGhpcy5vcz0wLHRoaXMuZXh0cmE9bnVsbCx0aGlzLmV4dHJhX2xlbj0wLHRoaXMubmFtZT0iIix0aGlzLmNvbW1lbnQ9IiIsdGhpcy5oY3JjPTAsdGhpcy5kb25lPSExfSxUZT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLERlPWouWl9OT19GTFVTSCxFZT1qLlpfRklOSVNILEJlPWouWl9PSyxPZT1qLlpfU1RSRUFNX0VORCxNZT1qLlpfTkVFRF9ESUNULENlPWouWl9TVFJFQU1fRVJST1IsTGU9ai5aX0RBVEFfRVJST1IsUmU9ai5aX01FTV9FUlJPUjtmdW5jdGlvbiBWZShlKXt0aGlzLm9wdGlvbnM9Wih7Y2h1bmtTaXplOjY1NTM2LHdpbmRvd0JpdHM6MTUsdG86IiJ9LGV8fHt9KTt2YXIgdD10aGlzLm9wdGlvbnM7dC5yYXcmJnQud2luZG93Qml0cz49MCYmdC53aW5kb3dCaXRzPDE2JiYodC53aW5kb3dCaXRzPS10LndpbmRvd0JpdHMsMD09PXQud2luZG93Qml0cyYmKHQud2luZG93Qml0cz0tMTUpKSwhKHQud2luZG93Qml0cz49MCYmdC53aW5kb3dCaXRzPDE2KXx8ZSYmZS53aW5kb3dCaXRzfHwodC53aW5kb3dCaXRzKz0zMiksdC53aW5kb3dCaXRzPjE1JiZ0LndpbmRvd0JpdHM8NDgmJjA9PSgxNSZ0LndpbmRvd0JpdHMpJiYodC53aW5kb3dCaXRzfD0xNSksdGhpcy5lcnI9MCx0aGlzLm1zZz0iIix0aGlzLmVuZGVkPSExLHRoaXMuY2h1bmtzPVtdLHRoaXMuc3RybT1uZXcgUSx0aGlzLnN0cm0uYXZhaWxfb3V0PTA7dmFyIHI9VWUuaW5mbGF0ZUluaXQyKHRoaXMuc3RybSx0LndpbmRvd0JpdHMpO2lmKHIhPT1CZSl0aHJvdyBuZXcgRXJyb3IoeltyXSk7aWYodGhpcy5oZWFkZXI9bmV3IFNlLFVlLmluZmxhdGVHZXRIZWFkZXIodGhpcy5zdHJtLHRoaXMuaGVhZGVyKSx0LmRpY3Rpb25hcnkmJigic3RyaW5nIj09dHlwZW9mIHQuZGljdGlvbmFyeT90LmRpY3Rpb25hcnk9Vyh0LmRpY3Rpb25hcnkpOiJbb2JqZWN0IEFycmF5QnVmZmVyXSI9PT1UZS5jYWxsKHQuZGljdGlvbmFyeSkmJih0LmRpY3Rpb25hcnk9bmV3IFVpbnQ4QXJyYXkodC5kaWN0aW9uYXJ5KSksdC5yYXcmJihyPVVlLmluZmxhdGVTZXREaWN0aW9uYXJ5KHRoaXMuc3RybSx0LmRpY3Rpb25hcnkpKSE9PUJlKSl0aHJvdyBuZXcgRXJyb3IoeltyXSl9ZnVuY3Rpb24gR2UoZSx0KXt2YXIgcj1uZXcgVmUodCk7aWYoci5wdXNoKGUpLHIuZXJyKXRocm93IHIubXNnfHx6W3IuZXJyXTtyZXR1cm4gci5yZXN1bHR9VmUucHJvdG90eXBlLnB1c2g9ZnVuY3Rpb24oZSx0KXt2YXIgcixuLGksYT10aGlzLnN0cm0sbz10aGlzLm9wdGlvbnMuY2h1bmtTaXplLHM9dGhpcy5vcHRpb25zLmRpY3Rpb25hcnk7aWYodGhpcy5lbmRlZClyZXR1cm4hMTtmb3Iobj10PT09fn50P3Q6ITA9PT10P0VlOkRlLCJbb2JqZWN0IEFycmF5QnVmZmVyXSI9PT1UZS5jYWxsKGUpP2EuaW5wdXQ9bmV3IFVpbnQ4QXJyYXkoZSk6YS5pbnB1dD1lLGEubmV4dF9pbj0wLGEuYXZhaWxfaW49YS5pbnB1dC5sZW5ndGg7Oyl7Zm9yKDA9PT1hLmF2YWlsX291dCYmKGEub3V0cHV0PW5ldyBVaW50OEFycmF5KG8pLGEubmV4dF9vdXQ9MCxhLmF2YWlsX291dD1vKSwocj1VZS5pbmZsYXRlKGEsbikpPT09TWUmJnMmJigocj1VZS5pbmZsYXRlU2V0RGljdGlvbmFyeShhLHMpKT09PUJlP3I9VWUuaW5mbGF0ZShhLG4pOnI9PT1MZSYmKHI9TWUpKTthLmF2YWlsX2luPjAmJnI9PT1PZSYmYS5zdGF0ZS53cmFwPjAmJjAhPT1lW2EubmV4dF9pbl07KVVlLmluZmxhdGVSZXNldChhKSxyPVVlLmluZmxhdGUoYSxuKTtzd2l0Y2gocil7Y2FzZSBDZTpjYXNlIExlOmNhc2UgTWU6Y2FzZSBSZTpyZXR1cm4gdGhpcy5vbkVuZChyKSx0aGlzLmVuZGVkPSEwLCExfWlmKGk9YS5hdmFpbF9vdXQsYS5uZXh0X291dCYmKDA9PT1hLmF2YWlsX291dHx8cj09PU9lKSlpZigic3RyaW5nIj09PXRoaXMub3B0aW9ucy50byl7dmFyIGY9SihhLm91dHB1dCxhLm5leHRfb3V0KSxsPWEubmV4dF9vdXQtZix1PXEoYS5vdXRwdXQsZik7YS5uZXh0X291dD1sLGEuYXZhaWxfb3V0PW8tbCxsJiZhLm91dHB1dC5zZXQoYS5vdXRwdXQuc3ViYXJyYXkoZixmK2wpLDApLHRoaXMub25EYXRhKHUpfWVsc2UgdGhpcy5vbkRhdGEoYS5vdXRwdXQubGVuZ3RoPT09YS5uZXh0X291dD9hLm91dHB1dDphLm91dHB1dC5zdWJhcnJheSgwLGEubmV4dF9vdXQpKTtpZihyIT09QmV8fDAhPT1pKXtpZihyPT09T2UpcmV0dXJuIHI9VWUuaW5mbGF0ZUVuZCh0aGlzLnN0cm0pLHRoaXMub25FbmQociksdGhpcy5lbmRlZD0hMCwhMDtpZigwPT09YS5hdmFpbF9pbilicmVha319cmV0dXJuITB9LFZlLnByb3RvdHlwZS5vbkRhdGE9ZnVuY3Rpb24oZSl7dGhpcy5jaHVua3MucHVzaChlKX0sVmUucHJvdG90eXBlLm9uRW5kPWZ1bmN0aW9uKGUpe2U9PT1CZSYmKCJzdHJpbmciPT09dGhpcy5vcHRpb25zLnRvP3RoaXMucmVzdWx0PXRoaXMuY2h1bmtzLmpvaW4oIiIpOnRoaXMucmVzdWx0PUsodGhpcy5jaHVua3MpKSx0aGlzLmNodW5rcz1bXSx0aGlzLmVycj1lLHRoaXMubXNnPXRoaXMuc3RybS5tc2d9O3ZhciBGZT17SW5mbGF0ZTpWZSxpbmZsYXRlOkdlLGluZmxhdGVSYXc6ZnVuY3Rpb24oZSx0KXtyZXR1cm4odD10fHx7fSkucmF3PSEwLEdlKGUsdCl9LHVuZ3ppcDpHZSxjb25zdGFudHM6an0uaW5mbGF0ZTtmdW5jdGlvbiB6ZShlKXt2YXIgdD1mdW5jdGlvbigpe2lmKCJ1bmRlZmluZWQiPT10eXBlb2YgUmVmbGVjdHx8IVJlZmxlY3QuY29uc3RydWN0KXJldHVybiExO2lmKFJlZmxlY3QuY29uc3RydWN0LnNoYW0pcmV0dXJuITE7aWYoImZ1bmN0aW9uIj09dHlwZW9mIFByb3h5KXJldHVybiEwO3RyeXtyZXR1cm4gQm9vbGVhbi5wcm90b3R5cGUudmFsdWVPZi5jYWxsKFJlZmxlY3QuY29uc3RydWN0KEJvb2xlYW4sW10sKGZ1bmN0aW9uKCl7fSkpKSwhMH1jYXRjaChlKXtyZXR1cm4hMX19KCk7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIHIsbj12KGUpO2lmKHQpe3ZhciBpPXYodGhpcykuY29uc3RydWN0b3I7cj1SZWZsZWN0LmNvbnN0cnVjdChuLGFyZ3VtZW50cyxpKX1lbHNlIHI9bi5hcHBseSh0aGlzLGFyZ3VtZW50cyk7cmV0dXJuIG0odGhpcyxyKX19dmFyIGplPWZ1bmN0aW9uKGUpe3AocixiKTt2YXIgdD16ZShyKTtmdW5jdGlvbiByKCl7cmV0dXJuIHUodGhpcyxyKSx0LmFwcGx5KHRoaXMsYXJndW1lbnRzKX1yZXR1cm4gaChyLFt7a2V5OiJkZWNvZGVCbG9jayIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIEZlKG5ldyBVaW50OEFycmF5KGUpKS5idWZmZXJ9fV0pLHJ9KCksTmU9T2JqZWN0LmZyZWV6ZSh7X19wcm90b19fOm51bGwsZGVmYXVsdDpqZX0pO2Z1bmN0aW9uIFplKGUpe3ZhciB0PWZ1bmN0aW9uKCl7aWYoInVuZGVmaW5lZCI9PXR5cGVvZiBSZWZsZWN0fHwhUmVmbGVjdC5jb25zdHJ1Y3QpcmV0dXJuITE7aWYoUmVmbGVjdC5jb25zdHJ1Y3Quc2hhbSlyZXR1cm4hMTtpZigiZnVuY3Rpb24iPT10eXBlb2YgUHJveHkpcmV0dXJuITA7dHJ5e3JldHVybiBCb29sZWFuLnByb3RvdHlwZS52YWx1ZU9mLmNhbGwoUmVmbGVjdC5jb25zdHJ1Y3QoQm9vbGVhbixbXSwoZnVuY3Rpb24oKXt9KSkpLCEwfWNhdGNoKGUpe3JldHVybiExfX0oKTtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgcixuPXYoZSk7aWYodCl7dmFyIGk9dih0aGlzKS5jb25zdHJ1Y3RvcjtyPVJlZmxlY3QuY29uc3RydWN0KG4sYXJndW1lbnRzLGkpfWVsc2Ugcj1uLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtyZXR1cm4gbSh0aGlzLHIpfX12YXIgS2UsSGU9ZnVuY3Rpb24oZSl7cChyLGIpO3ZhciB0PVplKHIpO2Z1bmN0aW9uIHIoKXtyZXR1cm4gdSh0aGlzLHIpLHQuYXBwbHkodGhpcyxhcmd1bWVudHMpfXJldHVybiBoKHIsW3trZXk6ImRlY29kZUJsb2NrIix2YWx1ZTpmdW5jdGlvbihlKXtmb3IodmFyIHQ9bmV3IERhdGFWaWV3KGUpLHI9W10sbj0wO248ZS5ieXRlTGVuZ3RoOysrbil7dmFyIGk9dC5nZXRJbnQ4KG4pO2lmKGk8MCl7dmFyIGE9dC5nZXRVaW50OChuKzEpO2k9LWk7Zm9yKHZhciBvPTA7bzw9aTsrK28pci5wdXNoKGEpO24rPTF9ZWxzZXtmb3IodmFyIHM9MDtzPD1pOysrcylyLnB1c2godC5nZXRVaW50OChuK3MrMSkpO24rPWkrMX19cmV0dXJuIG5ldyBVaW50OEFycmF5KHIpLmJ1ZmZlcn19XSkscn0oKSxZZT1PYmplY3QuZnJlZXplKHtfX3Byb3RvX186bnVsbCxkZWZhdWx0OkhlfSksWGU9e2V4cG9ydHM6e319O0tlPVhlLFxuLyogQ29weXJpZ2h0IDIwMTUtMjAyMSBFc3JpLiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wIEBwcmVzZXJ2ZSAqL1xuZnVuY3Rpb24oKXt2YXIgZSx0LHIsbixpLGEsbyxzLGYsbCx1LGMsaCxkLHAsbSx2PShlPXtkZWZhdWx0Tm9EYXRhVmFsdWU6LTM0MDI3OTk5Mzg3OTAxNDg0ZTIyLGRlY29kZTpmdW5jdGlvbihhLG8pe3ZhciBzPShvPW98fHt9KS5lbmNvZGVkTWFza0RhdGF8fG51bGw9PT1vLmVuY29kZWRNYXNrRGF0YSxmPWkoYSxvLmlucHV0T2Zmc2V0fHwwLHMpLGw9bnVsbCE9PW8ubm9EYXRhVmFsdWU/by5ub0RhdGFWYWx1ZTplLmRlZmF1bHROb0RhdGFWYWx1ZSx1PXQoZixvLnBpeGVsVHlwZXx8RmxvYXQzMkFycmF5LG8uZW5jb2RlZE1hc2tEYXRhLGwsby5yZXR1cm5NYXNrKSxjPXt3aWR0aDpmLndpZHRoLGhlaWdodDpmLmhlaWdodCxwaXhlbERhdGE6dS5yZXN1bHRQaXhlbHMsbWluVmFsdWU6dS5taW5WYWx1ZSxtYXhWYWx1ZTpmLnBpeGVscy5tYXhWYWx1ZSxub0RhdGFWYWx1ZTpsfTtyZXR1cm4gdS5yZXN1bHRNYXNrJiYoYy5tYXNrRGF0YT11LnJlc3VsdE1hc2spLG8ucmV0dXJuRW5jb2RlZE1hc2smJmYubWFzayYmKGMuZW5jb2RlZE1hc2tEYXRhPWYubWFzay5iaXRzZXQ/Zi5tYXNrLmJpdHNldDpudWxsKSxvLnJldHVybkZpbGVJbmZvJiYoYy5maWxlSW5mbz1yKGYpLG8uY29tcHV0ZVVzZWRCaXREZXB0aHMmJihjLmZpbGVJbmZvLmJpdERlcHRocz1uKGYpKSksY319LHQ9ZnVuY3Rpb24oZSx0LHIsbixpKXt2YXIgbyxzLGYsbD0wLHU9ZS5waXhlbHMubnVtQmxvY2tzWCxjPWUucGl4ZWxzLm51bUJsb2Nrc1ksaD1NYXRoLmZsb29yKGUud2lkdGgvdSksZD1NYXRoLmZsb29yKGUuaGVpZ2h0L2MpLHA9MiplLm1heFpFcnJvcixtPU51bWJlci5NQVhfVkFMVUU7cj1yfHwoZS5tYXNrP2UubWFzay5iaXRzZXQ6bnVsbCkscz1uZXcgdChlLndpZHRoKmUuaGVpZ2h0KSxpJiZyJiYoZj1uZXcgVWludDhBcnJheShlLndpZHRoKmUuaGVpZ2h0KSk7Zm9yKHZhciB2LHksdz1uZXcgRmxvYXQzMkFycmF5KGgqZCksZz0wO2c8PWM7ZysrKXt2YXIgYj1nIT09Yz9kOmUuaGVpZ2h0JWM7aWYoMCE9PWIpZm9yKHZhciBrPTA7azw9dTtrKyspe3ZhciB4PWshPT11P2g6ZS53aWR0aCV1O2lmKDAhPT14KXt2YXIgXyxBLFAsSSxVPWcqZS53aWR0aCpkK2sqaCxTPWUud2lkdGgteCxUPWUucGl4ZWxzLmJsb2Nrc1tsXTtpZihULmVuY29kaW5nPDI/KDA9PT1ULmVuY29kaW5nP189VC5yYXdEYXRhOihhKFQuc3R1ZmZlZERhdGEsVC5iaXRzUGVyUGl4ZWwsVC5udW1WYWxpZFBpeGVscyxULm9mZnNldCxwLHcsZS5waXhlbHMubWF4VmFsdWUpLF89dyksQT0wKTpQPTI9PT1ULmVuY29kaW5nPzA6VC5vZmZzZXQscilmb3IoeT0wO3k8Yjt5Kyspe2Zvcig3JlUmJihJPXJbVT4+M10sSTw8PTcmVSksdj0wO3Y8eDt2KyspNyZVfHwoST1yW1U+PjNdKSwxMjgmST8oZiYmKGZbVV09MSksbT1tPihvPVQuZW5jb2Rpbmc8Mj9fW0ErK106UCk/bzptLHNbVSsrXT1vKTooZiYmKGZbVV09MCksc1tVKytdPW4pLEk8PD0xO1UrPVN9ZWxzZSBpZihULmVuY29kaW5nPDIpZm9yKHk9MDt5PGI7eSsrKXtmb3Iodj0wO3Y8eDt2KyspbT1tPihvPV9bQSsrXSk/bzptLHNbVSsrXT1vO1UrPVN9ZWxzZSBmb3IobT1tPlA/UDptLHk9MDt5PGI7eSsrKXtmb3Iodj0wO3Y8eDt2Kyspc1tVKytdPVA7VSs9U31pZigxPT09VC5lbmNvZGluZyYmQSE9PVQubnVtVmFsaWRQaXhlbHMpdGhyb3ciQmxvY2sgYW5kIE1hc2sgZG8gbm90IG1hdGNoIjtsKyt9fX1yZXR1cm57cmVzdWx0UGl4ZWxzOnMscmVzdWx0TWFzazpmLG1pblZhbHVlOm19fSxyPWZ1bmN0aW9uKGUpe3JldHVybntmaWxlSWRlbnRpZmllclN0cmluZzplLmZpbGVJZGVudGlmaWVyU3RyaW5nLGZpbGVWZXJzaW9uOmUuZmlsZVZlcnNpb24saW1hZ2VUeXBlOmUuaW1hZ2VUeXBlLGhlaWdodDplLmhlaWdodCx3aWR0aDplLndpZHRoLG1heFpFcnJvcjplLm1heFpFcnJvcixlb2ZPZmZzZXQ6ZS5lb2ZPZmZzZXQsbWFzazplLm1hc2s/e251bUJsb2Nrc1g6ZS5tYXNrLm51bUJsb2Nrc1gsbnVtQmxvY2tzWTplLm1hc2subnVtQmxvY2tzWSxudW1CeXRlczplLm1hc2subnVtQnl0ZXMsbWF4VmFsdWU6ZS5tYXNrLm1heFZhbHVlfTpudWxsLHBpeGVsczp7bnVtQmxvY2tzWDplLnBpeGVscy5udW1CbG9ja3NYLG51bUJsb2Nrc1k6ZS5waXhlbHMubnVtQmxvY2tzWSxudW1CeXRlczplLnBpeGVscy5udW1CeXRlcyxtYXhWYWx1ZTplLnBpeGVscy5tYXhWYWx1ZSxub0RhdGFWYWx1ZTplLm5vRGF0YVZhbHVlfX19LG49ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PWUucGl4ZWxzLm51bUJsb2Nrc1gqZS5waXhlbHMubnVtQmxvY2tzWSxyPXt9LG49MDtuPHQ7bisrKXt2YXIgaT1lLnBpeGVscy5ibG9ja3Nbbl07MD09PWkuZW5jb2Rpbmc/ci5mbG9hdDMyPSEwOjE9PT1pLmVuY29kaW5nP3JbaS5iaXRzUGVyUGl4ZWxdPSEwOnJbMF09ITB9cmV0dXJuIE9iamVjdC5rZXlzKHIpfSxpPWZ1bmN0aW9uKGUsdCxyKXt2YXIgbj17fSxpPW5ldyBVaW50OEFycmF5KGUsdCwxMCk7aWYobi5maWxlSWRlbnRpZmllclN0cmluZz1TdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KG51bGwsaSksIkNudFpJbWFnZSIhPT1uLmZpbGVJZGVudGlmaWVyU3RyaW5nLnRyaW0oKSl0aHJvdyJVbmV4cGVjdGVkIGZpbGUgaWRlbnRpZmllciBzdHJpbmc6ICIrbi5maWxlSWRlbnRpZmllclN0cmluZzt0Kz0xMDt2YXIgYT1uZXcgRGF0YVZpZXcoZSx0LDI0KTtpZihuLmZpbGVWZXJzaW9uPWEuZ2V0SW50MzIoMCwhMCksbi5pbWFnZVR5cGU9YS5nZXRJbnQzMig0LCEwKSxuLmhlaWdodD1hLmdldFVpbnQzMig4LCEwKSxuLndpZHRoPWEuZ2V0VWludDMyKDEyLCEwKSxuLm1heFpFcnJvcj1hLmdldEZsb2F0NjQoMTYsITApLHQrPTI0LCFyKWlmKGE9bmV3IERhdGFWaWV3KGUsdCwxNiksbi5tYXNrPXt9LG4ubWFzay5udW1CbG9ja3NZPWEuZ2V0VWludDMyKDAsITApLG4ubWFzay5udW1CbG9ja3NYPWEuZ2V0VWludDMyKDQsITApLG4ubWFzay5udW1CeXRlcz1hLmdldFVpbnQzMig4LCEwKSxuLm1hc2subWF4VmFsdWU9YS5nZXRGbG9hdDMyKDEyLCEwKSx0Kz0xNixuLm1hc2subnVtQnl0ZXM+MCl7dmFyIG89bmV3IFVpbnQ4QXJyYXkoTWF0aC5jZWlsKG4ud2lkdGgqbi5oZWlnaHQvOCkpLHM9KGE9bmV3IERhdGFWaWV3KGUsdCxuLm1hc2subnVtQnl0ZXMpKS5nZXRJbnQxNigwLCEwKSxmPTIsbD0wO2Rve2lmKHM+MClmb3IoO3MtLTspb1tsKytdPWEuZ2V0VWludDgoZisrKTtlbHNle3ZhciB1PWEuZ2V0VWludDgoZisrKTtmb3Iocz0tcztzLS07KW9bbCsrXT11fXM9YS5nZXRJbnQxNihmLCEwKSxmKz0yfXdoaWxlKGY8bi5tYXNrLm51bUJ5dGVzKTtpZigtMzI3NjghPT1zfHxsPG8ubGVuZ3RoKXRocm93IlVuZXhwZWN0ZWQgZW5kIG9mIG1hc2sgUkxFIGVuY29kaW5nIjtuLm1hc2suYml0c2V0PW8sdCs9bi5tYXNrLm51bUJ5dGVzfWVsc2UgMD09KG4ubWFzay5udW1CeXRlc3xuLm1hc2subnVtQmxvY2tzWXxuLm1hc2subWF4VmFsdWUpJiYobi5tYXNrLmJpdHNldD1uZXcgVWludDhBcnJheShNYXRoLmNlaWwobi53aWR0aCpuLmhlaWdodC84KSkpO2E9bmV3IERhdGFWaWV3KGUsdCwxNiksbi5waXhlbHM9e30sbi5waXhlbHMubnVtQmxvY2tzWT1hLmdldFVpbnQzMigwLCEwKSxuLnBpeGVscy5udW1CbG9ja3NYPWEuZ2V0VWludDMyKDQsITApLG4ucGl4ZWxzLm51bUJ5dGVzPWEuZ2V0VWludDMyKDgsITApLG4ucGl4ZWxzLm1heFZhbHVlPWEuZ2V0RmxvYXQzMigxMiwhMCksdCs9MTY7dmFyIGM9bi5waXhlbHMubnVtQmxvY2tzWCxoPW4ucGl4ZWxzLm51bUJsb2Nrc1ksZD1jKyhuLndpZHRoJWM+MD8xOjApLHA9aCsobi5oZWlnaHQlaD4wPzE6MCk7bi5waXhlbHMuYmxvY2tzPW5ldyBBcnJheShkKnApO2Zvcih2YXIgbT0wLHY9MDt2PHA7disrKWZvcih2YXIgeT0wO3k8ZDt5Kyspe3ZhciB3PTAsZz1lLmJ5dGVMZW5ndGgtdDthPW5ldyBEYXRhVmlldyhlLHQsTWF0aC5taW4oMTAsZykpO3ZhciBiPXt9O24ucGl4ZWxzLmJsb2Nrc1ttKytdPWI7dmFyIGs9YS5nZXRVaW50OCgwKTtpZih3KyssYi5lbmNvZGluZz02MyZrLGIuZW5jb2Rpbmc+Myl0aHJvdyJJbnZhbGlkIGJsb2NrIGVuY29kaW5nICgiK2IuZW5jb2RpbmcrIikiO2lmKDIhPT1iLmVuY29kaW5nKXtpZigwIT09ayYmMiE9PWspe2lmKGs+Pj02LGIub2Zmc2V0VHlwZT1rLDI9PT1rKWIub2Zmc2V0PWEuZ2V0SW50OCgxKSx3Kys7ZWxzZSBpZigxPT09ayliLm9mZnNldD1hLmdldEludDE2KDEsITApLHcrPTI7ZWxzZXtpZigwIT09ayl0aHJvdyJJbnZhbGlkIGJsb2NrIG9mZnNldCB0eXBlIjtiLm9mZnNldD1hLmdldEZsb2F0MzIoMSwhMCksdys9NH1pZigxPT09Yi5lbmNvZGluZylpZihrPWEuZ2V0VWludDgodyksdysrLGIuYml0c1BlclBpeGVsPTYzJmssaz4+PTYsYi5udW1WYWxpZFBpeGVsc1R5cGU9aywyPT09ayliLm51bVZhbGlkUGl4ZWxzPWEuZ2V0VWludDgodyksdysrO2Vsc2UgaWYoMT09PWspYi5udW1WYWxpZFBpeGVscz1hLmdldFVpbnQxNih3LCEwKSx3Kz0yO2Vsc2V7aWYoMCE9PWspdGhyb3ciSW52YWxpZCB2YWxpZCBwaXhlbCBjb3VudCB0eXBlIjtiLm51bVZhbGlkUGl4ZWxzPWEuZ2V0VWludDMyKHcsITApLHcrPTR9fXZhciB4O2lmKHQrPXcsMyE9PWIuZW5jb2RpbmcpaWYoMD09PWIuZW5jb2Rpbmcpe3ZhciBfPShuLnBpeGVscy5udW1CeXRlcy0xKS80O2lmKF8hPT1NYXRoLmZsb29yKF8pKXRocm93InVuY29tcHJlc3NlZCBibG9jayBoYXMgaW52YWxpZCBsZW5ndGgiO3g9bmV3IEFycmF5QnVmZmVyKDQqXyksbmV3IFVpbnQ4QXJyYXkoeCkuc2V0KG5ldyBVaW50OEFycmF5KGUsdCw0Kl8pKTt2YXIgQT1uZXcgRmxvYXQzMkFycmF5KHgpO2IucmF3RGF0YT1BLHQrPTQqX31lbHNlIGlmKDE9PT1iLmVuY29kaW5nKXt2YXIgUD1NYXRoLmNlaWwoYi5udW1WYWxpZFBpeGVscypiLmJpdHNQZXJQaXhlbC84KSxJPU1hdGguY2VpbChQLzQpO3g9bmV3IEFycmF5QnVmZmVyKDQqSSksbmV3IFVpbnQ4QXJyYXkoeCkuc2V0KG5ldyBVaW50OEFycmF5KGUsdCxQKSksYi5zdHVmZmVkRGF0YT1uZXcgVWludDMyQXJyYXkoeCksdCs9UH19ZWxzZSB0Kyt9cmV0dXJuIG4uZW9mT2Zmc2V0PXQsbn0sYT1mdW5jdGlvbihlLHQscixuLGksYSxvKXt2YXIgcyxmLGwsdT0oMTw8dCktMSxjPTAsaD0wLGQ9TWF0aC5jZWlsKChvLW4pL2kpLHA9NCplLmxlbmd0aC1NYXRoLmNlaWwodCpyLzgpO2ZvcihlW2UubGVuZ3RoLTFdPDw9OCpwLHM9MDtzPHI7cysrKXtpZigwPT09aCYmKGw9ZVtjKytdLGg9MzIpLGg+PXQpZj1sPj4+aC10JnUsaC09dDtlbHNle3ZhciBtPXQtaDtmPShsJnUpPDxtJnUsZis9KGw9ZVtjKytdKT4+PihoPTMyLW0pfWFbc109ZjxkP24rZippOm99cmV0dXJuIGF9LGUpLHk9KG89ZnVuY3Rpb24oZSx0LHIsbixpLGEsbyxzKXt2YXIgZixsLHUsYyxoLGQ9KDE8PHIpLTEscD0wLG09MCx2PTQqZS5sZW5ndGgtTWF0aC5jZWlsKHIqbi84KTtpZihlW2UubGVuZ3RoLTFdPDw9OCp2LGkpZm9yKGY9MDtmPG47ZisrKTA9PT1tJiYodT1lW3ArK10sbT0zMiksbT49cj8obD11Pj4+bS1yJmQsbS09cik6KGw9KHUmZCk8PChjPXItbSkmZCxsKz0odT1lW3ArK10pPj4+KG09MzItYykpLHRbZl09aVtsXTtlbHNlIGZvcihoPU1hdGguY2VpbCgocy1hKS9vKSxmPTA7ZjxuO2YrKykwPT09bSYmKHU9ZVtwKytdLG09MzIpLG0+PXI/KGw9dT4+Pm0tciZkLG0tPXIpOihsPSh1JmQpPDwoYz1yLW0pJmQsbCs9KHU9ZVtwKytdKT4+PihtPTMyLWMpKSx0W2ZdPWw8aD9hK2wqbzpzfSxzPWZ1bmN0aW9uKGUsdCxyLG4saSxhKXt2YXIgbyxzPSgxPDx0KS0xLGY9MCxsPTAsdT0wLGM9MCxoPTAsZD1bXSxwPTQqZS5sZW5ndGgtTWF0aC5jZWlsKHQqci84KTtlW2UubGVuZ3RoLTFdPDw9OCpwO3ZhciBtPU1hdGguY2VpbCgoYS1uKS9pKTtmb3IobD0wO2w8cjtsKyspMD09PWMmJihvPWVbZisrXSxjPTMyKSxjPj10PyhoPW8+Pj5jLXQmcyxjLT10KTooaD0obyZzKTw8KHU9dC1jKSZzLGgrPShvPWVbZisrXSk+Pj4oYz0zMi11KSksZFtsXT1oPG0/bitoKmk6YTtyZXR1cm4gZC51bnNoaWZ0KG4pLGR9LGY9ZnVuY3Rpb24oZSx0LHIsbixpLGEsbyxzKXt2YXIgZixsLHUsYyxoPSgxPDxyKS0xLGQ9MCxwPTAsbT0wO2lmKGkpZm9yKGY9MDtmPG47ZisrKTA9PT1wJiYodT1lW2QrK10scD0zMixtPTApLHA+PXI/KGw9dT4+Pm0maCxwLT1yLG0rPXIpOihsPXU+Pj5tJmgscD0zMi0oYz1yLXApLGx8PSgodT1lW2QrK10pJigxPDxjKS0xKTw8ci1jLG09YyksdFtmXT1pW2xdO2Vsc2V7dmFyIHY9TWF0aC5jZWlsKChzLWEpL28pO2ZvcihmPTA7ZjxuO2YrKykwPT09cCYmKHU9ZVtkKytdLHA9MzIsbT0wKSxwPj1yPyhsPXU+Pj5tJmgscC09cixtKz1yKToobD11Pj4+bSZoLHA9MzItKGM9ci1wKSxsfD0oKHU9ZVtkKytdKSYoMTw8YyktMSk8PHItYyxtPWMpLHRbZl09bDx2P2ErbCpvOnN9cmV0dXJuIHR9LGw9ZnVuY3Rpb24oZSx0LHIsbixpLGEpe3ZhciBvLHM9KDE8PHQpLTEsZj0wLGw9MCx1PTAsYz0wLGg9MCxkPTAscD1bXSxtPU1hdGguY2VpbCgoYS1uKS9pKTtmb3IobD0wO2w8cjtsKyspMD09PWMmJihvPWVbZisrXSxjPTMyLGQ9MCksYz49dD8oaD1vPj4+ZCZzLGMtPXQsZCs9dCk6KGg9bz4+PmQmcyxjPTMyLSh1PXQtYyksaHw9KChvPWVbZisrXSkmKDE8PHUpLTEpPDx0LXUsZD11KSxwW2xdPWg8bT9uK2gqaTphO3JldHVybiBwLnVuc2hpZnQobikscH0sdT1mdW5jdGlvbihlLHQscixuKXt2YXIgaSxhLG8scyxmPSgxPDxyKS0xLGw9MCx1PTAsYz00KmUubGVuZ3RoLU1hdGguY2VpbChyKm4vOCk7Zm9yKGVbZS5sZW5ndGgtMV08PD04KmMsaT0wO2k8bjtpKyspMD09PXUmJihvPWVbbCsrXSx1PTMyKSx1Pj1yPyhhPW8+Pj51LXImZix1LT1yKTooYT0obyZmKTw8KHM9ci11KSZmLGErPShvPWVbbCsrXSk+Pj4odT0zMi1zKSksdFtpXT1hO3JldHVybiB0fSxjPWZ1bmN0aW9uKGUsdCxyLG4pe3ZhciBpLGEsbyxzLGY9KDE8PHIpLTEsbD0wLHU9MCxjPTA7Zm9yKGk9MDtpPG47aSsrKTA9PT11JiYobz1lW2wrK10sdT0zMixjPTApLHU+PXI/KGE9bz4+PmMmZix1LT1yLGMrPXIpOihhPW8+Pj5jJmYsdT0zMi0ocz1yLXUpLGF8PSgobz1lW2wrK10pJigxPDxzKS0xKTw8ci1zLGM9cyksdFtpXT1hO3JldHVybiB0fSxoPXtIVUZGTUFOX0xVVF9CSVRTX01BWDoxMixjb21wdXRlQ2hlY2tzdW1GbGV0Y2hlcjMyOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdD02NTUzNSxyPTY1NTM1LG49ZS5sZW5ndGgsaT1NYXRoLmZsb29yKG4vMiksYT0wO2k7KXt2YXIgbz1pPj0zNTk/MzU5Omk7aS09bztkb3t0Kz1lW2ErK108PDgscis9dCs9ZVthKytdfXdoaWxlKC0tbyk7dD0oNjU1MzUmdCkrKHQ+Pj4xNikscj0oNjU1MzUmcikrKHI+Pj4xNil9cmV0dXJuIDEmbiYmKHIrPXQrPWVbYV08PDgpLCgocj0oNjU1MzUmcikrKHI+Pj4xNikpPDwxNnwodD0oNjU1MzUmdCkrKHQ+Pj4xNikpKT4+PjB9LHJlYWRIZWFkZXJJbmZvOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dC5wdHIsbj1uZXcgVWludDhBcnJheShlLHIsNiksaT17fTtpZihpLmZpbGVJZGVudGlmaWVyU3RyaW5nPVN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkobnVsbCxuKSwwIT09aS5maWxlSWRlbnRpZmllclN0cmluZy5sYXN0SW5kZXhPZigiTGVyYzIiLDApKXRocm93IlVuZXhwZWN0ZWQgZmlsZSBpZGVudGlmaWVyIHN0cmluZyAoZXhwZWN0IExlcmMyICk6ICIraS5maWxlSWRlbnRpZmllclN0cmluZztyKz02O3ZhciBhLG89bmV3IERhdGFWaWV3KGUsciw4KSxzPW8uZ2V0SW50MzIoMCwhMCk7aWYoaS5maWxlVmVyc2lvbj1zLHIrPTQscz49MyYmKGkuY2hlY2tzdW09by5nZXRVaW50MzIoNCwhMCkscis9NCksbz1uZXcgRGF0YVZpZXcoZSxyLDEyKSxpLmhlaWdodD1vLmdldFVpbnQzMigwLCEwKSxpLndpZHRoPW8uZ2V0VWludDMyKDQsITApLHIrPTgscz49ND8oaS5udW1EaW1zPW8uZ2V0VWludDMyKDgsITApLHIrPTQpOmkubnVtRGltcz0xLG89bmV3IERhdGFWaWV3KGUsciw0MCksaS5udW1WYWxpZFBpeGVsPW8uZ2V0VWludDMyKDAsITApLGkubWljcm9CbG9ja1NpemU9by5nZXRJbnQzMig0LCEwKSxpLmJsb2JTaXplPW8uZ2V0SW50MzIoOCwhMCksaS5pbWFnZVR5cGU9by5nZXRJbnQzMigxMiwhMCksaS5tYXhaRXJyb3I9by5nZXRGbG9hdDY0KDE2LCEwKSxpLnpNaW49by5nZXRGbG9hdDY0KDI0LCEwKSxpLnpNYXg9by5nZXRGbG9hdDY0KDMyLCEwKSxyKz00MCx0LmhlYWRlckluZm89aSx0LnB0cj1yLHM+PTMmJihhPXM+PTQ/NTI6NDgsdGhpcy5jb21wdXRlQ2hlY2tzdW1GbGV0Y2hlcjMyKG5ldyBVaW50OEFycmF5KGUsci1hLGkuYmxvYlNpemUtMTQpKSE9PWkuY2hlY2tzdW0pKXRocm93IkNoZWNrc3VtIGZhaWxlZC4iO3JldHVybiEwfSxjaGVja01pbk1heFJhbmdlczpmdW5jdGlvbihlLHQpe3ZhciByPXQuaGVhZGVySW5mbyxuPXRoaXMuZ2V0RGF0YVR5cGVBcnJheShyLmltYWdlVHlwZSksaT1yLm51bURpbXMqdGhpcy5nZXREYXRhVHlwZVNpemUoci5pbWFnZVR5cGUpLGE9dGhpcy5yZWFkU3ViQXJyYXkoZSx0LnB0cixuLGkpLG89dGhpcy5yZWFkU3ViQXJyYXkoZSx0LnB0citpLG4saSk7dC5wdHIrPTIqaTt2YXIgcyxmPSEwO2ZvcihzPTA7czxyLm51bURpbXM7cysrKWlmKGFbc10hPT1vW3NdKXtmPSExO2JyZWFrfXJldHVybiByLm1pblZhbHVlcz1hLHIubWF4VmFsdWVzPW8sZn0scmVhZFN1YkFycmF5OmZ1bmN0aW9uKGUsdCxyLG4pe3ZhciBpO2lmKHI9PT1VaW50OEFycmF5KWk9bmV3IFVpbnQ4QXJyYXkoZSx0LG4pO2Vsc2V7dmFyIGE9bmV3IEFycmF5QnVmZmVyKG4pO25ldyBVaW50OEFycmF5KGEpLnNldChuZXcgVWludDhBcnJheShlLHQsbikpLGk9bmV3IHIoYSl9cmV0dXJuIGl9LHJlYWRNYXNrOmZ1bmN0aW9uKGUsdCl7dmFyIHIsbixpPXQucHRyLGE9dC5oZWFkZXJJbmZvLG89YS53aWR0aCphLmhlaWdodCxzPWEubnVtVmFsaWRQaXhlbCxmPW5ldyBEYXRhVmlldyhlLGksNCksbD17fTtpZihsLm51bUJ5dGVzPWYuZ2V0VWludDMyKDAsITApLGkrPTQsKDA9PT1zfHxvPT09cykmJjAhPT1sLm51bUJ5dGVzKXRocm93ImludmFsaWQgbWFzayI7aWYoMD09PXMpcj1uZXcgVWludDhBcnJheShNYXRoLmNlaWwoby84KSksbC5iaXRzZXQ9cixuPW5ldyBVaW50OEFycmF5KG8pLHQucGl4ZWxzLnJlc3VsdE1hc2s9bixpKz1sLm51bUJ5dGVzO2Vsc2UgaWYobC5udW1CeXRlcz4wKXtyPW5ldyBVaW50OEFycmF5KE1hdGguY2VpbChvLzgpKTt2YXIgdT0oZj1uZXcgRGF0YVZpZXcoZSxpLGwubnVtQnl0ZXMpKS5nZXRJbnQxNigwLCEwKSxjPTIsaD0wLGQ9MDtkb3tpZih1PjApZm9yKDt1LS07KXJbaCsrXT1mLmdldFVpbnQ4KGMrKyk7ZWxzZSBmb3IoZD1mLmdldFVpbnQ4KGMrKyksdT0tdTt1LS07KXJbaCsrXT1kO3U9Zi5nZXRJbnQxNihjLCEwKSxjKz0yfXdoaWxlKGM8bC5udW1CeXRlcyk7aWYoLTMyNzY4IT09dXx8aDxyLmxlbmd0aCl0aHJvdyJVbmV4cGVjdGVkIGVuZCBvZiBtYXNrIFJMRSBlbmNvZGluZyI7bj1uZXcgVWludDhBcnJheShvKTt2YXIgcD0wLG09MDtmb3IobT0wO208bzttKyspNyZtPyhwPXJbbT4+M10scDw8PTcmbSk6cD1yW20+PjNdLDEyOCZwJiYoblttXT0xKTt0LnBpeGVscy5yZXN1bHRNYXNrPW4sbC5iaXRzZXQ9cixpKz1sLm51bUJ5dGVzfXJldHVybiB0LnB0cj1pLHQubWFzaz1sLCEwfSxyZWFkRGF0YU9uZVN3ZWVwOmZ1bmN0aW9uKGUsdCxyLG4pe3ZhciBpLGE9dC5wdHIsbz10LmhlYWRlckluZm8scz1vLm51bURpbXMsZj1vLndpZHRoKm8uaGVpZ2h0LGw9by5pbWFnZVR5cGUsdT1vLm51bVZhbGlkUGl4ZWwqaC5nZXREYXRhVHlwZVNpemUobCkqcyxjPXQucGl4ZWxzLnJlc3VsdE1hc2s7aWYocj09PVVpbnQ4QXJyYXkpaT1uZXcgVWludDhBcnJheShlLGEsdSk7ZWxzZXt2YXIgZD1uZXcgQXJyYXlCdWZmZXIodSk7bmV3IFVpbnQ4QXJyYXkoZCkuc2V0KG5ldyBVaW50OEFycmF5KGUsYSx1KSksaT1uZXcgcihkKX1pZihpLmxlbmd0aD09PWYqcyl0LnBpeGVscy5yZXN1bHRQaXhlbHM9bj9oLnN3YXBEaW1lbnNpb25PcmRlcihpLGYscyxyLCEwKTppO2Vsc2V7dC5waXhlbHMucmVzdWx0UGl4ZWxzPW5ldyByKGYqcyk7dmFyIHA9MCxtPTAsdj0wLHk9MDtpZihzPjEpe2lmKG4pe2ZvcihtPTA7bTxmO20rKylpZihjW21dKWZvcih5PW0sdj0wO3Y8czt2KysseSs9Zil0LnBpeGVscy5yZXN1bHRQaXhlbHNbeV09aVtwKytdfWVsc2UgZm9yKG09MDttPGY7bSsrKWlmKGNbbV0pZm9yKHk9bSpzLHY9MDt2PHM7disrKXQucGl4ZWxzLnJlc3VsdFBpeGVsc1t5K3ZdPWlbcCsrXX1lbHNlIGZvcihtPTA7bTxmO20rKyljW21dJiYodC5waXhlbHMucmVzdWx0UGl4ZWxzW21dPWlbcCsrXSl9cmV0dXJuIGErPXUsdC5wdHI9YSwhMH0scmVhZEh1ZmZtYW5UcmVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcy5IVUZGTUFOX0xVVF9CSVRTX01BWCxuPW5ldyBEYXRhVmlldyhlLHQucHRyLDE2KTtpZih0LnB0cis9MTYsbi5nZXRJbnQzMigwLCEwKTwyKXRocm93InVuc3VwcG9ydGVkIEh1ZmZtYW4gdmVyc2lvbiI7dmFyIGk9bi5nZXRJbnQzMig0LCEwKSxhPW4uZ2V0SW50MzIoOCwhMCksbz1uLmdldEludDMyKDEyLCEwKTtpZihhPj1vKXJldHVybiExO3ZhciBzPW5ldyBVaW50MzJBcnJheShvLWEpO2guZGVjb2RlQml0cyhlLHQscyk7dmFyIGYsbCx1LGMscD1bXTtmb3IoZj1hO2Y8bztmKyspcFtsPWYtKGY8aT8wOmkpXT17Zmlyc3Q6c1tmLWFdLHNlY29uZDpudWxsfTt2YXIgbT1lLmJ5dGVMZW5ndGgtdC5wdHIsdj1NYXRoLmNlaWwobS80KSx5PW5ldyBBcnJheUJ1ZmZlcig0KnYpO25ldyBVaW50OEFycmF5KHkpLnNldChuZXcgVWludDhBcnJheShlLHQucHRyLG0pKTt2YXIgdyxnPW5ldyBVaW50MzJBcnJheSh5KSxiPTAsaz0wO2Zvcih3PWdbMF0sZj1hO2Y8bztmKyspKGM9cFtsPWYtKGY8aT8wOmkpXS5maXJzdCk+MCYmKHBbbF0uc2Vjb25kPXc8PGI+Pj4zMi1jLDMyLWI+PWM/MzI9PT0oYis9YykmJihiPTAsdz1nWysra10pOihiKz1jLTMyLHc9Z1srK2tdLHBbbF0uc2Vjb25kfD13Pj4+MzItYikpO3ZhciB4PTAsXz0wLEE9bmV3IGQ7Zm9yKGY9MDtmPHAubGVuZ3RoO2YrKyl2b2lkIDAhPT1wW2ZdJiYoeD1NYXRoLm1heCh4LHBbZl0uZmlyc3QpKTtfPXg+PXI/cjp4O3ZhciBQLEksVSxTLFQsRD1bXTtmb3IoZj1hO2Y8bztmKyspaWYoKGM9cFtsPWYtKGY8aT8wOmkpXS5maXJzdCk+MClpZihQPVtjLGxdLGM8PV8pZm9yKEk9cFtsXS5zZWNvbmQ8PF8tYyxVPTE8PF8tYyx1PTA7dTxVO3UrKylEW0l8dV09UDtlbHNlIGZvcihJPXBbbF0uc2Vjb25kLFQ9QSxTPWMtMTtTPj0wO1MtLSlJPj4+UyYxPyhULnJpZ2h0fHwoVC5yaWdodD1uZXcgZCksVD1ULnJpZ2h0KTooVC5sZWZ0fHwoVC5sZWZ0PW5ldyBkKSxUPVQubGVmdCksMCE9PVN8fFQudmFsfHwoVC52YWw9UFsxXSk7cmV0dXJue2RlY29kZUx1dDpELG51bUJpdHNMVVRRaWNrOl8sbnVtQml0c0xVVDp4LHRyZWU6QSxzdHVmZmVkRGF0YTpnLHNyY1B0cjprLGJpdFBvczpifX0scmVhZEh1ZmZtYW46ZnVuY3Rpb24oZSx0LHIsbil7dmFyIGksYSxvLHMsZixsLHUsYyxkLHA9dC5oZWFkZXJJbmZvLm51bURpbXMsbT10LmhlYWRlckluZm8uaGVpZ2h0LHY9dC5oZWFkZXJJbmZvLndpZHRoLHk9diptLHc9dGhpcy5yZWFkSHVmZm1hblRyZWUoZSx0KSxnPXcuZGVjb2RlTHV0LGI9dy50cmVlLGs9dy5zdHVmZmVkRGF0YSx4PXcuc3JjUHRyLF89dy5iaXRQb3MsQT13Lm51bUJpdHNMVVRRaWNrLFA9dy5udW1CaXRzTFVULEk9MD09PXQuaGVhZGVySW5mby5pbWFnZVR5cGU/MTI4OjAsVT10LnBpeGVscy5yZXN1bHRNYXNrLFM9MDtfPjAmJih4KyssXz0wKTt2YXIgVCxEPWtbeF0sRT0xPT09dC5lbmNvZGVNb2RlLEI9bmV3IHIoeSpwKSxPPUI7aWYocDwyfHxFKXtmb3IoVD0wO1Q8cDtUKyspaWYocD4xJiYoTz1uZXcgcihCLmJ1ZmZlcix5KlQseSksUz0wKSx0LmhlYWRlckluZm8ubnVtVmFsaWRQaXhlbD09PXYqbSlmb3IoYz0wLGw9MDtsPG07bCsrKWZvcih1PTA7dTx2O3UrKyxjKyspe2lmKGE9MCxmPXM9RDw8Xz4+PjMyLUEsMzItXzxBJiYoZj1zfD1rW3grMV0+Pj42NC1fLUEpLGdbZl0pYT1nW2ZdWzFdLF8rPWdbZl1bMF07ZWxzZSBmb3IoZj1zPUQ8PF8+Pj4zMi1QLDMyLV88UCYmKGY9c3w9a1t4KzFdPj4+NjQtXy1QKSxpPWIsZD0wO2Q8UDtkKyspaWYoIShpPXM+Pj5QLWQtMSYxP2kucmlnaHQ6aS5sZWZ0KS5sZWZ0JiYhaS5yaWdodCl7YT1pLnZhbCxfPV8rZCsxO2JyZWFrfV8+PTMyJiYoXy09MzIsRD1rWysreF0pLG89YS1JLEU/KG8rPXU+MD9TOmw+MD9PW2Mtdl06UyxvJj0yNTUsT1tjXT1vLFM9byk6T1tjXT1vfWVsc2UgZm9yKGM9MCxsPTA7bDxtO2wrKylmb3IodT0wO3U8djt1KyssYysrKWlmKFVbY10pe2lmKGE9MCxmPXM9RDw8Xz4+PjMyLUEsMzItXzxBJiYoZj1zfD1rW3grMV0+Pj42NC1fLUEpLGdbZl0pYT1nW2ZdWzFdLF8rPWdbZl1bMF07ZWxzZSBmb3IoZj1zPUQ8PF8+Pj4zMi1QLDMyLV88UCYmKGY9c3w9a1t4KzFdPj4+NjQtXy1QKSxpPWIsZD0wO2Q8UDtkKyspaWYoIShpPXM+Pj5QLWQtMSYxP2kucmlnaHQ6aS5sZWZ0KS5sZWZ0JiYhaS5yaWdodCl7YT1pLnZhbCxfPV8rZCsxO2JyZWFrfV8+PTMyJiYoXy09MzIsRD1rWysreF0pLG89YS1JLEU/KHU+MCYmVVtjLTFdP28rPVM6bD4wJiZVW2Mtdl0/bys9T1tjLXZdOm8rPVMsbyY9MjU1LE9bY109byxTPW8pOk9bY109b319ZWxzZSBmb3IoYz0wLGw9MDtsPG07bCsrKWZvcih1PTA7dTx2O3UrKylpZihjPWwqdit1LCFVfHxVW2NdKWZvcihUPTA7VDxwO1QrKyxjKz15KXtpZihhPTAsZj1zPUQ8PF8+Pj4zMi1BLDMyLV88QSYmKGY9c3w9a1t4KzFdPj4+NjQtXy1BKSxnW2ZdKWE9Z1tmXVsxXSxfKz1nW2ZdWzBdO2Vsc2UgZm9yKGY9cz1EPDxfPj4+MzItUCwzMi1fPFAmJihmPXN8PWtbeCsxXT4+PjY0LV8tUCksaT1iLGQ9MDtkPFA7ZCsrKWlmKCEoaT1zPj4+UC1kLTEmMT9pLnJpZ2h0OmkubGVmdCkubGVmdCYmIWkucmlnaHQpe2E9aS52YWwsXz1fK2QrMTticmVha31fPj0zMiYmKF8tPTMyLEQ9a1srK3hdKSxvPWEtSSxPW2NdPW99dC5wdHI9dC5wdHIrNCooeCsxKSsoXz4wPzQ6MCksdC5waXhlbHMucmVzdWx0UGl4ZWxzPUIscD4xJiYhbiYmKHQucGl4ZWxzLnJlc3VsdFBpeGVscz1oLnN3YXBEaW1lbnNpb25PcmRlcihCLHkscCxyKSl9LGRlY29kZUJpdHM6ZnVuY3Rpb24oZSx0LHIsbixpKXt2YXIgYT10LmhlYWRlckluZm8saD1hLmZpbGVWZXJzaW9uLGQ9MCxwPWUuYnl0ZUxlbmd0aC10LnB0cj49NT81OmUuYnl0ZUxlbmd0aC10LnB0cixtPW5ldyBEYXRhVmlldyhlLHQucHRyLHApLHY9bS5nZXRVaW50OCgwKTtkKys7dmFyIHk9dj4+Nix3PTA9PT15PzQ6My15LGc9KDMyJnYpPjAsYj0zMSZ2LGs9MDtpZigxPT09dylrPW0uZ2V0VWludDgoZCksZCsrO2Vsc2UgaWYoMj09PXcpaz1tLmdldFVpbnQxNihkLCEwKSxkKz0yO2Vsc2V7aWYoNCE9PXcpdGhyb3ciSW52YWxpZCB2YWxpZCBwaXhlbCBjb3VudCB0eXBlIjtrPW0uZ2V0VWludDMyKGQsITApLGQrPTR9dmFyIHgsXyxBLFAsSSxVLFMsVCxELEU9MiphLm1heFpFcnJvcixCPWEubnVtRGltcz4xP2EubWF4VmFsdWVzW2ldOmEuek1heDtpZihnKXtmb3IodC5jb3VudGVyLmx1dCsrLFQ9bS5nZXRVaW50OChkKSxkKyssUD1NYXRoLmNlaWwoKFQtMSkqYi84KSxJPU1hdGguY2VpbChQLzQpLF89bmV3IEFycmF5QnVmZmVyKDQqSSksQT1uZXcgVWludDhBcnJheShfKSx0LnB0cis9ZCxBLnNldChuZXcgVWludDhBcnJheShlLHQucHRyLFApKSxTPW5ldyBVaW50MzJBcnJheShfKSx0LnB0cis9UCxEPTA7VC0xPj4+RDspRCsrO1A9TWF0aC5jZWlsKGsqRC84KSxJPU1hdGguY2VpbChQLzQpLF89bmV3IEFycmF5QnVmZmVyKDQqSSksKEE9bmV3IFVpbnQ4QXJyYXkoXykpLnNldChuZXcgVWludDhBcnJheShlLHQucHRyLFApKSx4PW5ldyBVaW50MzJBcnJheShfKSx0LnB0cis9UCxVPWg+PTM/bChTLGIsVC0xLG4sRSxCKTpzKFMsYixULTEsbixFLEIpLGg+PTM/Zih4LHIsRCxrLFUpOm8oeCxyLEQsayxVKX1lbHNlIHQuY291bnRlci5iaXRzdHVmZmVyKyssRD1iLHQucHRyKz1kLEQ+MCYmKFA9TWF0aC5jZWlsKGsqRC84KSxJPU1hdGguY2VpbChQLzQpLF89bmV3IEFycmF5QnVmZmVyKDQqSSksKEE9bmV3IFVpbnQ4QXJyYXkoXykpLnNldChuZXcgVWludDhBcnJheShlLHQucHRyLFApKSx4PW5ldyBVaW50MzJBcnJheShfKSx0LnB0cis9UCxoPj0zP251bGw9PW4/Yyh4LHIsRCxrKTpmKHgscixELGssITEsbixFLEIpOm51bGw9PW4/dSh4LHIsRCxrKTpvKHgscixELGssITEsbixFLEIpKX0scmVhZFRpbGVzOmZ1bmN0aW9uKGUsdCxyLG4pe3ZhciBpPXQuaGVhZGVySW5mbyxhPWkud2lkdGgsbz1pLmhlaWdodCxzPWEqbyxmPWkubWljcm9CbG9ja1NpemUsbD1pLmltYWdlVHlwZSx1PWguZ2V0RGF0YVR5cGVTaXplKGwpLGM9TWF0aC5jZWlsKGEvZiksZD1NYXRoLmNlaWwoby9mKTt0LnBpeGVscy5udW1CbG9ja3NZPWQsdC5waXhlbHMubnVtQmxvY2tzWD1jLHQucGl4ZWxzLnB0cj0wO3ZhciBwLG0sdix5LHcsZyxiLGsseCxfLEE9MCxQPTAsST0wLFU9MCxTPTAsVD0wLEQ9MCxFPTAsQj0wLE89MCxNPTAsQz0wLEw9MCxSPTAsVj0wLEc9bmV3IHIoZipmKSxGPW8lZnx8Zix6PWElZnx8ZixqPWkubnVtRGltcyxOPXQucGl4ZWxzLnJlc3VsdE1hc2ssWj10LnBpeGVscy5yZXN1bHRQaXhlbHMsSz1pLmZpbGVWZXJzaW9uPj01PzE0OjE1LEg9aS56TWF4O2ZvcihJPTA7STxkO0krKylmb3IoUz1JIT09ZC0xP2Y6RixVPTA7VTxjO1UrKylmb3IoTz1JKmEqZitVKmYsTT1hLShUPVUhPT1jLTE/Zjp6KSxrPTA7azxqO2srKyl7aWYoaj4xPyhfPVosTz1JKmEqZitVKmYsWj1uZXcgcih0LnBpeGVscy5yZXN1bHRQaXhlbHMuYnVmZmVyLHMqayp1LHMpLEg9aS5tYXhWYWx1ZXNba10pOl89bnVsbCxEPWUuYnl0ZUxlbmd0aC10LnB0cixtPXt9LFY9MCxFPShwPW5ldyBEYXRhVmlldyhlLHQucHRyLE1hdGgubWluKDEwLEQpKSkuZ2V0VWludDgoMCksVisrLHg9aS5maWxlVmVyc2lvbj49NT80JkU6MCxCPUU+PjYmMjU1LChFPj4yJkspIT0oVSpmPj4zJkspKXRocm93ImludGVncml0eSBpc3N1ZSI7aWYoeCYmMD09PWspdGhyb3ciaW50ZWdyaXR5IGlzc3VlIjtpZigodz0zJkUpPjMpdGhyb3cgdC5wdHIrPVYsIkludmFsaWQgYmxvY2sgZW5jb2RpbmcgKCIrdysiKSI7aWYoMiE9PXcpaWYoMD09PXcpe2lmKHgpdGhyb3ciaW50ZWdyaXR5IGlzc3VlIjtpZih0LmNvdW50ZXIudW5jb21wcmVzc2VkKyssdC5wdHIrPVYsQz0oQz1TKlQqdSk8KEw9ZS5ieXRlTGVuZ3RoLXQucHRyKT9DOkwsdj1uZXcgQXJyYXlCdWZmZXIoQyV1PT0wP0M6Qyt1LUMldSksbmV3IFVpbnQ4QXJyYXkodikuc2V0KG5ldyBVaW50OEFycmF5KGUsdC5wdHIsQykpLHk9bmV3IHIodiksUj0wLE4pZm9yKEE9MDtBPFM7QSsrKXtmb3IoUD0wO1A8VDtQKyspTltPXSYmKFpbT109eVtSKytdKSxPKys7Tys9TX1lbHNlIGZvcihBPTA7QTxTO0ErKyl7Zm9yKFA9MDtQPFQ7UCsrKVpbTysrXT15W1IrK107Tys9TX10LnB0cis9Uip1fWVsc2UgaWYoZz1oLmdldERhdGFUeXBlVXNlZCh4JiZsPDY/NDpsLEIpLGI9aC5nZXRPbmVQaXhlbChtLFYsZyxwKSxWKz1oLmdldERhdGFUeXBlU2l6ZShnKSwzPT09dylpZih0LnB0cis9Vix0LmNvdW50ZXIuY29uc3RhbnRvZmZzZXQrKyxOKWZvcihBPTA7QTxTO0ErKyl7Zm9yKFA9MDtQPFQ7UCsrKU5bT10mJihaW09dPXg/TWF0aC5taW4oSCxfW09dK2IpOmIpLE8rKztPKz1NfWVsc2UgZm9yKEE9MDtBPFM7QSsrKXtmb3IoUD0wO1A8VDtQKyspWltPXT14P01hdGgubWluKEgsX1tPXStiKTpiLE8rKztPKz1NfWVsc2UgaWYodC5wdHIrPVYsaC5kZWNvZGVCaXRzKGUsdCxHLGIsayksVj0wLHgpaWYoTilmb3IoQT0wO0E8UztBKyspe2ZvcihQPTA7UDxUO1ArKylOW09dJiYoWltPXT1HW1YrK10rX1tPXSksTysrO08rPU19ZWxzZSBmb3IoQT0wO0E8UztBKyspe2ZvcihQPTA7UDxUO1ArKylaW09dPUdbVisrXStfW09dLE8rKztPKz1NfWVsc2UgaWYoTilmb3IoQT0wO0E8UztBKyspe2ZvcihQPTA7UDxUO1ArKylOW09dJiYoWltPXT1HW1YrK10pLE8rKztPKz1NfWVsc2UgZm9yKEE9MDtBPFM7QSsrKXtmb3IoUD0wO1A8VDtQKyspWltPKytdPUdbVisrXTtPKz1NfWVsc2V7aWYoeClpZihOKWZvcihBPTA7QTxTO0ErKylmb3IoUD0wO1A8VDtQKyspTltPXSYmKFpbT109X1tPXSksTysrO2Vsc2UgZm9yKEE9MDtBPFM7QSsrKWZvcihQPTA7UDxUO1ArKylaW09dPV9bT10sTysrO3QuY291bnRlci5jb25zdGFudCsrLHQucHRyKz1WfX1qPjEmJiFuJiYodC5waXhlbHMucmVzdWx0UGl4ZWxzPWguc3dhcERpbWVuc2lvbk9yZGVyKHQucGl4ZWxzLnJlc3VsdFBpeGVscyxzLGoscikpfSxmb3JtYXRGaWxlSW5mbzpmdW5jdGlvbihlKXtyZXR1cm57ZmlsZUlkZW50aWZpZXJTdHJpbmc6ZS5oZWFkZXJJbmZvLmZpbGVJZGVudGlmaWVyU3RyaW5nLGZpbGVWZXJzaW9uOmUuaGVhZGVySW5mby5maWxlVmVyc2lvbixpbWFnZVR5cGU6ZS5oZWFkZXJJbmZvLmltYWdlVHlwZSxoZWlnaHQ6ZS5oZWFkZXJJbmZvLmhlaWdodCx3aWR0aDplLmhlYWRlckluZm8ud2lkdGgsbnVtVmFsaWRQaXhlbDplLmhlYWRlckluZm8ubnVtVmFsaWRQaXhlbCxtaWNyb0Jsb2NrU2l6ZTplLmhlYWRlckluZm8ubWljcm9CbG9ja1NpemUsYmxvYlNpemU6ZS5oZWFkZXJJbmZvLmJsb2JTaXplLG1heFpFcnJvcjplLmhlYWRlckluZm8ubWF4WkVycm9yLHBpeGVsVHlwZTpoLmdldFBpeGVsVHlwZShlLmhlYWRlckluZm8uaW1hZ2VUeXBlKSxlb2ZPZmZzZXQ6ZS5lb2ZPZmZzZXQsbWFzazplLm1hc2s/e251bUJ5dGVzOmUubWFzay5udW1CeXRlc306bnVsbCxwaXhlbHM6e251bUJsb2Nrc1g6ZS5waXhlbHMubnVtQmxvY2tzWCxudW1CbG9ja3NZOmUucGl4ZWxzLm51bUJsb2Nrc1ksbWF4VmFsdWU6ZS5oZWFkZXJJbmZvLnpNYXgsbWluVmFsdWU6ZS5oZWFkZXJJbmZvLnpNaW4sbm9EYXRhVmFsdWU6ZS5ub0RhdGFWYWx1ZX19fSxjb25zdHJ1Y3RDb25zdGFudFN1cmZhY2U6ZnVuY3Rpb24oZSx0KXt2YXIgcj1lLmhlYWRlckluZm8uek1heCxuPWUuaGVhZGVySW5mby56TWluLGk9ZS5oZWFkZXJJbmZvLm1heFZhbHVlcyxhPWUuaGVhZGVySW5mby5udW1EaW1zLG89ZS5oZWFkZXJJbmZvLmhlaWdodCplLmhlYWRlckluZm8ud2lkdGgscz0wLGY9MCxsPTAsdT1lLnBpeGVscy5yZXN1bHRNYXNrLGM9ZS5waXhlbHMucmVzdWx0UGl4ZWxzO2lmKHUpaWYoYT4xKXtpZih0KWZvcihzPTA7czxhO3MrKylmb3IobD1zKm8scj1pW3NdLGY9MDtmPG87ZisrKXVbZl0mJihjW2wrZl09cik7ZWxzZSBmb3IoZj0wO2Y8bztmKyspaWYodVtmXSlmb3IobD1mKmEscz0wO3M8YTtzKyspY1tsK2FdPWlbc119ZWxzZSBmb3IoZj0wO2Y8bztmKyspdVtmXSYmKGNbZl09cik7ZWxzZSBpZihhPjEmJm4hPT1yKWlmKHQpZm9yKHM9MDtzPGE7cysrKWZvcihsPXMqbyxyPWlbc10sZj0wO2Y8bztmKyspY1tsK2ZdPXI7ZWxzZSBmb3IoZj0wO2Y8bztmKyspZm9yKGw9ZiphLHM9MDtzPGE7cysrKWNbbCtzXT1pW3NdO2Vsc2UgZm9yKGY9MDtmPG8qYTtmKyspY1tmXT1yfSxnZXREYXRhVHlwZUFycmF5OmZ1bmN0aW9uKGUpe3ZhciB0O3N3aXRjaChlKXtjYXNlIDA6dD1JbnQ4QXJyYXk7YnJlYWs7Y2FzZSAxOnQ9VWludDhBcnJheTticmVhaztjYXNlIDI6dD1JbnQxNkFycmF5O2JyZWFrO2Nhc2UgMzp0PVVpbnQxNkFycmF5O2JyZWFrO2Nhc2UgNDp0PUludDMyQXJyYXk7YnJlYWs7Y2FzZSA1OnQ9VWludDMyQXJyYXk7YnJlYWs7Y2FzZSA2OmRlZmF1bHQ6dD1GbG9hdDMyQXJyYXk7YnJlYWs7Y2FzZSA3OnQ9RmxvYXQ2NEFycmF5fXJldHVybiB0fSxnZXRQaXhlbFR5cGU6ZnVuY3Rpb24oZSl7dmFyIHQ7c3dpdGNoKGUpe2Nhc2UgMDp0PSJTOCI7YnJlYWs7Y2FzZSAxOnQ9IlU4IjticmVhaztjYXNlIDI6dD0iUzE2IjticmVhaztjYXNlIDM6dD0iVTE2IjticmVhaztjYXNlIDQ6dD0iUzMyIjticmVhaztjYXNlIDU6dD0iVTMyIjticmVhaztjYXNlIDY6ZGVmYXVsdDp0PSJGMzIiO2JyZWFrO2Nhc2UgNzp0PSJGNjQifXJldHVybiB0fSxpc1ZhbGlkUGl4ZWxWYWx1ZTpmdW5jdGlvbihlLHQpe2lmKG51bGw9PXQpcmV0dXJuITE7dmFyIHI7c3dpdGNoKGUpe2Nhc2UgMDpyPXQ+PS0xMjgmJnQ8PTEyNzticmVhaztjYXNlIDE6cj10Pj0wJiZ0PD0yNTU7YnJlYWs7Y2FzZSAyOnI9dD49LTMyNzY4JiZ0PD0zMjc2NzticmVhaztjYXNlIDM6cj10Pj0wJiZ0PD02NTUzNjticmVhaztjYXNlIDQ6cj10Pj0tMjE0NzQ4MzY0OCYmdDw9MjE0NzQ4MzY0NzticmVhaztjYXNlIDU6cj10Pj0wJiZ0PD00Mjk0OTY3Mjk2O2JyZWFrO2Nhc2UgNjpyPXQ+PS0zNDAyNzk5OTM4NzkwMTQ4NGUyMiYmdDw9MzQwMjc5OTkzODc5MDE0ODRlMjI7YnJlYWs7Y2FzZSA3OnI9dD49LTE3OTc2OTMxMzQ4NjIzMTU3ZTI5MiYmdDw9MTc5NzY5MzEzNDg2MjMxNTdlMjkyO2JyZWFrO2RlZmF1bHQ6cj0hMX1yZXR1cm4gcn0sZ2V0RGF0YVR5cGVTaXplOmZ1bmN0aW9uKGUpe3ZhciB0PTA7c3dpdGNoKGUpe2Nhc2UgMDpjYXNlIDE6dD0xO2JyZWFrO2Nhc2UgMjpjYXNlIDM6dD0yO2JyZWFrO2Nhc2UgNDpjYXNlIDU6Y2FzZSA2OnQ9NDticmVhaztjYXNlIDc6dD04O2JyZWFrO2RlZmF1bHQ6dD1lfXJldHVybiB0fSxnZXREYXRhVHlwZVVzZWQ6ZnVuY3Rpb24oZSx0KXt2YXIgcj1lO3N3aXRjaChlKXtjYXNlIDI6Y2FzZSA0OnI9ZS10O2JyZWFrO2Nhc2UgMzpjYXNlIDU6cj1lLTIqdDticmVhaztjYXNlIDY6cj0wPT09dD9lOjE9PT10PzI6MTticmVhaztjYXNlIDc6cj0wPT09dD9lOmUtMip0KzE7YnJlYWs7ZGVmYXVsdDpyPWV9cmV0dXJuIHJ9LGdldE9uZVBpeGVsOmZ1bmN0aW9uKGUsdCxyLG4pe3ZhciBpPTA7c3dpdGNoKHIpe2Nhc2UgMDppPW4uZ2V0SW50OCh0KTticmVhaztjYXNlIDE6aT1uLmdldFVpbnQ4KHQpO2JyZWFrO2Nhc2UgMjppPW4uZ2V0SW50MTYodCwhMCk7YnJlYWs7Y2FzZSAzOmk9bi5nZXRVaW50MTYodCwhMCk7YnJlYWs7Y2FzZSA0Omk9bi5nZXRJbnQzMih0LCEwKTticmVhaztjYXNlIDU6aT1uLmdldFVJbnQzMih0LCEwKTticmVhaztjYXNlIDY6aT1uLmdldEZsb2F0MzIodCwhMCk7YnJlYWs7Y2FzZSA3Omk9bi5nZXRGbG9hdDY0KHQsITApO2JyZWFrO2RlZmF1bHQ6dGhyb3cidGhlIGRlY29kZXIgZG9lcyBub3QgdW5kZXJzdGFuZCB0aGlzIHBpeGVsIHR5cGUifXJldHVybiBpfSxzd2FwRGltZW5zaW9uT3JkZXI6ZnVuY3Rpb24oZSx0LHIsbixpKXt2YXIgYT0wLG89MCxzPTAsZj0wLGw9ZTtpZihyPjEpaWYobD1uZXcgbih0KnIpLGkpZm9yKGE9MDthPHQ7YSsrKWZvcihmPWEscz0wO3M8cjtzKyssZis9dClsW2ZdPWVbbysrXTtlbHNlIGZvcihhPTA7YTx0O2ErKylmb3IoZj1hLHM9MDtzPHI7cysrLGYrPXQpbFtvKytdPWVbZl07cmV0dXJuIGx9fSxkPWZ1bmN0aW9uKGUsdCxyKXt0aGlzLnZhbD1lLHRoaXMubGVmdD10LHRoaXMucmlnaHQ9cn0se2RlY29kZTpmdW5jdGlvbihlLHQpe3ZhciByPSh0PXR8fHt9KS5ub0RhdGFWYWx1ZSxuPTAsaT17fTtpLnB0cj10LmlucHV0T2Zmc2V0fHwwLGkucGl4ZWxzPXt9LGgucmVhZEhlYWRlckluZm8oZSxpKTt2YXIgYT1pLmhlYWRlckluZm8sbz1hLmZpbGVWZXJzaW9uLHM9aC5nZXREYXRhVHlwZUFycmF5KGEuaW1hZ2VUeXBlKTtpZihvPjUpdGhyb3cidW5zdXBwb3J0ZWQgbGVyYyB2ZXJzaW9uIDIuIitvO2gucmVhZE1hc2soZSxpKSxhLm51bVZhbGlkUGl4ZWw9PT1hLndpZHRoKmEuaGVpZ2h0fHxpLnBpeGVscy5yZXN1bHRNYXNrfHwoaS5waXhlbHMucmVzdWx0TWFzaz10Lm1hc2tEYXRhKTt2YXIgZj1hLndpZHRoKmEuaGVpZ2h0O2kucGl4ZWxzLnJlc3VsdFBpeGVscz1uZXcgcyhmKmEubnVtRGltcyksaS5jb3VudGVyPXtvbmVzd2VlcDowLHVuY29tcHJlc3NlZDowLGx1dDowLGJpdHN0dWZmZXI6MCxjb25zdGFudDowLGNvbnN0YW50b2Zmc2V0OjB9O3ZhciBsLHU9IXQucmV0dXJuUGl4ZWxJbnRlcmxlYXZlZERpbXM7aWYoMCE9PWEubnVtVmFsaWRQaXhlbClpZihhLnpNYXg9PT1hLnpNaW4paC5jb25zdHJ1Y3RDb25zdGFudFN1cmZhY2UoaSx1KTtlbHNlIGlmKG8+PTQmJmguY2hlY2tNaW5NYXhSYW5nZXMoZSxpKSloLmNvbnN0cnVjdENvbnN0YW50U3VyZmFjZShpLHUpO2Vsc2V7dmFyIGM9bmV3IERhdGFWaWV3KGUsaS5wdHIsMiksZD1jLmdldFVpbnQ4KDApO2lmKGkucHRyKyssZCloLnJlYWREYXRhT25lU3dlZXAoZSxpLHMsdSk7ZWxzZSBpZihvPjEmJmEuaW1hZ2VUeXBlPD0xJiZNYXRoLmFicyhhLm1heFpFcnJvci0uNSk8MWUtNSl7dmFyIHA9Yy5nZXRVaW50OCgxKTtpZihpLnB0cisrLGkuZW5jb2RlTW9kZT1wLHA+Mnx8bzw0JiZwPjEpdGhyb3ciSW52YWxpZCBIdWZmbWFuIGZsYWcgIitwO3A/aC5yZWFkSHVmZm1hbihlLGkscyx1KTpoLnJlYWRUaWxlcyhlLGkscyx1KX1lbHNlIGgucmVhZFRpbGVzKGUsaSxzLHUpfWkuZW9mT2Zmc2V0PWkucHRyLHQuaW5wdXRPZmZzZXQ/KGw9aS5oZWFkZXJJbmZvLmJsb2JTaXplK3QuaW5wdXRPZmZzZXQtaS5wdHIsTWF0aC5hYnMobCk+PTEmJihpLmVvZk9mZnNldD10LmlucHV0T2Zmc2V0K2kuaGVhZGVySW5mby5ibG9iU2l6ZSkpOihsPWkuaGVhZGVySW5mby5ibG9iU2l6ZS1pLnB0cixNYXRoLmFicyhsKT49MSYmKGkuZW9mT2Zmc2V0PWkuaGVhZGVySW5mby5ibG9iU2l6ZSkpO3ZhciBtPXt3aWR0aDphLndpZHRoLGhlaWdodDphLmhlaWdodCxwaXhlbERhdGE6aS5waXhlbHMucmVzdWx0UGl4ZWxzLG1pblZhbHVlOmEuek1pbixtYXhWYWx1ZTphLnpNYXgsdmFsaWRQaXhlbENvdW50OmEubnVtVmFsaWRQaXhlbCxkaW1Db3VudDphLm51bURpbXMsZGltU3RhdHM6e21pblZhbHVlczphLm1pblZhbHVlcyxtYXhWYWx1ZXM6YS5tYXhWYWx1ZXN9LG1hc2tEYXRhOmkucGl4ZWxzLnJlc3VsdE1hc2t9O2lmKGkucGl4ZWxzLnJlc3VsdE1hc2smJmguaXNWYWxpZFBpeGVsVmFsdWUoYS5pbWFnZVR5cGUscikpe3ZhciB2PWkucGl4ZWxzLnJlc3VsdE1hc2s7Zm9yKG49MDtuPGY7bisrKXZbbl18fChtLnBpeGVsRGF0YVtuXT1yKTttLm5vRGF0YVZhbHVlPXJ9cmV0dXJuIGkubm9EYXRhVmFsdWU9cix0LnJldHVybkZpbGVJbmZvJiYobS5maWxlSW5mbz1oLmZvcm1hdEZpbGVJbmZvKGkpKSxtfSxnZXRCYW5kQ291bnQ6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PTAscj0wLG49e3B0cjowLHBpeGVsczp7fX07cjxlLmJ5dGVMZW5ndGgtNTg7KWgucmVhZEhlYWRlckluZm8oZSxuKSxyKz1uLmhlYWRlckluZm8uYmxvYlNpemUsdCsrLG4ucHRyPXI7cmV0dXJuIHR9fSksdz0ocD1uZXcgQXJyYXlCdWZmZXIoNCksbT1uZXcgVWludDhBcnJheShwKSxuZXcgVWludDMyQXJyYXkocClbMF09MSwxPT09bVswXSksZz17ZGVjb2RlOmZ1bmN0aW9uKGUsdCl7aWYoIXcpdGhyb3ciQmlnIGVuZGlhbiBzeXN0ZW0gaXMgbm90IHN1cHBvcnRlZC4iO3ZhciByLG4saT0odD10fHx7fSkuaW5wdXRPZmZzZXR8fDAsYT1uZXcgVWludDhBcnJheShlLGksMTApLG89U3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShudWxsLGEpO2lmKCJDbnRaSW1hZ2UiPT09by50cmltKCkpcj12LG49MTtlbHNle2lmKCJMZXJjMiIhPT1vLnN1YnN0cmluZygwLDUpKXRocm93IlVuZXhwZWN0ZWQgZmlsZSBpZGVudGlmaWVyIHN0cmluZzogIitvO3I9eSxuPTJ9Zm9yKHZhciBzLGYsbCx1LGMsaCxkPTAscD1lLmJ5dGVMZW5ndGgtMTAsbT1bXSxnPXt3aWR0aDowLGhlaWdodDowLHBpeGVsczpbXSxwaXhlbFR5cGU6dC5waXhlbFR5cGUsbWFzazpudWxsLHN0YXRpc3RpY3M6W119LGI9MDtpPHA7KXt2YXIgaz1yLmRlY29kZShlLHtpbnB1dE9mZnNldDppLGVuY29kZWRNYXNrRGF0YTpzLG1hc2tEYXRhOmwscmV0dXJuTWFzazowPT09ZCxyZXR1cm5FbmNvZGVkTWFzazowPT09ZCxyZXR1cm5GaWxlSW5mbzohMCxyZXR1cm5QaXhlbEludGVybGVhdmVkRGltczp0LnJldHVyblBpeGVsSW50ZXJsZWF2ZWREaW1zLHBpeGVsVHlwZTp0LnBpeGVsVHlwZXx8bnVsbCxub0RhdGFWYWx1ZTp0Lm5vRGF0YVZhbHVlfHxudWxsfSk7aT1rLmZpbGVJbmZvLmVvZk9mZnNldCxsPWsubWFza0RhdGEsMD09PWQmJihzPWsuZW5jb2RlZE1hc2tEYXRhLGcud2lkdGg9ay53aWR0aCxnLmhlaWdodD1rLmhlaWdodCxnLmRpbUNvdW50PWsuZGltQ291bnR8fDEsZy5waXhlbFR5cGU9ay5waXhlbFR5cGV8fGsuZmlsZUluZm8ucGl4ZWxUeXBlLGcubWFzaz1sKSxuPjEmJihsJiZtLnB1c2gobCksay5maWxlSW5mby5tYXNrJiZrLmZpbGVJbmZvLm1hc2subnVtQnl0ZXM+MCYmYisrKSxkKyssZy5waXhlbHMucHVzaChrLnBpeGVsRGF0YSksZy5zdGF0aXN0aWNzLnB1c2goe21pblZhbHVlOmsubWluVmFsdWUsbWF4VmFsdWU6ay5tYXhWYWx1ZSxub0RhdGFWYWx1ZTprLm5vRGF0YVZhbHVlLGRpbVN0YXRzOmsuZGltU3RhdHN9KX1pZihuPjEmJmI+MSl7Zm9yKGg9Zy53aWR0aCpnLmhlaWdodCxnLmJhbmRNYXNrcz1tLChsPW5ldyBVaW50OEFycmF5KGgpKS5zZXQobVswXSksdT0xO3U8bS5sZW5ndGg7dSsrKWZvcihmPW1bdV0sYz0wO2M8aDtjKyspbFtjXT1sW2NdJmZbY107Zy5tYXNrRGF0YT1sfXJldHVybiBnfX07S2UuZXhwb3J0cz9LZS5leHBvcnRzPWc6dGhpcy5MZXJjPWd9KCk7dmFyIFdlPVhlLmV4cG9ydHMscWU9ezMxNToiQXJ0aXN0IiwyNTg6IkJpdHNQZXJTYW1wbGUiLDI2NToiQ2VsbExlbmd0aCIsMjY0OiJDZWxsV2lkdGgiLDMyMDoiQ29sb3JNYXAiLDI1OToiQ29tcHJlc3Npb24iLDMzNDMyOiJDb3B5cmlnaHQiLDMwNjoiRGF0ZVRpbWUiLDMzODoiRXh0cmFTYW1wbGVzIiwyNjY6IkZpbGxPcmRlciIsMjg5OiJGcmVlQnl0ZUNvdW50cyIsMjg4OiJGcmVlT2Zmc2V0cyIsMjkxOiJHcmF5UmVzcG9uc2VDdXJ2ZSIsMjkwOiJHcmF5UmVzcG9uc2VVbml0IiwzMTY6Ikhvc3RDb21wdXRlciIsMjcwOiJJbWFnZURlc2NyaXB0aW9uIiwyNTc6IkltYWdlTGVuZ3RoIiwyNTY6IkltYWdlV2lkdGgiLDI3MToiTWFrZSIsMjgxOiJNYXhTYW1wbGVWYWx1ZSIsMjgwOiJNaW5TYW1wbGVWYWx1ZSIsMjcyOiJNb2RlbCIsMjU0OiJOZXdTdWJmaWxlVHlwZSIsMjc0OiJPcmllbnRhdGlvbiIsMjYyOiJQaG90b21ldHJpY0ludGVycHJldGF0aW9uIiwyODQ6IlBsYW5hckNvbmZpZ3VyYXRpb24iLDI5NjoiUmVzb2x1dGlvblVuaXQiLDI3ODoiUm93c1BlclN0cmlwIiwyNzc6IlNhbXBsZXNQZXJQaXhlbCIsMzA1OiJTb2Z0d2FyZSIsMjc5OiJTdHJpcEJ5dGVDb3VudHMiLDI3MzoiU3RyaXBPZmZzZXRzIiwyNTU6IlN1YmZpbGVUeXBlIiwyNjM6IlRocmVzaGhvbGRpbmciLDI4MjoiWFJlc29sdXRpb24iLDI4MzoiWVJlc29sdXRpb24iLDMyNjoiQmFkRmF4TGluZXMiLDMyNzoiQ2xlYW5GYXhEYXRhIiwzNDM6IkNsaXBQYXRoIiwzMjg6IkNvbnNlY3V0aXZlQmFkRmF4TGluZXMiLDQzMzoiRGVjb2RlIiw0MzQ6IkRlZmF1bHRJbWFnZUNvbG9yIiwyNjk6IkRvY3VtZW50TmFtZSIsMzM2OiJEb3RSYW5nZSIsMzIxOiJIYWxmdG9uZUhpbnRzIiwzNDY6IkluZGV4ZWQiLDM0NzoiSlBFR1RhYmxlcyIsMjg1OiJQYWdlTmFtZSIsMjk3OiJQYWdlTnVtYmVyIiwzMTc6IlByZWRpY3RvciIsMzE5OiJQcmltYXJ5Q2hyb21hdGljaXRpZXMiLDUzMjoiUmVmZXJlbmNlQmxhY2tXaGl0ZSIsMzM5OiJTYW1wbGVGb3JtYXQiLDM0MDoiU01pblNhbXBsZVZhbHVlIiwzNDE6IlNNYXhTYW1wbGVWYWx1ZSIsNTU5OiJTdHJpcFJvd0NvdW50cyIsMzMwOiJTdWJJRkRzIiwyOTI6IlQ0T3B0aW9ucyIsMjkzOiJUNk9wdGlvbnMiLDMyNToiVGlsZUJ5dGVDb3VudHMiLDMyMzoiVGlsZUxlbmd0aCIsMzI0OiJUaWxlT2Zmc2V0cyIsMzIyOiJUaWxlV2lkdGgiLDMwMToiVHJhbnNmZXJGdW5jdGlvbiIsMzE4OiJXaGl0ZVBvaW50IiwzNDQ6IlhDbGlwUGF0aFVuaXRzIiwyODY6IlhQb3NpdGlvbiIsNTI5OiJZQ2JDckNvZWZmaWNpZW50cyIsNTMxOiJZQ2JDclBvc2l0aW9uaW5nIiw1MzA6IllDYkNyU3ViU2FtcGxpbmciLDM0NToiWUNsaXBQYXRoVW5pdHMiLDI4NzoiWVBvc2l0aW9uIiwzNzM3ODoiQXBlcnR1cmVWYWx1ZSIsNDA5NjE6IkNvbG9yU3BhY2UiLDM2ODY4OiJEYXRlVGltZURpZ2l0aXplZCIsMzY4Njc6IkRhdGVUaW1lT3JpZ2luYWwiLDM0NjY1OiJFeGlmIElGRCIsMzY4NjQ6IkV4aWZWZXJzaW9uIiwzMzQzNDoiRXhwb3N1cmVUaW1lIiw0MTcyODoiRmlsZVNvdXJjZSIsMzczODU6IkZsYXNoIiw0MDk2MDoiRmxhc2hwaXhWZXJzaW9uIiwzMzQzNzoiRk51bWJlciIsNDIwMTY6IkltYWdlVW5pcXVlSUQiLDM3Mzg0OiJMaWdodFNvdXJjZSIsMzc1MDA6Ik1ha2VyTm90ZSIsMzczNzc6IlNodXR0ZXJTcGVlZFZhbHVlIiwzNzUxMDoiVXNlckNvbW1lbnQiLDMzNzIzOiJJUFRDIiwzNDY3NToiSUNDIFByb2ZpbGUiLDcwMDoiWE1QIiw0MjExMjoiR0RBTF9NRVRBREFUQSIsNDIxMTM6IkdEQUxfTk9EQVRBIiwzNDM3NzoiUGhvdG9zaG9wIiwzMzU1MDoiTW9kZWxQaXhlbFNjYWxlIiwzMzkyMjoiTW9kZWxUaWVwb2ludCIsMzQyNjQ6Ik1vZGVsVHJhbnNmb3JtYXRpb24iLDM0NzM1OiJHZW9LZXlEaXJlY3RvcnkiLDM0NzM2OiJHZW9Eb3VibGVQYXJhbXMiLDM0NzM3OiJHZW9Bc2NpaVBhcmFtcyIsNTA2NzQ6IkxlcmNQYXJhbWV0ZXJzIn0sSmU9e307Zm9yKHZhciBRZSBpbiBxZSlxZS5oYXNPd25Qcm9wZXJ0eShRZSkmJihKZVtxZVtRZV1dPXBhcnNlSW50KFFlLDEwKSk7SmUuQml0c1BlclNhbXBsZSxKZS5FeHRyYVNhbXBsZXMsSmUuU2FtcGxlRm9ybWF0LEplLlN0cmlwQnl0ZUNvdW50cyxKZS5TdHJpcE9mZnNldHMsSmUuU3RyaXBSb3dDb3VudHMsSmUuVGlsZUJ5dGVDb3VudHMsSmUuVGlsZU9mZnNldHMsSmUuU3ViSUZEczt2YXIgJGU9ezE6IkJZVEUiLDI6IkFTQ0lJIiwzOiJTSE9SVCIsNDoiTE9ORyIsNToiUkFUSU9OQUwiLDY6IlNCWVRFIiw3OiJVTkRFRklORUQiLDg6IlNTSE9SVCIsOToiU0xPTkciLDEwOiJTUkFUSU9OQUwiLDExOiJGTE9BVCIsMTI6IkRPVUJMRSIsMTM6IklGRCIsMTY6IkxPTkc4IiwxNzoiU0xPTkc4IiwxODoiSUZEOCJ9LGV0PXt9O2Zvcih2YXIgdHQgaW4gJGUpJGUuaGFzT3duUHJvcGVydHkodHQpJiYoZXRbJGVbdHRdXT1wYXJzZUludCh0dCwxMCkpO3ZhciBydD0xLG50PTAsaXQ9MSxhdD17MTAyNDoiR1RNb2RlbFR5cGVHZW9LZXkiLDEwMjU6IkdUUmFzdGVyVHlwZUdlb0tleSIsMTAyNjoiR1RDaXRhdGlvbkdlb0tleSIsMjA0ODoiR2VvZ3JhcGhpY1R5cGVHZW9LZXkiLDIwNDk6Ikdlb2dDaXRhdGlvbkdlb0tleSIsMjA1MDoiR2VvZ0dlb2RldGljRGF0dW1HZW9LZXkiLDIwNTE6Ikdlb2dQcmltZU1lcmlkaWFuR2VvS2V5IiwyMDUyOiJHZW9nTGluZWFyVW5pdHNHZW9LZXkiLDIwNTM6Ikdlb2dMaW5lYXJVbml0U2l6ZUdlb0tleSIsMjA1NDoiR2VvZ0FuZ3VsYXJVbml0c0dlb0tleSIsMjA1NToiR2VvZ0FuZ3VsYXJVbml0U2l6ZUdlb0tleSIsMjA1NjoiR2VvZ0VsbGlwc29pZEdlb0tleSIsMjA1NzoiR2VvZ1NlbWlNYWpvckF4aXNHZW9LZXkiLDIwNTg6Ikdlb2dTZW1pTWlub3JBeGlzR2VvS2V5IiwyMDU5OiJHZW9nSW52RmxhdHRlbmluZ0dlb0tleSIsMjA2MDoiR2VvZ0F6aW11dGhVbml0c0dlb0tleSIsMjA2MToiR2VvZ1ByaW1lTWVyaWRpYW5Mb25nR2VvS2V5IiwyMDYyOiJHZW9nVE9XR1M4NEdlb0tleSIsMzA3MjoiUHJvamVjdGVkQ1NUeXBlR2VvS2V5IiwzMDczOiJQQ1NDaXRhdGlvbkdlb0tleSIsMzA3NDoiUHJvamVjdGlvbkdlb0tleSIsMzA3NToiUHJvakNvb3JkVHJhbnNHZW9LZXkiLDMwNzY6IlByb2pMaW5lYXJVbml0c0dlb0tleSIsMzA3NzoiUHJvakxpbmVhclVuaXRTaXplR2VvS2V5IiwzMDc4OiJQcm9qU3RkUGFyYWxsZWwxR2VvS2V5IiwzMDc5OiJQcm9qU3RkUGFyYWxsZWwyR2VvS2V5IiwzMDgwOiJQcm9qTmF0T3JpZ2luTG9uZ0dlb0tleSIsMzA4MToiUHJvak5hdE9yaWdpbkxhdEdlb0tleSIsMzA4MjoiUHJvakZhbHNlRWFzdGluZ0dlb0tleSIsMzA4MzoiUHJvakZhbHNlTm9ydGhpbmdHZW9LZXkiLDMwODQ6IlByb2pGYWxzZU9yaWdpbkxvbmdHZW9LZXkiLDMwODU6IlByb2pGYWxzZU9yaWdpbkxhdEdlb0tleSIsMzA4NjoiUHJvakZhbHNlT3JpZ2luRWFzdGluZ0dlb0tleSIsMzA4NzoiUHJvakZhbHNlT3JpZ2luTm9ydGhpbmdHZW9LZXkiLDMwODg6IlByb2pDZW50ZXJMb25nR2VvS2V5IiwzMDg5OiJQcm9qQ2VudGVyTGF0R2VvS2V5IiwzMDkwOiJQcm9qQ2VudGVyRWFzdGluZ0dlb0tleSIsMzA5MToiUHJvakNlbnRlck5vcnRoaW5nR2VvS2V5IiwzMDkyOiJQcm9qU2NhbGVBdE5hdE9yaWdpbkdlb0tleSIsMzA5MzoiUHJvalNjYWxlQXRDZW50ZXJHZW9LZXkiLDMwOTQ6IlByb2pBemltdXRoQW5nbGVHZW9LZXkiLDMwOTU6IlByb2pTdHJhaWdodFZlcnRQb2xlTG9uZ0dlb0tleSIsMzA5NjoiUHJvalJlY3RpZmllZEdyaWRBbmdsZUdlb0tleSIsNDA5NjoiVmVydGljYWxDU1R5cGVHZW9LZXkiLDQwOTc6IlZlcnRpY2FsQ2l0YXRpb25HZW9LZXkiLDQwOTg6IlZlcnRpY2FsRGF0dW1HZW9LZXkiLDQwOTk6IlZlcnRpY2FsVW5pdHNHZW9LZXkifSxvdD17fTtmb3IodmFyIHN0IGluIGF0KWF0Lmhhc093blByb3BlcnR5KHN0KSYmKG90W2F0W3N0XV09cGFyc2VJbnQoc3QsMTApKTtmdW5jdGlvbiBmdChlKXt2YXIgdD1mdW5jdGlvbigpe2lmKCJ1bmRlZmluZWQiPT10eXBlb2YgUmVmbGVjdHx8IVJlZmxlY3QuY29uc3RydWN0KXJldHVybiExO2lmKFJlZmxlY3QuY29uc3RydWN0LnNoYW0pcmV0dXJuITE7aWYoImZ1bmN0aW9uIj09dHlwZW9mIFByb3h5KXJldHVybiEwO3RyeXtyZXR1cm4gQm9vbGVhbi5wcm90b3R5cGUudmFsdWVPZi5jYWxsKFJlZmxlY3QuY29uc3RydWN0KEJvb2xlYW4sW10sKGZ1bmN0aW9uKCl7fSkpKSwhMH1jYXRjaChlKXtyZXR1cm4hMX19KCk7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIHIsbj12KGUpO2lmKHQpe3ZhciBpPXYodGhpcykuY29uc3RydWN0b3I7cj1SZWZsZWN0LmNvbnN0cnVjdChuLGFyZ3VtZW50cyxpKX1lbHNlIHI9bi5hcHBseSh0aGlzLGFyZ3VtZW50cyk7cmV0dXJuIG0odGhpcyxyKX19dmFyIGx0PWZ1bmN0aW9uKGUpe3AocixiKTt2YXIgdD1mdChyKTtmdW5jdGlvbiByKGUpe3ZhciBuO3JldHVybiB1KHRoaXMsciksKG49dC5jYWxsKHRoaXMpKS5wbGFuYXJDb25maWd1cmF0aW9uPXZvaWQgMCE9PWUuUGxhbmFyQ29uZmlndXJhdGlvbj9lLlBsYW5hckNvbmZpZ3VyYXRpb246MSxuLnNhbXBsZXNQZXJQaXhlbD12b2lkIDAhPT1lLlNhbXBsZXNQZXJQaXhlbD9lLlNhbXBsZXNQZXJQaXhlbDoxLG4uYWRkQ29tcHJlc3Npb249ZS5MZXJjUGFyYW1ldGVyc1tydF0sbn1yZXR1cm4gaChyLFt7a2V5OiJkZWNvZGVCbG9jayIsdmFsdWU6ZnVuY3Rpb24oZSl7c3dpdGNoKHRoaXMuYWRkQ29tcHJlc3Npb24pe2Nhc2UgbnQ6YnJlYWs7Y2FzZSBpdDplPUZlKG5ldyBVaW50OEFycmF5KGUpKS5idWZmZXI7YnJlYWs7ZGVmYXVsdDp0aHJvdyBuZXcgRXJyb3IoIlVuc3VwcG9ydGVkIExFUkMgYWRkaXRpb25hbCBjb21wcmVzc2lvbiBtZXRob2QgaWRlbnRpZmllcjogIi5jb25jYXQodGhpcy5hZGRDb21wcmVzc2lvbikpfXJldHVybiBXZS5kZWNvZGUoZSx7cmV0dXJuUGl4ZWxJbnRlcmxlYXZlZERpbXM6MT09PXRoaXMucGxhbmFyQ29uZmlndXJhdGlvbn0pLnBpeGVsc1swXS5idWZmZXJ9fV0pLHJ9KCksdXQ9T2JqZWN0LmZyZWV6ZSh7X19wcm90b19fOm51bGwsZGVmYXVsdDpsdH0pO2Z1bmN0aW9uIGN0KGUpe3ZhciB0PWZ1bmN0aW9uKCl7aWYoInVuZGVmaW5lZCI9PXR5cGVvZiBSZWZsZWN0fHwhUmVmbGVjdC5jb25zdHJ1Y3QpcmV0dXJuITE7aWYoUmVmbGVjdC5jb25zdHJ1Y3Quc2hhbSlyZXR1cm4hMTtpZigiZnVuY3Rpb24iPT10eXBlb2YgUHJveHkpcmV0dXJuITA7dHJ5e3JldHVybiBCb29sZWFuLnByb3RvdHlwZS52YWx1ZU9mLmNhbGwoUmVmbGVjdC5jb25zdHJ1Y3QoQm9vbGVhbixbXSwoZnVuY3Rpb24oKXt9KSkpLCEwfWNhdGNoKGUpe3JldHVybiExfX0oKTtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgcixuPXYoZSk7aWYodCl7dmFyIGk9dih0aGlzKS5jb25zdHJ1Y3RvcjtyPVJlZmxlY3QuY29uc3RydWN0KG4sYXJndW1lbnRzLGkpfWVsc2Ugcj1uLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtyZXR1cm4gbSh0aGlzLHIpfX12YXIgaHQ9ZnVuY3Rpb24oZSl7cChhLGIpO3ZhciByLG49Y3QoYSk7ZnVuY3Rpb24gYSgpe3ZhciBlO2lmKHUodGhpcyxhKSxlPW4uY2FsbCh0aGlzKSwidW5kZWZpbmVkIj09dHlwZW9mIGNyZWF0ZUltYWdlQml0bWFwKXRocm93IG5ldyBFcnJvcigiQ2Fubm90IGRlY29kZSBXZWJJbWFnZSBhcyBgY3JlYXRlSW1hZ2VCaXRtYXBgIGlzIG5vdCBhdmFpbGFibGUiKTtpZigidW5kZWZpbmVkIj09dHlwZW9mIGRvY3VtZW50JiYidW5kZWZpbmVkIj09dHlwZW9mIE9mZnNjcmVlbkNhbnZhcyl0aHJvdyBuZXcgRXJyb3IoIkNhbm5vdCBkZWNvZGUgV2ViSW1hZ2UgYXMgbmVpdGhlciBgZG9jdW1lbnRgIG5vciBgT2Zmc2NyZWVuQ2FudmFzYCBpcyBub3QgYXZhaWxhYmxlIik7cmV0dXJuIGV9cmV0dXJuIGgoYSxbe2tleToiZGVjb2RlIix2YWx1ZToocj10KGkubWFyaygoZnVuY3Rpb24gZSh0LHIpe3ZhciBuLGEsbyxzO3JldHVybiBpLndyYXAoKGZ1bmN0aW9uKGUpe2Zvcig7Oylzd2l0Y2goZS5wcmV2PWUubmV4dCl7Y2FzZSAwOnJldHVybiBuPW5ldyBCbG9iKFtyXSksZS5uZXh0PTMsY3JlYXRlSW1hZ2VCaXRtYXAobik7Y2FzZSAzOnJldHVybiBhPWUuc2VudCwidW5kZWZpbmVkIiE9dHlwZW9mIGRvY3VtZW50Pygobz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJjYW52YXMiKSkud2lkdGg9YS53aWR0aCxvLmhlaWdodD1hLmhlaWdodCk6bz1uZXcgT2Zmc2NyZWVuQ2FudmFzKGEud2lkdGgsYS5oZWlnaHQpLChzPW8uZ2V0Q29udGV4dCgiMmQiKSkuZHJhd0ltYWdlKGEsMCwwKSxlLmFicnVwdCgicmV0dXJuIixzLmdldEltYWdlRGF0YSgwLDAsYS53aWR0aCxhLmhlaWdodCkuZGF0YS5idWZmZXIpO2Nhc2UgODpjYXNlImVuZCI6cmV0dXJuIGUuc3RvcCgpfX0pLGUpfSkpKSxmdW5jdGlvbihlLHQpe3JldHVybiByLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0pfV0pLGF9KCksZHQ9T2JqZWN0LmZyZWV6ZSh7X19wcm90b19fOm51bGwsZGVmYXVsdDpodH0pOyc7cmV0dXJuIG5ldyBUaSgidW5kZWZpbmVkIj09dHlwZW9mIEJsb2I/ImRhdGE6YXBwbGljYXRpb24vamF2YXNjcmlwdDtiYXNlNjQsIitCdWZmZXIuZnJvbShlLCJiaW5hcnkiKS50b1N0cmluZygiYmFzZTY0Iik6VVJMLmNyZWF0ZU9iamVjdFVSTChuZXcgQmxvYihbZV0se3R5cGU6ImFwcGxpY2F0aW9uL2phdmFzY3JpcHQifSkpKX19KTtlLkJhc2VEZWNvZGVyPXdyLGUuR2VvVElGRj1VcixlLkdlb1RJRkZJbWFnZT1GZSxlLk11bHRpR2VvVElGRj1PcixlLlBvb2w9TmUsZS5hZGREZWNvZGVyPXhlLGUuZGVmYXVsdD1VcixlLmZyb21BcnJheUJ1ZmZlcj1mdW5jdGlvbihlLHQpe3JldHVybiBFci5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LGUuZnJvbUJsb2I9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gTXIuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxlLmZyb21GaWxlPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIFJyLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sZS5mcm9tVXJsPWZ1bmN0aW9uKGUpe3JldHVybiBEci5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LGUuZnJvbVVybHM9ZnVuY3Rpb24oZSl7cmV0dXJuIEJyLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sZS5nZXREZWNvZGVyPUFlLGUuZ2xvYmFscz1kZSxlLnJnYj1iZSxlLnNldExvZ2dlcj1mdW5jdGlvbigpe2FyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdfHxuZXcgbXI7fSxlLndyaXRlQXJyYXlCdWZmZXI9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gcHIoZSx0KX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO30pKTsKCgl9KGdlb3RpZmYsIGdlb3RpZmYuZXhwb3J0cykpOwoKCWNvbnN0IGdldFBhbGV0dGUgPSAoaW1hZ2UsIHsgZGVidWcgPSBmYWxzZSB9ID0geyBkZWJ1ZzogZmFsc2UgfSkgPT4gewoJICAgIGlmIChkZWJ1ZykgY29uc29sZS5sb2coInN0YXJ0aW5nIGdldFBhbGV0dGUgd2l0aCBpbWFnZSIsIGltYWdlKTsKCSAgICBjb25zdCB7IGZpbGVEaXJlY3RvcnkgfSA9IGltYWdlOwoJICAgIGNvbnN0IHsKCSAgICAgICAgQml0c1BlclNhbXBsZSwKCSAgICAgICAgQ29sb3JNYXAsCgkgICAgICAgIEltYWdlTGVuZ3RoLAoJICAgICAgICBJbWFnZVdpZHRoLAoJICAgICAgICBQaG90b21ldHJpY0ludGVycHJldGF0aW9uLAoJICAgICAgICBTYW1wbGVGb3JtYXQsCgkgICAgICAgIFNhbXBsZXNQZXJQaXhlbAoJICAgIH0gPSBmaWxlRGlyZWN0b3J5OwoKCSAgICBpZiAoIUNvbG9yTWFwKSB7CgkgICAgICAgIHRocm93IG5ldyBFcnJvcigiW2dlb3RpZmYtcGFsZXR0ZV06IHRoZSBpbWFnZSBkb2VzIG5vdCBjb250YWluIGEgY29sb3IgbWFwLCBzbyB3ZSBjYW4ndCBtYWtlIGEgcGFsZXR0ZS4iKTsKCSAgICB9CgoJICAgIGNvbnN0IGNvdW50ID0gTWF0aC5wb3coMiwgQml0c1BlclNhbXBsZSk7CgkgICAgaWYgKGRlYnVnKSBjb25zb2xlLmxvZygiW2dlb3RpZmYtcGFsZXR0ZV06IGNvdW50OiIsIGNvdW50KTsKCgkgICAgY29uc3QgYmFuZFNpemUgPSBDb2xvck1hcC5sZW5ndGggLyAzOwoJICAgIGlmIChkZWJ1ZykgY29uc29sZS5sb2coIltnZW90aWZmLXBhbGV0dGVdOiBiYW5kU2l6ZToiLCBiYW5kU2l6ZSk7CgoJICAgIGlmIChiYW5kU2l6ZSAhPT0gY291bnQpIHsKCSAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJbZ2VvdGlmZi1wYWxldHRlXTogY2FuJ3QgaGFuZGxlIHNpdHVhdGlvbnMgd2hlcmUgdGhlIGNvbG9yIG1hcCBoYXMgbW9yZSBvciBsZXNzIHZhbHVlcyB0aGFuIHRoZSBudW1iZXIgb2YgcG9zc2libGUgdmFsdWVzIGluIGEgcmFzdGVyIik7CgkgICAgfQoKCSAgICBjb25zdCBncmVlbk9mZnNldCA9IGJhbmRTaXplOwoJICAgIGNvbnN0IHJlZE9mZnNldCA9IGdyZWVuT2Zmc2V0ICsgYmFuZFNpemU7CgoJICAgIGNvbnN0IHJlc3VsdCA9IFtdOwoJICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY291bnQ7IGkrKykgewoJICAgICAgICAvLyBjb2xvck1hcFttYXBJbmRleF0gLyA2NTUzNiAqIDI1NiBlcXVhbHMgY29sb3JNYXBbbWFwSW5kZXhdIC8gMjU2CgkgICAgICAgIC8vIGJlY2F1c2UgKDEgLyAyXjE2KSAqICgyXjgpIGVxdWFscyAxIC8gMl44CgkgICAgICAgIHJlc3VsdC5wdXNoKFsKCSAgICAgICAgICAgIE1hdGguZmxvb3IoQ29sb3JNYXBbaV0gLyAyNTYpLCAvLyByZWQKCSAgICAgICAgICAgIE1hdGguZmxvb3IoQ29sb3JNYXBbZ3JlZW5PZmZzZXQgKyBpXSAvIDI1NiksIC8vIGdyZWVuCgkgICAgICAgICAgICBNYXRoLmZsb29yKENvbG9yTWFwW3JlZE9mZnNldCArIGldIC8gMjU2KSwgLy8gYmx1ZQoJICAgICAgICAgICAgMjU1IC8vIGFscGhhIHZhbHVlIGlzIGFsd2F5cyAyNTUKCSAgICAgICAgXSk7CgkgICAgfQoJICAgIGlmIChkZWJ1ZykgY29uc29sZS5sb2coIltnZW90aWZmLXBhbGV0dGVdOiByZXN1bHQgaXMgIiwgcmVzdWx0KTsKCSAgICByZXR1cm4gcmVzdWx0OwoJfTsKCgl2YXIgZ2VvdGlmZlBhbGV0dGUgPSB7IGdldFBhbGV0dGUgfTsKCgkvKgoJVGFrZXMgaW4gYSBmbGF0dGVuZWQgb25lIGRpbWVuc2lvbmFsIGFycmF5CglyZXByZXNlbnRpbmcgdHdvLWRpbWVuc2lvbmFsIHBpeGVsIHZhbHVlcwoJYW5kIHJldHVybnMgYW4gYXJyYXkgb2YgYXJyYXlzLgoJKi8KCWZ1bmN0aW9uIHVuZmxhdHRlbih2YWx1ZXNJbk9uZURpbWVuc2lvbiwgc2l6ZSkgewoJICBjb25zdCB7aGVpZ2h0LCB3aWR0aH0gPSBzaXplOwoJICBjb25zdCB2YWx1ZXNJblR3b0RpbWVuc2lvbnMgPSBbXTsKCSAgZm9yIChsZXQgeSA9IDA7IHkgPCBoZWlnaHQ7IHkrKykgewoJICAgIGNvbnN0IHN0YXJ0ID0geSAqIHdpZHRoOwoJICAgIGNvbnN0IGVuZCA9IHN0YXJ0ICsgd2lkdGg7CgkgICAgdmFsdWVzSW5Ud29EaW1lbnNpb25zLnB1c2godmFsdWVzSW5PbmVEaW1lbnNpb24uc2xpY2Uoc3RhcnQsIGVuZCkpOwoJICB9CgkgIHJldHVybiB2YWx1ZXNJblR3b0RpbWVuc2lvbnM7Cgl9CgoJZnVuY3Rpb24gcHJvY2Vzc1Jlc3VsdChyZXN1bHQsIGRlYnVnKSB7CgkgIGNvbnN0IG5vRGF0YVZhbHVlID0gcmVzdWx0Lm5vRGF0YVZhbHVlOwoJICBjb25zdCBoZWlnaHQgPSByZXN1bHQuaGVpZ2h0OwoJICBjb25zdCB3aWR0aCA9IHJlc3VsdC53aWR0aDsKCgkgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7CgkgICAgcmVzdWx0Lm1heHMgPSBbXTsKCSAgICByZXN1bHQubWlucyA9IFtdOwoJICAgIHJlc3VsdC5yYW5nZXMgPSBbXTsKCgkgICAgbGV0IG1heDsgbGV0IG1pbjsKCgkgICAgLy8gY29uc29sZS5sb2coInN0YXJ0aW5nIHRvIGdldCBtaW4sIG1heCBhbmQgcmFuZ2VzIik7CgkgICAgZm9yIChsZXQgcmFzdGVySW5kZXggPSAwOyByYXN0ZXJJbmRleCA8IHJlc3VsdC5udW1iZXJPZlJhc3RlcnM7IHJhc3RlckluZGV4KyspIHsKCSAgICAgIGNvbnN0IHJvd3MgPSByZXN1bHQudmFsdWVzW3Jhc3RlckluZGV4XTsKCSAgICAgIGlmIChkZWJ1ZykgY29uc29sZS5sb2coJ1tnZW9yYXN0ZXJdIHJvd3M6Jywgcm93cyk7CgoJICAgICAgZm9yIChsZXQgcm93SW5kZXggPSAwOyByb3dJbmRleCA8IGhlaWdodDsgcm93SW5kZXgrKykgewoJICAgICAgICBjb25zdCByb3cgPSByb3dzW3Jvd0luZGV4XTsKCgkgICAgICAgIGZvciAobGV0IGNvbHVtbkluZGV4ID0gMDsgY29sdW1uSW5kZXggPCB3aWR0aDsgY29sdW1uSW5kZXgrKykgewoJICAgICAgICAgIGNvbnN0IHZhbHVlID0gcm93W2NvbHVtbkluZGV4XTsKCSAgICAgICAgICBpZiAodmFsdWUgIT0gbm9EYXRhVmFsdWUgJiYgIWlzTmFOKHZhbHVlKSkgewoJICAgICAgICAgICAgaWYgKHR5cGVvZiBtaW4gPT09ICd1bmRlZmluZWQnIHx8IHZhbHVlIDwgbWluKSBtaW4gPSB2YWx1ZTsKCSAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiBtYXggPT09ICd1bmRlZmluZWQnIHx8IHZhbHVlID4gbWF4KSBtYXggPSB2YWx1ZTsKCSAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgIH0KCgkgICAgICByZXN1bHQubWF4cy5wdXNoKG1heCk7CgkgICAgICByZXN1bHQubWlucy5wdXNoKG1pbik7CgkgICAgICByZXN1bHQucmFuZ2VzLnB1c2gobWF4IC0gbWluKTsKCSAgICB9CgoJICAgIHJlc29sdmUocmVzdWx0KTsKCSAgfSk7Cgl9CgoJLyogV2UncmUgbm90IHVzaW5nIGFzeW5jIGJlY2F1c2UgdHJ5aW5nIHRvIGF2b2lkIGRlcGVuZGVuY3kgb24gYmFiZWwncyBwb2x5ZmlsbAoJVGhlcmUgY2FuIGJlIGNvbmZsaWN0cyB3aGVuIEdlb1Jhc3RlciBpcyB1c2VkIGluIGFub3RoZXIgcHJvamVjdCB0aGF0IGlzIGFsc28KCXVzaW5nIEBiYWJlbC9wb2x5ZmlsbCAqLwoJZnVuY3Rpb24gcGFyc2VEYXRhKGRhdGEsIGRlYnVnKSB7CgkgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7CgkgICAgdHJ5IHsKCSAgICAgIGlmIChkZWJ1ZykgY29uc29sZS5sb2coJ3N0YXJ0aW5nIHBhcnNlRGF0YSB3aXRoJywgZGF0YSk7CgkgICAgICBpZiAoZGVidWcpIGNvbnNvbGUubG9nKCdcdEdlb1RJRkY6JywgdHlwZW9mIEdlb1RJRkYpOwoKCSAgICAgIGNvbnN0IHJlc3VsdCA9IHt9OwoKCSAgICAgIGxldCBoZWlnaHQsIHdpZHRoOwoKCSAgICAgIGlmIChkYXRhLnJhc3RlclR5cGUgPT09ICdvYmplY3QnKSB7CgkgICAgICAgIHJlc3VsdC52YWx1ZXMgPSBkYXRhLmRhdGE7CgkgICAgICAgIHJlc3VsdC5oZWlnaHQgPSBoZWlnaHQgPSBkYXRhLm1ldGFkYXRhLmhlaWdodCB8fCByZXN1bHQudmFsdWVzWzBdLmxlbmd0aDsKCSAgICAgICAgcmVzdWx0LndpZHRoID0gd2lkdGggPSBkYXRhLm1ldGFkYXRhLndpZHRoIHx8IHJlc3VsdC52YWx1ZXNbMF1bMF0ubGVuZ3RoOwoJICAgICAgICByZXN1bHQucGl4ZWxIZWlnaHQgPSBkYXRhLm1ldGFkYXRhLnBpeGVsSGVpZ2h0OwoJICAgICAgICByZXN1bHQucGl4ZWxXaWR0aCA9IGRhdGEubWV0YWRhdGEucGl4ZWxXaWR0aDsKCSAgICAgICAgcmVzdWx0LnByb2plY3Rpb24gPSBkYXRhLm1ldGFkYXRhLnByb2plY3Rpb247CgkgICAgICAgIHJlc3VsdC54bWluID0gZGF0YS5tZXRhZGF0YS54bWluOwoJICAgICAgICByZXN1bHQueW1heCA9IGRhdGEubWV0YWRhdGEueW1heDsKCSAgICAgICAgcmVzdWx0Lm5vRGF0YVZhbHVlID0gZGF0YS5tZXRhZGF0YS5ub0RhdGFWYWx1ZTsKCSAgICAgICAgcmVzdWx0Lm51bWJlck9mUmFzdGVycyA9IHJlc3VsdC52YWx1ZXMubGVuZ3RoOwoJICAgICAgICByZXN1bHQueG1heCA9IHJlc3VsdC54bWluICsgcmVzdWx0LndpZHRoICogcmVzdWx0LnBpeGVsV2lkdGg7CgkgICAgICAgIHJlc3VsdC55bWluID0gcmVzdWx0LnltYXggLSByZXN1bHQuaGVpZ2h0ICogcmVzdWx0LnBpeGVsSGVpZ2h0OwoJICAgICAgICByZXN1bHQuX2RhdGEgPSBudWxsOwoJICAgICAgICByZXNvbHZlKHByb2Nlc3NSZXN1bHQocmVzdWx0KSk7CgkgICAgICB9IGVsc2UgaWYgKGRhdGEucmFzdGVyVHlwZSA9PT0gJ2dlb3RpZmYnKSB7CgkgICAgICAgIHJlc3VsdC5fZGF0YSA9IGRhdGEuZGF0YTsKCgkgICAgICAgIGxldCBpbml0RnVuY3Rpb24gPSBnZW90aWZmLmV4cG9ydHMuZnJvbUFycmF5QnVmZmVyOwoJICAgICAgICBpZiAoZGF0YS5zb3VyY2VUeXBlID09PSAndXJsJykgewoJICAgICAgICAgIGluaXRGdW5jdGlvbiA9IGdlb3RpZmYuZXhwb3J0cy5mcm9tVXJsOwoJICAgICAgICB9IGVsc2UgaWYgKGRhdGEuc291cmNlVHlwZSA9PT0gJ0Jsb2InKSB7CgkgICAgICAgICAgaW5pdEZ1bmN0aW9uID0gZ2VvdGlmZi5leHBvcnRzLmZyb21CbG9iOwoJICAgICAgICB9CgoJICAgICAgICBpZiAoZGVidWcpIGNvbnNvbGUubG9nKCdkYXRhLnJhc3RlclR5cGUgaXMgZ2VvdGlmZicpOwoJICAgICAgICByZXNvbHZlKGluaXRGdW5jdGlvbihkYXRhLmRhdGEpLnRoZW4oZ2VvdGlmZiA9PiB7CgkgICAgICAgICAgaWYgKGRlYnVnKSBjb25zb2xlLmxvZygnZ2VvdGlmZjonLCBnZW90aWZmKTsKCSAgICAgICAgICByZXR1cm4gZ2VvdGlmZi5nZXRJbWFnZSgpLnRoZW4oaW1hZ2UgPT4gewoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgaWYgKGRlYnVnKSBjb25zb2xlLmxvZygnaW1hZ2U6JywgaW1hZ2UpOwoKCSAgICAgICAgICAgICAgY29uc3QgZmlsZURpcmVjdG9yeSA9IGltYWdlLmZpbGVEaXJlY3Rvcnk7CgoJICAgICAgICAgICAgICBjb25zdCB7CgkgICAgICAgICAgICAgICAgR2VvZ3JhcGhpY1R5cGVHZW9LZXksCgkgICAgICAgICAgICAgICAgUHJvamVjdGVkQ1NUeXBlR2VvS2V5LAoJICAgICAgICAgICAgICB9ID0gaW1hZ2UuZ2V0R2VvS2V5cygpOwoKCSAgICAgICAgICAgICAgcmVzdWx0LnByb2plY3Rpb24gPSBQcm9qZWN0ZWRDU1R5cGVHZW9LZXkgfHwgR2VvZ3JhcGhpY1R5cGVHZW9LZXk7CgkgICAgICAgICAgICAgIGlmIChkZWJ1ZykgY29uc29sZS5sb2coJ3Byb2plY3Rpb246JywgcmVzdWx0LnByb2plY3Rpb24pOwoKCSAgICAgICAgICAgICAgcmVzdWx0LmhlaWdodCA9IGhlaWdodCA9IGltYWdlLmdldEhlaWdodCgpOwoJICAgICAgICAgICAgICBpZiAoZGVidWcpIGNvbnNvbGUubG9nKCdyZXN1bHQuaGVpZ2h0OicsIHJlc3VsdC5oZWlnaHQpOwoJICAgICAgICAgICAgICByZXN1bHQud2lkdGggPSB3aWR0aCA9IGltYWdlLmdldFdpZHRoKCk7CgkgICAgICAgICAgICAgIGlmIChkZWJ1ZykgY29uc29sZS5sb2coJ3Jlc3VsdC53aWR0aDonLCByZXN1bHQud2lkdGgpOwoKCSAgICAgICAgICAgICAgY29uc3QgW3Jlc29sdXRpb25YLCByZXNvbHV0aW9uWV0gPSBpbWFnZS5nZXRSZXNvbHV0aW9uKCk7CgkgICAgICAgICAgICAgIHJlc3VsdC5waXhlbEhlaWdodCA9IE1hdGguYWJzKHJlc29sdXRpb25ZKTsKCSAgICAgICAgICAgICAgcmVzdWx0LnBpeGVsV2lkdGggPSBNYXRoLmFicyhyZXNvbHV0aW9uWCk7CgoJICAgICAgICAgICAgICBjb25zdCBbb3JpZ2luWCwgb3JpZ2luWV0gPSBpbWFnZS5nZXRPcmlnaW4oKTsKCSAgICAgICAgICAgICAgcmVzdWx0LnhtaW4gPSBvcmlnaW5YOwoJICAgICAgICAgICAgICByZXN1bHQueG1heCA9IHJlc3VsdC54bWluICsgd2lkdGggKiByZXN1bHQucGl4ZWxXaWR0aDsKCSAgICAgICAgICAgICAgcmVzdWx0LnltYXggPSBvcmlnaW5ZOwoJICAgICAgICAgICAgICByZXN1bHQueW1pbiA9IHJlc3VsdC55bWF4IC0gaGVpZ2h0ICogcmVzdWx0LnBpeGVsSGVpZ2h0OwoKCSAgICAgICAgICAgICAgcmVzdWx0Lm5vRGF0YVZhbHVlID0gZmlsZURpcmVjdG9yeS5HREFMX05PREFUQSA/IHBhcnNlRmxvYXQoZmlsZURpcmVjdG9yeS5HREFMX05PREFUQSkgOiBudWxsOwoKCSAgICAgICAgICAgICAgcmVzdWx0Lm51bWJlck9mUmFzdGVycyA9IGZpbGVEaXJlY3RvcnkuU2FtcGxlc1BlclBpeGVsOwoKCSAgICAgICAgICAgICAgaWYgKGZpbGVEaXJlY3RvcnkuQ29sb3JNYXApIHsKCSAgICAgICAgICAgICAgICByZXN1bHQucGFsZXR0ZSA9IGdlb3RpZmZQYWxldHRlLmdldFBhbGV0dGUoaW1hZ2UpOwoJICAgICAgICAgICAgICB9CgoJICAgICAgICAgICAgICBpZiAoZGF0YS5zb3VyY2VUeXBlICE9PSAndXJsJykgewoJICAgICAgICAgICAgICAgIHJldHVybiBpbWFnZS5yZWFkUmFzdGVycygpLnRoZW4ocmFzdGVycyA9PiB7CgkgICAgICAgICAgICAgICAgICByZXN1bHQudmFsdWVzID0gcmFzdGVycy5tYXAodmFsdWVzSW5PbmVEaW1lbnNpb24gPT4gewoJICAgICAgICAgICAgICAgICAgICByZXR1cm4gdW5mbGF0dGVuKHZhbHVlc0luT25lRGltZW5zaW9uLCB7aGVpZ2h0LCB3aWR0aH0pOwoJICAgICAgICAgICAgICAgICAgfSk7CgkgICAgICAgICAgICAgICAgICByZXR1cm4gcHJvY2Vzc1Jlc3VsdChyZXN1bHQpOwoJICAgICAgICAgICAgICAgIH0pOwoJICAgICAgICAgICAgICB9IGVsc2UgewoJICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7CgkgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CgkgICAgICAgICAgICAgIHJlamVjdChlcnJvcik7CgkgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1tnZW9yYXN0ZXJdIGVycm9yIHBhcnNpbmcgZ2VvcmFzdGVyOicsIGVycm9yKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICB9KTsKCSAgICAgICAgfSkpOwoJICAgICAgfQoJICAgIH0gY2F0Y2ggKGVycm9yKSB7CgkgICAgICByZWplY3QoZXJyb3IpOwoJICAgICAgY29uc29sZS5lcnJvcignW2dlb3Jhc3Rlcl0gZXJyb3IgcGFyc2luZyBnZW9yYXN0ZXI6JywgZXJyb3IpOwoJICAgIH0KCSAgfSk7Cgl9CgoJb25tZXNzYWdlID0gZSA9PiB7CgkgIGNvbnN0IGRhdGEgPSBlLmRhdGE7CgkgIHBhcnNlRGF0YShkYXRhKS50aGVuKHJlc3VsdCA9PiB7CgkgICAgaWYgKHJlc3VsdC5fZGF0YSBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKSB7CgkgICAgICBwb3N0TWVzc2FnZShyZXN1bHQsIFtyZXN1bHQuX2RhdGFdKTsKCSAgICB9IGVsc2UgewoJICAgICAgcG9zdE1lc3NhZ2UocmVzdWx0KTsKCSAgICB9CgkgICAgY2xvc2UoKTsKCSAgfSk7Cgl9OwoKfSkoKTsKCg==', null, false);
    /* eslint-enable */

    var commonjsGlobal = typeof globalThis !== 'undefined' ? globalThis : typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};

    var geotiff = {exports: {}};

    (function (module, exports) {
    !function(e,t){t(exports);}(commonjsGlobal,(function(e){function t(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function r(e){if(Array.isArray(e))return e}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function i(e,t){if(e){if("string"==typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return "Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}}function a(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(e,t){return r(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,a=[],o=!0,s=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);o=!0);}catch(e){s=!0,i=e;}finally{try{o||null==r.return||r.return();}finally{if(s)throw i}}return a}}(e,t)||i(e,t)||a()}function s(e,t,r,n,i,a,o){try{var s=e[a](o),u=s.value;}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,i);}function u(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var a=e.apply(t,r);function o(e){s(a,n,i,o,u,"next",e);}function u(e){s(a,n,i,o,u,"throw",e);}o(void 0);}))}}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n);}}function c(e,t,r){return t&&f(e.prototype,t),r&&f(e,r),e}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t);}function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e,t){if(t&&("object"===d(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return p(e)}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}function y(){if("undefined"==typeof Reflect||!Reflect.construct)return !1;if(Reflect.construct.sham)return !1;if("function"==typeof Proxy)return !0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return !1}}function g(e,t,r){return g=y()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);var i=new(Function.bind.apply(e,n));return r&&l(i,r.prototype),i},g.apply(null,arguments)}function w(e){var t="function"==typeof Map?new Map:void 0;return w=function(e){if(null===e||(r=e,-1===Function.toString.call(r).indexOf("[native code]")))return e;var r;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n);}function n(){return g(e,arguments,v(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),l(n,e)},w(e)}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var k={exports:{}};!function(e){var t=function(e){var t,r=Object.prototype,n=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"");}catch(e){u=function(e,t,r){return e[t]=r};}function f(e,t,r,n){var i=t&&t.prototype instanceof y?t:y,a=Object.create(i.prototype),o=new U(n||[]);return a._invoke=function(e,t,r){var n=l;return function(i,a){if(n===p)throw new Error("Generator is already running");if(n===m){if("throw"===i)throw a;return D()}for(r.method=i,r.arg=a;;){var o=r.delegate;if(o){var s=P(o,r);if(s){if(s===v)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===l)throw n=m,r.arg;r.dispatchException(r.arg);}else "return"===r.method&&r.abrupt("return",r.arg);n=p;var u=c(e,t,r);if("normal"===u.type){if(n=r.done?m:h,u.arg===v)continue;return {value:u.arg,done:r.done}}"throw"===u.type&&(n=m,r.method="throw",r.arg=u.arg);}}}(e,r,o),a}function c(e,t,r){try{return {type:"normal",arg:e.call(t,r)}}catch(e){return {type:"throw",arg:e}}}e.wrap=f;var l="suspendedStart",h="suspendedYield",p="executing",m="completed",v={};function y(){}function g(){}function w(){}var b={};u(b,a,(function(){return this}));var k=Object.getPrototypeOf,x=k&&k(k(O([])));x&&x!==r&&n.call(x,a)&&(b=x);var A=w.prototype=y.prototype=Object.create(b);function _(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}));}));}function I(e,t){function r(i,a,o,s){var u=c(e[i],e,a);if("throw"!==u.type){var f=u.arg,l=f.value;return l&&"object"===d(l)&&n.call(l,"__await")?t.resolve(l.__await).then((function(e){r("next",e,o,s);}),(function(e){r("throw",e,o,s);})):t.resolve(l).then((function(e){f.value=e,o(f);}),(function(e){return r("throw",e,o,s)}))}s(u.arg);}var i;this._invoke=function(e,n){function a(){return new t((function(t,i){r(e,n,t,i);}))}return i=i?i.then(a,a):a()};}function P(e,r){var n=e.iterator[r.method];if(n===t){if(r.delegate=null,"throw"===r.method){if(e.iterator.return&&(r.method="return",r.arg=t,P(e,r),"throw"===r.method))return v;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method");}return v}var i=c(n,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t);}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t;}function U(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0);}function O(e){if(e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function r(){for(;++i<e.length;)if(n.call(e,i))return r.value=e[i],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}return {next:D}}function D(){return {value:t,done:!0}}return g.prototype=w,u(A,"constructor",w),u(w,"constructor",g),g.displayName=u(w,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return !!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,w):(e.__proto__=w,u(e,s,"GeneratorFunction")),e.prototype=Object.create(A),e},e.awrap=function(e){return {__await:e}},_(I.prototype),u(I.prototype,o,(function(){return this})),e.AsyncIterator=I,e.async=function(t,r,n,i,a){void 0===a&&(a=Promise);var o=new I(f(t,r,n,i),a);return e.isGeneratorFunction(r)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},_(A),u(A,s,"Generator"),u(A,a,(function(){return this})),u(A,"toString",(function(){return "[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=O,U.prototype={constructor:U,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(T),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t);},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function i(n,i){return s.type="throw",s.arg=e,r.next=n,i&&(r.method="next",r.arg=t),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var u=n.call(o,"catchLoc"),f=n.call(o,"finallyLoc");if(u&&f){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else {if(!f)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return "break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),T(r),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;T(r);}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:O(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}(e.exports);try{regeneratorRuntime=t;}catch(e){"object"===("undefined"==typeof globalThis?"undefined":d(globalThis))?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t);}}(k);for(var x=k.exports,A=new ArrayBuffer(4),_=new Float32Array(A),I=new Uint32Array(A),P=new Uint32Array(512),S=new Uint32Array(512),T=0;T<256;++T){var U=T-127;U<-27?(P[T]=0,P[256|T]=32768,S[T]=24,S[256|T]=24):U<-14?(P[T]=1024>>-U-14,P[256|T]=1024>>-U-14|32768,S[T]=-U-1,S[256|T]=-U-1):U<=15?(P[T]=U+15<<10,P[256|T]=U+15<<10|32768,S[T]=13,S[256|T]=13):U<128?(P[T]=31744,P[256|T]=64512,S[T]=24,S[256|T]=24):(P[T]=31744,P[256|T]=64512,S[T]=13,S[256|T]=13);}var O=new Uint32Array(2048),D=new Uint32Array(64),E=new Uint32Array(64);O[0]=0;for(var R=1;R<1024;++R){for(var M=R<<13,B=0;0==(8388608&M);)B-=8388608,M<<=1;M&=-8388609,B+=947912704,O[R]=M|B;}for(var C=1024;C<2048;++C)O[C]=939524096+(C-1024<<13);D[0]=0;for(var L=1;L<31;++L)D[L]=L<<23;D[31]=1199570944,D[32]=2147483648;for(var F=33;F<63;++F)D[F]=2147483648+(F-32<<23);D[63]=3347054592,E[0]=0;for(var V=1;V<64;++V)E[V]=32===V?0:1024;function G(e){var t=e>>10;return I[0]=O[E[t]+(1023&e)]+D[t],_[0]}function j(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function z(e){return function(e){if(Array.isArray(e))return n(e)}(e)||j(e)||i(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var N=Reflect.getPrototypeOf(Uint8Array).prototype,K=Reflect.getOwnPropertyDescriptor(N,Symbol.toStringTag).get;var Z=Object.prototype.toString;function H(e){return !!ArrayBuffer.isView(e)&&(!function(e){return void 0!==K.call(e)}(e)&&"[object DataView]"===Z.call(e))}function Y(e,t){if(!H(e))throw new TypeError("First argument to getFloat16 function must be a DataView");for(var r=arguments.length,n=new Array(r>2?r-2:0),i=2;i<r;i++)n[i-2]=arguments[i];return G(e.getUint16.apply(e,[t].concat(n)))}var q=function(e,t,r){var n=r&&r.debug||!1;n&&console.log("getting "+t+" in "+e);var i="object"===d(e)?e.outer:e,a="".concat(t,'\\="([^"]*)"');n&&console.log("pattern:",a);var o=new RegExp(a).exec(i);if(n&&console.log("match:",o),o)return o[1]};var X=function(e,t,r){var n=new RegExp(t).exec(e.slice(r));return n?r+n.index:-1};var W=function(e,t,r){var n=r&&r.debug||!1,i=r&&r.startIndex||0;n&&console.log("starting findTagByName with",t," and ",r);var a=X(e,"<".concat(t,"[ >]"),i);if(n&&console.log("start:",a),-1!==a){var o=e.slice(a+t.length),s=X(o,"[ /]"+t+">",0),u=-1===s;u&&(s=X(o,"[ /]>",0));var f=a+t.length+s+1+(u?0:t.length)+1;if(n&&console.log("end:",f),-1!==f){var c=e.slice(a,f);return {inner:u?null:c.slice(c.indexOf(">")+1,c.lastIndexOf("<")),outer:c,start:a,end:f}}}};var J=function(e,t,r){for(var n,i=[],a=r&&r.debug||!1,o=r&&r.startIndex||0;n=W(e,t,{debug:a,startIndex:o});)o=n.end,i.push(n);return a&&console.log("findTagsByName found",i.length,"tags"),i},Q={315:"Artist",258:"BitsPerSample",265:"CellLength",264:"CellWidth",320:"ColorMap",259:"Compression",33432:"Copyright",306:"DateTime",338:"ExtraSamples",266:"FillOrder",289:"FreeByteCounts",288:"FreeOffsets",291:"GrayResponseCurve",290:"GrayResponseUnit",316:"HostComputer",270:"ImageDescription",257:"ImageLength",256:"ImageWidth",271:"Make",281:"MaxSampleValue",280:"MinSampleValue",272:"Model",254:"NewSubfileType",274:"Orientation",262:"PhotometricInterpretation",284:"PlanarConfiguration",296:"ResolutionUnit",278:"RowsPerStrip",277:"SamplesPerPixel",305:"Software",279:"StripByteCounts",273:"StripOffsets",255:"SubfileType",263:"Threshholding",282:"XResolution",283:"YResolution",326:"BadFaxLines",327:"CleanFaxData",343:"ClipPath",328:"ConsecutiveBadFaxLines",433:"Decode",434:"DefaultImageColor",269:"DocumentName",336:"DotRange",321:"HalftoneHints",346:"Indexed",347:"JPEGTables",285:"PageName",297:"PageNumber",317:"Predictor",319:"PrimaryChromaticities",532:"ReferenceBlackWhite",339:"SampleFormat",340:"SMinSampleValue",341:"SMaxSampleValue",559:"StripRowCounts",330:"SubIFDs",292:"T4Options",293:"T6Options",325:"TileByteCounts",323:"TileLength",324:"TileOffsets",322:"TileWidth",301:"TransferFunction",318:"WhitePoint",344:"XClipPathUnits",286:"XPosition",529:"YCbCrCoefficients",531:"YCbCrPositioning",530:"YCbCrSubSampling",345:"YClipPathUnits",287:"YPosition",37378:"ApertureValue",40961:"ColorSpace",36868:"DateTimeDigitized",36867:"DateTimeOriginal",34665:"Exif IFD",36864:"ExifVersion",33434:"ExposureTime",41728:"FileSource",37385:"Flash",40960:"FlashpixVersion",33437:"FNumber",42016:"ImageUniqueID",37384:"LightSource",37500:"MakerNote",37377:"ShutterSpeedValue",37510:"UserComment",33723:"IPTC",34675:"ICC Profile",700:"XMP",42112:"GDAL_METADATA",42113:"GDAL_NODATA",34377:"Photoshop",33550:"ModelPixelScale",33922:"ModelTiepoint",34264:"ModelTransformation",34735:"GeoKeyDirectory",34736:"GeoDoubleParams",34737:"GeoAsciiParams",50674:"LercParameters"},$={};for(var ee in Q)Q.hasOwnProperty(ee)&&($[Q[ee]]=parseInt(ee,10));var te={256:"SHORT",257:"SHORT",258:"SHORT",259:"SHORT",262:"SHORT",273:"LONG",274:"SHORT",277:"SHORT",278:"LONG",279:"LONG",282:"RATIONAL",283:"RATIONAL",284:"SHORT",286:"SHORT",287:"RATIONAL",296:"SHORT",297:"SHORT",305:"ASCII",306:"ASCII",338:"SHORT",339:"SHORT",513:"LONG",514:"LONG",1024:"SHORT",1025:"SHORT",2048:"SHORT",2049:"ASCII",3072:"SHORT",3073:"ASCII",33550:"DOUBLE",33922:"DOUBLE",34665:"LONG",34735:"SHORT",34737:"ASCII",42113:"ASCII"},re=[$.BitsPerSample,$.ExtraSamples,$.SampleFormat,$.StripByteCounts,$.StripOffsets,$.StripRowCounts,$.TileByteCounts,$.TileOffsets,$.SubIFDs],ne={1:"BYTE",2:"ASCII",3:"SHORT",4:"LONG",5:"RATIONAL",6:"SBYTE",7:"UNDEFINED",8:"SSHORT",9:"SLONG",10:"SRATIONAL",11:"FLOAT",12:"DOUBLE",13:"IFD",16:"LONG8",17:"SLONG8",18:"IFD8"},ie={};for(var ae in ne)ne.hasOwnProperty(ae)&&(ie[ne[ae]]=parseInt(ae,10));var oe={WhiteIsZero:0,BlackIsZero:1,RGB:2,Palette:3,TransparencyMask:4,CMYK:5,YCbCr:6,CIELab:8,ICCLab:9},se={Unspecified:0,Assocalpha:1,Unassalpha:2},ue={Version:0,AddCompression:1},fe={None:0,Deflate:1},ce={1024:"GTModelTypeGeoKey",1025:"GTRasterTypeGeoKey",1026:"GTCitationGeoKey",2048:"GeographicTypeGeoKey",2049:"GeogCitationGeoKey",2050:"GeogGeodeticDatumGeoKey",2051:"GeogPrimeMeridianGeoKey",2052:"GeogLinearUnitsGeoKey",2053:"GeogLinearUnitSizeGeoKey",2054:"GeogAngularUnitsGeoKey",2055:"GeogAngularUnitSizeGeoKey",2056:"GeogEllipsoidGeoKey",2057:"GeogSemiMajorAxisGeoKey",2058:"GeogSemiMinorAxisGeoKey",2059:"GeogInvFlatteningGeoKey",2060:"GeogAzimuthUnitsGeoKey",2061:"GeogPrimeMeridianLongGeoKey",2062:"GeogTOWGS84GeoKey",3072:"ProjectedCSTypeGeoKey",3073:"PCSCitationGeoKey",3074:"ProjectionGeoKey",3075:"ProjCoordTransGeoKey",3076:"ProjLinearUnitsGeoKey",3077:"ProjLinearUnitSizeGeoKey",3078:"ProjStdParallel1GeoKey",3079:"ProjStdParallel2GeoKey",3080:"ProjNatOriginLongGeoKey",3081:"ProjNatOriginLatGeoKey",3082:"ProjFalseEastingGeoKey",3083:"ProjFalseNorthingGeoKey",3084:"ProjFalseOriginLongGeoKey",3085:"ProjFalseOriginLatGeoKey",3086:"ProjFalseOriginEastingGeoKey",3087:"ProjFalseOriginNorthingGeoKey",3088:"ProjCenterLongGeoKey",3089:"ProjCenterLatGeoKey",3090:"ProjCenterEastingGeoKey",3091:"ProjCenterNorthingGeoKey",3092:"ProjScaleAtNatOriginGeoKey",3093:"ProjScaleAtCenterGeoKey",3094:"ProjAzimuthAngleGeoKey",3095:"ProjStraightVertPoleLongGeoKey",3096:"ProjRectifiedGridAngleGeoKey",4096:"VerticalCSTypeGeoKey",4097:"VerticalCitationGeoKey",4098:"VerticalDatumGeoKey",4099:"VerticalUnitsGeoKey"},le={};for(var he in ce)ce.hasOwnProperty(he)&&(le[ce[he]]=parseInt(he,10));var de=Object.freeze({__proto__:null,fieldTagNames:Q,fieldTags:$,fieldTagTypes:te,arrayFields:re,fieldTypeNames:ne,fieldTypes:ie,photometricInterpretations:oe,ExtraSamplesValues:se,LercParameters:ue,LercAddCompression:fe,geoKeyNames:ce,geoKeys:le});function pe(e,t){for(var r,n=e.width,i=e.height,a=new Uint8Array(n*i*3),o=0,s=0;o<e.length;++o,s+=3)r=256-e[o]/t*256,a[s]=r,a[s+1]=r,a[s+2]=r;return a}function me(e,t){for(var r,n=e.width,i=e.height,a=new Uint8Array(n*i*3),o=0,s=0;o<e.length;++o,s+=3)r=e[o]/t*256,a[s]=r,a[s+1]=r,a[s+2]=r;return a}function ve(e,t){for(var r=e.width,n=e.height,i=new Uint8Array(r*n*3),a=t.length/3,o=t.length/3*2,s=0,u=0;s<e.length;++s,u+=3){var f=e[s];i[u]=t[f]/65536*256,i[u+1]=t[f+a]/65536*256,i[u+2]=t[f+o]/65536*256;}return i}function ye(e){for(var t=e.width,r=e.height,n=new Uint8Array(t*r*3),i=0,a=0;i<e.length;i+=4,a+=3){var o=e[i],s=e[i+1],u=e[i+2],f=e[i+3];n[a]=(255-o)/256*255*((255-f)/256),n[a+1]=(255-s)/256*255*((255-f)/256),n[a+2]=(255-u)/256*255*((255-f)/256);}return n}function ge(e){for(var t=e.width,r=e.height,n=new Uint8ClampedArray(t*r*3),i=0,a=0;i<e.length;i+=3,a+=3){var o=e[i],s=e[i+1],u=e[i+2];n[a]=o+1.402*(u-128),n[a+1]=o-.34414*(s-128)-.71414*(u-128),n[a+2]=o+1.772*(s-128);}return n}function we(e){for(var t=e.width,r=e.height,n=new Uint8Array(t*r*3),i=0,a=0;i<e.length;i+=3,a+=3){var o=(e[i+0]+16)/116,s=(e[i+1]<<24>>24)/500+o,u=o-(e[i+2]<<24>>24)/200,f=void 0,c=void 0,l=void 0;c=-.9689*(s=.95047*(s*s*s>.008856?s*s*s:(s-16/116)/7.787))+1.8758*(o=1*(o*o*o>.008856?o*o*o:(o-16/116)/7.787))+.0415*(u=1.08883*(u*u*u>.008856?u*u*u:(u-16/116)/7.787)),l=.0557*s+-.204*o+1.057*u,f=(f=3.2406*s+-1.5372*o+-.4986*u)>.0031308?1.055*Math.pow(f,1/2.4)-.055:12.92*f,c=c>.0031308?1.055*Math.pow(c,1/2.4)-.055:12.92*c,l=l>.0031308?1.055*Math.pow(l,1/2.4)-.055:12.92*l,n[a]=255*Math.max(0,Math.min(1,f)),n[a+1]=255*Math.max(0,Math.min(1,c)),n[a+2]=255*Math.max(0,Math.min(1,l));}return n}var be=Object.freeze({__proto__:null,fromWhiteIsZero:pe,fromBlackIsZero:me,fromPalette:ve,fromCMYK:ye,fromYCbCr:ge,fromCIELab:we}),ke=new Map;function xe(e,t){Array.isArray(e)||(e=[e]),e.forEach((function(e){return ke.set(e,t)}));}function Ae(e){return _e.apply(this,arguments)}function _e(){return (_e=u(x.mark((function e(t){var r,n;return x.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=ke.get(t.Compression)){e.next=3;break}throw new Error("Unknown compression method identifier: ".concat(t.Compression));case 3:return e.next=5,r();case 5:return n=e.sent,e.abrupt("return",new n(t));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ie(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return new(Object.getPrototypeOf(e).constructor)(t*r*n)}function Pe(e,t,r,n,i){var a=t/n,o=r/i;return e.map((function(e){for(var s=Ie(e,n,i),u=0;u<i;++u)for(var f=Math.min(Math.round(o*u),r-1),c=0;c<n;++c){var l=Math.min(Math.round(a*c),t-1),h=e[f*t+l];s[u*n+c]=h;}return s}))}function Se(e,t,r){return (1-r)*e+r*t}function Te(e,t,r,n,i){var a=t/n,o=r/i;return e.map((function(e){for(var s=Ie(e,n,i),u=0;u<i;++u)for(var f=o*u,c=Math.floor(f),l=Math.min(Math.ceil(f),r-1),h=0;h<n;++h){var d=a*h,p=d%1,m=Math.floor(d),v=Math.min(Math.ceil(d),t-1),y=e[c*t+m],g=e[c*t+v],w=e[l*t+m],b=e[l*t+v],k=Se(Se(y,g,p),Se(w,b,p),f%1);s[u*n+h]=k;}return s}))}function Ue(e,t,r,n,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"nearest";switch(a.toLowerCase()){case"nearest":return Pe(e,t,r,n,i);case"bilinear":case"linear":return Te(e,t,r,n,i);default:throw new Error("Unsupported resampling method: '".concat(a,"'"))}}function Oe(e,t,r,n,i,a){for(var o=t/n,s=r/i,u=Ie(e,n,i,a),f=0;f<i;++f)for(var c=Math.min(Math.round(s*f),r-1),l=0;l<n;++l)for(var h=Math.min(Math.round(o*l),t-1),d=0;d<a;++d){var p=e[c*t*a+h*a+d];u[f*n*a+l*a+d]=p;}return u}function De(e,t,r,n,i,a){for(var o=t/n,s=r/i,u=Ie(e,n,i,a),f=0;f<i;++f)for(var c=s*f,l=Math.floor(c),h=Math.min(Math.ceil(c),r-1),d=0;d<n;++d)for(var p=o*d,m=p%1,v=Math.floor(p),y=Math.min(Math.ceil(p),t-1),g=0;g<a;++g){var w=e[l*t*a+v*a+g],b=e[l*t*a+y*a+g],k=e[h*t*a+v*a+g],x=e[h*t*a+y*a+g],A=Se(Se(w,b,m),Se(k,x,m),c%1);u[f*n*a+d*a+g]=A;}return u}function Ee(e,t,r,n,i,a){var o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"nearest";switch(o.toLowerCase()){case"nearest":return Oe(e,t,r,n,i,a);case"bilinear":case"linear":return De(e,t,r,n,i,a);default:throw new Error("Unsupported resampling method: '".concat(o,"'"))}}function Re(e,t,r){for(var n=0,i=t;i<r;++i)n+=e[i];return n}function Me(e,t,r){switch(e){case 1:if(t<=8)return new Uint8Array(r);if(t<=16)return new Uint16Array(r);if(t<=32)return new Uint32Array(r);break;case 2:if(8===t)return new Int8Array(r);if(16===t)return new Int16Array(r);if(32===t)return new Int32Array(r);break;case 3:switch(t){case 16:case 32:return new Float32Array(r);case 64:return new Float64Array(r)}}throw Error("Unsupported data format/bitsPerSample")}function Be(e,t){return (1!==e&&2!==e||!(t<=32)||t%8!=0)&&(3!==e||16!==t&&32!==t&&64!==t)}function Ce(e,t,r,n,i,a,o){var s=new DataView(e),u=2===r?1:n,f=Me(t,i,2===r?o*a:o*a*n),c=parseInt("1".repeat(i),2);if(1===t){var l=a*(1===r?n*i:i);0!=(7&l)&&(l=l+7&-8);for(var h=0;h<o;++h)for(var d=h*l,p=0;p<a;++p)for(var m=d+p*u*i,v=0;v<u;++v){var y=m+v*i,g=(h*a+p)*u+v,w=Math.floor(y/8),b=y%8;if(b+i<=8)f[g]=s.getUint8(w)>>8-i-b&c;else if(b+i<=16)f[g]=s.getUint16(w)>>16-i-b&c;else if(b+i<=24){var k=s.getUint16(w)<<8|s.getUint8(w+2);f[g]=k>>24-i-b&c;}else f[g]=s.getUint32(w)>>32-i-b&c;}}return f.buffer}xe([void 0,1],(function(){return Promise.resolve().then((function(){return Fr})).then((function(e){return e.default}))})),xe(5,(function(){return Promise.resolve().then((function(){return Nr})).then((function(e){return e.default}))})),xe(6,(function(){throw new Error("old style JPEG compression is not supported.")})),xe(7,(function(){return Promise.resolve().then((function(){return on})).then((function(e){return e.default}))})),xe([8,32946],(function(){return Promise.resolve().then((function(){return vi})).then((function(e){return e.default}))})),xe(32773,(function(){return Promise.resolve().then((function(){return wi})).then((function(e){return e.default}))})),xe(34887,(function(){return Promise.resolve().then((function(){return _i})).then((function(e){return e.default}))})),xe(50001,(function(){return Promise.resolve().then((function(){return Si})).then((function(e){return e.default}))}));var Le=function(){function e(t,r,n,i,a,o){b(this,e),this.fileDirectory=t,this.geoKeys=r,this.dataView=n,this.littleEndian=i,this.tiles=a?{}:null,this.isTiled=!t.StripOffsets;var s=t.PlanarConfiguration;if(this.planarConfiguration=void 0===s?1:s,1!==this.planarConfiguration&&2!==this.planarConfiguration)throw new Error("Invalid planar configuration.");this.source=o;}var t,r,n,i;return c(e,[{key:"getFileDirectory",value:function(){return this.fileDirectory}},{key:"getGeoKeys",value:function(){return this.geoKeys}},{key:"getWidth",value:function(){return this.fileDirectory.ImageWidth}},{key:"getHeight",value:function(){return this.fileDirectory.ImageLength}},{key:"getSamplesPerPixel",value:function(){return void 0!==this.fileDirectory.SamplesPerPixel?this.fileDirectory.SamplesPerPixel:1}},{key:"getTileWidth",value:function(){return this.isTiled?this.fileDirectory.TileWidth:this.getWidth()}},{key:"getTileHeight",value:function(){return this.isTiled?this.fileDirectory.TileLength:void 0!==this.fileDirectory.RowsPerStrip?Math.min(this.fileDirectory.RowsPerStrip,this.getHeight()):this.getHeight()}},{key:"getBlockWidth",value:function(){return this.getTileWidth()}},{key:"getBlockHeight",value:function(e){return this.isTiled||(e+1)*this.getTileHeight()<=this.getHeight()?this.getTileHeight():this.getHeight()-e*this.getTileHeight()}},{key:"getBytesPerPixel",value:function(){for(var e=0,t=0;t<this.fileDirectory.BitsPerSample.length;++t)e+=this.getSampleByteSize(t);return e}},{key:"getSampleByteSize",value:function(e){if(e>=this.fileDirectory.BitsPerSample.length)throw new RangeError("Sample index ".concat(e," is out of range."));return Math.ceil(this.fileDirectory.BitsPerSample[e]/8)}},{key:"getReaderForSample",value:function(e){var t=this.fileDirectory.SampleFormat?this.fileDirectory.SampleFormat[e]:1,r=this.fileDirectory.BitsPerSample[e];switch(t){case 1:if(r<=8)return DataView.prototype.getUint8;if(r<=16)return DataView.prototype.getUint16;if(r<=32)return DataView.prototype.getUint32;break;case 2:if(r<=8)return DataView.prototype.getInt8;if(r<=16)return DataView.prototype.getInt16;if(r<=32)return DataView.prototype.getInt32;break;case 3:switch(r){case 16:return function(e,t){return Y(this,e,t)};case 32:return DataView.prototype.getFloat32;case 64:return DataView.prototype.getFloat64}}throw Error("Unsupported data format/bitsPerSample")}},{key:"getSampleFormat",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.fileDirectory.SampleFormat?this.fileDirectory.SampleFormat[e]:1}},{key:"getBitsPerSample",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.fileDirectory.BitsPerSample[e]}},{key:"getArrayForSample",value:function(e,t){return Me(this.getSampleFormat(e),this.getBitsPerSample(e),t)}},{key:"getTileOrStrip",value:(i=u(x.mark((function e(t,r,n,i,a){var o,s,f,c,l,h,d,p,m=this;return x.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=Math.ceil(this.getWidth()/this.getTileWidth()),s=Math.ceil(this.getHeight()/this.getTileHeight()),c=this.tiles,1===this.planarConfiguration?f=r*o+t:2===this.planarConfiguration&&(f=n*o*s+r*o+t),this.isTiled?(l=this.fileDirectory.TileOffsets[f],h=this.fileDirectory.TileByteCounts[f]):(l=this.fileDirectory.StripOffsets[f],h=this.fileDirectory.StripByteCounts[f]),e.next=7,this.source.fetch([{offset:l,length:h}],a);case 7:return d=e.sent[0],null!==c&&c[f]?p=c[f]:(p=u(x.mark((function e(){var t,n,a;return x.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.decode(m.fileDirectory,d);case 2:return t=e.sent,n=m.getSampleFormat(),a=m.getBitsPerSample(),Be(n,a)&&(t=Ce(t,n,m.planarConfiguration,m.getSamplesPerPixel(),a,m.getTileWidth(),m.getBlockHeight(r))),e.abrupt("return",t);case 7:case"end":return e.stop()}}),e)})))(),null!==c&&(c[f]=p)),e.t0=t,e.t1=r,e.t2=n,e.next=14,p;case 14:return e.t3=e.sent,e.abrupt("return",{x:e.t0,y:e.t1,sample:e.t2,data:e.t3});case 16:case"end":return e.stop()}}),e,this)}))),function(e,t,r,n,a){return i.apply(this,arguments)})},{key:"_readRaster",value:(n=u(x.mark((function e(t,r,n,i,a,o,s,u,f){var c,l,h,d,p,m,v,y,g,w,b,k,A,_,I,P,S,T,U,O,D=this;return x.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(c=this.getTileWidth(),l=this.getTileHeight(),h=this.getWidth(),d=this.getHeight(),p=Math.max(Math.floor(t[0]/c),0),m=Math.min(Math.ceil(t[2]/c),Math.ceil(h/c)),v=Math.max(Math.floor(t[1]/l),0),y=Math.min(Math.ceil(t[3]/l),Math.ceil(d/l)),g=t[2]-t[0],w=this.getBytesPerPixel(),b=[],k=[],A=0;A<r.length;++A)1===this.planarConfiguration?b.push(Re(this.fileDirectory.BitsPerSample,0,r[A])/8):b.push(0),k.push(this.getReaderForSample(r[A]));for(_=[],I=this.littleEndian,P=v;P<y;++P)for(S=p;S<m;++S)for(T=function(e){var o=e,s=r[e];2===D.planarConfiguration&&(w=D.getSampleByteSize(e));var u=D.getTileOrStrip(S,P,s,a,f).then((function(e){for(var a=e.data,s=new DataView(a),u=D.getBlockHeight(e.y),f=e.y*l,p=e.x*c,m=f+u,v=(e.x+1)*c,y=k[o],x=Math.min(u,u-(m-t[3]),d-f),A=Math.min(c,c-(v-t[2]),h-p),_=Math.max(0,t[1]-f);_<x;++_)for(var P=Math.max(0,t[0]-p);P<A;++P){var S=(_*c+P)*w,T=y.call(s,S+b[o],I),U=void 0;i?(U=(_+f-t[1])*g*r.length+(P+p-t[0])*r.length+o,n[U]=T):(U=(_+f-t[1])*g+P+p-t[0],n[o][U]=T);}}));_.push(u);},U=0;U<r.length;++U)T(U);return e.next=18,Promise.all(_);case 18:if(!(o&&t[2]-t[0]!==o||s&&t[3]-t[1]!==s)){e.next=23;break}return (O=i?Ee(n,t[2]-t[0],t[3]-t[1],o,s,r.length,u):Ue(n,t[2]-t[0],t[3]-t[1],o,s,u)).width=o,O.height=s,e.abrupt("return",O);case 23:return n.width=o||t[2]-t[0],n.height=s||t[3]-t[1],e.abrupt("return",n);case 26:case"end":return e.stop()}}),e,this)}))),function(e,t,r,i,a,o,s,u,f){return n.apply(this,arguments)})},{key:"readRasters",value:(r=u(x.mark((function e(){var t,r,n,i,a,o,s,u,f,c,l,h,d,p,m,v,y,g,w,b,k,A,_,I,P,S,T=arguments;return x.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=T.length>0&&void 0!==T[0]?T[0]:{},r=t.window,n=t.samples,i=void 0===n?[]:n,a=t.interleave,o=t.pool,s=void 0===o?null:o,u=t.width,f=t.height,c=t.resampleMethod,l=t.fillValue,h=t.signal,!((d=r||[0,0,this.getWidth(),this.getHeight()])[0]>d[2]||d[1]>d[3])){e.next=4;break}throw new Error("Invalid subsets");case 4:if(p=d[2]-d[0],m=d[3]-d[1],v=p*m,y=this.getSamplesPerPixel(),i&&i.length){e.next=12;break}for(g=0;g<y;++g)i.push(g);e.next=19;break;case 12:w=0;case 13:if(!(w<i.length)){e.next=19;break}if(!(i[w]>=y)){e.next=16;break}return e.abrupt("return",Promise.reject(new RangeError("Invalid sample index '".concat(i[w],"'."))));case 16:++w,e.next=13;break;case 19:if(a)k=this.fileDirectory.SampleFormat?Math.max.apply(null,this.fileDirectory.SampleFormat):1,A=Math.max.apply(null,this.fileDirectory.BitsPerSample),b=Me(k,A,v*i.length),l&&b.fill(l);else for(b=[],_=0;_<i.length;++_)I=this.getArrayForSample(i[_],v),Array.isArray(l)&&_<l.length?I.fill(l[_]):l&&!Array.isArray(l)&&I.fill(l),b.push(I);if(e.t0=s,e.t0){e.next=25;break}return e.next=24,Ae(this.fileDirectory);case 24:e.t0=e.sent;case 25:return P=e.t0,e.next=28,this._readRaster(d,i,b,a,P,u,f,c,h);case 28:return S=e.sent,e.abrupt("return",S);case 30:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"readRGB",value:(t=u(x.mark((function e(){var t,r,n,i,a,o,s,u,f,c,l,h,d,p,m,v,y,g,w,b,k,A,_,I,P,S,T,U=arguments;return x.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=U.length>0&&void 0!==U[0]?U[0]:{},r=t.window,n=t.interleave,i=void 0===n||n,a=t.pool,o=void 0===a?null:a,s=t.width,u=t.height,f=t.resampleMethod,c=t.enableAlpha,l=void 0!==c&&c,h=t.signal,!((d=r||[0,0,this.getWidth(),this.getHeight()])[0]>d[2]||d[1]>d[3])){e.next=4;break}throw new Error("Invalid subsets");case 4:if((p=this.fileDirectory.PhotometricInterpretation)!==oe.RGB){e.next=9;break}if(m=[0,1,2],this.fileDirectory.ExtraSamples!==se.Unspecified&&l)for(m=[],v=0;v<this.fileDirectory.BitsPerSample.length;v+=1)m.push(v);return e.abrupt("return",this.readRasters({window:r,interleave:i,samples:m,pool:o,width:s,height:u,resampleMethod:f,signal:h}));case 9:e.t0=p,e.next=e.t0===oe.WhiteIsZero||e.t0===oe.BlackIsZero||e.t0===oe.Palette?12:e.t0===oe.CMYK?14:e.t0===oe.YCbCr||e.t0===oe.CIELab?16:18;break;case 12:return y=[0],e.abrupt("break",19);case 14:return y=[0,1,2,3],e.abrupt("break",19);case 16:return y=[0,1,2],e.abrupt("break",19);case 18:throw new Error("Invalid or unsupported photometric interpretation.");case 19:return g={window:d,interleave:!0,samples:y,pool:o,width:s,height:u,resampleMethod:f,signal:h},w=this.fileDirectory,e.next=23,this.readRasters(g);case 23:b=e.sent,k=Math.pow(2,this.fileDirectory.BitsPerSample[0]),e.t1=p,e.next=e.t1===oe.WhiteIsZero?28:e.t1===oe.BlackIsZero?30:e.t1===oe.Palette?32:e.t1===oe.CMYK?34:e.t1===oe.YCbCr?36:e.t1===oe.CIELab?38:40;break;case 28:return A=pe(b,k),e.abrupt("break",41);case 30:return A=me(b,k),e.abrupt("break",41);case 32:return A=ve(b,w.ColorMap),e.abrupt("break",41);case 34:return A=ye(b),e.abrupt("break",41);case 36:return A=ge(b),e.abrupt("break",41);case 38:return A=we(b),e.abrupt("break",41);case 40:throw new Error("Unsupported photometric interpretation.");case 41:if(!i){for(_=new Uint8Array(A.length/3),I=new Uint8Array(A.length/3),P=new Uint8Array(A.length/3),S=0,T=0;S<A.length;S+=3,++T)_[T]=A[S],I[T]=A[S+1],P[T]=A[S+2];A=[_,I,P];}return A.width=b.width,A.height=b.height,e.abrupt("return",A);case 45:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"getTiePoints",value:function(){if(!this.fileDirectory.ModelTiepoint)return [];for(var e=[],t=0;t<this.fileDirectory.ModelTiepoint.length;t+=6)e.push({i:this.fileDirectory.ModelTiepoint[t],j:this.fileDirectory.ModelTiepoint[t+1],k:this.fileDirectory.ModelTiepoint[t+2],x:this.fileDirectory.ModelTiepoint[t+3],y:this.fileDirectory.ModelTiepoint[t+4],z:this.fileDirectory.ModelTiepoint[t+5]});return e}},{key:"getGDALMetadata",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t={};if(!this.fileDirectory.GDAL_METADATA)return null;var r=this.fileDirectory.GDAL_METADATA,n=J(r,"Item");n=null===e?n.filter((function(e){return void 0===q(e,"sample")})):n.filter((function(t){return Number(q(t,"sample"))===e}));for(var i=0;i<n.length;++i){var a=n[i];t[q(a,"name")]=a.inner;}return t}},{key:"getGDALNoData",value:function(){if(!this.fileDirectory.GDAL_NODATA)return null;var e=this.fileDirectory.GDAL_NODATA;return Number(e.substring(0,e.length-1))}},{key:"getOrigin",value:function(){var e=this.fileDirectory.ModelTiepoint,t=this.fileDirectory.ModelTransformation;if(e&&6===e.length)return [e[3],e[4],e[5]];if(t)return [t[3],t[7],t[11]];throw new Error("The image does not have an affine transformation.")}},{key:"getResolution",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this.fileDirectory.ModelPixelScale,r=this.fileDirectory.ModelTransformation;if(t)return [t[0],-t[1],t[2]];if(r)return [r[0],r[5],r[10]];if(e){var n=e.getResolution(),i=o(n,3),a=i[0],s=i[1],u=i[2];return [a*e.getWidth()/this.getWidth(),s*e.getHeight()/this.getHeight(),u*e.getWidth()/this.getWidth()]}throw new Error("The image does not have an affine transformation.")}},{key:"pixelIsArea",value:function(){return 1===this.geoKeys.GTRasterTypeGeoKey}},{key:"getBoundingBox",value:function(){var e=this.getOrigin(),t=this.getResolution(),r=e[0],n=e[1],i=r+t[0]*this.getWidth(),a=n+t[1]*this.getHeight();return [Math.min(r,i),Math.min(n,a),Math.max(r,i),Math.max(n,a)]}}]),e}(),Fe=Le,Ve=function(){function e(t){b(this,e),this._dataView=new DataView(t);}return c(e,[{key:"buffer",get:function(){return this._dataView.buffer}},{key:"getUint64",value:function(e,t){var r,n=this.getUint32(e,t),i=this.getUint32(e+4,t);if(t){if(r=n+Math.pow(2,32)*i,!Number.isSafeInteger(r))throw new Error("".concat(r," exceeds MAX_SAFE_INTEGER. ")+"Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues");return r}if(r=Math.pow(2,32)*n+i,!Number.isSafeInteger(r))throw new Error("".concat(r," exceeds MAX_SAFE_INTEGER. ")+"Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues");return r}},{key:"getInt64",value:function(e,t){for(var r=0,n=(128&this._dataView.getUint8(e+(t?7:0)))>0,i=!0,a=0;a<8;a++){var o=this._dataView.getUint8(e+(t?a:7-a));n&&(i?0!==o&&(o=255&~(o-1),i=!1):o=255&~o),r+=o*Math.pow(256,a);}return n&&(r=-r),r}},{key:"getUint8",value:function(e,t){return this._dataView.getUint8(e,t)}},{key:"getInt8",value:function(e,t){return this._dataView.getInt8(e,t)}},{key:"getUint16",value:function(e,t){return this._dataView.getUint16(e,t)}},{key:"getInt16",value:function(e,t){return this._dataView.getInt16(e,t)}},{key:"getUint32",value:function(e,t){return this._dataView.getUint32(e,t)}},{key:"getInt32",value:function(e,t){return this._dataView.getInt32(e,t)}},{key:"getFloat16",value:function(e,t){return Y(this._dataView,e,t)}},{key:"getFloat32",value:function(e,t){return this._dataView.getFloat32(e,t)}},{key:"getFloat64",value:function(e,t){return this._dataView.getFloat64(e,t)}}]),e}(),Ge=function(){function e(t,r,n,i){b(this,e),this._dataView=new DataView(t),this._sliceOffset=r,this._littleEndian=n,this._bigTiff=i;}return c(e,[{key:"sliceOffset",get:function(){return this._sliceOffset}},{key:"sliceTop",get:function(){return this._sliceOffset+this.buffer.byteLength}},{key:"littleEndian",get:function(){return this._littleEndian}},{key:"bigTiff",get:function(){return this._bigTiff}},{key:"buffer",get:function(){return this._dataView.buffer}},{key:"covers",value:function(e,t){return this.sliceOffset<=e&&this.sliceTop>=e+t}},{key:"readUint8",value:function(e){return this._dataView.getUint8(e-this._sliceOffset,this._littleEndian)}},{key:"readInt8",value:function(e){return this._dataView.getInt8(e-this._sliceOffset,this._littleEndian)}},{key:"readUint16",value:function(e){return this._dataView.getUint16(e-this._sliceOffset,this._littleEndian)}},{key:"readInt16",value:function(e){return this._dataView.getInt16(e-this._sliceOffset,this._littleEndian)}},{key:"readUint32",value:function(e){return this._dataView.getUint32(e-this._sliceOffset,this._littleEndian)}},{key:"readInt32",value:function(e){return this._dataView.getInt32(e-this._sliceOffset,this._littleEndian)}},{key:"readFloat32",value:function(e){return this._dataView.getFloat32(e-this._sliceOffset,this._littleEndian)}},{key:"readFloat64",value:function(e){return this._dataView.getFloat64(e-this._sliceOffset,this._littleEndian)}},{key:"readUint64",value:function(e){var t,r=this.readUint32(e),n=this.readUint32(e+4);if(this._littleEndian){if(t=r+Math.pow(2,32)*n,!Number.isSafeInteger(t))throw new Error("".concat(t," exceeds MAX_SAFE_INTEGER. ")+"Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues");return t}if(t=Math.pow(2,32)*r+n,!Number.isSafeInteger(t))throw new Error("".concat(t," exceeds MAX_SAFE_INTEGER. ")+"Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues");return t}},{key:"readInt64",value:function(e){for(var t=0,r=(128&this._dataView.getUint8(e+(this._littleEndian?7:0)))>0,n=!0,i=0;i<8;i++){var a=this._dataView.getUint8(e+(this._littleEndian?i:7-i));r&&(n?0!==a&&(a=255&~(a-1),n=!1):a=255&~a),t+=a*Math.pow(256,i);}return r&&(t=-t),t}},{key:"readOffset",value:function(e){return this._bigTiff?this.readUint64(e):this.readUint32(e)}}]),e}(),je="undefined"!=typeof navigator&&navigator.hardwareConcurrency||2,ze=function(){function e(){var t=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:je,n=arguments.length>1?arguments[1]:void 0;b(this,e),this.workers=null,this._awaitingDecoder=null,this.size=r,this.messageId=0,r&&(this._awaitingDecoder=n?Promise.resolve(n):new Promise((function(e){Promise.resolve().then((function(){return Ui})).then((function(t){e(t.create);}));})),this._awaitingDecoder.then((function(e){t._awaitingDecoder=null,t.workers=[];for(var n=0;n<r;n++)t.workers.push({worker:e(),idle:!0});})));}var t;return c(e,[{key:"decode",value:(t=u(x.mark((function e(t,r){var n=this;return x.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._awaitingDecoder){e.next=3;break}return e.next=3,this._awaitingDecoder;case 3:return e.abrupt("return",0===this.size?Ae(t).then((function(e){return e.decode(t,r)})):new Promise((function(e){var i=n.workers.find((function(e){return e.idle}))||n.workers[Math.floor(Math.random()*n.size)];i.idle=!1;var a=n.messageId++;i.worker.addEventListener("message",(function t(r){r.data.id===a&&(i.idle=!0,e(r.data.decoded),i.worker.removeEventListener("message",t));})),i.worker.postMessage({fileDirectory:t,buffer:r,id:a},[r]);})));case 4:case"end":return e.stop()}}),e,this)}))),function(e,r){return t.apply(this,arguments)})},{key:"destroy",value:function(){this.workers&&(this.workers.forEach((function(e){e.worker.terminate();})),this.workers=null);}}]),e}(),Ne=ze;function Ke(e,t){if(null==e)return {};var r,n,i=function(e,t){if(null==e)return {};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r]);}return i}function Ze(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return He(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return He(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return {s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return {s:function(){r=r.call(e);},n:function(){var e=r.next();return o=e.done,e},e:function(e){s=!0,a=e;},f:function(){try{o||null==r.return||r.return();}finally{if(s)throw a}}}}function He(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Ye="\r\n\r\n";function qe(e){if(void 0!==Object.fromEntries)return Object.fromEntries(e);var t,r={},n=Ze(e);try{for(n.s();!(t=n.n()).done;){var i=o(t.value,2),a=i[0],s=i[1];r[a.toLowerCase()]=s;}}catch(e){n.e(e);}finally{n.f();}return r}function Xe(e){return qe(e.split("\r\n").map((function(e){var t=e.split(":").map((function(e){return e.trim()}));return t[0]=t[0].toLowerCase(),t})))}function We(e){var t,n=e.split(";").map((function(e){return e.trim()})),o=r(t=n)||j(t)||i(t)||a();return {type:o[0],params:qe(o.slice(1).map((function(e){return e.split("=")})))}}function Je(e){var t,r,n;if(e){var i=o(e.match(/bytes (\d+)-(\d+)\/(\d+)/),4);t=i[1],r=i[2],n=i[3],t=parseInt(t,10),r=parseInt(r,10),n=parseInt(n,10);}return {start:t,end:r,total:n}}function Qe(e,t){for(var r=null,n=new TextDecoder("ascii"),i=[],a="--".concat(t),o="".concat(a,"--"),s=0;s<10;++s){n.decode(new Uint8Array(e,s,a.length))===a&&(r=s);}if(null===r)throw new Error("Could not find initial boundary");for(;r<e.byteLength;){var u=n.decode(new Uint8Array(e,r,Math.min(a.length+1024,e.byteLength-r)));if(0===u.length||u.startsWith(o))break;if(!u.startsWith(a))throw new Error("Part does not start with boundary");var f=u.substr(a.length+2);if(0===f.length)break;var c=f.indexOf(Ye),l=Xe(f.substr(0,c)),h=Je(l["content-range"]),d=h.start,p=h.end,m=h.total,v=r+a.length+c+Ye.length,y=parseInt(p,10)+1-parseInt(d,10);i.push({headers:l,data:e.slice(v,v+y),offset:d,length:y,fileSize:m}),r=v+y+4;}return i}var $e=function(){function e(){b(this,e);}var t,r,n;return c(e,[{key:"fetch",value:(n=u(x.mark((function e(t){var r,n=this,i=arguments;return x.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=i.length>1&&void 0!==i[1]?i[1]:void 0,e.abrupt("return",Promise.all(t.map((function(e){return n.fetchSlice(e,r)}))));case 2:case"end":return e.stop()}}),e)}))),function(e){return n.apply(this,arguments)})},{key:"fetchSlice",value:(r=u(x.mark((function e(t){return x.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("fetching of slice ".concat(t," not possible, not implemented"));case 1:case"end":return e.stop()}}),e)}))),function(e){return r.apply(this,arguments)})},{key:"fileSize",get:function(){return null}},{key:"close",value:(t=u(x.mark((function e(){return x.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)})}]),e}();function et(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return tt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return tt(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return {s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return {s:function(){r=r.call(e);},n:function(){var e=r.next();return o=e.done,e},e:function(e){s=!0,a=e;},f:function(){try{o||null==r.return||r.return();}finally{if(s)throw a}}}}function tt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function rt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return !1;if(Reflect.construct.sham)return !1;if("function"==typeof Proxy)return !0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return !1}}();return function(){var r,n=v(e);if(t){var i=v(this).constructor;r=Reflect.construct(n,arguments,i);}else r=n.apply(this,arguments);return m(this,r)}}var nt=function(e,t,r){h(i,e);var n=rt(i);function i(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(b(this,i),e=n.call(this),!(t.maxSize&&t.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");if("number"==typeof t.maxAge&&0===t.maxAge)throw new TypeError("`maxAge` must be a number greater than 0");return e.maxSize=t.maxSize,e.maxAge=t.maxAge||Number.POSITIVE_INFINITY,e.onEviction=t.onEviction,e.cache=new Map,e.oldCache=new Map,e._size=0,e}return c(i,[{key:"_emitEvictions",value:function(e){if("function"==typeof this.onEviction){var t,r=et(e);try{for(r.s();!(t=r.n()).done;){var n=o(t.value,2),i=n[0],a=n[1];this.onEviction(i,a.value);}}catch(e){r.e(e);}finally{r.f();}}}},{key:"_deleteIfExpired",value:function(e,t){return "number"==typeof t.expiry&&t.expiry<=Date.now()&&("function"==typeof this.onEviction&&this.onEviction(e,t.value),this.delete(e))}},{key:"_getOrDeleteIfExpired",value:function(e,t){if(!1===this._deleteIfExpired(e,t))return t.value}},{key:"_getItemValue",value:function(e,t){return t.expiry?this._getOrDeleteIfExpired(e,t):t.value}},{key:"_peek",value:function(e,t){var r=t.get(e);return this._getItemValue(e,r)}},{key:"_set",value:function(e,t){this.cache.set(e,t),this._size++,this._size>=this.maxSize&&(this._size=0,this._emitEvictions(this.oldCache),this.oldCache=this.cache,this.cache=new Map);}},{key:"_moveToRecent",value:function(e,t){this.oldCache.delete(e),this._set(e,t);}},{key:"_entriesAscending",value:x.mark((function e(){var t,r,n,i,a,s,u,f,c,l,h,d;return x.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=et(this.oldCache),e.prev=1,t.s();case 3:if((r=t.n()).done){e.next=13;break}if(n=r.value,i=o(n,2),a=i[0],s=i[1],this.cache.has(a)){e.next=11;break}if(!1!==this._deleteIfExpired(a,s)){e.next=11;break}return e.next=11,n;case 11:e.next=3;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(1),t.e(e.t0);case 18:return e.prev=18,t.f(),e.finish(18);case 21:u=et(this.cache),e.prev=22,u.s();case 24:if((f=u.n()).done){e.next=33;break}if(c=f.value,l=o(c,2),h=l[0],d=l[1],!1!==this._deleteIfExpired(h,d)){e.next=31;break}return e.next=31,c;case 31:e.next=24;break;case 33:e.next=38;break;case 35:e.prev=35,e.t1=e.catch(22),u.e(e.t1);case 38:return e.prev=38,u.f(),e.finish(38);case 41:case"end":return e.stop()}}),e,this,[[1,15,18,21],[22,35,38,41]])}))},{key:"get",value:function(e){if(this.cache.has(e)){var t=this.cache.get(e);return this._getItemValue(e,t)}if(this.oldCache.has(e)){var r=this.oldCache.get(e);if(!1===this._deleteIfExpired(e,r))return this._moveToRecent(e,r),r.value}}},{key:"set",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.maxAge,i=void 0===n?this.maxAge:n,a="number"==typeof i&&i!==Number.POSITIVE_INFINITY?Date.now()+i:void 0;this.cache.has(e)?this.cache.set(e,{value:t,expiry:a}):this._set(e,{value:t,expiry:a});}},{key:"has",value:function(e){return this.cache.has(e)?!this._deleteIfExpired(e,this.cache.get(e)):!!this.oldCache.has(e)&&!this._deleteIfExpired(e,this.oldCache.get(e))}},{key:"peek",value:function(e){return this.cache.has(e)?this._peek(e,this.cache):this.oldCache.has(e)?this._peek(e,this.oldCache):void 0}},{key:"delete",value:function(e){var t=this.cache.delete(e);return t&&this._size--,this.oldCache.delete(e)||t}},{key:"clear",value:function(){this.cache.clear(),this.oldCache.clear(),this._size=0;}},{key:"resize",value:function(e){if(!(e&&e>0))throw new TypeError("`maxSize` must be a number greater than 0");var t=z(this._entriesAscending()),r=t.length-e;r<0?(this.cache=new Map(t),this.oldCache=new Map,this._size=t.length):(r>0&&this._emitEvictions(t.slice(0,r)),this.oldCache=new Map(t.slice(r)),this.cache=new Map,this._size=0),this.maxSize=e;}},{key:"keys",value:x.mark((function e(){var t,r,n,i;return x.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=et(this),e.prev=1,t.s();case 3:if((r=t.n()).done){e.next=9;break}return n=o(r.value,1),i=n[0],e.next=7,i;case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),t.e(e.t0);case 14:return e.prev=14,t.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,this,[[1,11,14,17]])}))},{key:"values",value:x.mark((function e(){var t,r,n,i;return x.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=et(this),e.prev=1,t.s();case 3:if((r=t.n()).done){e.next=9;break}return n=o(r.value,2),i=n[1],e.next=7,i;case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),t.e(e.t0);case 14:return e.prev=14,t.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,this,[[1,11,14,17]])}))},{key:t,value:x.mark((function(){var e,t,r,n,i,a,s,u,f,c,l,h;return x.wrap((function(d){for(;;)switch(d.prev=d.next){case 0:e=et(this.cache),d.prev=1,e.s();case 3:if((t=e.n()).done){d.next=12;break}if(r=t.value,n=o(r,2),i=n[0],a=n[1],!1!==this._deleteIfExpired(i,a)){d.next=10;break}return d.next=10,[i,a.value];case 10:d.next=3;break;case 12:d.next=17;break;case 14:d.prev=14,d.t0=d.catch(1),e.e(d.t0);case 17:return d.prev=17,e.f(),d.finish(17);case 20:s=et(this.oldCache),d.prev=21,s.s();case 23:if((u=s.n()).done){d.next=33;break}if(f=u.value,c=o(f,2),l=c[0],h=c[1],this.cache.has(l)){d.next=31;break}if(!1!==this._deleteIfExpired(l,h)){d.next=31;break}return d.next=31,[l,h.value];case 31:d.next=23;break;case 33:d.next=38;break;case 35:d.prev=35,d.t1=d.catch(21),s.e(d.t1);case 38:return d.prev=38,s.f(),d.finish(38);case 41:case"end":return d.stop()}}),a,this,[[1,14,17,20],[21,35,38,41]])}))},{key:"entriesDescending",value:x.mark((function e(){var t,r,n,i,a,s,u,f,c,l,h;return x.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=z(this.cache),r=t.length-1;case 2:if(!(r>=0)){e.next=12;break}if(n=t[r],i=o(n,2),a=i[0],s=i[1],!1!==this._deleteIfExpired(a,s)){e.next=9;break}return e.next=9,[a,s.value];case 9:--r,e.next=2;break;case 12:t=z(this.oldCache),u=t.length-1;case 14:if(!(u>=0)){e.next=25;break}if(f=t[u],c=o(f,2),l=c[0],h=c[1],this.cache.has(l)){e.next=22;break}if(!1!==this._deleteIfExpired(l,h)){e.next=22;break}return e.next=22,[l,h.value];case 22:--u,e.next=14;break;case 25:case"end":return e.stop()}}),e,this)}))},{key:"entriesAscending",value:x.mark((function e(){var t,r,n,i,a;return x.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=et(this._entriesAscending()),e.prev=1,t.s();case 3:if((r=t.n()).done){e.next=9;break}return n=o(r.value,2),i=n[0],a=n[1],e.next=7,[i,a.value];case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),t.e(e.t0);case 14:return e.prev=14,t.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,this,[[1,11,14,17]])}))},{key:"size",get:function(){if(!this._size)return this.oldCache.size;var e,t=0,r=et(this.oldCache.keys());try{for(r.s();!(e=r.n()).done;){var n=e.value;this.cache.has(n)||t++;}}catch(e){r.e(e);}finally{r.f();}return Math.min(this._size+t,this.maxSize)}},{key:"entries",value:function(){return this.entriesAscending()}},{key:"forEach",value:function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this,n=et(this.entriesAscending());try{for(n.s();!(t=n.n()).done;){var i=o(t.value,2),a=i[0],s=i[1];e.call(r,s,a,this);}}catch(e){n.e(e);}finally{n.f();}}},{key:r,value:function(){return JSON.stringify(z(this.entriesAscending()))}}]),i}(w(Map),Symbol.iterator,Symbol.toStringTag);function it(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return !1;if(Reflect.construct.sham)return !1;if("function"==typeof Proxy)return !0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return !1}}();return function(){var r,n=v(e);if(t){var i=v(this).constructor;r=Reflect.construct(n,arguments,i);}else r=n.apply(this,arguments);return m(this,r)}}function at(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);}function ot(e,t){return !(e.length<t.length)&&e.substr(e.length-t.length)===t}function st(e){var t={};for(var r in e){if(e.hasOwnProperty(r))t[e[r]]=r;}return t}function ut(e,t){for(var r=[],n=0;n<e;n++)r.push(t(n));return r}function ft(e){return ct.apply(this,arguments)}function ct(){return (ct=u(x.mark((function e(t){return x.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){return setTimeout(e,t)})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function lt(e,t){var r=Array.isArray(e)?e:Array.from(e),n=Array.isArray(t)?t:Array.from(t);return r.map((function(e,t){return [e,n[t]]}))}var ht=function(e){h(r,e);var t=it(r);function r(e){var n;return b(this,r),n=t.call(this,e),Error.captureStackTrace&&Error.captureStackTrace(p(n),r),n.name="AbortError",n}return r}(w(Error)),dt=function(e){h(r,e);var t=it(r);function r(e,n){var i;return b(this,r),(i=t.call(this,n)).errors=e,i.message=n,i.name="AggregateError",i}return r}(w(Error));function pt(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return mt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return mt(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return {s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return {s:function(){r=r.call(e);},n:function(){var e=r.next();return o=e.done,e},e:function(e){s=!0,a=e;},f:function(){try{o||null==r.return||r.return();}finally{if(s)throw a}}}}function mt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function vt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return !1;if(Reflect.construct.sham)return !1;if("function"==typeof Proxy)return !0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return !1}}();return function(){var r,n=v(e);if(t){var i=v(this).constructor;r=Reflect.construct(n,arguments,i);}else r=n.apply(this,arguments);return m(this,r)}}var yt=function(){function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;b(this,e),this.offset=t,this.length=r,this.data=n;}return c(e,[{key:"top",get:function(){return this.offset+this.length}}]),e}(),gt=function e(t,r,n){b(this,e),this.offset=t,this.length=r,this.blockIds=n;},wt=function(e){h(n,e);var t,r=vt(n);function n(e){var t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=i.blockSize,o=void 0===a?65536:a,s=i.cacheSize,u=void 0===s?100:s;return b(this,n),(t=r.call(this)).source=e,t.blockSize=o,t.blockCache=new nt({maxSize:u}),t.blockRequests=new Map,t.blockIdsToFetch=new Set,t.abortedBlockIds=new Set,t}return c(n,[{key:"fileSize",get:function(){return this.source.fileSize}},{key:"fetch",value:(t=u(x.mark((function e(t,r){var n,i,a,o,s,u,f,c,l,h,d,p,m,v,y,g,w,b,k,A,_,I,P,S,T,U,O=this;return x.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],i=[],a=[],o=pt(t);try{for(o.s();!(s=o.n()).done;)for(u=s.value,f=u.offset,c=u.length,l=f+c,null!==(h=this.fileSize)&&(l=Math.min(l,h)),d=Math.floor(f/this.blockSize)*this.blockSize,p=d;p<l;p+=this.blockSize)m=Math.floor(p/this.blockSize),this.blockCache.has(m)||this.blockRequests.has(m)||(this.blockIdsToFetch.add(m),i.push(m)),this.blockRequests.has(m)&&n.push(this.blockRequests.get(m)),a.push(m);}catch(e){o.e(e);}finally{o.f();}return e.next=7,ft();case 7:for(this.fetchBlocks(r),v=[],y=0,g=i;y<g.length;y++)w=g[y],this.blockRequests.has(w)&&v.push(this.blockRequests.get(w));return e.next=12,Promise.allSettled(n);case 12:return e.next=14,Promise.allSettled(v);case 14:if(b=[],(k=a.filter((function(e){return O.abortedBlockIds.has(e)||!O.blockCache.has(e)}))).forEach((function(e){return O.blockIdsToFetch.add(e)})),!(k.length>0&&r)||r.aborted){e.next=40;break}this.fetchBlocks(null),A=pt(k),e.prev=20,A.s();case 22:if((_=A.n()).done){e.next=30;break}if(I=_.value,P=this.blockRequests.get(I)){e.next=27;break}throw new Error("Block ".concat(I," is not in the block requests"));case 27:b.push(P);case 28:e.next=22;break;case 30:e.next=35;break;case 32:e.prev=32,e.t0=e.catch(20),A.e(e.t0);case 35:return e.prev=35,A.f(),e.finish(35);case 38:return e.next=40,Promise.allSettled(b);case 40:if(!r||!r.aborted){e.next=42;break}throw new ht("Request was aborted");case 42:if(S=a.map((function(e){return O.blockCache.get(e)})),T=S.filter((function(e){return !e})),!T.length){e.next=46;break}throw new dt(T,"Request failed");case 46:return U=new Map(lt(a,S)),e.abrupt("return",this.readSliceData(t,U));case 48:case"end":return e.stop()}}),e,this,[[20,32,35,38]])}))),function(e,r){return t.apply(this,arguments)})},{key:"fetchBlocks",value:function(e){var t=this;this.blockIdsToFetch.size>0&&function(){for(var r=t.groupBlocks(t.blockIdsToFetch),n=t.source.fetch(r,e),i=function(i){var a,o=pt(r[i].blockIds);try{var s=function(){var r=a.value;t.blockRequests.set(r,u(x.mark((function a(){var o,s,u,f,c,l;return x.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,n;case 3:a.t0=i,o=a.sent[a.t0],s=r*t.blockSize,u=s-o.offset,f=Math.min(u+t.blockSize,o.data.byteLength),c=o.data.slice(u,f),l=new yt(s,c.byteLength,c,r),t.blockCache.set(r,l),t.abortedBlockIds.delete(r),a.next=23;break;case 14:if(a.prev=14,a.t1=a.catch(0),"AbortError"!==a.t1.name){a.next=22;break}a.t1.signal=e,t.blockCache.delete(r),t.abortedBlockIds.add(r),a.next=23;break;case 22:throw a.t1;case 23:return a.prev=23,t.blockRequests.delete(r),a.finish(23);case 26:case"end":return a.stop()}}),a,null,[[0,14,23,26]])})))());};for(o.s();!(a=o.n()).done;)s();}catch(e){o.e(e);}finally{o.f();}},a=0;a<r.length;++a)i(a);t.blockIdsToFetch.clear();}();}},{key:"groupBlocks",value:function(e){var t=Array.from(e).sort((function(e,t){return e-t}));if(0===t.length)return [];var r,n=[],i=null,a=[],o=pt(t);try{for(o.s();!(r=o.n()).done;){var s=r.value;null===i||i+1===s?(n.push(s),i=s):(a.push(new gt(n[0]*this.blockSize,n.length*this.blockSize,n)),n=[s],i=s);}}catch(e){o.e(e);}finally{o.f();}return a.push(new gt(n[0]*this.blockSize,n.length*this.blockSize,n)),a}},{key:"readSliceData",value:function(e,t){var r=this;return e.map((function(e){var n=e.offset+e.length;null!==r.fileSize&&(n=Math.min(r.fileSize,n));for(var i=Math.floor(e.offset/r.blockSize),a=Math.floor(n/r.blockSize),o=new ArrayBuffer(e.length),s=new Uint8Array(o),u=i;u<=a;++u){var f=t.get(u),c=f.offset-e.offset,l=0,h=0,d=void 0;c<0?l=-c:c>0&&(h=c),d=f.top-n<0?f.length-l:n-f.offset-l;var p=new Uint8Array(f.data,l,d);s.set(p,h);}return o}))}}]),n}($e),bt=function(){function e(){b(this,e);}var t;return c(e,[{key:"ok",get:function(){return this.status>=200&&this.status<=299}},{key:"status",get:function(){throw new Error("not implemented")}},{key:"getHeader",value:function(e){throw new Error("not implemented")}},{key:"getData",value:(t=u(x.mark((function e(){return x.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("not implemented");case 1:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)})}]),e}(),kt=function(){function e(t){b(this,e),this.url=t;}var t;return c(e,[{key:"request",value:(t=u(x.mark((function e(){return x.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("request is not implemented");case 2:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)})}]),e}();function xt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return !1;if(Reflect.construct.sham)return !1;if("function"==typeof Proxy)return !0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return !1}}();return function(){var r,n=v(e);if(t){var i=v(this).constructor;r=Reflect.construct(n,arguments,i);}else r=n.apply(this,arguments);return m(this,r)}}var At=function(e){h(n,e);var t,r=xt(n);function n(e){var t;return b(this,n),(t=r.call(this)).response=e,t}return c(n,[{key:"status",get:function(){return this.response.status}},{key:"getHeader",value:function(e){return this.response.headers.get(e)}},{key:"getData",value:(t=u(x.mark((function e(){var t;return x.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.response.arrayBuffer){e.next=6;break}return e.next=3,this.response.arrayBuffer();case 3:e.t0=e.sent,e.next=9;break;case 6:return e.next=8,this.response.buffer();case 8:e.t0=e.sent.buffer;case 9:return t=e.t0,e.abrupt("return",t);case 11:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),n}(bt),_t=function(e){h(n,e);var t,r=xt(n);function n(e,t){var i;return b(this,n),(i=r.call(this,e)).credentials=t,i}return c(n,[{key:"request",value:(t=u(x.mark((function e(){var t,r,n,i,a,o=arguments;return x.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:{},r=t.headers,n=t.credentials,i=t.signal,e.next=3,fetch(this.url,{headers:r,credentials:n,signal:i});case 3:return a=e.sent,e.abrupt("return",new At(a));case 5:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),n}(kt);function It(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return !1;if(Reflect.construct.sham)return !1;if("function"==typeof Proxy)return !0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return !1}}();return function(){var r,n=v(e);if(t){var i=v(this).constructor;r=Reflect.construct(n,arguments,i);}else r=n.apply(this,arguments);return m(this,r)}}var Pt=function(e){h(n,e);var t,r=It(n);function n(e,t){var i;return b(this,n),(i=r.call(this)).xhr=e,i.data=t,i}return c(n,[{key:"status",get:function(){return this.xhr.status}},{key:"getHeader",value:function(e){return this.xhr.getResponseHeader(e)}},{key:"getData",value:(t=u(x.mark((function e(){return x.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.data);case 1:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),n}(bt),St=function(e){h(n,e);var t,r=It(n);function n(){return b(this,n),r.apply(this,arguments)}return c(n,[{key:"constructRequest",value:function(e,t){var r=this;return new Promise((function(n,i){var a=new XMLHttpRequest;a.open("GET",r.url),a.responseType="arraybuffer";for(var s=0,u=Object.entries(e);s<u.length;s++){var f=o(u[s],2),c=f[0],l=f[1];a.setRequestHeader(c,l);}a.onload=function(){var e=a.response;n(new Pt(a,e));},a.onerror=i,a.onabort=function(){return i(new ht("Request aborted"))},a.send(),t&&(t.aborted&&a.abort(),t.addEventListener("abort",(function(){return a.abort()})));}))}},{key:"request",value:(t=u(x.mark((function e(){var t,r,n,i,a=arguments;return x.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},r=t.headers,n=t.signal,e.next=3,this.constructRequest(r,n);case 3:return i=e.sent,e.abrupt("return",i);case 5:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),n}(kt),Tt={};function Ut(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n);}return r}function Ot(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Ut(Object(n),!0).forEach((function(r){t(e,r,n[r]);})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ut(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t));}));}return e}function Dt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return !1;if(Reflect.construct.sham)return !1;if("function"==typeof Proxy)return !0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return !1}}();return function(){var r,n=v(e);if(t){var i=v(this).constructor;r=Reflect.construct(n,arguments,i);}else r=n.apply(this,arguments);return m(this,r)}}var Et=function(e){h(n,e);var t,r=Dt(n);function n(e,t){var i;return b(this,n),(i=r.call(this)).response=e,i.dataPromise=t,i}return c(n,[{key:"status",get:function(){return this.response.statusCode}},{key:"getHeader",value:function(e){return this.response.headers[e]}},{key:"getData",value:(t=u(x.mark((function e(){var t;return x.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.dataPromise;case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),n}(bt),Rt=function(e){h(n,e);var t,r=Dt(n);function n(e){var t;return b(this,n),(t=r.call(this,e)).parsedUrl=Tt.parse(t.url),t.httpApi=(t.parsedUrl.protocol,Tt),t}return c(n,[{key:"constructRequest",value:function(e,t){var r=this;return new Promise((function(n,i){var a=r.httpApi.get(Ot(Ot({},r.parsedUrl),{},{headers:e}),(function(e){var t=new Promise((function(t){var r=[];e.on("data",(function(e){r.push(e);})),e.on("end",(function(){var e=Buffer.concat(r).buffer;t(e);})),e.on("error",i);}));n(new Et(e,t));}));a.on("error",i),t&&(t.aborted&&a.destroy(new ht("Request aborted")),t.addEventListener("abort",(function(){return a.destroy(new ht("Request aborted"))})));}))}},{key:"request",value:(t=u(x.mark((function e(){var t,r,n,i,a=arguments;return x.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},r=t.headers,n=t.signal,e.next=3,this.constructRequest(r,n);case 3:return i=e.sent,e.abrupt("return",i);case 5:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),n}(kt),Mt=["headers","credentials","maxRanges","allowFullFile"],Bt=["headers","maxRanges","allowFullFile"],Ct=["headers","maxRanges","allowFullFile"],Lt=["forceXHR"];function Ft(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n);}return r}function Vt(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Ft(Object(n),!0).forEach((function(r){t(e,r,n[r]);})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ft(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t));}));}return e}function Gt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return !1;if(Reflect.construct.sham)return !1;if("function"==typeof Proxy)return !0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return !1}}();return function(){var r,n=v(e);if(t){var i=v(this).constructor;r=Reflect.construct(n,arguments,i);}else r=n.apply(this,arguments);return m(this,r)}}var jt=function(e){h(a,e);var t,r,n,i=Gt(a);function a(e,t,r,n){var o;return b(this,a),(o=i.call(this)).client=e,o.headers=t,o.maxRanges=r,o.allowFullFile=n,o._fileSize=null,o}return c(a,[{key:"fetch",value:(n=u(x.mark((function e(t,r){var n=this;return x.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.maxRanges>=t.length)){e.next=4;break}return e.abrupt("return",this.fetchSlices(t,r));case 4:this.maxRanges>0&&t.length;case 5:return e.abrupt("return",Promise.all(t.map((function(e){return n.fetchSlice(e,r)}))));case 6:case"end":return e.stop()}}),e,this)}))),function(e,t){return n.apply(this,arguments)})},{key:"fetchSlices",value:(r=u(x.mark((function e(t,r){var n,i,a,o,s,u,f,c,l,h,d,p,m,v=this;return x.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.client.request({headers:Vt(Vt({},this.headers),{},{Range:"bytes=".concat(t.map((function(e){var t=e.offset,r=e.length;return "".concat(t,"-").concat(t+r)})).join(","))}),signal:r});case 2:if((n=e.sent).ok){e.next=7;break}throw new Error("Error fetching data.");case 7:if(206!==n.status){e.next=32;break}if(i=We(n.getHeader("content-type")),a=i.type,o=i.params,"multipart/byteranges"!==a){e.next=18;break}return e.t0=Qe,e.next=13,n.getData();case 13:return e.t1=e.sent,e.t2=o.boundary,s=(0, e.t0)(e.t1,e.t2),this._fileSize=s[0].fileSize||null,e.abrupt("return",s);case 18:return e.next=20,n.getData();case 20:if(u=e.sent,f=Je(n.getHeader("content-range")),c=f.start,l=f.end,h=f.total,this._fileSize=h||null,d=[{data:u,offset:c,length:l-c}],!(t.length>1)){e.next=29;break}return e.next=27,Promise.all(t.slice(1).map((function(e){return v.fetchSlice(e,r)})));case 27:return p=e.sent,e.abrupt("return",d.concat(p));case 29:return e.abrupt("return",d);case 32:if(this.allowFullFile){e.next=34;break}throw new Error("Server responded with full file");case 34:return e.next=36,n.getData();case 36:return m=e.sent,this._fileSize=m.byteLength,e.abrupt("return",[{data:m,offset:0,length:m.byteLength}]);case 39:case"end":return e.stop()}}),e,this)}))),function(e,t){return r.apply(this,arguments)})},{key:"fetchSlice",value:(t=u(x.mark((function e(t,r){var n,i,a,o,s,u,f;return x.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.offset,i=t.length,e.next=3,this.client.request({headers:Vt(Vt({},this.headers),{},{Range:"bytes=".concat(n,"-").concat(n+i)}),signal:r});case 3:if((a=e.sent).ok){e.next=8;break}throw new Error("Error fetching data.");case 8:if(206!==a.status){e.next=17;break}return e.next=11,a.getData();case 11:return o=e.sent,s=Je(a.getHeader("content-range")),u=s.total,this._fileSize=u||null,e.abrupt("return",{data:o,offset:n,length:i});case 17:if(this.allowFullFile){e.next=19;break}throw new Error("Server responded with full file");case 19:return e.next=21,a.getData();case 21:return f=e.sent,this._fileSize=f.byteLength,e.abrupt("return",{data:f,offset:0,length:f.byteLength});case 24:case"end":return e.stop()}}),e,this)}))),function(e,r){return t.apply(this,arguments)})},{key:"fileSize",get:function(){return this._fileSize}}]),a}($e);function zt(e,t){var r=t.blockSize,n=t.cacheSize;return null===r?e:new wt(e,{blockSize:r,cacheSize:n})}function Nt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.headers,n=void 0===r?{}:r,i=t.credentials,a=t.maxRanges,o=void 0===a?0:a,s=t.allowFullFile,u=void 0!==s&&s,f=Ke(t,Mt),c=new _t(e,i),l=new jt(c,n,o,u);return zt(l,f)}function Kt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.headers,n=void 0===r?{}:r,i=t.maxRanges,a=void 0===i?0:i,o=t.allowFullFile,s=void 0!==o&&o,u=Ke(t,Bt),f=new St(e),c=new jt(f,n,a,s);return zt(c,u)}function Zt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.headers,n=void 0===r?{}:r,i=t.maxRanges,a=void 0===i?0:i,o=t.allowFullFile,s=void 0!==o&&o,u=Ke(t,Ct),f=new Rt(e),c=new jt(f,n,a,s);return zt(c,u)}function Ht(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.forceXHR,n=void 0!==r&&r,i=Ke(t,Lt);return "function"!=typeof fetch||n?"undefined"!=typeof XMLHttpRequest?Kt(e,i):Zt(e,i):Nt(e,i)}function Yt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return !1;if(Reflect.construct.sham)return !1;if("function"==typeof Proxy)return !0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return !1}}();return function(){var r,n=v(e);if(t){var i=v(this).constructor;r=Reflect.construct(n,arguments,i);}else r=n.apply(this,arguments);return m(this,r)}}var qt=function(e){h(r,e);var t=Yt(r);function r(e){var n;return b(this,r),(n=t.call(this)).arrayBuffer=e,n}return c(r,[{key:"fetchSlice",value:function(e,t){if(t&&t.aborted)throw new ht("Request aborted");return this.arrayBuffer.slice(e.offset,e.offset+e.length)}}]),r}($e);function Xt(e){return new qt(e)}function Wt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return !1;if(Reflect.construct.sham)return !1;if("function"==typeof Proxy)return !0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return !1}}();return function(){var r,n=v(e);if(t){var i=v(this).constructor;r=Reflect.construct(n,arguments,i);}else r=n.apply(this,arguments);return m(this,r)}}var Jt=function(e){h(n,e);var t,r=Wt(n);function n(e){var t;return b(this,n),(t=r.call(this)).file=e,t}return c(n,[{key:"fetchSlice",value:(t=u(x.mark((function e(t,r){var n=this;return x.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,i){var a=n.file.slice(t.offset,t.offset+t.length),o=new FileReader;o.onload=function(t){return e(t.target.result)},o.onerror=i,o.onabort=i,o.readAsArrayBuffer(a),r&&r.addEventListener("abort",(function(){return o.abort()}));})));case 1:case"end":return e.stop()}}),e)}))),function(e,r){return t.apply(this,arguments)})}]),n}($e);function Qt(e){return new Jt(e)}function $t(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return !1;if(Reflect.construct.sham)return !1;if("function"==typeof Proxy)return !0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return !1}}();return function(){var r,n=v(e);if(t){var i=v(this).constructor;r=Reflect.construct(n,arguments,i);}else r=n.apply(this,arguments);return m(this,r)}}function er(e){return new Promise((function(t,r){Tt.close(e,(function(e){e?r(e):t();}));}))}function tr(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return new Promise((function(e,r){Tt.read.apply(Tt,t.concat([function(t,n,i){t?r(t):e({bytesRead:n,buffer:i});}]));}))}var rr=function(e){h(i,e);var t,r,n=$t(i);function i(e){var t;return b(this,i),(t=n.call(this)).path=e,t.openRequest=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;return new Promise((function(n,i){Tt.open(e,t,r,(function(e,t){e?i(e):n(t);}));}))}(e,"r"),t}return c(i,[{key:"fetchSlice",value:(r=u(x.mark((function e(t){var r,n,i;return x.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.openRequest;case 2:return r=e.sent,e.next=5,tr(r,Buffer.alloc(t.length),0,t.length,t.offset);case 5:return n=e.sent,i=n.buffer,e.abrupt("return",i.buffer);case 8:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"close",value:(t=u(x.mark((function e(){var t;return x.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.openRequest;case 2:return t=e.sent,e.next=5,er(t);case 5:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),i}($e);function nr(e){return new rr(e)}function ir(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return ar(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ar(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return {s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return {s:function(){r=r.call(e);},n:function(){var e=r.next();return o=e.done,e},e:function(e){s=!0,a=e;},f:function(){try{o||null==r.return||r.return();}finally{if(s)throw a}}}}function ar(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var or=st(Q),sr=st(ce),ur={};at(ur,or),at(ur,sr);var fr=st(ne),cr=1e3,lr={nextZero:function(e,t){for(var r=t;0!==e[r];)r++;return r},readUshort:function(e,t){return e[t]<<8|e[t+1]},readShort:function(e,t){var r=lr.ui8;return r[0]=e[t+1],r[1]=e[t+0],lr.i16[0]},readInt:function(e,t){var r=lr.ui8;return r[0]=e[t+3],r[1]=e[t+2],r[2]=e[t+1],r[3]=e[t+0],lr.i32[0]},readUint:function(e,t){var r=lr.ui8;return r[0]=e[t+3],r[1]=e[t+2],r[2]=e[t+1],r[3]=e[t+0],lr.ui32[0]},readASCII:function(e,t,r){return r.map((function(r){return String.fromCharCode(e[t+r])})).join("")},readFloat:function(e,t){var r=lr.ui8;return ut(4,(function(n){r[n]=e[t+3-n];})),lr.fl32[0]},readDouble:function(e,t){var r=lr.ui8;return ut(8,(function(n){r[n]=e[t+7-n];})),lr.fl64[0]},writeUshort:function(e,t,r){e[t]=r>>8&255,e[t+1]=255&r;},writeUint:function(e,t,r){e[t]=r>>24&255,e[t+1]=r>>16&255,e[t+2]=r>>8&255,e[t+3]=r>>0&255;},writeASCII:function(e,t,r){ut(r.length,(function(n){e[t+n]=r.charCodeAt(n);}));},ui8:new Uint8Array(8)};lr.fl64=new Float64Array(lr.ui8.buffer),lr.writeDouble=function(e,t,r){lr.fl64[0]=r,ut(8,(function(r){e[t+r]=lr.ui8[7-r];}));};var hr=function(e){var t=new Uint8Array(cr),r=4,n=lr;t[0]=77,t[1]=77,t[3]=42;var i=8;if(n.writeUint(t,r,i),r+=4,e.forEach((function(r,a){var o=function(e,t,r,n){var i=r,a=Object.keys(n).filter((function(e){return null!=e&&"undefined"!==e}));e.writeUshort(t,i,a.length);var o,s=(i+=2)+12*a.length+4,u=ir(a);try{var f=function(){var r=o.value,a=null;"number"==typeof r?a=r:"string"==typeof r&&(a=parseInt(r,10));var u=te[a],f=fr[u];if(null==u||void 0===u||void 0===u)throw new Error("unknown type of tag: ".concat(a));var c=n[r];if(void 0===c)throw new Error("failed to get value for key ".concat(r));"ASCII"===u&&"string"==typeof c&&!1===ot(c,"\0")&&(c+="\0");var l=c.length;e.writeUshort(t,i,a),i+=2,e.writeUshort(t,i,f),i+=2,e.writeUint(t,i,l);var h=[-1,1,1,2,4,8,0,0,0,0,0,0,8][f]*l,d=i+=4;h>4&&(e.writeUint(t,i,s),d=s),"ASCII"===u?e.writeASCII(t,d,c):"SHORT"===u?ut(l,(function(r){e.writeUshort(t,d+2*r,c[r]);})):"LONG"===u?ut(l,(function(r){e.writeUint(t,d+4*r,c[r]);})):"RATIONAL"===u?ut(l,(function(r){e.writeUint(t,d+8*r,Math.round(1e4*c[r])),e.writeUint(t,d+8*r+4,1e4);})):"DOUBLE"===u&&ut(l,(function(r){e.writeDouble(t,d+8*r,c[r]);})),h>4&&(s+=h+=1&h),i+=4;};for(u.s();!(o=u.n()).done;)f();}catch(e){u.e(e);}finally{u.f();}return [i,s]}(n,t,i,r);i=o[1],a<e.length-1&&n.writeUint(t,o[0],i);})),t.slice)return t.slice(0,i).buffer;for(var a=new Uint8Array(i),o=0;o<i;o++)a[o]=t[o];return a.buffer},dr=[["Compression",1],["PlanarConfiguration",1],["ExtraSamples",0]];function pr(e,t){var r,n,i,a;"number"==typeof e[0]?(r=t.height||t.ImageLength,i=t.width||t.ImageWidth,n=e.length/(r*i),a=e):(n=e.length,r=e[0].length,i=e[0][0].length,a=[],ut(r,(function(t){ut(i,(function(r){ut(n,(function(n){a.push(e[n][t][r]);}));}));}))),t.ImageLength=r,delete t.height,t.ImageWidth=i,delete t.width,t.BitsPerSample||(t.BitsPerSample=ut(n,(function(){return 8}))),dr.forEach((function(e){var r=e[0];if(!t[r]){var n=e[1];t[r]=n;}})),t.PhotometricInterpretation||(t.PhotometricInterpretation=3===t.BitsPerSample.length?2:1),t.SamplesPerPixel||(t.SamplesPerPixel=[n]),t.StripByteCounts||(t.StripByteCounts=[n*r*i]),t.ModelPixelScale||(t.ModelPixelScale=[360/i,180/r,0]),t.SampleFormat||(t.SampleFormat=ut(n,(function(){return 1}))),t.hasOwnProperty("GeographicTypeGeoKey")||t.hasOwnProperty("ProjectedCSTypeGeoKey")||(t.GeographicTypeGeoKey=4326,t.ModelTiepoint=[0,0,0,-180,90,0],t.GeogCitationGeoKey="WGS 84",t.GTModelTypeGeoKey=2);var o=Object.keys(t).filter((function(e){return ot(e,"GeoKey")})).sort((function(e,t){return ur[e]-ur[t]}));if(!t.GeoAsciiParams){var s="";o.forEach((function(e){var r=Number(ur[e]);"ASCII"===te[r]&&(s+="".concat(t[e].toString(),"\0"));})),s.length>0&&(t.GeoAsciiParams=s);}if(!t.GeoKeyDirectory){var u=[1,1,0,o.length];o.forEach((function(e){var r,n,i,a=Number(ur[e]);u.push(a),"SHORT"===te[a]?(r=1,n=0,i=t[e]):"GeogCitationGeoKey"===e?(r=t.GeoAsciiParams.length,n=Number(ur.GeoAsciiParams),i=0):console.log("[geotiff.js] couldn't get TIFFTagLocation for ".concat(e)),u.push(n),u.push(r),u.push(i);})),t.GeoKeyDirectory=u;}for(var f in o)o.hasOwnProperty(f)&&delete t[f];["Compression","ExtraSamples","GeographicTypeGeoKey","GTModelTypeGeoKey","GTRasterTypeGeoKey","ImageLength","ImageWidth","Orientation","PhotometricInterpretation","ProjectedCSTypeGeoKey","PlanarConfiguration","ResolutionUnit","SamplesPerPixel","XPosition","YPosition"].forEach((function(e){var r;t[e]&&(t[e]=(r=t[e],Array.isArray(r)?r:[r]));}));var c=function(e){var t={};for(var r in e)"StripOffsets"!==r&&(ur[r]||console.error(r,"not in name2code:",Object.keys(ur)),t[ur[r]]=e[r]);return t}(t),l=function(e,t,r,n){if(null==r)throw new Error("you passed into encodeImage a width of type ".concat(r));if(null==t)throw new Error("you passed into encodeImage a width of type ".concat(t));var i={256:[t],257:[r],273:[cr],278:[r],305:"geotiff.js"};if(n)for(var a in n)n.hasOwnProperty(a)&&(i[a]=n[a]);var o=new Uint8Array(hr([i])),s=new Uint8Array(e),u=i[277],f=new Uint8Array(cr+t*r*u);return ut(o.length,(function(e){f[e]=o[e];})),function(e,t){for(var r=e.length,n=0;n<r;n++)t(e[n],n);}(s,(function(e,t){f[cr+t]=e;})),f.buffer}(a,i,r,c);return l}var mr=function(){function e(){b(this,e);}return c(e,[{key:"log",value:function(){}},{key:"debug",value:function(){}},{key:"info",value:function(){}},{key:"warn",value:function(){}},{key:"error",value:function(){}},{key:"time",value:function(){}},{key:"timeEnd",value:function(){}}]),e}();function vr(e,t){var r=e.length-t,n=0;do{for(var i=t;i>0;i--)e[n+t]+=e[n],n++;r-=t;}while(r>0)}function yr(e,t,r){for(var n=0,i=e.length,a=i/r;i>t;){for(var o=t;o>0;--o)e[n+t]+=e[n],++n;i-=t;}for(var s=e.slice(),u=0;u<a;++u)for(var f=0;f<r;++f)e[r*u+f]=s[(r-f-1)*a+u];}function gr(e,t,r,n,i,a){if(!t||1===t)return e;for(var o=0;o<i.length;++o){if(i[o]%8!=0)throw new Error("When decoding with predictor, only multiple of 8 bits are supported.");if(i[o]!==i[0])throw new Error("When decoding with predictor, all samples must have the same size.")}for(var s=i[0]/8,u=2===a?1:i.length,f=0;f<n&&!(f*u*r*s>=e.byteLength);++f){var c=void 0;if(2===t){switch(i[0]){case 8:c=new Uint8Array(e,f*u*r*s,u*r*s);break;case 16:c=new Uint16Array(e,f*u*r*s,u*r*s/2);break;case 32:c=new Uint32Array(e,f*u*r*s,u*r*s/4);break;default:throw new Error("Predictor 2 not allowed with ".concat(i[0]," bits per sample."))}vr(c,u);}else 3===t&&yr(c=new Uint8Array(e,f*u*r*s,u*r*s),u,s);}return e}new mr;var wr=function(){function e(){b(this,e);}var t;return c(e,[{key:"decode",value:(t=u(x.mark((function e(t,r){var n,i,a,o,s;return x.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.decodeBlock(r);case 2:if(n=e.sent,1===(i=t.Predictor||1)){e.next=9;break}return a=!t.StripOffsets,o=a?t.TileWidth:t.ImageWidth,s=a?t.TileLength:t.RowsPerStrip||t.ImageLength,e.abrupt("return",gr(n,i,o,s,t.BitsPerSample,t.PlanarConfiguration));case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)}))),function(e,r){return t.apply(this,arguments)})}]),e}();function br(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n);}return r}function kr(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?br(Object(n),!0).forEach((function(r){t(e,r,n[r]);})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):br(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t));}));}return e}function xr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return !1;if(Reflect.construct.sham)return !1;if("function"==typeof Proxy)return !0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return !1}}();return function(){var r,n=v(e);if(t){var i=v(this).constructor;r=Reflect.construct(n,arguments,i);}else r=n.apply(this,arguments);return m(this,r)}}function Ar(e){switch(e){case ie.BYTE:case ie.ASCII:case ie.SBYTE:case ie.UNDEFINED:return 1;case ie.SHORT:case ie.SSHORT:return 2;case ie.LONG:case ie.SLONG:case ie.FLOAT:case ie.IFD:return 4;case ie.RATIONAL:case ie.SRATIONAL:case ie.DOUBLE:case ie.LONG8:case ie.SLONG8:case ie.IFD8:return 8;default:throw new RangeError("Invalid field type: ".concat(e))}}function _r(e){var t=e.GeoKeyDirectory;if(!t)return null;for(var r={},n=4;n<=4*t[3];n+=4){var i=ce[t[n]],a=t[n+1]?Q[t[n+1]]:null,o=t[n+2],s=t[n+3],u=null;if(a){if(null==(u=e[a]))throw new Error("Could not get value of geoKey '".concat(i,"'."));"string"==typeof u?u=u.substring(s,s+o-1):u.subarray&&(u=u.subarray(s,s+o),1===o&&(u=u[0]));}else u=s;r[i]=u;}return r}function Ir(e,t,r,n){var i=null,a=null,o=Ar(t);switch(t){case ie.BYTE:case ie.ASCII:case ie.UNDEFINED:i=new Uint8Array(r),a=e.readUint8;break;case ie.SBYTE:i=new Int8Array(r),a=e.readInt8;break;case ie.SHORT:i=new Uint16Array(r),a=e.readUint16;break;case ie.SSHORT:i=new Int16Array(r),a=e.readInt16;break;case ie.LONG:case ie.IFD:i=new Uint32Array(r),a=e.readUint32;break;case ie.SLONG:i=new Int32Array(r),a=e.readInt32;break;case ie.LONG8:case ie.IFD8:i=new Array(r),a=e.readUint64;break;case ie.SLONG8:i=new Array(r),a=e.readInt64;break;case ie.RATIONAL:i=new Uint32Array(2*r),a=e.readUint32;break;case ie.SRATIONAL:i=new Int32Array(2*r),a=e.readInt32;break;case ie.FLOAT:i=new Float32Array(r),a=e.readFloat32;break;case ie.DOUBLE:i=new Float64Array(r),a=e.readFloat64;break;default:throw new RangeError("Invalid field type: ".concat(t))}if(t!==ie.RATIONAL&&t!==ie.SRATIONAL)for(var s=0;s<r;++s)i[s]=a.call(e,n+s*o);else for(var u=0;u<r;u+=2)i[u]=a.call(e,n+u*o),i[u+1]=a.call(e,n+(u*o+4));return t===ie.ASCII?new TextDecoder("utf-8").decode(i):i}var Pr=function e(t,r,n){b(this,e),this.fileDirectory=t,this.geoKeyDirectory=r,this.nextIFDByteOffset=n;},Sr=function(e){h(r,e);var t=xr(r);function r(e){var n;return b(this,r),(n=t.call(this,"No image at index ".concat(e))).index=e,n}return r}(w(Error)),Tr=function(){function e(){b(this,e);}var t;return c(e,[{key:"readRasters",value:(t=u(x.mark((function e(){var t,r,n,i,a,s,u,f,c,l,h,d,p,m,v,y,g,w,b,k,A,_,I,P,S,T,U,O,D,E,R,M,B,C,L,F,V,G,j,z=arguments;return x.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=z.length>0&&void 0!==z[0]?z[0]:{},r=t.window,n=t.width,i=t.height,a=t.resX,s=t.resY,u=t.bbox,e.next=5,this.getImage();case 5:return f=e.sent,c=f,e.next=9,this.getImageCount();case 9:if(l=e.sent,h=f.getBoundingBox(),!r||!u){e.next=13;break}throw new Error('Both "bbox" and "window" passed.');case 13:if(!n&&!i){e.next=24;break}if(r&&(d=f.getOrigin(),p=o(d,2),m=p[0],v=p[1],y=f.getResolution(),g=o(y,2),w=g[0],b=g[1],u=[m+r[0]*w,v+r[1]*b,m+r[2]*w,v+r[3]*b]),k=u||h,!n){e.next=20;break}if(!a){e.next=19;break}throw new Error("Both width and resX passed");case 19:a=(k[2]-k[0])/n;case 20:if(!i){e.next=24;break}if(!s){e.next=23;break}throw new Error("Both width and resY passed");case 23:s=(k[3]-k[1])/i;case 24:if(!a&&!s){e.next=48;break}A=[],_=0;case 27:if(!(_<l)){e.next=36;break}return e.next=30,this.getImage(_);case 30:I=e.sent,P=I.fileDirectory,S=P.SubfileType,T=P.NewSubfileType,(0===_||2===S||1&T)&&A.push(I);case 33:++_,e.next=27;break;case 36:A.sort((function(e,t){return e.getWidth()-t.getWidth()})),U=0;case 38:if(!(U<A.length)){e.next=48;break}if(O=A[U],D=(h[2]-h[0])/O.getWidth(),E=(h[3]-h[1])/O.getHeight(),c=O,!(a&&a>D||s&&s>E)){e.next=45;break}return e.abrupt("break",48);case 45:++U,e.next=38;break;case 48:return R=r,u&&(M=f.getOrigin(),B=o(M,2),C=B[0],L=B[1],F=c.getResolution(f),V=o(F,2),G=V[0],j=V[1],R=[Math.round((u[0]-C)/G),Math.round((u[1]-L)/j),Math.round((u[2]-C)/G),Math.round((u[3]-L)/j)],R=[Math.min(R[0],R[2]),Math.min(R[1],R[3]),Math.max(R[0],R[2]),Math.max(R[1],R[3])]),e.abrupt("return",c.readRasters(kr(kr({},t),{},{window:R})));case 51:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),e}(),Ur=function(e){h(d,e);var t,r,n,i,a,s,f,l=xr(d);function d(e,t,r,n){var i,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return b(this,d),(i=l.call(this)).source=e,i.littleEndian=t,i.bigTiff=r,i.firstIFDOffset=n,i.cache=a.cache||!1,i.ifdRequests=[],i.ghostValues=null,i}return c(d,[{key:"getSlice",value:(f=u(x.mark((function e(t,r){var n;return x.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.bigTiff?4048:1024,e.t0=Ge,e.next=4,this.source.fetch([{offset:t,length:void 0!==r?r:n}]);case 4:return e.t1=e.sent[0],e.t2=t,e.t3=this.littleEndian,e.t4=this.bigTiff,e.abrupt("return",new e.t0(e.t1,e.t2,e.t3,e.t4));case 9:case"end":return e.stop()}}),e,this)}))),function(e,t){return f.apply(this,arguments)})},{key:"parseFileDirectoryAt",value:(s=u(x.mark((function e(t){var r,n,i,a,o,s,u,f,c,l,h,d,p,m,v,y,g,w,b,k;return x.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.bigTiff?20:12,n=this.bigTiff?8:2,e.next=4,this.getSlice(t);case 4:if(i=e.sent,a=this.bigTiff?i.readUint64(t):i.readUint16(t),o=a*r+(this.bigTiff?16:6),i.covers(t,o)){e.next=11;break}return e.next=10,this.getSlice(t,o);case 10:i=e.sent;case 11:s={},u=t+(this.bigTiff?8:2),f=0;case 14:if(!(f<a)){e.next=41;break}if(c=i.readUint16(u),l=i.readUint16(u+2),h=this.bigTiff?i.readUint64(u+4):i.readUint32(u+4),d=void 0,p=void 0,m=Ar(l),v=u+(this.bigTiff?12:8),!(m*h<=(this.bigTiff?8:4))){e.next=26;break}d=Ir(i,l,h,v),e.next=36;break;case 26:if(y=i.readOffset(v),g=Ar(l)*h,!i.covers(y,g)){e.next=32;break}d=Ir(i,l,h,y),e.next=36;break;case 32:return e.next=34,this.getSlice(y,g);case 34:w=e.sent,d=Ir(w,l,h,y);case 36:p=1===h&&-1===re.indexOf(c)&&l!==ie.RATIONAL&&l!==ie.SRATIONAL?d[0]:d,s[Q[c]]=p;case 38:u+=r,++f,e.next=14;break;case 41:return b=_r(s),k=i.readOffset(t+n+r*a),e.abrupt("return",new Pr(s,b,k));case 44:case"end":return e.stop()}}),e,this)}))),function(e){return s.apply(this,arguments)})},{key:"requestIFD",value:(a=u(x.mark((function e(t){var r=this;return x.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.ifdRequests[t]){e.next=4;break}return e.abrupt("return",this.ifdRequests[t]);case 4:if(0!==t){e.next=9;break}return this.ifdRequests[t]=this.parseFileDirectoryAt(this.firstIFDOffset),e.abrupt("return",this.ifdRequests[t]);case 9:if(this.ifdRequests[t-1]){e.next=19;break}e.prev=10,this.ifdRequests[t-1]=this.requestIFD(t-1),e.next=19;break;case 14:if(e.prev=14,e.t0=e.catch(10),!(e.t0 instanceof Sr)){e.next=18;break}throw new Sr(t);case 18:throw e.t0;case 19:return this.ifdRequests[t]=u(x.mark((function e(){var n;return x.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.ifdRequests[t-1];case 2:if(0!==(n=e.sent).nextIFDByteOffset){e.next=5;break}throw new Sr(t);case 5:return e.abrupt("return",r.parseFileDirectoryAt(n.nextIFDByteOffset));case 6:case"end":return e.stop()}}),e)})))(),e.abrupt("return",this.ifdRequests[t]);case 21:case"end":return e.stop()}}),e,this,[[10,14]])}))),function(e){return a.apply(this,arguments)})},{key:"getImage",value:(i=u(x.mark((function e(){var t,r,n=arguments;return x.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:0,e.next=3,this.requestIFD(t);case 3:return r=e.sent,e.abrupt("return",new Fe(r.fileDirectory,r.geoKeyDirectory,this.dataView,this.littleEndian,this.cache,this.source));case 5:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"getImageCount",value:(n=u(x.mark((function e(){var t,r;return x.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=0,r=!0;case 2:if(!r){e.next=18;break}return e.prev=3,e.next=6,this.requestIFD(t);case 6:++t,e.next=16;break;case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof Sr)){e.next=15;break}r=!1,e.next=16;break;case 15:throw e.t0;case 16:e.next=2;break;case 18:return e.abrupt("return",t);case 19:case"end":return e.stop()}}),e,this,[[3,9]])}))),function(){return n.apply(this,arguments)})},{key:"getGhostValues",value:(r=u(x.mark((function e(){var t,r,n,i,a,s,u,f,c=this;return x.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.bigTiff?16:8,!this.ghostValues){e.next=3;break}return e.abrupt("return",this.ghostValues);case 3:return n=(r="GDAL_STRUCTURAL_METADATA_SIZE=").length+100,e.next=7,this.getSlice(t,n);case 7:if(i=e.sent,r!==Ir(i,ie.ASCII,r.length,t)){e.next=19;break}if(a=Ir(i,ie.ASCII,n,t),s=a.split("\n")[0],!((u=Number(s.split("=")[1].split(" ")[0])+s.length)>n)){e.next=16;break}return e.next=15,this.getSlice(t,u);case 15:i=e.sent;case 16:f=Ir(i,ie.ASCII,u,t),this.ghostValues={},f.split("\n").filter((function(e){return e.length>0})).map((function(e){return e.split("=")})).forEach((function(e){var t=o(e,2),r=t[0],n=t[1];c.ghostValues[r]=n;}));case 19:return e.abrupt("return",this.ghostValues);case 20:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"close",value:function(){return "function"==typeof this.source.close&&this.source.close()}}],[{key:"fromSource",value:(t=u(x.mark((function e(t,r,n){var i,a,o,s,u,f,c;return x.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.fetch([{offset:0,length:1024}],n);case 2:if(i=e.sent[0],a=new Ve(i),18761!==(o=a.getUint16(0,0))){e.next=9;break}s=!0,e.next=14;break;case 9:if(19789!==o){e.next=13;break}s=!1,e.next=14;break;case 13:throw new TypeError("Invalid byte order value.");case 14:if(42!==(u=a.getUint16(2,s))){e.next=19;break}f=!1,e.next=27;break;case 19:if(43!==u){e.next=26;break}if(f=!0,8===a.getUint16(4,s)){e.next=24;break}throw new Error("Unsupported offset byte-size.");case 24:e.next=27;break;case 26:throw new TypeError("Invalid magic number.");case 27:return c=f?a.getUint64(8,s):a.getUint32(4,s),e.abrupt("return",new d(t,s,f,c,r));case 29:case"end":return e.stop()}}),e)}))),function(e,r,n){return t.apply(this,arguments)})}]),d}(Tr),Or=function(e){h(a,e);var t,r,n,i=xr(a);function a(e,t){var r;return b(this,a),(r=i.call(this)).mainFile=e,r.overviewFiles=t,r.imageFiles=[e].concat(t),r.fileDirectoriesPerFile=null,r.fileDirectoriesPerFileParsing=null,r.imageCount=null,r}return c(a,[{key:"parseFileDirectoriesPerFile",value:(n=u(x.mark((function e(){var t;return x.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[this.mainFile.parseFileDirectoryAt(this.mainFile.firstIFDOffset)].concat(this.overviewFiles.map((function(e){return e.parseFileDirectoryAt(e.firstIFDOffset)}))),e.next=3,Promise.all(t);case 3:return this.fileDirectoriesPerFile=e.sent,e.abrupt("return",this.fileDirectoriesPerFile);case 5:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"getImage",value:(r=u(x.mark((function e(){var t,r,n,i,a,o,s,u=arguments;return x.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:0,e.next=3,this.getImageCount();case 3:return e.next=5,this.parseFileDirectoriesPerFile();case 5:r=0,n=0,i=0;case 8:if(!(i<this.imageFiles.length)){e.next=26;break}a=this.imageFiles[i],o=0;case 11:if(!(o<this.imageCounts[i])){e.next=22;break}if(t!==r){e.next=17;break}return e.next=15,a.requestIFD(n);case 15:return s=e.sent,e.abrupt("return",new Fe(s.fileDirectory,s.geoKeyDirectory,a.dataView,a.littleEndian,a.cache,a.source));case 17:r++,n++;case 19:o++,e.next=11;break;case 22:n=0;case 23:i++,e.next=8;break;case 26:throw new RangeError("Invalid image index");case 27:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"getImageCount",value:(t=u(x.mark((function e(){var t;return x.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===this.imageCount){e.next=2;break}return e.abrupt("return",this.imageCount);case 2:return t=[this.mainFile.getImageCount()].concat(this.overviewFiles.map((function(e){return e.getImageCount()}))),e.next=5,Promise.all(t);case 5:return this.imageCounts=e.sent,this.imageCount=this.imageCounts.reduce((function(e,t){return e+t}),0),e.abrupt("return",this.imageCount);case 8:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),a}(Tr);function Dr(){return Dr=u(x.mark((function e(t){var r,n,i=arguments;return x.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=i.length>1&&void 0!==i[1]?i[1]:{},n=i.length>2?i[2]:void 0,e.abrupt("return",Ur.fromSource(Ht(t,r),n));case 3:case"end":return e.stop()}}),e)}))),Dr.apply(this,arguments)}function Er(){return (Er=u(x.mark((function e(t,r){return x.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ur.fromSource(Xt(t),r));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Rr(){return (Rr=u(x.mark((function e(t,r){return x.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ur.fromSource(nr(t),r));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Mr(){return (Mr=u(x.mark((function e(t,r){return x.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ur.fromSource(Qt(t),r));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Br(){return Br=u(x.mark((function e(t){var r,n,i,a,o,s=arguments;return x.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>1&&void 0!==s[1]?s[1]:[],n=s.length>2&&void 0!==s[2]?s[2]:{},i=s.length>3?s[3]:void 0,e.next=5,Ur.fromSource(Ht(t,n),i);case 5:return a=e.sent,e.next=8,Promise.all(r.map((function(e){return Ur.fromSource(Ht(e,n))})));case 8:return o=e.sent,e.abrupt("return",new Or(a,o));case 10:case"end":return e.stop()}}),e)}))),Br.apply(this,arguments)}function Cr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return !1;if(Reflect.construct.sham)return !1;if("function"==typeof Proxy)return !0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return !1}}();return function(){var r,n=v(e);if(t){var i=v(this).constructor;r=Reflect.construct(n,arguments,i);}else r=n.apply(this,arguments);return m(this,r)}}var Lr=function(e){h(r,e);var t=Cr(r);function r(){return b(this,r),t.apply(this,arguments)}return c(r,[{key:"decodeBlock",value:function(e){return e}}]),r}(wr),Fr=Object.freeze({__proto__:null,default:Lr});function Vr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return !1;if(Reflect.construct.sham)return !1;if("function"==typeof Proxy)return !0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return !1}}();return function(){var r,n=v(e);if(t){var i=v(this).constructor;r=Reflect.construct(n,arguments,i);}else r=n.apply(this,arguments);return m(this,r)}}function Gr(e,t){for(var r=t.length-1;r>=0;r--)e.push(t[r]);return e}function jr(e){for(var t=new Uint16Array(4093),r=new Uint8Array(4093),n=0;n<=257;n++)t[n]=4096,r[n]=n;var i=258,a=9,o=0;function s(){i=258,a=9;}function u(e){var t=function(e,t,r){var n=t%8,i=Math.floor(t/8),a=8-n,o=t+r-8*(i+1),s=8*(i+2)-(t+r),u=8*(i+2)-t;if(s=Math.max(0,s),i>=e.length)return console.warn("ran off the end of the buffer before finding EOI_CODE (end on input code)"),257;var f=e[i]&Math.pow(2,8-n)-1,c=f<<=r-a;if(i+1<e.length){var l=e[i+1]>>>s;c+=l<<=Math.max(0,r-u);}if(o>8&&i+2<e.length){var h=8*(i+3)-(t+r);c+=e[i+2]>>>h;}return c}(e,o,a);return o+=a,t}function f(e,n){return r[i]=n,t[i]=e,++i-1}function c(e){for(var n=[],i=e;4096!==i;i=t[i])n.push(r[i]);return n}var l=[];s();for(var h,d=new Uint8Array(e),p=u(d);257!==p;){if(256===p){for(s(),p=u(d);256===p;)p=u(d);if(257===p)break;if(p>256)throw new Error("corrupted code at scanline ".concat(p));Gr(l,c(p)),h=p;}else if(p<i){var m=c(p);Gr(l,m),f(h,m[m.length-1]),h=p;}else {var v=c(h);if(!v)throw new Error("Bogus entry. Not in dictionary, ".concat(h," / ").concat(i,", position: ").concat(o));Gr(l,v),l.push(v[v.length-1]),f(h,v[v.length-1]),h=p;}i+1>=Math.pow(2,a)&&(12===a?h=void 0:a++),p=u(d);}return new Uint8Array(l)}var zr=function(e){h(r,e);var t=Vr(r);function r(){return b(this,r),t.apply(this,arguments)}return c(r,[{key:"decodeBlock",value:function(e){return jr(e).buffer}}]),r}(wr),Nr=Object.freeze({__proto__:null,default:zr});function Kr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return !1;if(Reflect.construct.sham)return !1;if("function"==typeof Proxy)return !0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return !1}}();return function(){var r,n=v(e);if(t){var i=v(this).constructor;r=Reflect.construct(n,arguments,i);}else r=n.apply(this,arguments);return m(this,r)}}var Zr=new Int32Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]),Hr=4017,Yr=799,qr=3406,Xr=2276,Wr=1567,Jr=3784,Qr=5793,$r=2896;function en(e,t){for(var r=0,n=[],i=16;i>0&&!e[i-1];)--i;n.push({children:[],index:0});for(var a,o=n[0],s=0;s<i;s++){for(var u=0;u<e[s];u++){for((o=n.pop()).children[o.index]=t[r];o.index>0;)o=n.pop();for(o.index++,n.push(o);n.length<=s;)n.push(a={children:[],index:0}),o.children[o.index]=a.children,o=a;r++;}s+1<i&&(n.push(a={children:[],index:0}),o.children[o.index]=a.children,o=a);}return n[0].children}function tn(e,t,r,n,i,a,o,s,u){var f=r.mcusPerLine,c=r.progressive,l=t,h=t,p=0,m=0;function v(){if(m>0)return m--,p>>m&1;if(255===(p=e[h++])){var t=e[h++];if(t)throw new Error("unexpected marker: ".concat((p<<8|t).toString(16)))}return m=7,p>>>7}function y(e){for(var t,r=e;null!==(t=v());){if("number"==typeof(r=r[t]))return r;if("object"!==d(r))throw new Error("invalid huffman sequence")}return null}function g(e){for(var t=e,r=0;t>0;){var n=v();if(null===n)return;r=r<<1|n,--t;}return r}function w(e){var t=g(e);return t>=1<<e-1?t:t+(-1<<e)+1}var b=0;var k,x=0;function A(e,t,r,n,i){var a=r%f,o=(r/f|0)*e.v+n,s=a*e.h+i;t(e,e.blocks[o][s]);}function _(e,t,r){var n=r/e.blocksPerLine|0,i=r%e.blocksPerLine;t(e,e.blocks[n][i]);}var I,P,S,T,U,O,D=n.length;O=c?0===a?0===s?function(e,t){var r=y(e.huffmanTableDC),n=0===r?0:w(r)<<u;e.pred+=n,t[0]=e.pred;}:function(e,t){t[0]|=v()<<u;}:0===s?function(e,t){if(b>0)b--;else for(var r=a,n=o;r<=n;){var i=y(e.huffmanTableAC),s=15&i,f=i>>4;if(0===s){if(f<15){b=g(f)+(1<<f)-1;break}r+=16;}else t[Zr[r+=f]]=w(s)*(1<<u),r++;}}:function(e,t){for(var r=a,n=o,i=0;r<=n;){var s=Zr[r],f=t[s]<0?-1:1;switch(x){case 0:var c=y(e.huffmanTableAC),l=15&c;if(i=c>>4,0===l)i<15?(b=g(i)+(1<<i),x=4):(i=16,x=1);else {if(1!==l)throw new Error("invalid ACn encoding");k=w(l),x=i?2:3;}continue;case 1:case 2:t[s]?t[s]+=(v()<<u)*f:0==--i&&(x=2===x?3:0);break;case 3:t[s]?t[s]+=(v()<<u)*f:(t[s]=k<<u,x=0);break;case 4:t[s]&&(t[s]+=(v()<<u)*f);}r++;}4===x&&0==--b&&(x=0);}:function(e,t){var r=y(e.huffmanTableDC),n=0===r?0:w(r);e.pred+=n,t[0]=e.pred;for(var i=1;i<64;){var a=y(e.huffmanTableAC),o=15&a,s=a>>4;if(0===o){if(s<15)break;i+=16;}else t[Zr[i+=s]]=w(o),i++;}};var E,R,M=0;R=1===D?n[0].blocksPerLine*n[0].blocksPerColumn:f*r.mcusPerColumn;for(var B=i||R;M<R;){for(P=0;P<D;P++)n[P].pred=0;if(b=0,1===D)for(I=n[0],U=0;U<B;U++)_(I,O,M),M++;else for(U=0;U<B;U++){for(P=0;P<D;P++){var C=I=n[P],L=C.h,F=C.v;for(S=0;S<F;S++)for(T=0;T<L;T++)A(I,O,M,S,T);}if(++M===R)break}if(m=0,(E=e[h]<<8|e[h+1])<65280)throw new Error("marker was not found");if(!(E>=65488&&E<=65495))break;h+=2;}return h-l}function rn(e,t){var r=[],n=t.blocksPerLine,i=t.blocksPerColumn,a=n<<3,o=new Int32Array(64),s=new Uint8Array(64);function u(e,r,n){var i,a,o,s,u,f,c,l,h,d,p=t.quantizationTable,m=n;for(d=0;d<64;d++)m[d]=e[d]*p[d];for(d=0;d<8;++d){var v=8*d;0!==m[1+v]||0!==m[2+v]||0!==m[3+v]||0!==m[4+v]||0!==m[5+v]||0!==m[6+v]||0!==m[7+v]?(i=Qr*m[0+v]+128>>8,a=Qr*m[4+v]+128>>8,o=m[2+v],s=m[6+v],u=$r*(m[1+v]-m[7+v])+128>>8,l=$r*(m[1+v]+m[7+v])+128>>8,f=m[3+v]<<4,c=m[5+v]<<4,h=i-a+1>>1,i=i+a+1>>1,a=h,h=o*Jr+s*Wr+128>>8,o=o*Wr-s*Jr+128>>8,s=h,h=u-c+1>>1,u=u+c+1>>1,c=h,h=l+f+1>>1,f=l-f+1>>1,l=h,h=i-s+1>>1,i=i+s+1>>1,s=h,h=a-o+1>>1,a=a+o+1>>1,o=h,h=u*Xr+l*qr+2048>>12,u=u*qr-l*Xr+2048>>12,l=h,h=f*Yr+c*Hr+2048>>12,f=f*Hr-c*Yr+2048>>12,c=h,m[0+v]=i+l,m[7+v]=i-l,m[1+v]=a+c,m[6+v]=a-c,m[2+v]=o+f,m[5+v]=o-f,m[3+v]=s+u,m[4+v]=s-u):(h=Qr*m[0+v]+512>>10,m[0+v]=h,m[1+v]=h,m[2+v]=h,m[3+v]=h,m[4+v]=h,m[5+v]=h,m[6+v]=h,m[7+v]=h);}for(d=0;d<8;++d){var y=d;0!==m[8+y]||0!==m[16+y]||0!==m[24+y]||0!==m[32+y]||0!==m[40+y]||0!==m[48+y]||0!==m[56+y]?(i=Qr*m[0+y]+2048>>12,a=Qr*m[32+y]+2048>>12,o=m[16+y],s=m[48+y],u=$r*(m[8+y]-m[56+y])+2048>>12,l=$r*(m[8+y]+m[56+y])+2048>>12,f=m[24+y],c=m[40+y],h=i-a+1>>1,i=i+a+1>>1,a=h,h=o*Jr+s*Wr+2048>>12,o=o*Wr-s*Jr+2048>>12,s=h,h=u-c+1>>1,u=u+c+1>>1,c=h,h=l+f+1>>1,f=l-f+1>>1,l=h,h=i-s+1>>1,i=i+s+1>>1,s=h,h=a-o+1>>1,a=a+o+1>>1,o=h,h=u*Xr+l*qr+2048>>12,u=u*qr-l*Xr+2048>>12,l=h,h=f*Yr+c*Hr+2048>>12,f=f*Hr-c*Yr+2048>>12,c=h,m[0+y]=i+l,m[56+y]=i-l,m[8+y]=a+c,m[48+y]=a-c,m[16+y]=o+f,m[40+y]=o-f,m[24+y]=s+u,m[32+y]=s-u):(h=Qr*n[d+0]+8192>>14,m[0+y]=h,m[8+y]=h,m[16+y]=h,m[24+y]=h,m[32+y]=h,m[40+y]=h,m[48+y]=h,m[56+y]=h);}for(d=0;d<64;++d){var g=128+(m[d]+8>>4);r[d]=g<0?0:g>255?255:g;}}for(var f=0;f<i;f++){for(var c=f<<3,l=0;l<8;l++)r.push(new Uint8Array(a));for(var h=0;h<n;h++){u(t.blocks[f][h],s,o);for(var d=0,p=h<<3,m=0;m<8;m++)for(var v=r[c+m],y=0;y<8;y++)v[p+y]=s[d++];}}return r}var nn=function(){function e(){b(this,e),this.jfif=null,this.adobe=null,this.quantizationTables=[],this.huffmanTablesAC=[],this.huffmanTablesDC=[],this.resetFrames();}return c(e,[{key:"resetFrames",value:function(){this.frames=[];}},{key:"parse",value:function(e){var t=0;function r(){var r=e[t]<<8|e[t+1];return t+=2,r}function n(e){var t,r,n=0,i=0;for(r in e.components)e.components.hasOwnProperty(r)&&(n<(t=e.components[r]).h&&(n=t.h),i<t.v&&(i=t.v));var a=Math.ceil(e.samplesPerLine/8/n),o=Math.ceil(e.scanLines/8/i);for(r in e.components)if(e.components.hasOwnProperty(r)){t=e.components[r];for(var s=Math.ceil(Math.ceil(e.samplesPerLine/8)*t.h/n),u=Math.ceil(Math.ceil(e.scanLines/8)*t.v/i),f=a*t.h,c=o*t.v,l=[],h=0;h<c;h++){for(var d=[],p=0;p<f;p++)d.push(new Int32Array(64));l.push(d);}t.blocksPerLine=s,t.blocksPerColumn=u,t.blocks=l;}e.maxH=n,e.maxV=i,e.mcusPerLine=a,e.mcusPerColumn=o;}var i,a,o=r();if(65496!==o)throw new Error("SOI not found");for(o=r();65497!==o;){switch(o){case 65280:break;case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var s=(i=void 0,a=void 0,i=r(),a=e.subarray(t,t+i-2),t+=a.length,a);65504===o&&74===s[0]&&70===s[1]&&73===s[2]&&70===s[3]&&0===s[4]&&(this.jfif={version:{major:s[5],minor:s[6]},densityUnits:s[7],xDensity:s[8]<<8|s[9],yDensity:s[10]<<8|s[11],thumbWidth:s[12],thumbHeight:s[13],thumbData:s.subarray(14,14+3*s[12]*s[13])}),65518===o&&65===s[0]&&100===s[1]&&111===s[2]&&98===s[3]&&101===s[4]&&0===s[5]&&(this.adobe={version:s[6],flags0:s[7]<<8|s[8],flags1:s[9]<<8|s[10],transformCode:s[11]});break;case 65499:for(var u=r()+t-2;t<u;){var f=e[t++],c=new Int32Array(64);if(f>>4==0)for(var l=0;l<64;l++){c[Zr[l]]=e[t++];}else {if(f>>4!=1)throw new Error("DQT: invalid table spec");for(var h=0;h<64;h++){c[Zr[h]]=r();}}this.quantizationTables[15&f]=c;}break;case 65472:case 65473:case 65474:r();for(var d={extended:65473===o,progressive:65474===o,precision:e[t++],scanLines:r(),samplesPerLine:r(),components:{},componentsOrder:[]},p=e[t++],m=void 0,v=0;v<p;v++){m=e[t];var y=e[t+1]>>4,g=15&e[t+1],w=e[t+2];d.componentsOrder.push(m),d.components[m]={h:y,v:g,quantizationIdx:w},t+=3;}n(d),this.frames.push(d);break;case 65476:for(var b=r(),k=2;k<b;){for(var x=e[t++],A=new Uint8Array(16),_=0,I=0;I<16;I++,t++)A[I]=e[t],_+=A[I];for(var P=new Uint8Array(_),S=0;S<_;S++,t++)P[S]=e[t];k+=17+_,x>>4==0?this.huffmanTablesDC[15&x]=en(A,P):this.huffmanTablesAC[15&x]=en(A,P);}break;case 65501:r(),this.resetInterval=r();break;case 65498:r();for(var T=e[t++],U=[],O=this.frames[0],D=0;D<T;D++){var E=O.components[e[t++]],R=e[t++];E.huffmanTableDC=this.huffmanTablesDC[R>>4],E.huffmanTableAC=this.huffmanTablesAC[15&R],U.push(E);}var M=e[t++],B=e[t++],C=e[t++],L=tn(e,t,O,U,this.resetInterval,M,B,C>>4,15&C);t+=L;break;case 65535:255!==e[t]&&t--;break;default:if(255===e[t-3]&&e[t-2]>=192&&e[t-2]<=254){t-=3;break}throw new Error("unknown JPEG marker ".concat(o.toString(16)))}o=r();}}},{key:"getResult",value:function(){var e=this.frames;if(0===this.frames.length)throw new Error("no frames were decoded");this.frames.length>1&&console.warn("more than one frame is not supported");for(var t=0;t<this.frames.length;t++)for(var r=this.frames[t].components,n=0,i=Object.keys(r);n<i.length;n++){var a=i[n];r[a].quantizationTable=this.quantizationTables[r[a].quantizationIdx],delete r[a].quantizationIdx;}for(var o=e[0],s=o.components,u=o.componentsOrder,f=[],c=o.samplesPerLine,l=o.scanLines,h=0;h<u.length;h++){var d=s[u[h]];f.push({lines:rn(0,d),scaleX:d.h/o.maxH,scaleY:d.v/o.maxV});}for(var p=new Uint8Array(c*l*f.length),m=0,v=0;v<l;++v)for(var y=0;y<c;++y)for(var g=0;g<f.length;++g){var w=f[g];p[m]=w.lines[0|v*w.scaleY][0|y*w.scaleX],++m;}return p}}]),e}(),an=function(e){h(r,e);var t=Kr(r);function r(e){var n;return b(this,r),(n=t.call(this)).reader=new nn,e.JPEGTables&&n.reader.parse(e.JPEGTables),n}return c(r,[{key:"decodeBlock",value:function(e){return this.reader.resetFrames(),this.reader.parse(new Uint8Array(e)),this.reader.getResult().buffer}}]),r}(wr),on=Object.freeze({__proto__:null,default:an});function sn(e){for(var t=e.length;--t>=0;)e[t]=0;}sn(new Array(576)),sn(new Array(60)),sn(new Array(512)),sn(new Array(256)),sn(new Array(29)),sn(new Array(30));var un=function(e,t,r,n){for(var i=65535&e|0,a=e>>>16&65535|0,o=0;0!==r;){r-=o=r>2e3?2e3:r;do{a=a+(i=i+t[n++]|0)|0;}while(--o);i%=65521,a%=65521;}return i|a<<16|0},fn=new Uint32Array(function(){for(var e,t=[],r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=1&e?3988292384^e>>>1:e>>>1;t[r]=e;}return t}()),cn=function(e,t,r,n){var i=fn,a=n+r;e^=-1;for(var o=n;o<a;o++)e=e>>>8^i[255&(e^t[o])];return -1^e},ln={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},hn={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},dn=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},pn=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var r=t.shift();if(r){if("object"!==d(r))throw new TypeError(r+"must be non-object");for(var n in r)dn(r,n)&&(e[n]=r[n]);}}return e},mn=function(e){for(var t=0,r=0,n=e.length;r<n;r++)t+=e[r].length;for(var i=new Uint8Array(t),a=0,o=0,s=e.length;a<s;a++){var u=e[a];i.set(u,o),o+=u.length;}return i},vn=!0;try{String.fromCharCode.apply(null,new Uint8Array(1));}catch(e){vn=!1;}for(var yn=new Uint8Array(256),gn=0;gn<256;gn++)yn[gn]=gn>=252?6:gn>=248?5:gn>=240?4:gn>=224?3:gn>=192?2:1;yn[254]=yn[254]=1;var wn=function(e){if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return (new TextEncoder).encode(e);var t,r,n,i,a,o=e.length,s=0;for(i=0;i<o;i++)55296==(64512&(r=e.charCodeAt(i)))&&i+1<o&&56320==(64512&(n=e.charCodeAt(i+1)))&&(r=65536+(r-55296<<10)+(n-56320),i++),s+=r<128?1:r<2048?2:r<65536?3:4;for(t=new Uint8Array(s),a=0,i=0;a<s;i++)55296==(64512&(r=e.charCodeAt(i)))&&i+1<o&&56320==(64512&(n=e.charCodeAt(i+1)))&&(r=65536+(r-55296<<10)+(n-56320),i++),r<128?t[a++]=r:r<2048?(t[a++]=192|r>>>6,t[a++]=128|63&r):r<65536?(t[a++]=224|r>>>12,t[a++]=128|r>>>6&63,t[a++]=128|63&r):(t[a++]=240|r>>>18,t[a++]=128|r>>>12&63,t[a++]=128|r>>>6&63,t[a++]=128|63&r);return t},bn=function(e,t){var r,n,i=t||e.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return (new TextDecoder).decode(e.subarray(0,t));var a=new Array(2*i);for(n=0,r=0;r<i;){var o=e[r++];if(o<128)a[n++]=o;else {var s=yn[o];if(s>4)a[n++]=65533,r+=s-1;else {for(o&=2===s?31:3===s?15:7;s>1&&r<i;)o=o<<6|63&e[r++],s--;s>1?a[n++]=65533:o<65536?a[n++]=o:(o-=65536,a[n++]=55296|o>>10&1023,a[n++]=56320|1023&o);}}}return function(e,t){if(t<65534&&e.subarray&&vn)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));for(var r="",n=0;n<t;n++)r+=String.fromCharCode(e[n]);return r}(a,n)},kn=function(e,t){(t=t||e.length)>e.length&&(t=e.length);for(var r=t-1;r>=0&&128==(192&e[r]);)r--;return r<0||0===r?t:r+yn[e[r]]>t?r:t};var xn=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0;},An=function(e,t){var r,n,i,a,o,s,u,f,c,l,h,d,p,m,v,y,g,w,b,k,x,A,_,I,P=e.state;r=e.next_in,_=e.input,n=r+(e.avail_in-5),i=e.next_out,I=e.output,a=i-(t-e.avail_out),o=i+(e.avail_out-257),s=P.dmax,u=P.wsize,f=P.whave,c=P.wnext,l=P.window,h=P.hold,d=P.bits,p=P.lencode,m=P.distcode,v=(1<<P.lenbits)-1,y=(1<<P.distbits)-1;e:do{d<15&&(h+=_[r++]<<d,d+=8,h+=_[r++]<<d,d+=8),g=p[h&v];t:for(;;){if(h>>>=w=g>>>24,d-=w,0===(w=g>>>16&255))I[i++]=65535&g;else {if(!(16&w)){if(0==(64&w)){g=p[(65535&g)+(h&(1<<w)-1)];continue t}if(32&w){P.mode=12;break e}e.msg="invalid literal/length code",P.mode=30;break e}b=65535&g,(w&=15)&&(d<w&&(h+=_[r++]<<d,d+=8),b+=h&(1<<w)-1,h>>>=w,d-=w),d<15&&(h+=_[r++]<<d,d+=8,h+=_[r++]<<d,d+=8),g=m[h&y];r:for(;;){if(h>>>=w=g>>>24,d-=w,!(16&(w=g>>>16&255))){if(0==(64&w)){g=m[(65535&g)+(h&(1<<w)-1)];continue r}e.msg="invalid distance code",P.mode=30;break e}if(k=65535&g,d<(w&=15)&&(h+=_[r++]<<d,(d+=8)<w&&(h+=_[r++]<<d,d+=8)),(k+=h&(1<<w)-1)>s){e.msg="invalid distance too far back",P.mode=30;break e}if(h>>>=w,d-=w,k>(w=i-a)){if((w=k-w)>f&&P.sane){e.msg="invalid distance too far back",P.mode=30;break e}if(x=0,A=l,0===c){if(x+=u-w,w<b){b-=w;do{I[i++]=l[x++];}while(--w);x=i-k,A=I;}}else if(c<w){if(x+=u+c-w,(w-=c)<b){b-=w;do{I[i++]=l[x++];}while(--w);if(x=0,c<b){b-=w=c;do{I[i++]=l[x++];}while(--w);x=i-k,A=I;}}}else if(x+=c-w,w<b){b-=w;do{I[i++]=l[x++];}while(--w);x=i-k,A=I;}for(;b>2;)I[i++]=A[x++],I[i++]=A[x++],I[i++]=A[x++],b-=3;b&&(I[i++]=A[x++],b>1&&(I[i++]=A[x++]));}else {x=i-k;do{I[i++]=I[x++],I[i++]=I[x++],I[i++]=I[x++],b-=3;}while(b>2);b&&(I[i++]=I[x++],b>1&&(I[i++]=I[x++]));}break}}break}}while(r<n&&i<o);r-=b=d>>3,h&=(1<<(d-=b<<3))-1,e.next_in=r,e.next_out=i,e.avail_in=r<n?n-r+5:5-(r-n),e.avail_out=i<o?o-i+257:257-(i-o),P.hold=h,P.bits=d;},_n=15,In=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),Pn=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),Sn=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),Tn=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),Un=function(e,t,r,n,i,a,o,s){var u,f,c,l,h,d,p,m,v,y=s.bits,g=0,w=0,b=0,k=0,x=0,A=0,_=0,I=0,P=0,S=0,T=null,U=0,O=new Uint16Array(16),D=new Uint16Array(16),E=null,R=0;for(g=0;g<=_n;g++)O[g]=0;for(w=0;w<n;w++)O[t[r+w]]++;for(x=y,k=_n;k>=1&&0===O[k];k--);if(x>k&&(x=k),0===k)return i[a++]=20971520,i[a++]=20971520,s.bits=1,0;for(b=1;b<k&&0===O[b];b++);for(x<b&&(x=b),I=1,g=1;g<=_n;g++)if(I<<=1,(I-=O[g])<0)return -1;if(I>0&&(0===e||1!==k))return -1;for(D[1]=0,g=1;g<_n;g++)D[g+1]=D[g]+O[g];for(w=0;w<n;w++)0!==t[r+w]&&(o[D[t[r+w]]++]=w);if(0===e?(T=E=o,d=19):1===e?(T=In,U-=257,E=Pn,R-=257,d=256):(T=Sn,E=Tn,d=-1),S=0,w=0,g=b,h=a,A=x,_=0,c=-1,l=(P=1<<x)-1,1===e&&P>852||2===e&&P>592)return 1;for(;;){p=g-_,o[w]<d?(m=0,v=o[w]):o[w]>d?(m=E[R+o[w]],v=T[U+o[w]]):(m=96,v=0),u=1<<g-_,b=f=1<<A;do{i[h+(S>>_)+(f-=u)]=p<<24|m<<16|v|0;}while(0!==f);for(u=1<<g-1;S&u;)u>>=1;if(0!==u?(S&=u-1,S+=u):S=0,w++,0==--O[g]){if(g===k)break;g=t[r+o[w]];}if(g>x&&(S&l)!==c){for(0===_&&(_=x),h+=b,I=1<<(A=g-_);A+_<k&&!((I-=O[A+_])<=0);)A++,I<<=1;if(P+=1<<A,1===e&&P>852||2===e&&P>592)return 1;i[c=S&l]=x<<24|A<<16|h-a|0;}}return 0!==S&&(i[h+S]=g-_<<24|64<<16|0),s.bits=x,0},On=hn.Z_FINISH,Dn=hn.Z_BLOCK,En=hn.Z_TREES,Rn=hn.Z_OK,Mn=hn.Z_STREAM_END,Bn=hn.Z_NEED_DICT,Cn=hn.Z_STREAM_ERROR,Ln=hn.Z_DATA_ERROR,Fn=hn.Z_MEM_ERROR,Vn=hn.Z_BUF_ERROR,Gn=hn.Z_DEFLATED,jn=12,zn=30,Nn=function(e){return (e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)};function Kn(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0;}var Zn,Hn,Yn=function(e){if(!e||!e.state)return Cn;var t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=1,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(852),t.distcode=t.distdyn=new Int32Array(592),t.sane=1,t.back=-1,Rn},qn=function(e){if(!e||!e.state)return Cn;var t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,Yn(e)},Xn=function(e,t){var r;if(!e||!e.state)return Cn;var n=e.state;return t<0?(r=0,t=-t):(r=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?Cn:(null!==n.window&&n.wbits!==t&&(n.window=null),n.wrap=r,n.wbits=t,qn(e))},Wn=function(e,t){if(!e)return Cn;var r=new Kn;e.state=r,r.window=null;var n=Xn(e,t);return n!==Rn&&(e.state=null),n},Jn=!0,Qn=function(e){if(Jn){Zn=new Int32Array(512),Hn=new Int32Array(32);for(var t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(Un(1,e.lens,0,288,Zn,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;Un(2,e.lens,0,32,Hn,0,e.work,{bits:5}),Jn=!1;}e.lencode=Zn,e.lenbits=9,e.distcode=Hn,e.distbits=5;},$n=function(e,t,r,n){var i,a=e.state;return null===a.window&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new Uint8Array(a.wsize)),n>=a.wsize?(a.window.set(t.subarray(r-a.wsize,r),0),a.wnext=0,a.whave=a.wsize):((i=a.wsize-a.wnext)>n&&(i=n),a.window.set(t.subarray(r-n,r-n+i),a.wnext),(n-=i)?(a.window.set(t.subarray(r-n,r),0),a.wnext=n,a.whave=a.wsize):(a.wnext+=i,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=i))),0},ei={inflateReset:qn,inflateReset2:Xn,inflateResetKeep:Yn,inflateInit:function(e){return Wn(e,15)},inflateInit2:Wn,inflate:function(e,t){var r,n,i,a,o,s,u,f,c,l,h,d,p,m,v,y,g,w,b,k,x,A,_,I,P=0,S=new Uint8Array(4),T=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return Cn;(r=e.state).mode===jn&&(r.mode=13),o=e.next_out,i=e.output,u=e.avail_out,a=e.next_in,n=e.input,s=e.avail_in,f=r.hold,c=r.bits,l=s,h=u,A=Rn;e:for(;;)switch(r.mode){case 1:if(0===r.wrap){r.mode=13;break}for(;c<16;){if(0===s)break e;s--,f+=n[a++]<<c,c+=8;}if(2&r.wrap&&35615===f){r.check=0,S[0]=255&f,S[1]=f>>>8&255,r.check=cn(r.check,S,2,0),f=0,c=0,r.mode=2;break}if(r.flags=0,r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&f)<<8)+(f>>8))%31){e.msg="incorrect header check",r.mode=zn;break}if((15&f)!==Gn){e.msg="unknown compression method",r.mode=zn;break}if(c-=4,x=8+(15&(f>>>=4)),0===r.wbits)r.wbits=x;else if(x>r.wbits){e.msg="invalid window size",r.mode=zn;break}r.dmax=1<<r.wbits,e.adler=r.check=1,r.mode=512&f?10:jn,f=0,c=0;break;case 2:for(;c<16;){if(0===s)break e;s--,f+=n[a++]<<c,c+=8;}if(r.flags=f,(255&r.flags)!==Gn){e.msg="unknown compression method",r.mode=zn;break}if(57344&r.flags){e.msg="unknown header flags set",r.mode=zn;break}r.head&&(r.head.text=f>>8&1),512&r.flags&&(S[0]=255&f,S[1]=f>>>8&255,r.check=cn(r.check,S,2,0)),f=0,c=0,r.mode=3;case 3:for(;c<32;){if(0===s)break e;s--,f+=n[a++]<<c,c+=8;}r.head&&(r.head.time=f),512&r.flags&&(S[0]=255&f,S[1]=f>>>8&255,S[2]=f>>>16&255,S[3]=f>>>24&255,r.check=cn(r.check,S,4,0)),f=0,c=0,r.mode=4;case 4:for(;c<16;){if(0===s)break e;s--,f+=n[a++]<<c,c+=8;}r.head&&(r.head.xflags=255&f,r.head.os=f>>8),512&r.flags&&(S[0]=255&f,S[1]=f>>>8&255,r.check=cn(r.check,S,2,0)),f=0,c=0,r.mode=5;case 5:if(1024&r.flags){for(;c<16;){if(0===s)break e;s--,f+=n[a++]<<c,c+=8;}r.length=f,r.head&&(r.head.extra_len=f),512&r.flags&&(S[0]=255&f,S[1]=f>>>8&255,r.check=cn(r.check,S,2,0)),f=0,c=0;}else r.head&&(r.head.extra=null);r.mode=6;case 6:if(1024&r.flags&&((d=r.length)>s&&(d=s),d&&(r.head&&(x=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(n.subarray(a,a+d),x)),512&r.flags&&(r.check=cn(r.check,n,d,a)),s-=d,a+=d,r.length-=d),r.length))break e;r.length=0,r.mode=7;case 7:if(2048&r.flags){if(0===s)break e;d=0;do{x=n[a+d++],r.head&&x&&r.length<65536&&(r.head.name+=String.fromCharCode(x));}while(x&&d<s);if(512&r.flags&&(r.check=cn(r.check,n,d,a)),s-=d,a+=d,x)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=8;case 8:if(4096&r.flags){if(0===s)break e;d=0;do{x=n[a+d++],r.head&&x&&r.length<65536&&(r.head.comment+=String.fromCharCode(x));}while(x&&d<s);if(512&r.flags&&(r.check=cn(r.check,n,d,a)),s-=d,a+=d,x)break e}else r.head&&(r.head.comment=null);r.mode=9;case 9:if(512&r.flags){for(;c<16;){if(0===s)break e;s--,f+=n[a++]<<c,c+=8;}if(f!==(65535&r.check)){e.msg="header crc mismatch",r.mode=zn;break}f=0,c=0;}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=jn;break;case 10:for(;c<32;){if(0===s)break e;s--,f+=n[a++]<<c,c+=8;}e.adler=r.check=Nn(f),f=0,c=0,r.mode=11;case 11:if(0===r.havedict)return e.next_out=o,e.avail_out=u,e.next_in=a,e.avail_in=s,r.hold=f,r.bits=c,Bn;e.adler=r.check=1,r.mode=jn;case jn:if(t===Dn||t===En)break e;case 13:if(r.last){f>>>=7&c,c-=7&c,r.mode=27;break}for(;c<3;){if(0===s)break e;s--,f+=n[a++]<<c,c+=8;}switch(r.last=1&f,c-=1,3&(f>>>=1)){case 0:r.mode=14;break;case 1:if(Qn(r),r.mode=20,t===En){f>>>=2,c-=2;break e}break;case 2:r.mode=17;break;case 3:e.msg="invalid block type",r.mode=zn;}f>>>=2,c-=2;break;case 14:for(f>>>=7&c,c-=7&c;c<32;){if(0===s)break e;s--,f+=n[a++]<<c,c+=8;}if((65535&f)!=(f>>>16^65535)){e.msg="invalid stored block lengths",r.mode=zn;break}if(r.length=65535&f,f=0,c=0,r.mode=15,t===En)break e;case 15:r.mode=16;case 16:if(d=r.length){if(d>s&&(d=s),d>u&&(d=u),0===d)break e;i.set(n.subarray(a,a+d),o),s-=d,a+=d,u-=d,o+=d,r.length-=d;break}r.mode=jn;break;case 17:for(;c<14;){if(0===s)break e;s--,f+=n[a++]<<c,c+=8;}if(r.nlen=257+(31&f),f>>>=5,c-=5,r.ndist=1+(31&f),f>>>=5,c-=5,r.ncode=4+(15&f),f>>>=4,c-=4,r.nlen>286||r.ndist>30){e.msg="too many length or distance symbols",r.mode=zn;break}r.have=0,r.mode=18;case 18:for(;r.have<r.ncode;){for(;c<3;){if(0===s)break e;s--,f+=n[a++]<<c,c+=8;}r.lens[T[r.have++]]=7&f,f>>>=3,c-=3;}for(;r.have<19;)r.lens[T[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,_={bits:r.lenbits},A=Un(0,r.lens,0,19,r.lencode,0,r.work,_),r.lenbits=_.bits,A){e.msg="invalid code lengths set",r.mode=zn;break}r.have=0,r.mode=19;case 19:for(;r.have<r.nlen+r.ndist;){for(;y=(P=r.lencode[f&(1<<r.lenbits)-1])>>>16&255,g=65535&P,!((v=P>>>24)<=c);){if(0===s)break e;s--,f+=n[a++]<<c,c+=8;}if(g<16)f>>>=v,c-=v,r.lens[r.have++]=g;else {if(16===g){for(I=v+2;c<I;){if(0===s)break e;s--,f+=n[a++]<<c,c+=8;}if(f>>>=v,c-=v,0===r.have){e.msg="invalid bit length repeat",r.mode=zn;break}x=r.lens[r.have-1],d=3+(3&f),f>>>=2,c-=2;}else if(17===g){for(I=v+3;c<I;){if(0===s)break e;s--,f+=n[a++]<<c,c+=8;}c-=v,x=0,d=3+(7&(f>>>=v)),f>>>=3,c-=3;}else {for(I=v+7;c<I;){if(0===s)break e;s--,f+=n[a++]<<c,c+=8;}c-=v,x=0,d=11+(127&(f>>>=v)),f>>>=7,c-=7;}if(r.have+d>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=zn;break}for(;d--;)r.lens[r.have++]=x;}}if(r.mode===zn)break;if(0===r.lens[256]){e.msg="invalid code -- missing end-of-block",r.mode=zn;break}if(r.lenbits=9,_={bits:r.lenbits},A=Un(1,r.lens,0,r.nlen,r.lencode,0,r.work,_),r.lenbits=_.bits,A){e.msg="invalid literal/lengths set",r.mode=zn;break}if(r.distbits=6,r.distcode=r.distdyn,_={bits:r.distbits},A=Un(2,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,_),r.distbits=_.bits,A){e.msg="invalid distances set",r.mode=zn;break}if(r.mode=20,t===En)break e;case 20:r.mode=21;case 21:if(s>=6&&u>=258){e.next_out=o,e.avail_out=u,e.next_in=a,e.avail_in=s,r.hold=f,r.bits=c,An(e,h),o=e.next_out,i=e.output,u=e.avail_out,a=e.next_in,n=e.input,s=e.avail_in,f=r.hold,c=r.bits,r.mode===jn&&(r.back=-1);break}for(r.back=0;y=(P=r.lencode[f&(1<<r.lenbits)-1])>>>16&255,g=65535&P,!((v=P>>>24)<=c);){if(0===s)break e;s--,f+=n[a++]<<c,c+=8;}if(y&&0==(240&y)){for(w=v,b=y,k=g;y=(P=r.lencode[k+((f&(1<<w+b)-1)>>w)])>>>16&255,g=65535&P,!(w+(v=P>>>24)<=c);){if(0===s)break e;s--,f+=n[a++]<<c,c+=8;}f>>>=w,c-=w,r.back+=w;}if(f>>>=v,c-=v,r.back+=v,r.length=g,0===y){r.mode=26;break}if(32&y){r.back=-1,r.mode=jn;break}if(64&y){e.msg="invalid literal/length code",r.mode=zn;break}r.extra=15&y,r.mode=22;case 22:if(r.extra){for(I=r.extra;c<I;){if(0===s)break e;s--,f+=n[a++]<<c,c+=8;}r.length+=f&(1<<r.extra)-1,f>>>=r.extra,c-=r.extra,r.back+=r.extra;}r.was=r.length,r.mode=23;case 23:for(;y=(P=r.distcode[f&(1<<r.distbits)-1])>>>16&255,g=65535&P,!((v=P>>>24)<=c);){if(0===s)break e;s--,f+=n[a++]<<c,c+=8;}if(0==(240&y)){for(w=v,b=y,k=g;y=(P=r.distcode[k+((f&(1<<w+b)-1)>>w)])>>>16&255,g=65535&P,!(w+(v=P>>>24)<=c);){if(0===s)break e;s--,f+=n[a++]<<c,c+=8;}f>>>=w,c-=w,r.back+=w;}if(f>>>=v,c-=v,r.back+=v,64&y){e.msg="invalid distance code",r.mode=zn;break}r.offset=g,r.extra=15&y,r.mode=24;case 24:if(r.extra){for(I=r.extra;c<I;){if(0===s)break e;s--,f+=n[a++]<<c,c+=8;}r.offset+=f&(1<<r.extra)-1,f>>>=r.extra,c-=r.extra,r.back+=r.extra;}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=zn;break}r.mode=25;case 25:if(0===u)break e;if(d=h-u,r.offset>d){if((d=r.offset-d)>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=zn;break}d>r.wnext?(d-=r.wnext,p=r.wsize-d):p=r.wnext-d,d>r.length&&(d=r.length),m=r.window;}else m=i,p=o-r.offset,d=r.length;d>u&&(d=u),u-=d,r.length-=d;do{i[o++]=m[p++];}while(--d);0===r.length&&(r.mode=21);break;case 26:if(0===u)break e;i[o++]=r.length,u--,r.mode=21;break;case 27:if(r.wrap){for(;c<32;){if(0===s)break e;s--,f|=n[a++]<<c,c+=8;}if(h-=u,e.total_out+=h,r.total+=h,h&&(e.adler=r.check=r.flags?cn(r.check,i,h,o-h):un(r.check,i,h,o-h)),h=u,(r.flags?f:Nn(f))!==r.check){e.msg="incorrect data check",r.mode=zn;break}f=0,c=0;}r.mode=28;case 28:if(r.wrap&&r.flags){for(;c<32;){if(0===s)break e;s--,f+=n[a++]<<c,c+=8;}if(f!==(4294967295&r.total)){e.msg="incorrect length check",r.mode=zn;break}f=0,c=0;}r.mode=29;case 29:A=Mn;break e;case zn:A=Ln;break e;case 31:return Fn;default:return Cn}return e.next_out=o,e.avail_out=u,e.next_in=a,e.avail_in=s,r.hold=f,r.bits=c,(r.wsize||h!==e.avail_out&&r.mode<zn&&(r.mode<27||t!==On))&&$n(e,e.output,e.next_out,h-e.avail_out),l-=e.avail_in,h-=e.avail_out,e.total_in+=l,e.total_out+=h,r.total+=h,r.wrap&&h&&(e.adler=r.check=r.flags?cn(r.check,i,h,e.next_out-h):un(r.check,i,h,e.next_out-h)),e.data_type=r.bits+(r.last?64:0)+(r.mode===jn?128:0)+(20===r.mode||15===r.mode?256:0),(0===l&&0===h||t===On)&&A===Rn&&(A=Vn),A},inflateEnd:function(e){if(!e||!e.state)return Cn;var t=e.state;return t.window&&(t.window=null),e.state=null,Rn},inflateGetHeader:function(e,t){if(!e||!e.state)return Cn;var r=e.state;return 0==(2&r.wrap)?Cn:(r.head=t,t.done=!1,Rn)},inflateSetDictionary:function(e,t){var r,n=t.length;return e&&e.state?0!==(r=e.state).wrap&&11!==r.mode?Cn:11===r.mode&&un(1,t,n,0)!==r.check?Ln:$n(e,t,n,n)?(r.mode=31,Fn):(r.havedict=1,Rn):Cn},inflateInfo:"pako inflate (from Nodeca project)"};var ti=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1;},ri=Object.prototype.toString,ni=hn.Z_NO_FLUSH,ii=hn.Z_FINISH,ai=hn.Z_OK,oi=hn.Z_STREAM_END,si=hn.Z_NEED_DICT,ui=hn.Z_STREAM_ERROR,fi=hn.Z_DATA_ERROR,ci=hn.Z_MEM_ERROR;function li(e){this.options=pn({chunkSize:65536,windowBits:15,to:""},e||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new xn,this.strm.avail_out=0;var r=ei.inflateInit2(this.strm,t.windowBits);if(r!==ai)throw new Error(ln[r]);if(this.header=new ti,ei.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=wn(t.dictionary):"[object ArrayBuffer]"===ri.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(r=ei.inflateSetDictionary(this.strm,t.dictionary))!==ai))throw new Error(ln[r])}function hi(e,t){var r=new li(t);if(r.push(e),r.err)throw r.msg||ln[r.err];return r.result}li.prototype.push=function(e,t){var r,n,i,a=this.strm,o=this.options.chunkSize,s=this.options.dictionary;if(this.ended)return !1;for(n=t===~~t?t:!0===t?ii:ni,"[object ArrayBuffer]"===ri.call(e)?a.input=new Uint8Array(e):a.input=e,a.next_in=0,a.avail_in=a.input.length;;){for(0===a.avail_out&&(a.output=new Uint8Array(o),a.next_out=0,a.avail_out=o),(r=ei.inflate(a,n))===si&&s&&((r=ei.inflateSetDictionary(a,s))===ai?r=ei.inflate(a,n):r===fi&&(r=si));a.avail_in>0&&r===oi&&a.state.wrap>0&&0!==e[a.next_in];)ei.inflateReset(a),r=ei.inflate(a,n);switch(r){case ui:case fi:case si:case ci:return this.onEnd(r),this.ended=!0,!1}if(i=a.avail_out,a.next_out&&(0===a.avail_out||r===oi))if("string"===this.options.to){var u=kn(a.output,a.next_out),f=a.next_out-u,c=bn(a.output,u);a.next_out=f,a.avail_out=o-f,f&&a.output.set(a.output.subarray(u,u+f),0),this.onData(c);}else this.onData(a.output.length===a.next_out?a.output:a.output.subarray(0,a.next_out));if(r!==ai||0!==i){if(r===oi)return r=ei.inflateEnd(this.strm),this.onEnd(r),this.ended=!0,!0;if(0===a.avail_in)break}}return !0},li.prototype.onData=function(e){this.chunks.push(e);},li.prototype.onEnd=function(e){e===ai&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=mn(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg;};var di={Inflate:li,inflate:hi,inflateRaw:function(e,t){return (t=t||{}).raw=!0,hi(e,t)},ungzip:hi,constants:hn}.inflate;function pi(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return !1;if(Reflect.construct.sham)return !1;if("function"==typeof Proxy)return !0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return !1}}();return function(){var r,n=v(e);if(t){var i=v(this).constructor;r=Reflect.construct(n,arguments,i);}else r=n.apply(this,arguments);return m(this,r)}}var mi=function(e){h(r,e);var t=pi(r);function r(){return b(this,r),t.apply(this,arguments)}return c(r,[{key:"decodeBlock",value:function(e){return di(new Uint8Array(e)).buffer}}]),r}(wr),vi=Object.freeze({__proto__:null,default:mi});function yi(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return !1;if(Reflect.construct.sham)return !1;if("function"==typeof Proxy)return !0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return !1}}();return function(){var r,n=v(e);if(t){var i=v(this).constructor;r=Reflect.construct(n,arguments,i);}else r=n.apply(this,arguments);return m(this,r)}}var gi=function(e){h(r,e);var t=yi(r);function r(){return b(this,r),t.apply(this,arguments)}return c(r,[{key:"decodeBlock",value:function(e){for(var t=new DataView(e),r=[],n=0;n<e.byteLength;++n){var i=t.getInt8(n);if(i<0){var a=t.getUint8(n+1);i=-i;for(var o=0;o<=i;++o)r.push(a);n+=1;}else {for(var s=0;s<=i;++s)r.push(t.getUint8(n+s+1));n+=i+1;}}return new Uint8Array(r).buffer}}]),r}(wr),wi=Object.freeze({__proto__:null,default:gi}),bi={exports:{}};!function(e){
    /* Copyright 2015-2021 Esri. Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except in compliance with the License. You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0 @preserve */
    !function(){var t,r,n,i,a,o,s,u,f=(t={defaultNoDataValue:-34027999387901484e22,decode:function(e,o){var s=(o=o||{}).encodedMaskData||null===o.encodedMaskData,u=a(e,o.inputOffset||0,s),f=null!==o.noDataValue?o.noDataValue:t.defaultNoDataValue,c=r(u,o.pixelType||Float32Array,o.encodedMaskData,f,o.returnMask),l={width:u.width,height:u.height,pixelData:c.resultPixels,minValue:c.minValue,maxValue:u.pixels.maxValue,noDataValue:f};return c.resultMask&&(l.maskData=c.resultMask),o.returnEncodedMask&&u.mask&&(l.encodedMaskData=u.mask.bitset?u.mask.bitset:null),o.returnFileInfo&&(l.fileInfo=n(u),o.computeUsedBitDepths&&(l.fileInfo.bitDepths=i(u))),l}},r=function(e,t,r,n,i){var a,s,u,f=0,c=e.pixels.numBlocksX,l=e.pixels.numBlocksY,h=Math.floor(e.width/c),d=Math.floor(e.height/l),p=2*e.maxZError,m=Number.MAX_VALUE;r=r||(e.mask?e.mask.bitset:null),s=new t(e.width*e.height),i&&r&&(u=new Uint8Array(e.width*e.height));for(var v,y,g=new Float32Array(h*d),w=0;w<=l;w++){var b=w!==l?d:e.height%l;if(0!==b)for(var k=0;k<=c;k++){var x=k!==c?h:e.width%c;if(0!==x){var A,_,I,P,S=w*e.width*d+k*h,T=e.width-x,U=e.pixels.blocks[f];if(U.encoding<2?(0===U.encoding?A=U.rawData:(o(U.stuffedData,U.bitsPerPixel,U.numValidPixels,U.offset,p,g,e.pixels.maxValue),A=g),_=0):I=2===U.encoding?0:U.offset,r)for(y=0;y<b;y++){for(7&S&&(P=r[S>>3],P<<=7&S),v=0;v<x;v++)7&S||(P=r[S>>3]),128&P?(u&&(u[S]=1),m=m>(a=U.encoding<2?A[_++]:I)?a:m,s[S++]=a):(u&&(u[S]=0),s[S++]=n),P<<=1;S+=T;}else if(U.encoding<2)for(y=0;y<b;y++){for(v=0;v<x;v++)m=m>(a=A[_++])?a:m,s[S++]=a;S+=T;}else for(m=m>I?I:m,y=0;y<b;y++){for(v=0;v<x;v++)s[S++]=I;S+=T;}if(1===U.encoding&&_!==U.numValidPixels)throw "Block and Mask do not match";f++;}}}return {resultPixels:s,resultMask:u,minValue:m}},n=function(e){return {fileIdentifierString:e.fileIdentifierString,fileVersion:e.fileVersion,imageType:e.imageType,height:e.height,width:e.width,maxZError:e.maxZError,eofOffset:e.eofOffset,mask:e.mask?{numBlocksX:e.mask.numBlocksX,numBlocksY:e.mask.numBlocksY,numBytes:e.mask.numBytes,maxValue:e.mask.maxValue}:null,pixels:{numBlocksX:e.pixels.numBlocksX,numBlocksY:e.pixels.numBlocksY,numBytes:e.pixels.numBytes,maxValue:e.pixels.maxValue,noDataValue:e.noDataValue}}},i=function(e){for(var t=e.pixels.numBlocksX*e.pixels.numBlocksY,r={},n=0;n<t;n++){var i=e.pixels.blocks[n];0===i.encoding?r.float32=!0:1===i.encoding?r[i.bitsPerPixel]=!0:r[0]=!0;}return Object.keys(r)},a=function(e,t,r){var n={},i=new Uint8Array(e,t,10);if(n.fileIdentifierString=String.fromCharCode.apply(null,i),"CntZImage"!==n.fileIdentifierString.trim())throw "Unexpected file identifier string: "+n.fileIdentifierString;t+=10;var a=new DataView(e,t,24);if(n.fileVersion=a.getInt32(0,!0),n.imageType=a.getInt32(4,!0),n.height=a.getUint32(8,!0),n.width=a.getUint32(12,!0),n.maxZError=a.getFloat64(16,!0),t+=24,!r)if(a=new DataView(e,t,16),n.mask={},n.mask.numBlocksY=a.getUint32(0,!0),n.mask.numBlocksX=a.getUint32(4,!0),n.mask.numBytes=a.getUint32(8,!0),n.mask.maxValue=a.getFloat32(12,!0),t+=16,n.mask.numBytes>0){var o=new Uint8Array(Math.ceil(n.width*n.height/8)),s=(a=new DataView(e,t,n.mask.numBytes)).getInt16(0,!0),u=2,f=0;do{if(s>0)for(;s--;)o[f++]=a.getUint8(u++);else {var c=a.getUint8(u++);for(s=-s;s--;)o[f++]=c;}s=a.getInt16(u,!0),u+=2;}while(u<n.mask.numBytes);if(-32768!==s||f<o.length)throw "Unexpected end of mask RLE encoding";n.mask.bitset=o,t+=n.mask.numBytes;}else 0==(n.mask.numBytes|n.mask.numBlocksY|n.mask.maxValue)&&(n.mask.bitset=new Uint8Array(Math.ceil(n.width*n.height/8)));a=new DataView(e,t,16),n.pixels={},n.pixels.numBlocksY=a.getUint32(0,!0),n.pixels.numBlocksX=a.getUint32(4,!0),n.pixels.numBytes=a.getUint32(8,!0),n.pixels.maxValue=a.getFloat32(12,!0),t+=16;var l=n.pixels.numBlocksX,h=n.pixels.numBlocksY,d=l+(n.width%l>0?1:0),p=h+(n.height%h>0?1:0);n.pixels.blocks=new Array(d*p);for(var m=0,v=0;v<p;v++)for(var y=0;y<d;y++){var g=0,w=e.byteLength-t;a=new DataView(e,t,Math.min(10,w));var b={};n.pixels.blocks[m++]=b;var k=a.getUint8(0);if(g++,b.encoding=63&k,b.encoding>3)throw "Invalid block encoding ("+b.encoding+")";if(2!==b.encoding){if(0!==k&&2!==k){if(k>>=6,b.offsetType=k,2===k)b.offset=a.getInt8(1),g++;else if(1===k)b.offset=a.getInt16(1,!0),g+=2;else {if(0!==k)throw "Invalid block offset type";b.offset=a.getFloat32(1,!0),g+=4;}if(1===b.encoding)if(k=a.getUint8(g),g++,b.bitsPerPixel=63&k,k>>=6,b.numValidPixelsType=k,2===k)b.numValidPixels=a.getUint8(g),g++;else if(1===k)b.numValidPixels=a.getUint16(g,!0),g+=2;else {if(0!==k)throw "Invalid valid pixel count type";b.numValidPixels=a.getUint32(g,!0),g+=4;}}var x;if(t+=g,3!==b.encoding)if(0===b.encoding){var A=(n.pixels.numBytes-1)/4;if(A!==Math.floor(A))throw "uncompressed block has invalid length";x=new ArrayBuffer(4*A),new Uint8Array(x).set(new Uint8Array(e,t,4*A));var _=new Float32Array(x);b.rawData=_,t+=4*A;}else if(1===b.encoding){var I=Math.ceil(b.numValidPixels*b.bitsPerPixel/8),P=Math.ceil(I/4);x=new ArrayBuffer(4*P),new Uint8Array(x).set(new Uint8Array(e,t,I)),b.stuffedData=new Uint32Array(x),t+=I;}}else t++;}return n.eofOffset=t,n},o=function(e,t,r,n,i,a,o){var s,u,f,c=(1<<t)-1,l=0,h=0,d=Math.ceil((o-n)/i),p=4*e.length-Math.ceil(t*r/8);for(e[e.length-1]<<=8*p,s=0;s<r;s++){if(0===h&&(f=e[l++],h=32),h>=t)u=f>>>h-t&c,h-=t;else {var m=t-h;u=(f&c)<<m&c,u+=(f=e[l++])>>>(h=32-m);}a[s]=u<d?n+u*i:o;}return a},t),c=function(){var e=function(e,t,r,n,i,a,o,s){var u,f,c,l,h,d=(1<<r)-1,p=0,m=0,v=4*e.length-Math.ceil(r*n/8);if(e[e.length-1]<<=8*v,i)for(u=0;u<n;u++)0===m&&(c=e[p++],m=32),m>=r?(f=c>>>m-r&d,m-=r):(f=(c&d)<<(l=r-m)&d,f+=(c=e[p++])>>>(m=32-l)),t[u]=i[f];else for(h=Math.ceil((s-a)/o),u=0;u<n;u++)0===m&&(c=e[p++],m=32),m>=r?(f=c>>>m-r&d,m-=r):(f=(c&d)<<(l=r-m)&d,f+=(c=e[p++])>>>(m=32-l)),t[u]=f<h?a+f*o:s;},t=function(e,t,r,n,i,a){var o,s=(1<<t)-1,u=0,f=0,c=0,l=0,h=0,d=[],p=4*e.length-Math.ceil(t*r/8);e[e.length-1]<<=8*p;var m=Math.ceil((a-n)/i);for(f=0;f<r;f++)0===l&&(o=e[u++],l=32),l>=t?(h=o>>>l-t&s,l-=t):(h=(o&s)<<(c=t-l)&s,h+=(o=e[u++])>>>(l=32-c)),d[f]=h<m?n+h*i:a;return d.unshift(n),d},r=function(e,t,r,n,i,a,o,s){var u,f,c,l,h=(1<<r)-1,d=0,p=0,m=0;if(i)for(u=0;u<n;u++)0===p&&(c=e[d++],p=32,m=0),p>=r?(f=c>>>m&h,p-=r,m+=r):(f=c>>>m&h,p=32-(l=r-p),f|=((c=e[d++])&(1<<l)-1)<<r-l,m=l),t[u]=i[f];else {var v=Math.ceil((s-a)/o);for(u=0;u<n;u++)0===p&&(c=e[d++],p=32,m=0),p>=r?(f=c>>>m&h,p-=r,m+=r):(f=c>>>m&h,p=32-(l=r-p),f|=((c=e[d++])&(1<<l)-1)<<r-l,m=l),t[u]=f<v?a+f*o:s;}return t},n=function(e,t,r,n,i,a){var o,s=(1<<t)-1,u=0,f=0,c=0,l=0,h=0,d=0,p=[],m=Math.ceil((a-n)/i);for(f=0;f<r;f++)0===l&&(o=e[u++],l=32,d=0),l>=t?(h=o>>>d&s,l-=t,d+=t):(h=o>>>d&s,l=32-(c=t-l),h|=((o=e[u++])&(1<<c)-1)<<t-c,d=c),p[f]=h<m?n+h*i:a;return p.unshift(n),p},i=function(e,t,r,n){var i,a,o,s,u=(1<<r)-1,f=0,c=0,l=4*e.length-Math.ceil(r*n/8);for(e[e.length-1]<<=8*l,i=0;i<n;i++)0===c&&(o=e[f++],c=32),c>=r?(a=o>>>c-r&u,c-=r):(a=(o&u)<<(s=r-c)&u,a+=(o=e[f++])>>>(c=32-s)),t[i]=a;return t},a=function(e,t,r,n){var i,a,o,s,u=(1<<r)-1,f=0,c=0,l=0;for(i=0;i<n;i++)0===c&&(o=e[f++],c=32,l=0),c>=r?(a=o>>>l&u,c-=r,l+=r):(a=o>>>l&u,c=32-(s=r-c),a|=((o=e[f++])&(1<<s)-1)<<r-s,l=s),t[i]=a;return t},o={HUFFMAN_LUT_BITS_MAX:12,computeChecksumFletcher32:function(e){for(var t=65535,r=65535,n=e.length,i=Math.floor(n/2),a=0;i;){var o=i>=359?359:i;i-=o;do{t+=e[a++]<<8,r+=t+=e[a++];}while(--o);t=(65535&t)+(t>>>16),r=(65535&r)+(r>>>16);}return 1&n&&(r+=t+=e[a]<<8),((r=(65535&r)+(r>>>16))<<16|(t=(65535&t)+(t>>>16)))>>>0},readHeaderInfo:function(e,t){var r=t.ptr,n=new Uint8Array(e,r,6),i={};if(i.fileIdentifierString=String.fromCharCode.apply(null,n),0!==i.fileIdentifierString.lastIndexOf("Lerc2",0))throw "Unexpected file identifier string (expect Lerc2 ): "+i.fileIdentifierString;r+=6;var a,o=new DataView(e,r,8),s=o.getInt32(0,!0);if(i.fileVersion=s,r+=4,s>=3&&(i.checksum=o.getUint32(4,!0),r+=4),o=new DataView(e,r,12),i.height=o.getUint32(0,!0),i.width=o.getUint32(4,!0),r+=8,s>=4?(i.numDims=o.getUint32(8,!0),r+=4):i.numDims=1,o=new DataView(e,r,40),i.numValidPixel=o.getUint32(0,!0),i.microBlockSize=o.getInt32(4,!0),i.blobSize=o.getInt32(8,!0),i.imageType=o.getInt32(12,!0),i.maxZError=o.getFloat64(16,!0),i.zMin=o.getFloat64(24,!0),i.zMax=o.getFloat64(32,!0),r+=40,t.headerInfo=i,t.ptr=r,s>=3&&(a=s>=4?52:48,this.computeChecksumFletcher32(new Uint8Array(e,r-a,i.blobSize-14))!==i.checksum))throw "Checksum failed.";return !0},checkMinMaxRanges:function(e,t){var r=t.headerInfo,n=this.getDataTypeArray(r.imageType),i=r.numDims*this.getDataTypeSize(r.imageType),a=this.readSubArray(e,t.ptr,n,i),o=this.readSubArray(e,t.ptr+i,n,i);t.ptr+=2*i;var s,u=!0;for(s=0;s<r.numDims;s++)if(a[s]!==o[s]){u=!1;break}return r.minValues=a,r.maxValues=o,u},readSubArray:function(e,t,r,n){var i;if(r===Uint8Array)i=new Uint8Array(e,t,n);else {var a=new ArrayBuffer(n);new Uint8Array(a).set(new Uint8Array(e,t,n)),i=new r(a);}return i},readMask:function(e,t){var r,n,i=t.ptr,a=t.headerInfo,o=a.width*a.height,s=a.numValidPixel,u=new DataView(e,i,4),f={};if(f.numBytes=u.getUint32(0,!0),i+=4,(0===s||o===s)&&0!==f.numBytes)throw "invalid mask";if(0===s)r=new Uint8Array(Math.ceil(o/8)),f.bitset=r,n=new Uint8Array(o),t.pixels.resultMask=n,i+=f.numBytes;else if(f.numBytes>0){r=new Uint8Array(Math.ceil(o/8));var c=(u=new DataView(e,i,f.numBytes)).getInt16(0,!0),l=2,h=0,d=0;do{if(c>0)for(;c--;)r[h++]=u.getUint8(l++);else for(d=u.getUint8(l++),c=-c;c--;)r[h++]=d;c=u.getInt16(l,!0),l+=2;}while(l<f.numBytes);if(-32768!==c||h<r.length)throw "Unexpected end of mask RLE encoding";n=new Uint8Array(o);var p=0,m=0;for(m=0;m<o;m++)7&m?(p=r[m>>3],p<<=7&m):p=r[m>>3],128&p&&(n[m]=1);t.pixels.resultMask=n,f.bitset=r,i+=f.numBytes;}return t.ptr=i,t.mask=f,!0},readDataOneSweep:function(e,t,r,n){var i,a=t.ptr,s=t.headerInfo,u=s.numDims,f=s.width*s.height,c=s.imageType,l=s.numValidPixel*o.getDataTypeSize(c)*u,h=t.pixels.resultMask;if(r===Uint8Array)i=new Uint8Array(e,a,l);else {var d=new ArrayBuffer(l);new Uint8Array(d).set(new Uint8Array(e,a,l)),i=new r(d);}if(i.length===f*u)t.pixels.resultPixels=n?o.swapDimensionOrder(i,f,u,r,!0):i;else {t.pixels.resultPixels=new r(f*u);var p=0,m=0,v=0,y=0;if(u>1){if(n){for(m=0;m<f;m++)if(h[m])for(y=m,v=0;v<u;v++,y+=f)t.pixels.resultPixels[y]=i[p++];}else for(m=0;m<f;m++)if(h[m])for(y=m*u,v=0;v<u;v++)t.pixels.resultPixels[y+v]=i[p++];}else for(m=0;m<f;m++)h[m]&&(t.pixels.resultPixels[m]=i[p++]);}return a+=l,t.ptr=a,!0},readHuffmanTree:function(e,t){var r=this.HUFFMAN_LUT_BITS_MAX,n=new DataView(e,t.ptr,16);if(t.ptr+=16,n.getInt32(0,!0)<2)throw "unsupported Huffman version";var i=n.getInt32(4,!0),a=n.getInt32(8,!0),u=n.getInt32(12,!0);if(a>=u)return !1;var f=new Uint32Array(u-a);o.decodeBits(e,t,f);var c,l,h,d,p=[];for(c=a;c<u;c++)p[l=c-(c<i?0:i)]={first:f[c-a],second:null};var m=e.byteLength-t.ptr,v=Math.ceil(m/4),y=new ArrayBuffer(4*v);new Uint8Array(y).set(new Uint8Array(e,t.ptr,m));var g,w=new Uint32Array(y),b=0,k=0;for(g=w[0],c=a;c<u;c++)(d=p[l=c-(c<i?0:i)].first)>0&&(p[l].second=g<<b>>>32-d,32-b>=d?32===(b+=d)&&(b=0,g=w[++k]):(b+=d-32,g=w[++k],p[l].second|=g>>>32-b));var x=0,A=0,_=new s;for(c=0;c<p.length;c++)void 0!==p[c]&&(x=Math.max(x,p[c].first));A=x>=r?r:x;var I,P,S,T,U,O=[];for(c=a;c<u;c++)if((d=p[l=c-(c<i?0:i)].first)>0)if(I=[d,l],d<=A)for(P=p[l].second<<A-d,S=1<<A-d,h=0;h<S;h++)O[P|h]=I;else for(P=p[l].second,U=_,T=d-1;T>=0;T--)P>>>T&1?(U.right||(U.right=new s),U=U.right):(U.left||(U.left=new s),U=U.left),0!==T||U.val||(U.val=I[1]);return {decodeLut:O,numBitsLUTQick:A,numBitsLUT:x,tree:_,stuffedData:w,srcPtr:k,bitPos:b}},readHuffman:function(e,t,r,n){var i,a,s,u,f,c,l,h,d,p=t.headerInfo.numDims,m=t.headerInfo.height,v=t.headerInfo.width,y=v*m,g=this.readHuffmanTree(e,t),w=g.decodeLut,b=g.tree,k=g.stuffedData,x=g.srcPtr,A=g.bitPos,_=g.numBitsLUTQick,I=g.numBitsLUT,P=0===t.headerInfo.imageType?128:0,S=t.pixels.resultMask,T=0;A>0&&(x++,A=0);var U,O=k[x],D=1===t.encodeMode,E=new r(y*p),R=E;if(p<2||D){for(U=0;U<p;U++)if(p>1&&(R=new r(E.buffer,y*U,y),T=0),t.headerInfo.numValidPixel===v*m)for(h=0,c=0;c<m;c++)for(l=0;l<v;l++,h++){if(a=0,f=u=O<<A>>>32-_,32-A<_&&(f=u|=k[x+1]>>>64-A-_),w[f])a=w[f][1],A+=w[f][0];else for(f=u=O<<A>>>32-I,32-A<I&&(f=u|=k[x+1]>>>64-A-I),i=b,d=0;d<I;d++)if(!(i=u>>>I-d-1&1?i.right:i.left).left&&!i.right){a=i.val,A=A+d+1;break}A>=32&&(A-=32,O=k[++x]),s=a-P,D?(s+=l>0?T:c>0?R[h-v]:T,s&=255,R[h]=s,T=s):R[h]=s;}else for(h=0,c=0;c<m;c++)for(l=0;l<v;l++,h++)if(S[h]){if(a=0,f=u=O<<A>>>32-_,32-A<_&&(f=u|=k[x+1]>>>64-A-_),w[f])a=w[f][1],A+=w[f][0];else for(f=u=O<<A>>>32-I,32-A<I&&(f=u|=k[x+1]>>>64-A-I),i=b,d=0;d<I;d++)if(!(i=u>>>I-d-1&1?i.right:i.left).left&&!i.right){a=i.val,A=A+d+1;break}A>=32&&(A-=32,O=k[++x]),s=a-P,D?(l>0&&S[h-1]?s+=T:c>0&&S[h-v]?s+=R[h-v]:s+=T,s&=255,R[h]=s,T=s):R[h]=s;}}else for(h=0,c=0;c<m;c++)for(l=0;l<v;l++)if(h=c*v+l,!S||S[h])for(U=0;U<p;U++,h+=y){if(a=0,f=u=O<<A>>>32-_,32-A<_&&(f=u|=k[x+1]>>>64-A-_),w[f])a=w[f][1],A+=w[f][0];else for(f=u=O<<A>>>32-I,32-A<I&&(f=u|=k[x+1]>>>64-A-I),i=b,d=0;d<I;d++)if(!(i=u>>>I-d-1&1?i.right:i.left).left&&!i.right){a=i.val,A=A+d+1;break}A>=32&&(A-=32,O=k[++x]),s=a-P,R[h]=s;}t.ptr=t.ptr+4*(x+1)+(A>0?4:0),t.pixels.resultPixels=E,p>1&&!n&&(t.pixels.resultPixels=o.swapDimensionOrder(E,y,p,r));},decodeBits:function(o,s,u,f,c){var l=s.headerInfo,h=l.fileVersion,d=0,p=o.byteLength-s.ptr>=5?5:o.byteLength-s.ptr,m=new DataView(o,s.ptr,p),v=m.getUint8(0);d++;var y=v>>6,g=0===y?4:3-y,w=(32&v)>0,b=31&v,k=0;if(1===g)k=m.getUint8(d),d++;else if(2===g)k=m.getUint16(d,!0),d+=2;else {if(4!==g)throw "Invalid valid pixel count type";k=m.getUint32(d,!0),d+=4;}var x,A,_,I,P,S,T,U,O,D=2*l.maxZError,E=l.numDims>1?l.maxValues[c]:l.zMax;if(w){for(s.counter.lut++,U=m.getUint8(d),d++,I=Math.ceil((U-1)*b/8),P=Math.ceil(I/4),A=new ArrayBuffer(4*P),_=new Uint8Array(A),s.ptr+=d,_.set(new Uint8Array(o,s.ptr,I)),T=new Uint32Array(A),s.ptr+=I,O=0;U-1>>>O;)O++;I=Math.ceil(k*O/8),P=Math.ceil(I/4),A=new ArrayBuffer(4*P),(_=new Uint8Array(A)).set(new Uint8Array(o,s.ptr,I)),x=new Uint32Array(A),s.ptr+=I,S=h>=3?n(T,b,U-1,f,D,E):t(T,b,U-1,f,D,E),h>=3?r(x,u,O,k,S):e(x,u,O,k,S);}else s.counter.bitstuffer++,O=b,s.ptr+=d,O>0&&(I=Math.ceil(k*O/8),P=Math.ceil(I/4),A=new ArrayBuffer(4*P),(_=new Uint8Array(A)).set(new Uint8Array(o,s.ptr,I)),x=new Uint32Array(A),s.ptr+=I,h>=3?null==f?a(x,u,O,k):r(x,u,O,k,!1,f,D,E):null==f?i(x,u,O,k):e(x,u,O,k,!1,f,D,E));},readTiles:function(e,t,r,n){var i=t.headerInfo,a=i.width,s=i.height,u=a*s,f=i.microBlockSize,c=i.imageType,l=o.getDataTypeSize(c),h=Math.ceil(a/f),d=Math.ceil(s/f);t.pixels.numBlocksY=d,t.pixels.numBlocksX=h,t.pixels.ptr=0;var p,m,v,y,g,w,b,k,x,A,_=0,I=0,P=0,S=0,T=0,U=0,O=0,D=0,E=0,R=0,M=0,B=0,C=0,L=0,F=0,V=new r(f*f),G=s%f||f,j=a%f||f,z=i.numDims,N=t.pixels.resultMask,K=t.pixels.resultPixels,Z=i.fileVersion>=5?14:15,H=i.zMax;for(P=0;P<d;P++)for(T=P!==d-1?f:G,S=0;S<h;S++)for(R=P*a*f+S*f,M=a-(U=S!==h-1?f:j),k=0;k<z;k++){if(z>1?(A=K,R=P*a*f+S*f,K=new r(t.pixels.resultPixels.buffer,u*k*l,u),H=i.maxValues[k]):A=null,O=e.byteLength-t.ptr,m={},F=0,D=(p=new DataView(e,t.ptr,Math.min(10,O))).getUint8(0),F++,x=i.fileVersion>=5?4&D:0,E=D>>6&255,(D>>2&Z)!==(S*f>>3&Z))throw "integrity issue";if(x&&0===k)throw "integrity issue";if((g=3&D)>3)throw t.ptr+=F,"Invalid block encoding ("+g+")";if(2!==g)if(0===g){if(x)throw "integrity issue";if(t.counter.uncompressed++,t.ptr+=F,B=(B=T*U*l)<(C=e.byteLength-t.ptr)?B:C,v=new ArrayBuffer(B%l==0?B:B+l-B%l),new Uint8Array(v).set(new Uint8Array(e,t.ptr,B)),y=new r(v),L=0,N)for(_=0;_<T;_++){for(I=0;I<U;I++)N[R]&&(K[R]=y[L++]),R++;R+=M;}else for(_=0;_<T;_++){for(I=0;I<U;I++)K[R++]=y[L++];R+=M;}t.ptr+=L*l;}else if(w=o.getDataTypeUsed(x&&c<6?4:c,E),b=o.getOnePixel(m,F,w,p),F+=o.getDataTypeSize(w),3===g)if(t.ptr+=F,t.counter.constantoffset++,N)for(_=0;_<T;_++){for(I=0;I<U;I++)N[R]&&(K[R]=x?Math.min(H,A[R]+b):b),R++;R+=M;}else for(_=0;_<T;_++){for(I=0;I<U;I++)K[R]=x?Math.min(H,A[R]+b):b,R++;R+=M;}else if(t.ptr+=F,o.decodeBits(e,t,V,b,k),F=0,x)if(N)for(_=0;_<T;_++){for(I=0;I<U;I++)N[R]&&(K[R]=V[F++]+A[R]),R++;R+=M;}else for(_=0;_<T;_++){for(I=0;I<U;I++)K[R]=V[F++]+A[R],R++;R+=M;}else if(N)for(_=0;_<T;_++){for(I=0;I<U;I++)N[R]&&(K[R]=V[F++]),R++;R+=M;}else for(_=0;_<T;_++){for(I=0;I<U;I++)K[R++]=V[F++];R+=M;}else {if(x)if(N)for(_=0;_<T;_++)for(I=0;I<U;I++)N[R]&&(K[R]=A[R]),R++;else for(_=0;_<T;_++)for(I=0;I<U;I++)K[R]=A[R],R++;t.counter.constant++,t.ptr+=F;}}z>1&&!n&&(t.pixels.resultPixels=o.swapDimensionOrder(t.pixels.resultPixels,u,z,r));},formatFileInfo:function(e){return {fileIdentifierString:e.headerInfo.fileIdentifierString,fileVersion:e.headerInfo.fileVersion,imageType:e.headerInfo.imageType,height:e.headerInfo.height,width:e.headerInfo.width,numValidPixel:e.headerInfo.numValidPixel,microBlockSize:e.headerInfo.microBlockSize,blobSize:e.headerInfo.blobSize,maxZError:e.headerInfo.maxZError,pixelType:o.getPixelType(e.headerInfo.imageType),eofOffset:e.eofOffset,mask:e.mask?{numBytes:e.mask.numBytes}:null,pixels:{numBlocksX:e.pixels.numBlocksX,numBlocksY:e.pixels.numBlocksY,maxValue:e.headerInfo.zMax,minValue:e.headerInfo.zMin,noDataValue:e.noDataValue}}},constructConstantSurface:function(e,t){var r=e.headerInfo.zMax,n=e.headerInfo.zMin,i=e.headerInfo.maxValues,a=e.headerInfo.numDims,o=e.headerInfo.height*e.headerInfo.width,s=0,u=0,f=0,c=e.pixels.resultMask,l=e.pixels.resultPixels;if(c)if(a>1){if(t)for(s=0;s<a;s++)for(f=s*o,r=i[s],u=0;u<o;u++)c[u]&&(l[f+u]=r);else for(u=0;u<o;u++)if(c[u])for(f=u*a,s=0;s<a;s++)l[f+a]=i[s];}else for(u=0;u<o;u++)c[u]&&(l[u]=r);else if(a>1&&n!==r)if(t)for(s=0;s<a;s++)for(f=s*o,r=i[s],u=0;u<o;u++)l[f+u]=r;else for(u=0;u<o;u++)for(f=u*a,s=0;s<a;s++)l[f+s]=i[s];else for(u=0;u<o*a;u++)l[u]=r;},getDataTypeArray:function(e){var t;switch(e){case 0:t=Int8Array;break;case 1:t=Uint8Array;break;case 2:t=Int16Array;break;case 3:t=Uint16Array;break;case 4:t=Int32Array;break;case 5:t=Uint32Array;break;case 6:default:t=Float32Array;break;case 7:t=Float64Array;}return t},getPixelType:function(e){var t;switch(e){case 0:t="S8";break;case 1:t="U8";break;case 2:t="S16";break;case 3:t="U16";break;case 4:t="S32";break;case 5:t="U32";break;case 6:default:t="F32";break;case 7:t="F64";}return t},isValidPixelValue:function(e,t){if(null==t)return !1;var r;switch(e){case 0:r=t>=-128&&t<=127;break;case 1:r=t>=0&&t<=255;break;case 2:r=t>=-32768&&t<=32767;break;case 3:r=t>=0&&t<=65536;break;case 4:r=t>=-2147483648&&t<=2147483647;break;case 5:r=t>=0&&t<=4294967296;break;case 6:r=t>=-34027999387901484e22&&t<=34027999387901484e22;break;case 7:r=t>=-17976931348623157e292&&t<=17976931348623157e292;break;default:r=!1;}return r},getDataTypeSize:function(e){var t=0;switch(e){case 0:case 1:t=1;break;case 2:case 3:t=2;break;case 4:case 5:case 6:t=4;break;case 7:t=8;break;default:t=e;}return t},getDataTypeUsed:function(e,t){var r=e;switch(e){case 2:case 4:r=e-t;break;case 3:case 5:r=e-2*t;break;case 6:r=0===t?e:1===t?2:1;break;case 7:r=0===t?e:e-2*t+1;break;default:r=e;}return r},getOnePixel:function(e,t,r,n){var i=0;switch(r){case 0:i=n.getInt8(t);break;case 1:i=n.getUint8(t);break;case 2:i=n.getInt16(t,!0);break;case 3:i=n.getUint16(t,!0);break;case 4:i=n.getInt32(t,!0);break;case 5:i=n.getUInt32(t,!0);break;case 6:i=n.getFloat32(t,!0);break;case 7:i=n.getFloat64(t,!0);break;default:throw "the decoder does not understand this pixel type"}return i},swapDimensionOrder:function(e,t,r,n,i){var a=0,o=0,s=0,u=0,f=e;if(r>1)if(f=new n(t*r),i)for(a=0;a<t;a++)for(u=a,s=0;s<r;s++,u+=t)f[u]=e[o++];else for(a=0;a<t;a++)for(u=a,s=0;s<r;s++,u+=t)f[o++]=e[u];return f}},s=function(e,t,r){this.val=e,this.left=t,this.right=r;},u={decode:function(e,t){var r=(t=t||{}).noDataValue,n=0,i={};i.ptr=t.inputOffset||0,i.pixels={},o.readHeaderInfo(e,i);var a=i.headerInfo,s=a.fileVersion,u=o.getDataTypeArray(a.imageType);if(s>5)throw "unsupported lerc version 2."+s;o.readMask(e,i),a.numValidPixel===a.width*a.height||i.pixels.resultMask||(i.pixels.resultMask=t.maskData);var f=a.width*a.height;i.pixels.resultPixels=new u(f*a.numDims),i.counter={onesweep:0,uncompressed:0,lut:0,bitstuffer:0,constant:0,constantoffset:0};var c,l=!t.returnPixelInterleavedDims;if(0!==a.numValidPixel)if(a.zMax===a.zMin)o.constructConstantSurface(i,l);else if(s>=4&&o.checkMinMaxRanges(e,i))o.constructConstantSurface(i,l);else {var h=new DataView(e,i.ptr,2),d=h.getUint8(0);if(i.ptr++,d)o.readDataOneSweep(e,i,u,l);else if(s>1&&a.imageType<=1&&Math.abs(a.maxZError-.5)<1e-5){var p=h.getUint8(1);if(i.ptr++,i.encodeMode=p,p>2||s<4&&p>1)throw "Invalid Huffman flag "+p;p?o.readHuffman(e,i,u,l):o.readTiles(e,i,u,l);}else o.readTiles(e,i,u,l);}i.eofOffset=i.ptr,t.inputOffset?(c=i.headerInfo.blobSize+t.inputOffset-i.ptr,Math.abs(c)>=1&&(i.eofOffset=t.inputOffset+i.headerInfo.blobSize)):(c=i.headerInfo.blobSize-i.ptr,Math.abs(c)>=1&&(i.eofOffset=i.headerInfo.blobSize));var m={width:a.width,height:a.height,pixelData:i.pixels.resultPixels,minValue:a.zMin,maxValue:a.zMax,validPixelCount:a.numValidPixel,dimCount:a.numDims,dimStats:{minValues:a.minValues,maxValues:a.maxValues},maskData:i.pixels.resultMask};if(i.pixels.resultMask&&o.isValidPixelValue(a.imageType,r)){var v=i.pixels.resultMask;for(n=0;n<f;n++)v[n]||(m.pixelData[n]=r);m.noDataValue=r;}return i.noDataValue=r,t.returnFileInfo&&(m.fileInfo=o.formatFileInfo(i)),m},getBandCount:function(e){for(var t=0,r=0,n={ptr:0,pixels:{}};r<e.byteLength-58;)o.readHeaderInfo(e,n),r+=n.headerInfo.blobSize,t++,n.ptr=r;return t}};return u}(),l=(s=new ArrayBuffer(4),u=new Uint8Array(s),new Uint32Array(s)[0]=1,1===u[0]),h={decode:function(e,t){if(!l)throw "Big endian system is not supported.";var r,n,i=(t=t||{}).inputOffset||0,a=new Uint8Array(e,i,10),o=String.fromCharCode.apply(null,a);if("CntZImage"===o.trim())r=f,n=1;else {if("Lerc2"!==o.substring(0,5))throw "Unexpected file identifier string: "+o;r=c,n=2;}for(var s,u,h,d,p,m,v=0,y=e.byteLength-10,g=[],w={width:0,height:0,pixels:[],pixelType:t.pixelType,mask:null,statistics:[]},b=0;i<y;){var k=r.decode(e,{inputOffset:i,encodedMaskData:s,maskData:h,returnMask:0===v,returnEncodedMask:0===v,returnFileInfo:!0,returnPixelInterleavedDims:t.returnPixelInterleavedDims,pixelType:t.pixelType||null,noDataValue:t.noDataValue||null});i=k.fileInfo.eofOffset,h=k.maskData,0===v&&(s=k.encodedMaskData,w.width=k.width,w.height=k.height,w.dimCount=k.dimCount||1,w.pixelType=k.pixelType||k.fileInfo.pixelType,w.mask=h),n>1&&(h&&g.push(h),k.fileInfo.mask&&k.fileInfo.mask.numBytes>0&&b++),v++,w.pixels.push(k.pixelData),w.statistics.push({minValue:k.minValue,maxValue:k.maxValue,noDataValue:k.noDataValue,dimStats:k.dimStats});}if(n>1&&b>1){for(m=w.width*w.height,w.bandMasks=g,(h=new Uint8Array(m)).set(g[0]),d=1;d<g.length;d++)for(u=g[d],p=0;p<m;p++)h[p]=h[p]&u[p];w.maskData=h;}return w}};e.exports?e.exports=h:this.Lerc=h;}();}(bi);var ki=bi.exports;function xi(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return !1;if(Reflect.construct.sham)return !1;if("function"==typeof Proxy)return !0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return !1}}();return function(){var r,n=v(e);if(t){var i=v(this).constructor;r=Reflect.construct(n,arguments,i);}else r=n.apply(this,arguments);return m(this,r)}}var Ai=function(e){h(r,e);var t=xi(r);function r(e){var n;return b(this,r),(n=t.call(this)).planarConfiguration=void 0!==e.PlanarConfiguration?e.PlanarConfiguration:1,n.samplesPerPixel=void 0!==e.SamplesPerPixel?e.SamplesPerPixel:1,n.addCompression=e.LercParameters[ue.AddCompression],n}return c(r,[{key:"decodeBlock",value:function(e){switch(this.addCompression){case fe.None:break;case fe.Deflate:e=di(new Uint8Array(e)).buffer;break;default:throw new Error("Unsupported LERC additional compression method identifier: ".concat(this.addCompression))}return ki.decode(e,{returnPixelInterleavedDims:1===this.planarConfiguration}).pixels[0].buffer}}]),r}(wr),_i=Object.freeze({__proto__:null,default:Ai});function Ii(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return !1;if(Reflect.construct.sham)return !1;if("function"==typeof Proxy)return !0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return !1}}();return function(){var r,n=v(e);if(t){var i=v(this).constructor;r=Reflect.construct(n,arguments,i);}else r=n.apply(this,arguments);return m(this,r)}}var Pi=function(e){h(n,e);var t,r=Ii(n);function n(){var e;if(b(this,n),e=r.call(this),"undefined"==typeof createImageBitmap)throw new Error("Cannot decode WebImage as `createImageBitmap` is not available");if("undefined"==typeof document&&"undefined"==typeof OffscreenCanvas)throw new Error("Cannot decode WebImage as neither `document` nor `OffscreenCanvas` is not available");return e}return c(n,[{key:"decode",value:(t=u(x.mark((function e(t,r){var n,i,a,o;return x.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new Blob([r]),e.next=3,createImageBitmap(n);case 3:return i=e.sent,"undefined"!=typeof document?((a=document.createElement("canvas")).width=i.width,a.height=i.height):a=new OffscreenCanvas(i.width,i.height),(o=a.getContext("2d")).drawImage(i,0,0),e.abrupt("return",o.getImageData(0,0,i.width,i.height).data.buffer);case 8:case"end":return e.stop()}}),e)}))),function(e,r){return t.apply(this,arguments)})}]),n}(wr),Si=Object.freeze({__proto__:null,default:Pi}),Ti=Worker;var Ui=Object.freeze({__proto__:null,create:function(){var e='function e(e,t,r,n,i,a,o){try{var s=e[a](o),f=s.value}catch(e){return void r(e)}s.done?t(f):Promise.resolve(f).then(n,i)}function t(t){return function(){var r=this,n=arguments;return new Promise((function(i,a){var o=t.apply(r,n);function s(t){e(o,i,a,s,f,"next",t)}function f(t){e(o,i,a,s,f,"throw",t)}s(void 0)}))}}function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}var n={exports:{}};!function(e){var t=function(e){var t,n=Object.prototype,i=n.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",f=a.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var i=t&&t.prototype instanceof y?t:y,a=Object.create(i.prototype),o=new T(n||[]);return a._invoke=function(e,t,r){var n=h;return function(i,a){if(n===p)throw new Error("Generator is already running");if(n===m){if("throw"===i)throw a;return E()}for(r.method=i,r.arg=a;;){var o=r.delegate;if(o){var s=I(o,r);if(s){if(s===v)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===h)throw n=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=p;var f=c(e,t,r);if("normal"===f.type){if(n=r.done?m:d,f.arg===v)continue;return{value:f.arg,done:r.done}}"throw"===f.type&&(n=m,r.method="throw",r.arg=f.arg)}}}(e,r,o),a}function c(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var h="suspendedStart",d="suspendedYield",p="executing",m="completed",v={};function y(){}function w(){}function g(){}var b={};l(b,o,(function(){return this}));var k=Object.getPrototypeOf,x=k&&k(k(D([])));x&&x!==n&&i.call(x,o)&&(b=x);var _=g.prototype=y.prototype=Object.create(b);function A(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function P(e,t){function n(a,o,s,f){var l=c(e[a],e,o);if("throw"!==l.type){var u=l.arg,h=u.value;return h&&"object"===r(h)&&i.call(h,"__await")?t.resolve(h.__await).then((function(e){n("next",e,s,f)}),(function(e){n("throw",e,s,f)})):t.resolve(h).then((function(e){u.value=e,s(u)}),(function(e){return n("throw",e,s,f)}))}f(l.arg)}var a;this._invoke=function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return a=a?a.then(i,i):i()}}function I(e,r){var n=e.iterator[r.method];if(n===t){if(r.delegate=null,"throw"===r.method){if(e.iterator.return&&(r.method="return",r.arg=t,I(e,r),"throw"===r.method))return v;r.method="throw",r.arg=new TypeError("The iterator does not provide a \'throw\' method")}return v}var i=c(n,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function U(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(U,this),this.reset(!0)}function D(e){if(e){var r=e[o];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,a=function r(){for(;++n<e.length;)if(i.call(e,n))return r.value=e[n],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}return{next:E}}function E(){return{value:t,done:!0}}return w.prototype=g,l(_,"constructor",g),l(g,"constructor",w),w.displayName=l(g,f,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,l(e,f,"GeneratorFunction")),e.prototype=Object.create(_),e},e.awrap=function(e){return{__await:e}},A(P.prototype),l(P.prototype,s,(function(){return this})),e.AsyncIterator=P,e.async=function(t,r,n,i,a){void 0===a&&(a=Promise);var o=new P(u(t,r,n,i),a);return e.isGeneratorFunction(r)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},A(_),l(_,f,"Generator"),l(_,o,(function(){return this})),l(_,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=D,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(S),!e)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(n,i){return s.type="throw",s.arg=e,r.next=n,i&&(r.method="next",r.arg=t),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var f=i.call(o,"catchLoc"),l=i.call(o,"finallyLoc");if(f&&l){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(f){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var a=n;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),S(r),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;S(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:D(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}(e.exports);try{regeneratorRuntime=t}catch(e){"object"===("undefined"==typeof globalThis?"undefined":r(globalThis))?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}}(n);var i=n.exports,a=new Map;function o(e,t){Array.isArray(e)||(e=[e]),e.forEach((function(e){return a.set(e,t)}))}function s(e){return f.apply(this,arguments)}function f(){return(f=t(i.mark((function e(t){var r,n;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=a.get(t.Compression)){e.next=3;break}throw new Error("Unknown compression method identifier: ".concat(t.Compression));case 3:return e.next=5,r();case 5:return n=e.sent,e.abrupt("return",new n(t));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}o([void 0,1],(function(){return Promise.resolve().then((function(){return _})).then((function(e){return e.default}))})),o(5,(function(){return Promise.resolve().then((function(){return S})).then((function(e){return e.default}))})),o(6,(function(){throw new Error("old style JPEG compression is not supported.")})),o(7,(function(){return Promise.resolve().then((function(){return L})).then((function(e){return e.default}))})),o([8,32946],(function(){return Promise.resolve().then((function(){return Ne})).then((function(e){return e.default}))})),o(32773,(function(){return Promise.resolve().then((function(){return Ye})).then((function(e){return e.default}))})),o(34887,(function(){return Promise.resolve().then((function(){return ut})).then((function(e){return e.default}))})),o(50001,(function(){return Promise.resolve().then((function(){return dt})).then((function(e){return e.default}))}));var l=globalThis;function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function h(e,t,r){return t&&c(e.prototype,t),r&&c(e,r),e}function d(e,t){return d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},d(e,t)}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}function m(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return e}(e)}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}function y(e,t){var r=e.length-t,n=0;do{for(var i=t;i>0;i--)e[n+t]+=e[n],n++;r-=t}while(r>0)}function w(e,t,r){for(var n=0,i=e.length,a=i/r;i>t;){for(var o=t;o>0;--o)e[n+t]+=e[n],++n;i-=t}for(var s=e.slice(),f=0;f<a;++f)for(var l=0;l<r;++l)e[r*f+l]=s[(r-l-1)*a+f]}function g(e,t,r,n,i,a){if(!t||1===t)return e;for(var o=0;o<i.length;++o){if(i[o]%8!=0)throw new Error("When decoding with predictor, only multiple of 8 bits are supported.");if(i[o]!==i[0])throw new Error("When decoding with predictor, all samples must have the same size.")}for(var s=i[0]/8,f=2===a?1:i.length,l=0;l<n&&!(l*f*r*s>=e.byteLength);++l){var u=void 0;if(2===t){switch(i[0]){case 8:u=new Uint8Array(e,l*f*r*s,f*r*s);break;case 16:u=new Uint16Array(e,l*f*r*s,f*r*s/2);break;case 32:u=new Uint32Array(e,l*f*r*s,f*r*s/4);break;default:throw new Error("Predictor 2 not allowed with ".concat(i[0]," bits per sample."))}y(u,f)}else 3===t&&w(u=new Uint8Array(e,l*f*r*s,f*r*s),f,s)}return e}l.addEventListener("message",function(){var e=t(i.mark((function e(t){var r,n,a,o,f,u;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.data,n=r.id,a=r.fileDirectory,o=r.buffer,e.next=3,s(a);case 3:return f=e.sent,e.next=6,f.decode(a,o);case 6:u=e.sent,l.postMessage({decoded:u,id:n},[u]);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());var b=function(){function e(){u(this,e)}var r;return h(e,[{key:"decode",value:(r=t(i.mark((function e(t,r){var n,a,o,s,f;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.decodeBlock(r);case 2:if(n=e.sent,1===(a=t.Predictor||1)){e.next=9;break}return o=!t.StripOffsets,s=o?t.TileWidth:t.ImageWidth,f=o?t.TileLength:t.RowsPerStrip||t.ImageLength,e.abrupt("return",g(n,a,s,f,t.BitsPerSample,t.PlanarConfiguration));case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)}))),function(e,t){return r.apply(this,arguments)})}]),e}();function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v(e);if(t){var i=v(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return m(this,r)}}var x=function(e){p(r,b);var t=k(r);function r(){return u(this,r),t.apply(this,arguments)}return h(r,[{key:"decodeBlock",value:function(e){return e}}]),r}(),_=Object.freeze({__proto__:null,default:x});function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v(e);if(t){var i=v(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return m(this,r)}}function P(e,t){for(var r=t.length-1;r>=0;r--)e.push(t[r]);return e}function I(e){for(var t=new Uint16Array(4093),r=new Uint8Array(4093),n=0;n<=257;n++)t[n]=4096,r[n]=n;var i=258,a=9,o=0;function s(){i=258,a=9}function f(e){var t=function(e,t,r){var n=t%8,i=Math.floor(t/8),a=8-n,o=t+r-8*(i+1),s=8*(i+2)-(t+r),f=8*(i+2)-t;if(s=Math.max(0,s),i>=e.length)return console.warn("ran off the end of the buffer before finding EOI_CODE (end on input code)"),257;var l=e[i]&Math.pow(2,8-n)-1,u=l<<=r-a;if(i+1<e.length){var c=e[i+1]>>>s;u+=c<<=Math.max(0,r-f)}if(o>8&&i+2<e.length){var h=8*(i+3)-(t+r);u+=e[i+2]>>>h}return u}(e,o,a);return o+=a,t}function l(e,n){return r[i]=n,t[i]=e,++i-1}function u(e){for(var n=[],i=e;4096!==i;i=t[i])n.push(r[i]);return n}var c=[];s();for(var h,d=new Uint8Array(e),p=f(d);257!==p;){if(256===p){for(s(),p=f(d);256===p;)p=f(d);if(257===p)break;if(p>256)throw new Error("corrupted code at scanline ".concat(p));P(c,u(p)),h=p}else if(p<i){var m=u(p);P(c,m),l(h,m[m.length-1]),h=p}else{var v=u(h);if(!v)throw new Error("Bogus entry. Not in dictionary, ".concat(h," / ").concat(i,", position: ").concat(o));P(c,v),c.push(v[v.length-1]),l(h,v[v.length-1]),h=p}i+1>=Math.pow(2,a)&&(12===a?h=void 0:a++),p=f(d)}return new Uint8Array(c)}var U=function(e){p(r,b);var t=A(r);function r(){return u(this,r),t.apply(this,arguments)}return h(r,[{key:"decodeBlock",value:function(e){return I(e).buffer}}]),r}(),S=Object.freeze({__proto__:null,default:U});function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v(e);if(t){var i=v(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return m(this,r)}}var D=new Int32Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]);function E(e,t){for(var r=0,n=[],i=16;i>0&&!e[i-1];)--i;n.push({children:[],index:0});for(var a,o=n[0],s=0;s<i;s++){for(var f=0;f<e[s];f++){for((o=n.pop()).children[o.index]=t[r];o.index>0;)o=n.pop();for(o.index++,n.push(o);n.length<=s;)n.push(a={children:[],index:0}),o.children[o.index]=a.children,o=a;r++}s+1<i&&(n.push(a={children:[],index:0}),o.children[o.index]=a.children,o=a)}return n[0].children}function B(e,t,n,i,a,o,s,f,l){var u=n.mcusPerLine,c=n.progressive,h=t,d=t,p=0,m=0;function v(){if(m>0)return m--,p>>m&1;if(255===(p=e[d++])){var t=e[d++];if(t)throw new Error("unexpected marker: ".concat((p<<8|t).toString(16)))}return m=7,p>>>7}function y(e){for(var t,n=e;null!==(t=v());){if("number"==typeof(n=n[t]))return n;if("object"!==r(n))throw new Error("invalid huffman sequence")}return null}function w(e){for(var t=e,r=0;t>0;){var n=v();if(null===n)return;r=r<<1|n,--t}return r}function g(e){var t=w(e);return t>=1<<e-1?t:t+(-1<<e)+1}var b=0;var k,x=0;function _(e,t,r,n,i){var a=r%u,o=(r/u|0)*e.v+n,s=a*e.h+i;t(e,e.blocks[o][s])}function A(e,t,r){var n=r/e.blocksPerLine|0,i=r%e.blocksPerLine;t(e,e.blocks[n][i])}var P,I,U,S,T,E,B=i.length;E=c?0===o?0===f?function(e,t){var r=y(e.huffmanTableDC),n=0===r?0:g(r)<<l;e.pred+=n,t[0]=e.pred}:function(e,t){t[0]|=v()<<l}:0===f?function(e,t){if(b>0)b--;else for(var r=o,n=s;r<=n;){var i=y(e.huffmanTableAC),a=15&i,f=i>>4;if(0===a){if(f<15){b=w(f)+(1<<f)-1;break}r+=16}else t[D[r+=f]]=g(a)*(1<<l),r++}}:function(e,t){for(var r=o,n=s,i=0;r<=n;){var a=D[r],f=t[a]<0?-1:1;switch(x){case 0:var u=y(e.huffmanTableAC),c=15&u;if(i=u>>4,0===c)i<15?(b=w(i)+(1<<i),x=4):(i=16,x=1);else{if(1!==c)throw new Error("invalid ACn encoding");k=g(c),x=i?2:3}continue;case 1:case 2:t[a]?t[a]+=(v()<<l)*f:0==--i&&(x=2===x?3:0);break;case 3:t[a]?t[a]+=(v()<<l)*f:(t[a]=k<<l,x=0);break;case 4:t[a]&&(t[a]+=(v()<<l)*f)}r++}4===x&&0==--b&&(x=0)}:function(e,t){var r=y(e.huffmanTableDC),n=0===r?0:g(r);e.pred+=n,t[0]=e.pred;for(var i=1;i<64;){var a=y(e.huffmanTableAC),o=15&a,s=a>>4;if(0===o){if(s<15)break;i+=16}else t[D[i+=s]]=g(o),i++}};var O,M,C=0;M=1===B?i[0].blocksPerLine*i[0].blocksPerColumn:u*n.mcusPerColumn;for(var L=a||M;C<M;){for(I=0;I<B;I++)i[I].pred=0;if(b=0,1===B)for(P=i[0],T=0;T<L;T++)A(P,E,C),C++;else for(T=0;T<L;T++){for(I=0;I<B;I++){var R=P=i[I],V=R.h,G=R.v;for(U=0;U<G;U++)for(S=0;S<V;S++)_(P,E,C,U,S)}if(++C===M)break}if(m=0,(O=e[d]<<8|e[d+1])<65280)throw new Error("marker was not found");if(!(O>=65488&&O<=65495))break;d+=2}return d-h}function O(e,t){var r=[],n=t.blocksPerLine,i=t.blocksPerColumn,a=n<<3,o=new Int32Array(64),s=new Uint8Array(64);function f(e,r,n){var i,a,o,s,f,l,u,c,h,d,p=t.quantizationTable,m=n;for(d=0;d<64;d++)m[d]=e[d]*p[d];for(d=0;d<8;++d){var v=8*d;0!==m[1+v]||0!==m[2+v]||0!==m[3+v]||0!==m[4+v]||0!==m[5+v]||0!==m[6+v]||0!==m[7+v]?(i=5793*m[0+v]+128>>8,a=5793*m[4+v]+128>>8,o=m[2+v],s=m[6+v],f=2896*(m[1+v]-m[7+v])+128>>8,c=2896*(m[1+v]+m[7+v])+128>>8,l=m[3+v]<<4,h=i-a+1>>1,i=i+a+1>>1,a=h,h=3784*o+1567*s+128>>8,o=1567*o-3784*s+128>>8,s=h,h=f-(u=m[5+v]<<4)+1>>1,f=f+u+1>>1,u=h,h=c+l+1>>1,l=c-l+1>>1,c=h,h=i-s+1>>1,i=i+s+1>>1,s=h,h=a-o+1>>1,a=a+o+1>>1,o=h,h=2276*f+3406*c+2048>>12,f=3406*f-2276*c+2048>>12,c=h,h=799*l+4017*u+2048>>12,l=4017*l-799*u+2048>>12,u=h,m[0+v]=i+c,m[7+v]=i-c,m[1+v]=a+u,m[6+v]=a-u,m[2+v]=o+l,m[5+v]=o-l,m[3+v]=s+f,m[4+v]=s-f):(h=5793*m[0+v]+512>>10,m[0+v]=h,m[1+v]=h,m[2+v]=h,m[3+v]=h,m[4+v]=h,m[5+v]=h,m[6+v]=h,m[7+v]=h)}for(d=0;d<8;++d){var y=d;0!==m[8+y]||0!==m[16+y]||0!==m[24+y]||0!==m[32+y]||0!==m[40+y]||0!==m[48+y]||0!==m[56+y]?(i=5793*m[0+y]+2048>>12,a=5793*m[32+y]+2048>>12,o=m[16+y],s=m[48+y],f=2896*(m[8+y]-m[56+y])+2048>>12,c=2896*(m[8+y]+m[56+y])+2048>>12,l=m[24+y],h=i-a+1>>1,i=i+a+1>>1,a=h,h=3784*o+1567*s+2048>>12,o=1567*o-3784*s+2048>>12,s=h,h=f-(u=m[40+y])+1>>1,f=f+u+1>>1,u=h,h=c+l+1>>1,l=c-l+1>>1,c=h,h=i-s+1>>1,i=i+s+1>>1,s=h,h=a-o+1>>1,a=a+o+1>>1,o=h,h=2276*f+3406*c+2048>>12,f=3406*f-2276*c+2048>>12,c=h,h=799*l+4017*u+2048>>12,l=4017*l-799*u+2048>>12,u=h,m[0+y]=i+c,m[56+y]=i-c,m[8+y]=a+u,m[48+y]=a-u,m[16+y]=o+l,m[40+y]=o-l,m[24+y]=s+f,m[32+y]=s-f):(h=5793*n[d+0]+8192>>14,m[0+y]=h,m[8+y]=h,m[16+y]=h,m[24+y]=h,m[32+y]=h,m[40+y]=h,m[48+y]=h,m[56+y]=h)}for(d=0;d<64;++d){var w=128+(m[d]+8>>4);r[d]=w<0?0:w>255?255:w}}for(var l=0;l<i;l++){for(var u=l<<3,c=0;c<8;c++)r.push(new Uint8Array(a));for(var h=0;h<n;h++){f(t.blocks[l][h],s,o);for(var d=0,p=h<<3,m=0;m<8;m++)for(var v=r[u+m],y=0;y<8;y++)v[p+y]=s[d++]}}return r}var M=function(){function e(){u(this,e),this.jfif=null,this.adobe=null,this.quantizationTables=[],this.huffmanTablesAC=[],this.huffmanTablesDC=[],this.resetFrames()}return h(e,[{key:"resetFrames",value:function(){this.frames=[]}},{key:"parse",value:function(e){var t=0;function r(){var r=e[t]<<8|e[t+1];return t+=2,r}function n(e){var t,r,n=0,i=0;for(r in e.components)e.components.hasOwnProperty(r)&&(n<(t=e.components[r]).h&&(n=t.h),i<t.v&&(i=t.v));var a=Math.ceil(e.samplesPerLine/8/n),o=Math.ceil(e.scanLines/8/i);for(r in e.components)if(e.components.hasOwnProperty(r)){t=e.components[r];for(var s=Math.ceil(Math.ceil(e.samplesPerLine/8)*t.h/n),f=Math.ceil(Math.ceil(e.scanLines/8)*t.v/i),l=a*t.h,u=o*t.v,c=[],h=0;h<u;h++){for(var d=[],p=0;p<l;p++)d.push(new Int32Array(64));c.push(d)}t.blocksPerLine=s,t.blocksPerColumn=f,t.blocks=c}e.maxH=n,e.maxV=i,e.mcusPerLine=a,e.mcusPerColumn=o}var i,a,o=r();if(65496!==o)throw new Error("SOI not found");for(o=r();65497!==o;){switch(o){case 65280:break;case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var s=(i=void 0,a=void 0,i=r(),a=e.subarray(t,t+i-2),t+=a.length,a);65504===o&&74===s[0]&&70===s[1]&&73===s[2]&&70===s[3]&&0===s[4]&&(this.jfif={version:{major:s[5],minor:s[6]},densityUnits:s[7],xDensity:s[8]<<8|s[9],yDensity:s[10]<<8|s[11],thumbWidth:s[12],thumbHeight:s[13],thumbData:s.subarray(14,14+3*s[12]*s[13])}),65518===o&&65===s[0]&&100===s[1]&&111===s[2]&&98===s[3]&&101===s[4]&&0===s[5]&&(this.adobe={version:s[6],flags0:s[7]<<8|s[8],flags1:s[9]<<8|s[10],transformCode:s[11]});break;case 65499:for(var f=r()+t-2;t<f;){var l=e[t++],u=new Int32Array(64);if(l>>4==0)for(var c=0;c<64;c++){u[D[c]]=e[t++]}else{if(l>>4!=1)throw new Error("DQT: invalid table spec");for(var h=0;h<64;h++){u[D[h]]=r()}}this.quantizationTables[15&l]=u}break;case 65472:case 65473:case 65474:r();for(var d={extended:65473===o,progressive:65474===o,precision:e[t++],scanLines:r(),samplesPerLine:r(),components:{},componentsOrder:[]},p=e[t++],m=void 0,v=0;v<p;v++){m=e[t];var y=e[t+1]>>4,w=15&e[t+1],g=e[t+2];d.componentsOrder.push(m),d.components[m]={h:y,v:w,quantizationIdx:g},t+=3}n(d),this.frames.push(d);break;case 65476:for(var b=r(),k=2;k<b;){for(var x=e[t++],_=new Uint8Array(16),A=0,P=0;P<16;P++,t++)_[P]=e[t],A+=_[P];for(var I=new Uint8Array(A),U=0;U<A;U++,t++)I[U]=e[t];k+=17+A,x>>4==0?this.huffmanTablesDC[15&x]=E(_,I):this.huffmanTablesAC[15&x]=E(_,I)}break;case 65501:r(),this.resetInterval=r();break;case 65498:r();for(var S=e[t++],T=[],O=this.frames[0],M=0;M<S;M++){var C=O.components[e[t++]],L=e[t++];C.huffmanTableDC=this.huffmanTablesDC[L>>4],C.huffmanTableAC=this.huffmanTablesAC[15&L],T.push(C)}var R=e[t++],V=e[t++],G=e[t++],F=B(e,t,O,T,this.resetInterval,R,V,G>>4,15&G);t+=F;break;case 65535:255!==e[t]&&t--;break;default:if(255===e[t-3]&&e[t-2]>=192&&e[t-2]<=254){t-=3;break}throw new Error("unknown JPEG marker ".concat(o.toString(16)))}o=r()}}},{key:"getResult",value:function(){var e=this.frames;if(0===this.frames.length)throw new Error("no frames were decoded");this.frames.length>1&&console.warn("more than one frame is not supported");for(var t=0;t<this.frames.length;t++)for(var r=this.frames[t].components,n=0,i=Object.keys(r);n<i.length;n++){var a=i[n];r[a].quantizationTable=this.quantizationTables[r[a].quantizationIdx],delete r[a].quantizationIdx}for(var o=e[0],s=o.components,f=o.componentsOrder,l=[],u=o.samplesPerLine,c=o.scanLines,h=0;h<f.length;h++){var d=s[f[h]];l.push({lines:O(0,d),scaleX:d.h/o.maxH,scaleY:d.v/o.maxV})}for(var p=new Uint8Array(u*c*l.length),m=0,v=0;v<c;++v)for(var y=0;y<u;++y)for(var w=0;w<l.length;++w){var g=l[w];p[m]=g.lines[0|v*g.scaleY][0|y*g.scaleX],++m}return p}}]),e}(),C=function(e){p(r,b);var t=T(r);function r(e){var n;return u(this,r),(n=t.call(this)).reader=new M,e.JPEGTables&&n.reader.parse(e.JPEGTables),n}return h(r,[{key:"decodeBlock",value:function(e){return this.reader.resetFrames(),this.reader.parse(new Uint8Array(e)),this.reader.getResult().buffer}}]),r}(),L=Object.freeze({__proto__:null,default:C});function R(e){for(var t=e.length;--t>=0;)e[t]=0}R(new Array(576)),R(new Array(60)),R(new Array(512)),R(new Array(256)),R(new Array(29)),R(new Array(30));var V=function(e,t,r,n){for(var i=65535&e|0,a=e>>>16&65535|0,o=0;0!==r;){r-=o=r>2e3?2e3:r;do{a=a+(i=i+t[n++]|0)|0}while(--o);i%=65521,a%=65521}return i|a<<16|0},G=new Uint32Array(function(){for(var e,t=[],r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=1&e?3988292384^e>>>1:e>>>1;t[r]=e}return t}()),F=function(e,t,r,n){var i=G,a=n+r;e^=-1;for(var o=n;o<a;o++)e=e>>>8^i[255&(e^t[o])];return-1^e},z={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},j={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},N=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},Z=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var n=t.shift();if(n){if("object"!==r(n))throw new TypeError(n+"must be non-object");for(var i in n)N(n,i)&&(e[i]=n[i])}}return e},K=function(e){for(var t=0,r=0,n=e.length;r<n;r++)t+=e[r].length;for(var i=new Uint8Array(t),a=0,o=0,s=e.length;a<s;a++){var f=e[a];i.set(f,o),o+=f.length}return i},H=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){H=!1}for(var Y=new Uint8Array(256),X=0;X<256;X++)Y[X]=X>=252?6:X>=248?5:X>=240?4:X>=224?3:X>=192?2:1;Y[254]=Y[254]=1;var W=function(e){if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(e);var t,r,n,i,a,o=e.length,s=0;for(i=0;i<o;i++)55296==(64512&(r=e.charCodeAt(i)))&&i+1<o&&56320==(64512&(n=e.charCodeAt(i+1)))&&(r=65536+(r-55296<<10)+(n-56320),i++),s+=r<128?1:r<2048?2:r<65536?3:4;for(t=new Uint8Array(s),a=0,i=0;a<s;i++)55296==(64512&(r=e.charCodeAt(i)))&&i+1<o&&56320==(64512&(n=e.charCodeAt(i+1)))&&(r=65536+(r-55296<<10)+(n-56320),i++),r<128?t[a++]=r:r<2048?(t[a++]=192|r>>>6,t[a++]=128|63&r):r<65536?(t[a++]=224|r>>>12,t[a++]=128|r>>>6&63,t[a++]=128|63&r):(t[a++]=240|r>>>18,t[a++]=128|r>>>12&63,t[a++]=128|r>>>6&63,t[a++]=128|63&r);return t},q=function(e,t){var r,n,i=t||e.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(e.subarray(0,t));var a=new Array(2*i);for(n=0,r=0;r<i;){var o=e[r++];if(o<128)a[n++]=o;else{var s=Y[o];if(s>4)a[n++]=65533,r+=s-1;else{for(o&=2===s?31:3===s?15:7;s>1&&r<i;)o=o<<6|63&e[r++],s--;s>1?a[n++]=65533:o<65536?a[n++]=o:(o-=65536,a[n++]=55296|o>>10&1023,a[n++]=56320|1023&o)}}}return function(e,t){if(t<65534&&e.subarray&&H)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));for(var r="",n=0;n<t;n++)r+=String.fromCharCode(e[n]);return r}(a,n)},J=function(e,t){(t=t||e.length)>e.length&&(t=e.length);for(var r=t-1;r>=0&&128==(192&e[r]);)r--;return r<0||0===r?t:r+Y[e[r]]>t?r:t};var Q=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0},$=function(e,t){var r,n,i,a,o,s,f,l,u,c,h,d,p,m,v,y,w,g,b,k,x,_,A,P,I=e.state;r=e.next_in,A=e.input,n=r+(e.avail_in-5),i=e.next_out,P=e.output,a=i-(t-e.avail_out),o=i+(e.avail_out-257),s=I.dmax,f=I.wsize,l=I.whave,u=I.wnext,c=I.window,h=I.hold,d=I.bits,p=I.lencode,m=I.distcode,v=(1<<I.lenbits)-1,y=(1<<I.distbits)-1;e:do{d<15&&(h+=A[r++]<<d,d+=8,h+=A[r++]<<d,d+=8),w=p[h&v];t:for(;;){if(h>>>=g=w>>>24,d-=g,0===(g=w>>>16&255))P[i++]=65535&w;else{if(!(16&g)){if(0==(64&g)){w=p[(65535&w)+(h&(1<<g)-1)];continue t}if(32&g){I.mode=12;break e}e.msg="invalid literal/length code",I.mode=30;break e}b=65535&w,(g&=15)&&(d<g&&(h+=A[r++]<<d,d+=8),b+=h&(1<<g)-1,h>>>=g,d-=g),d<15&&(h+=A[r++]<<d,d+=8,h+=A[r++]<<d,d+=8),w=m[h&y];r:for(;;){if(h>>>=g=w>>>24,d-=g,!(16&(g=w>>>16&255))){if(0==(64&g)){w=m[(65535&w)+(h&(1<<g)-1)];continue r}e.msg="invalid distance code",I.mode=30;break e}if(k=65535&w,d<(g&=15)&&(h+=A[r++]<<d,(d+=8)<g&&(h+=A[r++]<<d,d+=8)),(k+=h&(1<<g)-1)>s){e.msg="invalid distance too far back",I.mode=30;break e}if(h>>>=g,d-=g,k>(g=i-a)){if((g=k-g)>l&&I.sane){e.msg="invalid distance too far back",I.mode=30;break e}if(x=0,_=c,0===u){if(x+=f-g,g<b){b-=g;do{P[i++]=c[x++]}while(--g);x=i-k,_=P}}else if(u<g){if(x+=f+u-g,(g-=u)<b){b-=g;do{P[i++]=c[x++]}while(--g);if(x=0,u<b){b-=g=u;do{P[i++]=c[x++]}while(--g);x=i-k,_=P}}}else if(x+=u-g,g<b){b-=g;do{P[i++]=c[x++]}while(--g);x=i-k,_=P}for(;b>2;)P[i++]=_[x++],P[i++]=_[x++],P[i++]=_[x++],b-=3;b&&(P[i++]=_[x++],b>1&&(P[i++]=_[x++]))}else{x=i-k;do{P[i++]=P[x++],P[i++]=P[x++],P[i++]=P[x++],b-=3}while(b>2);b&&(P[i++]=P[x++],b>1&&(P[i++]=P[x++]))}break}}break}}while(r<n&&i<o);r-=b=d>>3,h&=(1<<(d-=b<<3))-1,e.next_in=r,e.next_out=i,e.avail_in=r<n?n-r+5:5-(r-n),e.avail_out=i<o?o-i+257:257-(i-o),I.hold=h,I.bits=d},ee=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),te=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),re=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),ne=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),ie=function(e,t,r,n,i,a,o,s){var f,l,u,c,h,d,p,m,v,y=s.bits,w=0,g=0,b=0,k=0,x=0,_=0,A=0,P=0,I=0,U=0,S=null,T=0,D=new Uint16Array(16),E=new Uint16Array(16),B=null,O=0;for(w=0;w<=15;w++)D[w]=0;for(g=0;g<n;g++)D[t[r+g]]++;for(x=y,k=15;k>=1&&0===D[k];k--);if(x>k&&(x=k),0===k)return i[a++]=20971520,i[a++]=20971520,s.bits=1,0;for(b=1;b<k&&0===D[b];b++);for(x<b&&(x=b),P=1,w=1;w<=15;w++)if(P<<=1,(P-=D[w])<0)return-1;if(P>0&&(0===e||1!==k))return-1;for(E[1]=0,w=1;w<15;w++)E[w+1]=E[w]+D[w];for(g=0;g<n;g++)0!==t[r+g]&&(o[E[t[r+g]]++]=g);if(0===e?(S=B=o,d=19):1===e?(S=ee,T-=257,B=te,O-=257,d=256):(S=re,B=ne,d=-1),U=0,g=0,w=b,h=a,_=x,A=0,u=-1,c=(I=1<<x)-1,1===e&&I>852||2===e&&I>592)return 1;for(;;){p=w-A,o[g]<d?(m=0,v=o[g]):o[g]>d?(m=B[O+o[g]],v=S[T+o[g]]):(m=96,v=0),f=1<<w-A,b=l=1<<_;do{i[h+(U>>A)+(l-=f)]=p<<24|m<<16|v|0}while(0!==l);for(f=1<<w-1;U&f;)f>>=1;if(0!==f?(U&=f-1,U+=f):U=0,g++,0==--D[w]){if(w===k)break;w=t[r+o[g]]}if(w>x&&(U&c)!==u){for(0===A&&(A=x),h+=b,P=1<<(_=w-A);_+A<k&&!((P-=D[_+A])<=0);)_++,P<<=1;if(I+=1<<_,1===e&&I>852||2===e&&I>592)return 1;i[u=U&c]=x<<24|_<<16|h-a|0}}return 0!==U&&(i[h+U]=w-A<<24|64<<16|0),s.bits=x,0},ae=j.Z_FINISH,oe=j.Z_BLOCK,se=j.Z_TREES,fe=j.Z_OK,le=j.Z_STREAM_END,ue=j.Z_NEED_DICT,ce=j.Z_STREAM_ERROR,he=j.Z_DATA_ERROR,de=j.Z_MEM_ERROR,pe=j.Z_BUF_ERROR,me=j.Z_DEFLATED,ve=function(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)};function ye(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}var we,ge,be=function(e){if(!e||!e.state)return ce;var t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=1,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(852),t.distcode=t.distdyn=new Int32Array(592),t.sane=1,t.back=-1,fe},ke=function(e){if(!e||!e.state)return ce;var t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,be(e)},xe=function(e,t){var r;if(!e||!e.state)return ce;var n=e.state;return t<0?(r=0,t=-t):(r=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?ce:(null!==n.window&&n.wbits!==t&&(n.window=null),n.wrap=r,n.wbits=t,ke(e))},_e=function(e,t){if(!e)return ce;var r=new ye;e.state=r,r.window=null;var n=xe(e,t);return n!==fe&&(e.state=null),n},Ae=!0,Pe=function(e){if(Ae){we=new Int32Array(512),ge=new Int32Array(32);for(var t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(ie(1,e.lens,0,288,we,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;ie(2,e.lens,0,32,ge,0,e.work,{bits:5}),Ae=!1}e.lencode=we,e.lenbits=9,e.distcode=ge,e.distbits=5},Ie=function(e,t,r,n){var i,a=e.state;return null===a.window&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new Uint8Array(a.wsize)),n>=a.wsize?(a.window.set(t.subarray(r-a.wsize,r),0),a.wnext=0,a.whave=a.wsize):((i=a.wsize-a.wnext)>n&&(i=n),a.window.set(t.subarray(r-n,r-n+i),a.wnext),(n-=i)?(a.window.set(t.subarray(r-n,r),0),a.wnext=n,a.whave=a.wsize):(a.wnext+=i,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=i))),0},Ue={inflateReset:ke,inflateReset2:xe,inflateResetKeep:be,inflateInit:function(e){return _e(e,15)},inflateInit2:_e,inflate:function(e,t){var r,n,i,a,o,s,f,l,u,c,h,d,p,m,v,y,w,g,b,k,x,_,A,P,I=0,U=new Uint8Array(4),S=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return ce;12===(r=e.state).mode&&(r.mode=13),o=e.next_out,i=e.output,f=e.avail_out,a=e.next_in,n=e.input,s=e.avail_in,l=r.hold,u=r.bits,c=s,h=f,_=fe;e:for(;;)switch(r.mode){case 1:if(0===r.wrap){r.mode=13;break}for(;u<16;){if(0===s)break e;s--,l+=n[a++]<<u,u+=8}if(2&r.wrap&&35615===l){r.check=0,U[0]=255&l,U[1]=l>>>8&255,r.check=F(r.check,U,2,0),l=0,u=0,r.mode=2;break}if(r.flags=0,r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&l)<<8)+(l>>8))%31){e.msg="incorrect header check",r.mode=30;break}if((15&l)!==me){e.msg="unknown compression method",r.mode=30;break}if(u-=4,x=8+(15&(l>>>=4)),0===r.wbits)r.wbits=x;else if(x>r.wbits){e.msg="invalid window size",r.mode=30;break}r.dmax=1<<r.wbits,e.adler=r.check=1,r.mode=512&l?10:12,l=0,u=0;break;case 2:for(;u<16;){if(0===s)break e;s--,l+=n[a++]<<u,u+=8}if(r.flags=l,(255&r.flags)!==me){e.msg="unknown compression method",r.mode=30;break}if(57344&r.flags){e.msg="unknown header flags set",r.mode=30;break}r.head&&(r.head.text=l>>8&1),512&r.flags&&(U[0]=255&l,U[1]=l>>>8&255,r.check=F(r.check,U,2,0)),l=0,u=0,r.mode=3;case 3:for(;u<32;){if(0===s)break e;s--,l+=n[a++]<<u,u+=8}r.head&&(r.head.time=l),512&r.flags&&(U[0]=255&l,U[1]=l>>>8&255,U[2]=l>>>16&255,U[3]=l>>>24&255,r.check=F(r.check,U,4,0)),l=0,u=0,r.mode=4;case 4:for(;u<16;){if(0===s)break e;s--,l+=n[a++]<<u,u+=8}r.head&&(r.head.xflags=255&l,r.head.os=l>>8),512&r.flags&&(U[0]=255&l,U[1]=l>>>8&255,r.check=F(r.check,U,2,0)),l=0,u=0,r.mode=5;case 5:if(1024&r.flags){for(;u<16;){if(0===s)break e;s--,l+=n[a++]<<u,u+=8}r.length=l,r.head&&(r.head.extra_len=l),512&r.flags&&(U[0]=255&l,U[1]=l>>>8&255,r.check=F(r.check,U,2,0)),l=0,u=0}else r.head&&(r.head.extra=null);r.mode=6;case 6:if(1024&r.flags&&((d=r.length)>s&&(d=s),d&&(r.head&&(x=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(n.subarray(a,a+d),x)),512&r.flags&&(r.check=F(r.check,n,d,a)),s-=d,a+=d,r.length-=d),r.length))break e;r.length=0,r.mode=7;case 7:if(2048&r.flags){if(0===s)break e;d=0;do{x=n[a+d++],r.head&&x&&r.length<65536&&(r.head.name+=String.fromCharCode(x))}while(x&&d<s);if(512&r.flags&&(r.check=F(r.check,n,d,a)),s-=d,a+=d,x)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=8;case 8:if(4096&r.flags){if(0===s)break e;d=0;do{x=n[a+d++],r.head&&x&&r.length<65536&&(r.head.comment+=String.fromCharCode(x))}while(x&&d<s);if(512&r.flags&&(r.check=F(r.check,n,d,a)),s-=d,a+=d,x)break e}else r.head&&(r.head.comment=null);r.mode=9;case 9:if(512&r.flags){for(;u<16;){if(0===s)break e;s--,l+=n[a++]<<u,u+=8}if(l!==(65535&r.check)){e.msg="header crc mismatch",r.mode=30;break}l=0,u=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=12;break;case 10:for(;u<32;){if(0===s)break e;s--,l+=n[a++]<<u,u+=8}e.adler=r.check=ve(l),l=0,u=0,r.mode=11;case 11:if(0===r.havedict)return e.next_out=o,e.avail_out=f,e.next_in=a,e.avail_in=s,r.hold=l,r.bits=u,ue;e.adler=r.check=1,r.mode=12;case 12:if(t===oe||t===se)break e;case 13:if(r.last){l>>>=7&u,u-=7&u,r.mode=27;break}for(;u<3;){if(0===s)break e;s--,l+=n[a++]<<u,u+=8}switch(r.last=1&l,u-=1,3&(l>>>=1)){case 0:r.mode=14;break;case 1:if(Pe(r),r.mode=20,t===se){l>>>=2,u-=2;break e}break;case 2:r.mode=17;break;case 3:e.msg="invalid block type",r.mode=30}l>>>=2,u-=2;break;case 14:for(l>>>=7&u,u-=7&u;u<32;){if(0===s)break e;s--,l+=n[a++]<<u,u+=8}if((65535&l)!=(l>>>16^65535)){e.msg="invalid stored block lengths",r.mode=30;break}if(r.length=65535&l,l=0,u=0,r.mode=15,t===se)break e;case 15:r.mode=16;case 16:if(d=r.length){if(d>s&&(d=s),d>f&&(d=f),0===d)break e;i.set(n.subarray(a,a+d),o),s-=d,a+=d,f-=d,o+=d,r.length-=d;break}r.mode=12;break;case 17:for(;u<14;){if(0===s)break e;s--,l+=n[a++]<<u,u+=8}if(r.nlen=257+(31&l),l>>>=5,u-=5,r.ndist=1+(31&l),l>>>=5,u-=5,r.ncode=4+(15&l),l>>>=4,u-=4,r.nlen>286||r.ndist>30){e.msg="too many length or distance symbols",r.mode=30;break}r.have=0,r.mode=18;case 18:for(;r.have<r.ncode;){for(;u<3;){if(0===s)break e;s--,l+=n[a++]<<u,u+=8}r.lens[S[r.have++]]=7&l,l>>>=3,u-=3}for(;r.have<19;)r.lens[S[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,A={bits:r.lenbits},_=ie(0,r.lens,0,19,r.lencode,0,r.work,A),r.lenbits=A.bits,_){e.msg="invalid code lengths set",r.mode=30;break}r.have=0,r.mode=19;case 19:for(;r.have<r.nlen+r.ndist;){for(;y=(I=r.lencode[l&(1<<r.lenbits)-1])>>>16&255,w=65535&I,!((v=I>>>24)<=u);){if(0===s)break e;s--,l+=n[a++]<<u,u+=8}if(w<16)l>>>=v,u-=v,r.lens[r.have++]=w;else{if(16===w){for(P=v+2;u<P;){if(0===s)break e;s--,l+=n[a++]<<u,u+=8}if(l>>>=v,u-=v,0===r.have){e.msg="invalid bit length repeat",r.mode=30;break}x=r.lens[r.have-1],d=3+(3&l),l>>>=2,u-=2}else if(17===w){for(P=v+3;u<P;){if(0===s)break e;s--,l+=n[a++]<<u,u+=8}u-=v,x=0,d=3+(7&(l>>>=v)),l>>>=3,u-=3}else{for(P=v+7;u<P;){if(0===s)break e;s--,l+=n[a++]<<u,u+=8}u-=v,x=0,d=11+(127&(l>>>=v)),l>>>=7,u-=7}if(r.have+d>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=30;break}for(;d--;)r.lens[r.have++]=x}}if(30===r.mode)break;if(0===r.lens[256]){e.msg="invalid code -- missing end-of-block",r.mode=30;break}if(r.lenbits=9,A={bits:r.lenbits},_=ie(1,r.lens,0,r.nlen,r.lencode,0,r.work,A),r.lenbits=A.bits,_){e.msg="invalid literal/lengths set",r.mode=30;break}if(r.distbits=6,r.distcode=r.distdyn,A={bits:r.distbits},_=ie(2,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,A),r.distbits=A.bits,_){e.msg="invalid distances set",r.mode=30;break}if(r.mode=20,t===se)break e;case 20:r.mode=21;case 21:if(s>=6&&f>=258){e.next_out=o,e.avail_out=f,e.next_in=a,e.avail_in=s,r.hold=l,r.bits=u,$(e,h),o=e.next_out,i=e.output,f=e.avail_out,a=e.next_in,n=e.input,s=e.avail_in,l=r.hold,u=r.bits,12===r.mode&&(r.back=-1);break}for(r.back=0;y=(I=r.lencode[l&(1<<r.lenbits)-1])>>>16&255,w=65535&I,!((v=I>>>24)<=u);){if(0===s)break e;s--,l+=n[a++]<<u,u+=8}if(y&&0==(240&y)){for(g=v,b=y,k=w;y=(I=r.lencode[k+((l&(1<<g+b)-1)>>g)])>>>16&255,w=65535&I,!(g+(v=I>>>24)<=u);){if(0===s)break e;s--,l+=n[a++]<<u,u+=8}l>>>=g,u-=g,r.back+=g}if(l>>>=v,u-=v,r.back+=v,r.length=w,0===y){r.mode=26;break}if(32&y){r.back=-1,r.mode=12;break}if(64&y){e.msg="invalid literal/length code",r.mode=30;break}r.extra=15&y,r.mode=22;case 22:if(r.extra){for(P=r.extra;u<P;){if(0===s)break e;s--,l+=n[a++]<<u,u+=8}r.length+=l&(1<<r.extra)-1,l>>>=r.extra,u-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=23;case 23:for(;y=(I=r.distcode[l&(1<<r.distbits)-1])>>>16&255,w=65535&I,!((v=I>>>24)<=u);){if(0===s)break e;s--,l+=n[a++]<<u,u+=8}if(0==(240&y)){for(g=v,b=y,k=w;y=(I=r.distcode[k+((l&(1<<g+b)-1)>>g)])>>>16&255,w=65535&I,!(g+(v=I>>>24)<=u);){if(0===s)break e;s--,l+=n[a++]<<u,u+=8}l>>>=g,u-=g,r.back+=g}if(l>>>=v,u-=v,r.back+=v,64&y){e.msg="invalid distance code",r.mode=30;break}r.offset=w,r.extra=15&y,r.mode=24;case 24:if(r.extra){for(P=r.extra;u<P;){if(0===s)break e;s--,l+=n[a++]<<u,u+=8}r.offset+=l&(1<<r.extra)-1,l>>>=r.extra,u-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=30;break}r.mode=25;case 25:if(0===f)break e;if(d=h-f,r.offset>d){if((d=r.offset-d)>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=30;break}d>r.wnext?(d-=r.wnext,p=r.wsize-d):p=r.wnext-d,d>r.length&&(d=r.length),m=r.window}else m=i,p=o-r.offset,d=r.length;d>f&&(d=f),f-=d,r.length-=d;do{i[o++]=m[p++]}while(--d);0===r.length&&(r.mode=21);break;case 26:if(0===f)break e;i[o++]=r.length,f--,r.mode=21;break;case 27:if(r.wrap){for(;u<32;){if(0===s)break e;s--,l|=n[a++]<<u,u+=8}if(h-=f,e.total_out+=h,r.total+=h,h&&(e.adler=r.check=r.flags?F(r.check,i,h,o-h):V(r.check,i,h,o-h)),h=f,(r.flags?l:ve(l))!==r.check){e.msg="incorrect data check",r.mode=30;break}l=0,u=0}r.mode=28;case 28:if(r.wrap&&r.flags){for(;u<32;){if(0===s)break e;s--,l+=n[a++]<<u,u+=8}if(l!==(4294967295&r.total)){e.msg="incorrect length check",r.mode=30;break}l=0,u=0}r.mode=29;case 29:_=le;break e;case 30:_=he;break e;case 31:return de;default:return ce}return e.next_out=o,e.avail_out=f,e.next_in=a,e.avail_in=s,r.hold=l,r.bits=u,(r.wsize||h!==e.avail_out&&r.mode<30&&(r.mode<27||t!==ae))&&Ie(e,e.output,e.next_out,h-e.avail_out),c-=e.avail_in,h-=e.avail_out,e.total_in+=c,e.total_out+=h,r.total+=h,r.wrap&&h&&(e.adler=r.check=r.flags?F(r.check,i,h,e.next_out-h):V(r.check,i,h,e.next_out-h)),e.data_type=r.bits+(r.last?64:0)+(12===r.mode?128:0)+(20===r.mode||15===r.mode?256:0),(0===c&&0===h||t===ae)&&_===fe&&(_=pe),_},inflateEnd:function(e){if(!e||!e.state)return ce;var t=e.state;return t.window&&(t.window=null),e.state=null,fe},inflateGetHeader:function(e,t){if(!e||!e.state)return ce;var r=e.state;return 0==(2&r.wrap)?ce:(r.head=t,t.done=!1,fe)},inflateSetDictionary:function(e,t){var r,n=t.length;return e&&e.state?0!==(r=e.state).wrap&&11!==r.mode?ce:11===r.mode&&V(1,t,n,0)!==r.check?he:Ie(e,t,n,n)?(r.mode=31,de):(r.havedict=1,fe):ce},inflateInfo:"pako inflate (from Nodeca project)"};var Se=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1},Te=Object.prototype.toString,De=j.Z_NO_FLUSH,Ee=j.Z_FINISH,Be=j.Z_OK,Oe=j.Z_STREAM_END,Me=j.Z_NEED_DICT,Ce=j.Z_STREAM_ERROR,Le=j.Z_DATA_ERROR,Re=j.Z_MEM_ERROR;function Ve(e){this.options=Z({chunkSize:65536,windowBits:15,to:""},e||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Q,this.strm.avail_out=0;var r=Ue.inflateInit2(this.strm,t.windowBits);if(r!==Be)throw new Error(z[r]);if(this.header=new Se,Ue.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=W(t.dictionary):"[object ArrayBuffer]"===Te.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(r=Ue.inflateSetDictionary(this.strm,t.dictionary))!==Be))throw new Error(z[r])}function Ge(e,t){var r=new Ve(t);if(r.push(e),r.err)throw r.msg||z[r.err];return r.result}Ve.prototype.push=function(e,t){var r,n,i,a=this.strm,o=this.options.chunkSize,s=this.options.dictionary;if(this.ended)return!1;for(n=t===~~t?t:!0===t?Ee:De,"[object ArrayBuffer]"===Te.call(e)?a.input=new Uint8Array(e):a.input=e,a.next_in=0,a.avail_in=a.input.length;;){for(0===a.avail_out&&(a.output=new Uint8Array(o),a.next_out=0,a.avail_out=o),(r=Ue.inflate(a,n))===Me&&s&&((r=Ue.inflateSetDictionary(a,s))===Be?r=Ue.inflate(a,n):r===Le&&(r=Me));a.avail_in>0&&r===Oe&&a.state.wrap>0&&0!==e[a.next_in];)Ue.inflateReset(a),r=Ue.inflate(a,n);switch(r){case Ce:case Le:case Me:case Re:return this.onEnd(r),this.ended=!0,!1}if(i=a.avail_out,a.next_out&&(0===a.avail_out||r===Oe))if("string"===this.options.to){var f=J(a.output,a.next_out),l=a.next_out-f,u=q(a.output,f);a.next_out=l,a.avail_out=o-l,l&&a.output.set(a.output.subarray(f,f+l),0),this.onData(u)}else this.onData(a.output.length===a.next_out?a.output:a.output.subarray(0,a.next_out));if(r!==Be||0!==i){if(r===Oe)return r=Ue.inflateEnd(this.strm),this.onEnd(r),this.ended=!0,!0;if(0===a.avail_in)break}}return!0},Ve.prototype.onData=function(e){this.chunks.push(e)},Ve.prototype.onEnd=function(e){e===Be&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=K(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var Fe={Inflate:Ve,inflate:Ge,inflateRaw:function(e,t){return(t=t||{}).raw=!0,Ge(e,t)},ungzip:Ge,constants:j}.inflate;function ze(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v(e);if(t){var i=v(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return m(this,r)}}var je=function(e){p(r,b);var t=ze(r);function r(){return u(this,r),t.apply(this,arguments)}return h(r,[{key:"decodeBlock",value:function(e){return Fe(new Uint8Array(e)).buffer}}]),r}(),Ne=Object.freeze({__proto__:null,default:je});function Ze(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v(e);if(t){var i=v(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return m(this,r)}}var Ke,He=function(e){p(r,b);var t=Ze(r);function r(){return u(this,r),t.apply(this,arguments)}return h(r,[{key:"decodeBlock",value:function(e){for(var t=new DataView(e),r=[],n=0;n<e.byteLength;++n){var i=t.getInt8(n);if(i<0){var a=t.getUint8(n+1);i=-i;for(var o=0;o<=i;++o)r.push(a);n+=1}else{for(var s=0;s<=i;++s)r.push(t.getUint8(n+s+1));n+=i+1}}return new Uint8Array(r).buffer}}]),r}(),Ye=Object.freeze({__proto__:null,default:He}),Xe={exports:{}};Ke=Xe,\n/* Copyright 2015-2021 Esri. Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except in compliance with the License. You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0 @preserve */\nfunction(){var e,t,r,n,i,a,o,s,f,l,u,c,h,d,p,m,v=(e={defaultNoDataValue:-34027999387901484e22,decode:function(a,o){var s=(o=o||{}).encodedMaskData||null===o.encodedMaskData,f=i(a,o.inputOffset||0,s),l=null!==o.noDataValue?o.noDataValue:e.defaultNoDataValue,u=t(f,o.pixelType||Float32Array,o.encodedMaskData,l,o.returnMask),c={width:f.width,height:f.height,pixelData:u.resultPixels,minValue:u.minValue,maxValue:f.pixels.maxValue,noDataValue:l};return u.resultMask&&(c.maskData=u.resultMask),o.returnEncodedMask&&f.mask&&(c.encodedMaskData=f.mask.bitset?f.mask.bitset:null),o.returnFileInfo&&(c.fileInfo=r(f),o.computeUsedBitDepths&&(c.fileInfo.bitDepths=n(f))),c}},t=function(e,t,r,n,i){var o,s,f,l=0,u=e.pixels.numBlocksX,c=e.pixels.numBlocksY,h=Math.floor(e.width/u),d=Math.floor(e.height/c),p=2*e.maxZError,m=Number.MAX_VALUE;r=r||(e.mask?e.mask.bitset:null),s=new t(e.width*e.height),i&&r&&(f=new Uint8Array(e.width*e.height));for(var v,y,w=new Float32Array(h*d),g=0;g<=c;g++){var b=g!==c?d:e.height%c;if(0!==b)for(var k=0;k<=u;k++){var x=k!==u?h:e.width%u;if(0!==x){var _,A,P,I,U=g*e.width*d+k*h,S=e.width-x,T=e.pixels.blocks[l];if(T.encoding<2?(0===T.encoding?_=T.rawData:(a(T.stuffedData,T.bitsPerPixel,T.numValidPixels,T.offset,p,w,e.pixels.maxValue),_=w),A=0):P=2===T.encoding?0:T.offset,r)for(y=0;y<b;y++){for(7&U&&(I=r[U>>3],I<<=7&U),v=0;v<x;v++)7&U||(I=r[U>>3]),128&I?(f&&(f[U]=1),m=m>(o=T.encoding<2?_[A++]:P)?o:m,s[U++]=o):(f&&(f[U]=0),s[U++]=n),I<<=1;U+=S}else if(T.encoding<2)for(y=0;y<b;y++){for(v=0;v<x;v++)m=m>(o=_[A++])?o:m,s[U++]=o;U+=S}else for(m=m>P?P:m,y=0;y<b;y++){for(v=0;v<x;v++)s[U++]=P;U+=S}if(1===T.encoding&&A!==T.numValidPixels)throw"Block and Mask do not match";l++}}}return{resultPixels:s,resultMask:f,minValue:m}},r=function(e){return{fileIdentifierString:e.fileIdentifierString,fileVersion:e.fileVersion,imageType:e.imageType,height:e.height,width:e.width,maxZError:e.maxZError,eofOffset:e.eofOffset,mask:e.mask?{numBlocksX:e.mask.numBlocksX,numBlocksY:e.mask.numBlocksY,numBytes:e.mask.numBytes,maxValue:e.mask.maxValue}:null,pixels:{numBlocksX:e.pixels.numBlocksX,numBlocksY:e.pixels.numBlocksY,numBytes:e.pixels.numBytes,maxValue:e.pixels.maxValue,noDataValue:e.noDataValue}}},n=function(e){for(var t=e.pixels.numBlocksX*e.pixels.numBlocksY,r={},n=0;n<t;n++){var i=e.pixels.blocks[n];0===i.encoding?r.float32=!0:1===i.encoding?r[i.bitsPerPixel]=!0:r[0]=!0}return Object.keys(r)},i=function(e,t,r){var n={},i=new Uint8Array(e,t,10);if(n.fileIdentifierString=String.fromCharCode.apply(null,i),"CntZImage"!==n.fileIdentifierString.trim())throw"Unexpected file identifier string: "+n.fileIdentifierString;t+=10;var a=new DataView(e,t,24);if(n.fileVersion=a.getInt32(0,!0),n.imageType=a.getInt32(4,!0),n.height=a.getUint32(8,!0),n.width=a.getUint32(12,!0),n.maxZError=a.getFloat64(16,!0),t+=24,!r)if(a=new DataView(e,t,16),n.mask={},n.mask.numBlocksY=a.getUint32(0,!0),n.mask.numBlocksX=a.getUint32(4,!0),n.mask.numBytes=a.getUint32(8,!0),n.mask.maxValue=a.getFloat32(12,!0),t+=16,n.mask.numBytes>0){var o=new Uint8Array(Math.ceil(n.width*n.height/8)),s=(a=new DataView(e,t,n.mask.numBytes)).getInt16(0,!0),f=2,l=0;do{if(s>0)for(;s--;)o[l++]=a.getUint8(f++);else{var u=a.getUint8(f++);for(s=-s;s--;)o[l++]=u}s=a.getInt16(f,!0),f+=2}while(f<n.mask.numBytes);if(-32768!==s||l<o.length)throw"Unexpected end of mask RLE encoding";n.mask.bitset=o,t+=n.mask.numBytes}else 0==(n.mask.numBytes|n.mask.numBlocksY|n.mask.maxValue)&&(n.mask.bitset=new Uint8Array(Math.ceil(n.width*n.height/8)));a=new DataView(e,t,16),n.pixels={},n.pixels.numBlocksY=a.getUint32(0,!0),n.pixels.numBlocksX=a.getUint32(4,!0),n.pixels.numBytes=a.getUint32(8,!0),n.pixels.maxValue=a.getFloat32(12,!0),t+=16;var c=n.pixels.numBlocksX,h=n.pixels.numBlocksY,d=c+(n.width%c>0?1:0),p=h+(n.height%h>0?1:0);n.pixels.blocks=new Array(d*p);for(var m=0,v=0;v<p;v++)for(var y=0;y<d;y++){var w=0,g=e.byteLength-t;a=new DataView(e,t,Math.min(10,g));var b={};n.pixels.blocks[m++]=b;var k=a.getUint8(0);if(w++,b.encoding=63&k,b.encoding>3)throw"Invalid block encoding ("+b.encoding+")";if(2!==b.encoding){if(0!==k&&2!==k){if(k>>=6,b.offsetType=k,2===k)b.offset=a.getInt8(1),w++;else if(1===k)b.offset=a.getInt16(1,!0),w+=2;else{if(0!==k)throw"Invalid block offset type";b.offset=a.getFloat32(1,!0),w+=4}if(1===b.encoding)if(k=a.getUint8(w),w++,b.bitsPerPixel=63&k,k>>=6,b.numValidPixelsType=k,2===k)b.numValidPixels=a.getUint8(w),w++;else if(1===k)b.numValidPixels=a.getUint16(w,!0),w+=2;else{if(0!==k)throw"Invalid valid pixel count type";b.numValidPixels=a.getUint32(w,!0),w+=4}}var x;if(t+=w,3!==b.encoding)if(0===b.encoding){var _=(n.pixels.numBytes-1)/4;if(_!==Math.floor(_))throw"uncompressed block has invalid length";x=new ArrayBuffer(4*_),new Uint8Array(x).set(new Uint8Array(e,t,4*_));var A=new Float32Array(x);b.rawData=A,t+=4*_}else if(1===b.encoding){var P=Math.ceil(b.numValidPixels*b.bitsPerPixel/8),I=Math.ceil(P/4);x=new ArrayBuffer(4*I),new Uint8Array(x).set(new Uint8Array(e,t,P)),b.stuffedData=new Uint32Array(x),t+=P}}else t++}return n.eofOffset=t,n},a=function(e,t,r,n,i,a,o){var s,f,l,u=(1<<t)-1,c=0,h=0,d=Math.ceil((o-n)/i),p=4*e.length-Math.ceil(t*r/8);for(e[e.length-1]<<=8*p,s=0;s<r;s++){if(0===h&&(l=e[c++],h=32),h>=t)f=l>>>h-t&u,h-=t;else{var m=t-h;f=(l&u)<<m&u,f+=(l=e[c++])>>>(h=32-m)}a[s]=f<d?n+f*i:o}return a},e),y=(o=function(e,t,r,n,i,a,o,s){var f,l,u,c,h,d=(1<<r)-1,p=0,m=0,v=4*e.length-Math.ceil(r*n/8);if(e[e.length-1]<<=8*v,i)for(f=0;f<n;f++)0===m&&(u=e[p++],m=32),m>=r?(l=u>>>m-r&d,m-=r):(l=(u&d)<<(c=r-m)&d,l+=(u=e[p++])>>>(m=32-c)),t[f]=i[l];else for(h=Math.ceil((s-a)/o),f=0;f<n;f++)0===m&&(u=e[p++],m=32),m>=r?(l=u>>>m-r&d,m-=r):(l=(u&d)<<(c=r-m)&d,l+=(u=e[p++])>>>(m=32-c)),t[f]=l<h?a+l*o:s},s=function(e,t,r,n,i,a){var o,s=(1<<t)-1,f=0,l=0,u=0,c=0,h=0,d=[],p=4*e.length-Math.ceil(t*r/8);e[e.length-1]<<=8*p;var m=Math.ceil((a-n)/i);for(l=0;l<r;l++)0===c&&(o=e[f++],c=32),c>=t?(h=o>>>c-t&s,c-=t):(h=(o&s)<<(u=t-c)&s,h+=(o=e[f++])>>>(c=32-u)),d[l]=h<m?n+h*i:a;return d.unshift(n),d},f=function(e,t,r,n,i,a,o,s){var f,l,u,c,h=(1<<r)-1,d=0,p=0,m=0;if(i)for(f=0;f<n;f++)0===p&&(u=e[d++],p=32,m=0),p>=r?(l=u>>>m&h,p-=r,m+=r):(l=u>>>m&h,p=32-(c=r-p),l|=((u=e[d++])&(1<<c)-1)<<r-c,m=c),t[f]=i[l];else{var v=Math.ceil((s-a)/o);for(f=0;f<n;f++)0===p&&(u=e[d++],p=32,m=0),p>=r?(l=u>>>m&h,p-=r,m+=r):(l=u>>>m&h,p=32-(c=r-p),l|=((u=e[d++])&(1<<c)-1)<<r-c,m=c),t[f]=l<v?a+l*o:s}return t},l=function(e,t,r,n,i,a){var o,s=(1<<t)-1,f=0,l=0,u=0,c=0,h=0,d=0,p=[],m=Math.ceil((a-n)/i);for(l=0;l<r;l++)0===c&&(o=e[f++],c=32,d=0),c>=t?(h=o>>>d&s,c-=t,d+=t):(h=o>>>d&s,c=32-(u=t-c),h|=((o=e[f++])&(1<<u)-1)<<t-u,d=u),p[l]=h<m?n+h*i:a;return p.unshift(n),p},u=function(e,t,r,n){var i,a,o,s,f=(1<<r)-1,l=0,u=0,c=4*e.length-Math.ceil(r*n/8);for(e[e.length-1]<<=8*c,i=0;i<n;i++)0===u&&(o=e[l++],u=32),u>=r?(a=o>>>u-r&f,u-=r):(a=(o&f)<<(s=r-u)&f,a+=(o=e[l++])>>>(u=32-s)),t[i]=a;return t},c=function(e,t,r,n){var i,a,o,s,f=(1<<r)-1,l=0,u=0,c=0;for(i=0;i<n;i++)0===u&&(o=e[l++],u=32,c=0),u>=r?(a=o>>>c&f,u-=r,c+=r):(a=o>>>c&f,u=32-(s=r-u),a|=((o=e[l++])&(1<<s)-1)<<r-s,c=s),t[i]=a;return t},h={HUFFMAN_LUT_BITS_MAX:12,computeChecksumFletcher32:function(e){for(var t=65535,r=65535,n=e.length,i=Math.floor(n/2),a=0;i;){var o=i>=359?359:i;i-=o;do{t+=e[a++]<<8,r+=t+=e[a++]}while(--o);t=(65535&t)+(t>>>16),r=(65535&r)+(r>>>16)}return 1&n&&(r+=t+=e[a]<<8),((r=(65535&r)+(r>>>16))<<16|(t=(65535&t)+(t>>>16)))>>>0},readHeaderInfo:function(e,t){var r=t.ptr,n=new Uint8Array(e,r,6),i={};if(i.fileIdentifierString=String.fromCharCode.apply(null,n),0!==i.fileIdentifierString.lastIndexOf("Lerc2",0))throw"Unexpected file identifier string (expect Lerc2 ): "+i.fileIdentifierString;r+=6;var a,o=new DataView(e,r,8),s=o.getInt32(0,!0);if(i.fileVersion=s,r+=4,s>=3&&(i.checksum=o.getUint32(4,!0),r+=4),o=new DataView(e,r,12),i.height=o.getUint32(0,!0),i.width=o.getUint32(4,!0),r+=8,s>=4?(i.numDims=o.getUint32(8,!0),r+=4):i.numDims=1,o=new DataView(e,r,40),i.numValidPixel=o.getUint32(0,!0),i.microBlockSize=o.getInt32(4,!0),i.blobSize=o.getInt32(8,!0),i.imageType=o.getInt32(12,!0),i.maxZError=o.getFloat64(16,!0),i.zMin=o.getFloat64(24,!0),i.zMax=o.getFloat64(32,!0),r+=40,t.headerInfo=i,t.ptr=r,s>=3&&(a=s>=4?52:48,this.computeChecksumFletcher32(new Uint8Array(e,r-a,i.blobSize-14))!==i.checksum))throw"Checksum failed.";return!0},checkMinMaxRanges:function(e,t){var r=t.headerInfo,n=this.getDataTypeArray(r.imageType),i=r.numDims*this.getDataTypeSize(r.imageType),a=this.readSubArray(e,t.ptr,n,i),o=this.readSubArray(e,t.ptr+i,n,i);t.ptr+=2*i;var s,f=!0;for(s=0;s<r.numDims;s++)if(a[s]!==o[s]){f=!1;break}return r.minValues=a,r.maxValues=o,f},readSubArray:function(e,t,r,n){var i;if(r===Uint8Array)i=new Uint8Array(e,t,n);else{var a=new ArrayBuffer(n);new Uint8Array(a).set(new Uint8Array(e,t,n)),i=new r(a)}return i},readMask:function(e,t){var r,n,i=t.ptr,a=t.headerInfo,o=a.width*a.height,s=a.numValidPixel,f=new DataView(e,i,4),l={};if(l.numBytes=f.getUint32(0,!0),i+=4,(0===s||o===s)&&0!==l.numBytes)throw"invalid mask";if(0===s)r=new Uint8Array(Math.ceil(o/8)),l.bitset=r,n=new Uint8Array(o),t.pixels.resultMask=n,i+=l.numBytes;else if(l.numBytes>0){r=new Uint8Array(Math.ceil(o/8));var u=(f=new DataView(e,i,l.numBytes)).getInt16(0,!0),c=2,h=0,d=0;do{if(u>0)for(;u--;)r[h++]=f.getUint8(c++);else for(d=f.getUint8(c++),u=-u;u--;)r[h++]=d;u=f.getInt16(c,!0),c+=2}while(c<l.numBytes);if(-32768!==u||h<r.length)throw"Unexpected end of mask RLE encoding";n=new Uint8Array(o);var p=0,m=0;for(m=0;m<o;m++)7&m?(p=r[m>>3],p<<=7&m):p=r[m>>3],128&p&&(n[m]=1);t.pixels.resultMask=n,l.bitset=r,i+=l.numBytes}return t.ptr=i,t.mask=l,!0},readDataOneSweep:function(e,t,r,n){var i,a=t.ptr,o=t.headerInfo,s=o.numDims,f=o.width*o.height,l=o.imageType,u=o.numValidPixel*h.getDataTypeSize(l)*s,c=t.pixels.resultMask;if(r===Uint8Array)i=new Uint8Array(e,a,u);else{var d=new ArrayBuffer(u);new Uint8Array(d).set(new Uint8Array(e,a,u)),i=new r(d)}if(i.length===f*s)t.pixels.resultPixels=n?h.swapDimensionOrder(i,f,s,r,!0):i;else{t.pixels.resultPixels=new r(f*s);var p=0,m=0,v=0,y=0;if(s>1){if(n){for(m=0;m<f;m++)if(c[m])for(y=m,v=0;v<s;v++,y+=f)t.pixels.resultPixels[y]=i[p++]}else for(m=0;m<f;m++)if(c[m])for(y=m*s,v=0;v<s;v++)t.pixels.resultPixels[y+v]=i[p++]}else for(m=0;m<f;m++)c[m]&&(t.pixels.resultPixels[m]=i[p++])}return a+=u,t.ptr=a,!0},readHuffmanTree:function(e,t){var r=this.HUFFMAN_LUT_BITS_MAX,n=new DataView(e,t.ptr,16);if(t.ptr+=16,n.getInt32(0,!0)<2)throw"unsupported Huffman version";var i=n.getInt32(4,!0),a=n.getInt32(8,!0),o=n.getInt32(12,!0);if(a>=o)return!1;var s=new Uint32Array(o-a);h.decodeBits(e,t,s);var f,l,u,c,p=[];for(f=a;f<o;f++)p[l=f-(f<i?0:i)]={first:s[f-a],second:null};var m=e.byteLength-t.ptr,v=Math.ceil(m/4),y=new ArrayBuffer(4*v);new Uint8Array(y).set(new Uint8Array(e,t.ptr,m));var w,g=new Uint32Array(y),b=0,k=0;for(w=g[0],f=a;f<o;f++)(c=p[l=f-(f<i?0:i)].first)>0&&(p[l].second=w<<b>>>32-c,32-b>=c?32===(b+=c)&&(b=0,w=g[++k]):(b+=c-32,w=g[++k],p[l].second|=w>>>32-b));var x=0,_=0,A=new d;for(f=0;f<p.length;f++)void 0!==p[f]&&(x=Math.max(x,p[f].first));_=x>=r?r:x;var P,I,U,S,T,D=[];for(f=a;f<o;f++)if((c=p[l=f-(f<i?0:i)].first)>0)if(P=[c,l],c<=_)for(I=p[l].second<<_-c,U=1<<_-c,u=0;u<U;u++)D[I|u]=P;else for(I=p[l].second,T=A,S=c-1;S>=0;S--)I>>>S&1?(T.right||(T.right=new d),T=T.right):(T.left||(T.left=new d),T=T.left),0!==S||T.val||(T.val=P[1]);return{decodeLut:D,numBitsLUTQick:_,numBitsLUT:x,tree:A,stuffedData:g,srcPtr:k,bitPos:b}},readHuffman:function(e,t,r,n){var i,a,o,s,f,l,u,c,d,p=t.headerInfo.numDims,m=t.headerInfo.height,v=t.headerInfo.width,y=v*m,w=this.readHuffmanTree(e,t),g=w.decodeLut,b=w.tree,k=w.stuffedData,x=w.srcPtr,_=w.bitPos,A=w.numBitsLUTQick,P=w.numBitsLUT,I=0===t.headerInfo.imageType?128:0,U=t.pixels.resultMask,S=0;_>0&&(x++,_=0);var T,D=k[x],E=1===t.encodeMode,B=new r(y*p),O=B;if(p<2||E){for(T=0;T<p;T++)if(p>1&&(O=new r(B.buffer,y*T,y),S=0),t.headerInfo.numValidPixel===v*m)for(c=0,l=0;l<m;l++)for(u=0;u<v;u++,c++){if(a=0,f=s=D<<_>>>32-A,32-_<A&&(f=s|=k[x+1]>>>64-_-A),g[f])a=g[f][1],_+=g[f][0];else for(f=s=D<<_>>>32-P,32-_<P&&(f=s|=k[x+1]>>>64-_-P),i=b,d=0;d<P;d++)if(!(i=s>>>P-d-1&1?i.right:i.left).left&&!i.right){a=i.val,_=_+d+1;break}_>=32&&(_-=32,D=k[++x]),o=a-I,E?(o+=u>0?S:l>0?O[c-v]:S,o&=255,O[c]=o,S=o):O[c]=o}else for(c=0,l=0;l<m;l++)for(u=0;u<v;u++,c++)if(U[c]){if(a=0,f=s=D<<_>>>32-A,32-_<A&&(f=s|=k[x+1]>>>64-_-A),g[f])a=g[f][1],_+=g[f][0];else for(f=s=D<<_>>>32-P,32-_<P&&(f=s|=k[x+1]>>>64-_-P),i=b,d=0;d<P;d++)if(!(i=s>>>P-d-1&1?i.right:i.left).left&&!i.right){a=i.val,_=_+d+1;break}_>=32&&(_-=32,D=k[++x]),o=a-I,E?(u>0&&U[c-1]?o+=S:l>0&&U[c-v]?o+=O[c-v]:o+=S,o&=255,O[c]=o,S=o):O[c]=o}}else for(c=0,l=0;l<m;l++)for(u=0;u<v;u++)if(c=l*v+u,!U||U[c])for(T=0;T<p;T++,c+=y){if(a=0,f=s=D<<_>>>32-A,32-_<A&&(f=s|=k[x+1]>>>64-_-A),g[f])a=g[f][1],_+=g[f][0];else for(f=s=D<<_>>>32-P,32-_<P&&(f=s|=k[x+1]>>>64-_-P),i=b,d=0;d<P;d++)if(!(i=s>>>P-d-1&1?i.right:i.left).left&&!i.right){a=i.val,_=_+d+1;break}_>=32&&(_-=32,D=k[++x]),o=a-I,O[c]=o}t.ptr=t.ptr+4*(x+1)+(_>0?4:0),t.pixels.resultPixels=B,p>1&&!n&&(t.pixels.resultPixels=h.swapDimensionOrder(B,y,p,r))},decodeBits:function(e,t,r,n,i){var a=t.headerInfo,h=a.fileVersion,d=0,p=e.byteLength-t.ptr>=5?5:e.byteLength-t.ptr,m=new DataView(e,t.ptr,p),v=m.getUint8(0);d++;var y=v>>6,w=0===y?4:3-y,g=(32&v)>0,b=31&v,k=0;if(1===w)k=m.getUint8(d),d++;else if(2===w)k=m.getUint16(d,!0),d+=2;else{if(4!==w)throw"Invalid valid pixel count type";k=m.getUint32(d,!0),d+=4}var x,_,A,P,I,U,S,T,D,E=2*a.maxZError,B=a.numDims>1?a.maxValues[i]:a.zMax;if(g){for(t.counter.lut++,T=m.getUint8(d),d++,P=Math.ceil((T-1)*b/8),I=Math.ceil(P/4),_=new ArrayBuffer(4*I),A=new Uint8Array(_),t.ptr+=d,A.set(new Uint8Array(e,t.ptr,P)),S=new Uint32Array(_),t.ptr+=P,D=0;T-1>>>D;)D++;P=Math.ceil(k*D/8),I=Math.ceil(P/4),_=new ArrayBuffer(4*I),(A=new Uint8Array(_)).set(new Uint8Array(e,t.ptr,P)),x=new Uint32Array(_),t.ptr+=P,U=h>=3?l(S,b,T-1,n,E,B):s(S,b,T-1,n,E,B),h>=3?f(x,r,D,k,U):o(x,r,D,k,U)}else t.counter.bitstuffer++,D=b,t.ptr+=d,D>0&&(P=Math.ceil(k*D/8),I=Math.ceil(P/4),_=new ArrayBuffer(4*I),(A=new Uint8Array(_)).set(new Uint8Array(e,t.ptr,P)),x=new Uint32Array(_),t.ptr+=P,h>=3?null==n?c(x,r,D,k):f(x,r,D,k,!1,n,E,B):null==n?u(x,r,D,k):o(x,r,D,k,!1,n,E,B))},readTiles:function(e,t,r,n){var i=t.headerInfo,a=i.width,o=i.height,s=a*o,f=i.microBlockSize,l=i.imageType,u=h.getDataTypeSize(l),c=Math.ceil(a/f),d=Math.ceil(o/f);t.pixels.numBlocksY=d,t.pixels.numBlocksX=c,t.pixels.ptr=0;var p,m,v,y,w,g,b,k,x,_,A=0,P=0,I=0,U=0,S=0,T=0,D=0,E=0,B=0,O=0,M=0,C=0,L=0,R=0,V=0,G=new r(f*f),F=o%f||f,z=a%f||f,j=i.numDims,N=t.pixels.resultMask,Z=t.pixels.resultPixels,K=i.fileVersion>=5?14:15,H=i.zMax;for(I=0;I<d;I++)for(S=I!==d-1?f:F,U=0;U<c;U++)for(O=I*a*f+U*f,M=a-(T=U!==c-1?f:z),k=0;k<j;k++){if(j>1?(_=Z,O=I*a*f+U*f,Z=new r(t.pixels.resultPixels.buffer,s*k*u,s),H=i.maxValues[k]):_=null,D=e.byteLength-t.ptr,m={},V=0,E=(p=new DataView(e,t.ptr,Math.min(10,D))).getUint8(0),V++,x=i.fileVersion>=5?4&E:0,B=E>>6&255,(E>>2&K)!=(U*f>>3&K))throw"integrity issue";if(x&&0===k)throw"integrity issue";if((w=3&E)>3)throw t.ptr+=V,"Invalid block encoding ("+w+")";if(2!==w)if(0===w){if(x)throw"integrity issue";if(t.counter.uncompressed++,t.ptr+=V,C=(C=S*T*u)<(L=e.byteLength-t.ptr)?C:L,v=new ArrayBuffer(C%u==0?C:C+u-C%u),new Uint8Array(v).set(new Uint8Array(e,t.ptr,C)),y=new r(v),R=0,N)for(A=0;A<S;A++){for(P=0;P<T;P++)N[O]&&(Z[O]=y[R++]),O++;O+=M}else for(A=0;A<S;A++){for(P=0;P<T;P++)Z[O++]=y[R++];O+=M}t.ptr+=R*u}else if(g=h.getDataTypeUsed(x&&l<6?4:l,B),b=h.getOnePixel(m,V,g,p),V+=h.getDataTypeSize(g),3===w)if(t.ptr+=V,t.counter.constantoffset++,N)for(A=0;A<S;A++){for(P=0;P<T;P++)N[O]&&(Z[O]=x?Math.min(H,_[O]+b):b),O++;O+=M}else for(A=0;A<S;A++){for(P=0;P<T;P++)Z[O]=x?Math.min(H,_[O]+b):b,O++;O+=M}else if(t.ptr+=V,h.decodeBits(e,t,G,b,k),V=0,x)if(N)for(A=0;A<S;A++){for(P=0;P<T;P++)N[O]&&(Z[O]=G[V++]+_[O]),O++;O+=M}else for(A=0;A<S;A++){for(P=0;P<T;P++)Z[O]=G[V++]+_[O],O++;O+=M}else if(N)for(A=0;A<S;A++){for(P=0;P<T;P++)N[O]&&(Z[O]=G[V++]),O++;O+=M}else for(A=0;A<S;A++){for(P=0;P<T;P++)Z[O++]=G[V++];O+=M}else{if(x)if(N)for(A=0;A<S;A++)for(P=0;P<T;P++)N[O]&&(Z[O]=_[O]),O++;else for(A=0;A<S;A++)for(P=0;P<T;P++)Z[O]=_[O],O++;t.counter.constant++,t.ptr+=V}}j>1&&!n&&(t.pixels.resultPixels=h.swapDimensionOrder(t.pixels.resultPixels,s,j,r))},formatFileInfo:function(e){return{fileIdentifierString:e.headerInfo.fileIdentifierString,fileVersion:e.headerInfo.fileVersion,imageType:e.headerInfo.imageType,height:e.headerInfo.height,width:e.headerInfo.width,numValidPixel:e.headerInfo.numValidPixel,microBlockSize:e.headerInfo.microBlockSize,blobSize:e.headerInfo.blobSize,maxZError:e.headerInfo.maxZError,pixelType:h.getPixelType(e.headerInfo.imageType),eofOffset:e.eofOffset,mask:e.mask?{numBytes:e.mask.numBytes}:null,pixels:{numBlocksX:e.pixels.numBlocksX,numBlocksY:e.pixels.numBlocksY,maxValue:e.headerInfo.zMax,minValue:e.headerInfo.zMin,noDataValue:e.noDataValue}}},constructConstantSurface:function(e,t){var r=e.headerInfo.zMax,n=e.headerInfo.zMin,i=e.headerInfo.maxValues,a=e.headerInfo.numDims,o=e.headerInfo.height*e.headerInfo.width,s=0,f=0,l=0,u=e.pixels.resultMask,c=e.pixels.resultPixels;if(u)if(a>1){if(t)for(s=0;s<a;s++)for(l=s*o,r=i[s],f=0;f<o;f++)u[f]&&(c[l+f]=r);else for(f=0;f<o;f++)if(u[f])for(l=f*a,s=0;s<a;s++)c[l+a]=i[s]}else for(f=0;f<o;f++)u[f]&&(c[f]=r);else if(a>1&&n!==r)if(t)for(s=0;s<a;s++)for(l=s*o,r=i[s],f=0;f<o;f++)c[l+f]=r;else for(f=0;f<o;f++)for(l=f*a,s=0;s<a;s++)c[l+s]=i[s];else for(f=0;f<o*a;f++)c[f]=r},getDataTypeArray:function(e){var t;switch(e){case 0:t=Int8Array;break;case 1:t=Uint8Array;break;case 2:t=Int16Array;break;case 3:t=Uint16Array;break;case 4:t=Int32Array;break;case 5:t=Uint32Array;break;case 6:default:t=Float32Array;break;case 7:t=Float64Array}return t},getPixelType:function(e){var t;switch(e){case 0:t="S8";break;case 1:t="U8";break;case 2:t="S16";break;case 3:t="U16";break;case 4:t="S32";break;case 5:t="U32";break;case 6:default:t="F32";break;case 7:t="F64"}return t},isValidPixelValue:function(e,t){if(null==t)return!1;var r;switch(e){case 0:r=t>=-128&&t<=127;break;case 1:r=t>=0&&t<=255;break;case 2:r=t>=-32768&&t<=32767;break;case 3:r=t>=0&&t<=65536;break;case 4:r=t>=-2147483648&&t<=2147483647;break;case 5:r=t>=0&&t<=4294967296;break;case 6:r=t>=-34027999387901484e22&&t<=34027999387901484e22;break;case 7:r=t>=-17976931348623157e292&&t<=17976931348623157e292;break;default:r=!1}return r},getDataTypeSize:function(e){var t=0;switch(e){case 0:case 1:t=1;break;case 2:case 3:t=2;break;case 4:case 5:case 6:t=4;break;case 7:t=8;break;default:t=e}return t},getDataTypeUsed:function(e,t){var r=e;switch(e){case 2:case 4:r=e-t;break;case 3:case 5:r=e-2*t;break;case 6:r=0===t?e:1===t?2:1;break;case 7:r=0===t?e:e-2*t+1;break;default:r=e}return r},getOnePixel:function(e,t,r,n){var i=0;switch(r){case 0:i=n.getInt8(t);break;case 1:i=n.getUint8(t);break;case 2:i=n.getInt16(t,!0);break;case 3:i=n.getUint16(t,!0);break;case 4:i=n.getInt32(t,!0);break;case 5:i=n.getUInt32(t,!0);break;case 6:i=n.getFloat32(t,!0);break;case 7:i=n.getFloat64(t,!0);break;default:throw"the decoder does not understand this pixel type"}return i},swapDimensionOrder:function(e,t,r,n,i){var a=0,o=0,s=0,f=0,l=e;if(r>1)if(l=new n(t*r),i)for(a=0;a<t;a++)for(f=a,s=0;s<r;s++,f+=t)l[f]=e[o++];else for(a=0;a<t;a++)for(f=a,s=0;s<r;s++,f+=t)l[o++]=e[f];return l}},d=function(e,t,r){this.val=e,this.left=t,this.right=r},{decode:function(e,t){var r=(t=t||{}).noDataValue,n=0,i={};i.ptr=t.inputOffset||0,i.pixels={},h.readHeaderInfo(e,i);var a=i.headerInfo,o=a.fileVersion,s=h.getDataTypeArray(a.imageType);if(o>5)throw"unsupported lerc version 2."+o;h.readMask(e,i),a.numValidPixel===a.width*a.height||i.pixels.resultMask||(i.pixels.resultMask=t.maskData);var f=a.width*a.height;i.pixels.resultPixels=new s(f*a.numDims),i.counter={onesweep:0,uncompressed:0,lut:0,bitstuffer:0,constant:0,constantoffset:0};var l,u=!t.returnPixelInterleavedDims;if(0!==a.numValidPixel)if(a.zMax===a.zMin)h.constructConstantSurface(i,u);else if(o>=4&&h.checkMinMaxRanges(e,i))h.constructConstantSurface(i,u);else{var c=new DataView(e,i.ptr,2),d=c.getUint8(0);if(i.ptr++,d)h.readDataOneSweep(e,i,s,u);else if(o>1&&a.imageType<=1&&Math.abs(a.maxZError-.5)<1e-5){var p=c.getUint8(1);if(i.ptr++,i.encodeMode=p,p>2||o<4&&p>1)throw"Invalid Huffman flag "+p;p?h.readHuffman(e,i,s,u):h.readTiles(e,i,s,u)}else h.readTiles(e,i,s,u)}i.eofOffset=i.ptr,t.inputOffset?(l=i.headerInfo.blobSize+t.inputOffset-i.ptr,Math.abs(l)>=1&&(i.eofOffset=t.inputOffset+i.headerInfo.blobSize)):(l=i.headerInfo.blobSize-i.ptr,Math.abs(l)>=1&&(i.eofOffset=i.headerInfo.blobSize));var m={width:a.width,height:a.height,pixelData:i.pixels.resultPixels,minValue:a.zMin,maxValue:a.zMax,validPixelCount:a.numValidPixel,dimCount:a.numDims,dimStats:{minValues:a.minValues,maxValues:a.maxValues},maskData:i.pixels.resultMask};if(i.pixels.resultMask&&h.isValidPixelValue(a.imageType,r)){var v=i.pixels.resultMask;for(n=0;n<f;n++)v[n]||(m.pixelData[n]=r);m.noDataValue=r}return i.noDataValue=r,t.returnFileInfo&&(m.fileInfo=h.formatFileInfo(i)),m},getBandCount:function(e){for(var t=0,r=0,n={ptr:0,pixels:{}};r<e.byteLength-58;)h.readHeaderInfo(e,n),r+=n.headerInfo.blobSize,t++,n.ptr=r;return t}}),w=(p=new ArrayBuffer(4),m=new Uint8Array(p),new Uint32Array(p)[0]=1,1===m[0]),g={decode:function(e,t){if(!w)throw"Big endian system is not supported.";var r,n,i=(t=t||{}).inputOffset||0,a=new Uint8Array(e,i,10),o=String.fromCharCode.apply(null,a);if("CntZImage"===o.trim())r=v,n=1;else{if("Lerc2"!==o.substring(0,5))throw"Unexpected file identifier string: "+o;r=y,n=2}for(var s,f,l,u,c,h,d=0,p=e.byteLength-10,m=[],g={width:0,height:0,pixels:[],pixelType:t.pixelType,mask:null,statistics:[]},b=0;i<p;){var k=r.decode(e,{inputOffset:i,encodedMaskData:s,maskData:l,returnMask:0===d,returnEncodedMask:0===d,returnFileInfo:!0,returnPixelInterleavedDims:t.returnPixelInterleavedDims,pixelType:t.pixelType||null,noDataValue:t.noDataValue||null});i=k.fileInfo.eofOffset,l=k.maskData,0===d&&(s=k.encodedMaskData,g.width=k.width,g.height=k.height,g.dimCount=k.dimCount||1,g.pixelType=k.pixelType||k.fileInfo.pixelType,g.mask=l),n>1&&(l&&m.push(l),k.fileInfo.mask&&k.fileInfo.mask.numBytes>0&&b++),d++,g.pixels.push(k.pixelData),g.statistics.push({minValue:k.minValue,maxValue:k.maxValue,noDataValue:k.noDataValue,dimStats:k.dimStats})}if(n>1&&b>1){for(h=g.width*g.height,g.bandMasks=m,(l=new Uint8Array(h)).set(m[0]),u=1;u<m.length;u++)for(f=m[u],c=0;c<h;c++)l[c]=l[c]&f[c];g.maskData=l}return g}};Ke.exports?Ke.exports=g:this.Lerc=g}();var We=Xe.exports,qe={315:"Artist",258:"BitsPerSample",265:"CellLength",264:"CellWidth",320:"ColorMap",259:"Compression",33432:"Copyright",306:"DateTime",338:"ExtraSamples",266:"FillOrder",289:"FreeByteCounts",288:"FreeOffsets",291:"GrayResponseCurve",290:"GrayResponseUnit",316:"HostComputer",270:"ImageDescription",257:"ImageLength",256:"ImageWidth",271:"Make",281:"MaxSampleValue",280:"MinSampleValue",272:"Model",254:"NewSubfileType",274:"Orientation",262:"PhotometricInterpretation",284:"PlanarConfiguration",296:"ResolutionUnit",278:"RowsPerStrip",277:"SamplesPerPixel",305:"Software",279:"StripByteCounts",273:"StripOffsets",255:"SubfileType",263:"Threshholding",282:"XResolution",283:"YResolution",326:"BadFaxLines",327:"CleanFaxData",343:"ClipPath",328:"ConsecutiveBadFaxLines",433:"Decode",434:"DefaultImageColor",269:"DocumentName",336:"DotRange",321:"HalftoneHints",346:"Indexed",347:"JPEGTables",285:"PageName",297:"PageNumber",317:"Predictor",319:"PrimaryChromaticities",532:"ReferenceBlackWhite",339:"SampleFormat",340:"SMinSampleValue",341:"SMaxSampleValue",559:"StripRowCounts",330:"SubIFDs",292:"T4Options",293:"T6Options",325:"TileByteCounts",323:"TileLength",324:"TileOffsets",322:"TileWidth",301:"TransferFunction",318:"WhitePoint",344:"XClipPathUnits",286:"XPosition",529:"YCbCrCoefficients",531:"YCbCrPositioning",530:"YCbCrSubSampling",345:"YClipPathUnits",287:"YPosition",37378:"ApertureValue",40961:"ColorSpace",36868:"DateTimeDigitized",36867:"DateTimeOriginal",34665:"Exif IFD",36864:"ExifVersion",33434:"ExposureTime",41728:"FileSource",37385:"Flash",40960:"FlashpixVersion",33437:"FNumber",42016:"ImageUniqueID",37384:"LightSource",37500:"MakerNote",37377:"ShutterSpeedValue",37510:"UserComment",33723:"IPTC",34675:"ICC Profile",700:"XMP",42112:"GDAL_METADATA",42113:"GDAL_NODATA",34377:"Photoshop",33550:"ModelPixelScale",33922:"ModelTiepoint",34264:"ModelTransformation",34735:"GeoKeyDirectory",34736:"GeoDoubleParams",34737:"GeoAsciiParams",50674:"LercParameters"},Je={};for(var Qe in qe)qe.hasOwnProperty(Qe)&&(Je[qe[Qe]]=parseInt(Qe,10));Je.BitsPerSample,Je.ExtraSamples,Je.SampleFormat,Je.StripByteCounts,Je.StripOffsets,Je.StripRowCounts,Je.TileByteCounts,Je.TileOffsets,Je.SubIFDs;var $e={1:"BYTE",2:"ASCII",3:"SHORT",4:"LONG",5:"RATIONAL",6:"SBYTE",7:"UNDEFINED",8:"SSHORT",9:"SLONG",10:"SRATIONAL",11:"FLOAT",12:"DOUBLE",13:"IFD",16:"LONG8",17:"SLONG8",18:"IFD8"},et={};for(var tt in $e)$e.hasOwnProperty(tt)&&(et[$e[tt]]=parseInt(tt,10));var rt=1,nt=0,it=1,at={1024:"GTModelTypeGeoKey",1025:"GTRasterTypeGeoKey",1026:"GTCitationGeoKey",2048:"GeographicTypeGeoKey",2049:"GeogCitationGeoKey",2050:"GeogGeodeticDatumGeoKey",2051:"GeogPrimeMeridianGeoKey",2052:"GeogLinearUnitsGeoKey",2053:"GeogLinearUnitSizeGeoKey",2054:"GeogAngularUnitsGeoKey",2055:"GeogAngularUnitSizeGeoKey",2056:"GeogEllipsoidGeoKey",2057:"GeogSemiMajorAxisGeoKey",2058:"GeogSemiMinorAxisGeoKey",2059:"GeogInvFlatteningGeoKey",2060:"GeogAzimuthUnitsGeoKey",2061:"GeogPrimeMeridianLongGeoKey",2062:"GeogTOWGS84GeoKey",3072:"ProjectedCSTypeGeoKey",3073:"PCSCitationGeoKey",3074:"ProjectionGeoKey",3075:"ProjCoordTransGeoKey",3076:"ProjLinearUnitsGeoKey",3077:"ProjLinearUnitSizeGeoKey",3078:"ProjStdParallel1GeoKey",3079:"ProjStdParallel2GeoKey",3080:"ProjNatOriginLongGeoKey",3081:"ProjNatOriginLatGeoKey",3082:"ProjFalseEastingGeoKey",3083:"ProjFalseNorthingGeoKey",3084:"ProjFalseOriginLongGeoKey",3085:"ProjFalseOriginLatGeoKey",3086:"ProjFalseOriginEastingGeoKey",3087:"ProjFalseOriginNorthingGeoKey",3088:"ProjCenterLongGeoKey",3089:"ProjCenterLatGeoKey",3090:"ProjCenterEastingGeoKey",3091:"ProjCenterNorthingGeoKey",3092:"ProjScaleAtNatOriginGeoKey",3093:"ProjScaleAtCenterGeoKey",3094:"ProjAzimuthAngleGeoKey",3095:"ProjStraightVertPoleLongGeoKey",3096:"ProjRectifiedGridAngleGeoKey",4096:"VerticalCSTypeGeoKey",4097:"VerticalCitationGeoKey",4098:"VerticalDatumGeoKey",4099:"VerticalUnitsGeoKey"},ot={};for(var st in at)at.hasOwnProperty(st)&&(ot[at[st]]=parseInt(st,10));function ft(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v(e);if(t){var i=v(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return m(this,r)}}var lt=function(e){p(r,b);var t=ft(r);function r(e){var n;return u(this,r),(n=t.call(this)).planarConfiguration=void 0!==e.PlanarConfiguration?e.PlanarConfiguration:1,n.samplesPerPixel=void 0!==e.SamplesPerPixel?e.SamplesPerPixel:1,n.addCompression=e.LercParameters[rt],n}return h(r,[{key:"decodeBlock",value:function(e){switch(this.addCompression){case nt:break;case it:e=Fe(new Uint8Array(e)).buffer;break;default:throw new Error("Unsupported LERC additional compression method identifier: ".concat(this.addCompression))}return We.decode(e,{returnPixelInterleavedDims:1===this.planarConfiguration}).pixels[0].buffer}}]),r}(),ut=Object.freeze({__proto__:null,default:lt});function ct(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v(e);if(t){var i=v(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return m(this,r)}}var ht=function(e){p(a,b);var r,n=ct(a);function a(){var e;if(u(this,a),e=n.call(this),"undefined"==typeof createImageBitmap)throw new Error("Cannot decode WebImage as `createImageBitmap` is not available");if("undefined"==typeof document&&"undefined"==typeof OffscreenCanvas)throw new Error("Cannot decode WebImage as neither `document` nor `OffscreenCanvas` is not available");return e}return h(a,[{key:"decode",value:(r=t(i.mark((function e(t,r){var n,a,o,s;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new Blob([r]),e.next=3,createImageBitmap(n);case 3:return a=e.sent,"undefined"!=typeof document?((o=document.createElement("canvas")).width=a.width,o.height=a.height):o=new OffscreenCanvas(a.width,a.height),(s=o.getContext("2d")).drawImage(a,0,0),e.abrupt("return",s.getImageData(0,0,a.width,a.height).data.buffer);case 8:case"end":return e.stop()}}),e)}))),function(e,t){return r.apply(this,arguments)})}]),a}(),dt=Object.freeze({__proto__:null,default:ht});';return new Ti("undefined"==typeof Blob?"data:application/javascript;base64,"+Buffer.from(e,"binary").toString("base64"):URL.createObjectURL(new Blob([e],{type:"application/javascript"})))}});e.BaseDecoder=wr,e.GeoTIFF=Ur,e.GeoTIFFImage=Fe,e.MultiGeoTIFF=Or,e.Pool=Ne,e.addDecoder=xe,e.default=Ur,e.fromArrayBuffer=function(e,t){return Er.apply(this,arguments)},e.fromBlob=function(e,t){return Mr.apply(this,arguments)},e.fromFile=function(e,t){return Rr.apply(this,arguments)},e.fromUrl=function(e){return Dr.apply(this,arguments)},e.fromUrls=function(e){return Br.apply(this,arguments)},e.getDecoder=Ae,e.globals=de,e.rgb=be,e.setLogger=function(){arguments.length>0&&void 0!==arguments[0]||new mr;},e.writeArrayBuffer=function(e,t){return pr(e,t)},Object.defineProperty(e,"__esModule",{value:!0});}));

    }(geotiff, geotiff.exports));

    const getPalette = (image, { debug = false } = { debug: false }) => {
        if (debug) console.log("starting getPalette with image", image);
        const { fileDirectory } = image;
        const {
            BitsPerSample,
            ColorMap,
            ImageLength,
            ImageWidth,
            PhotometricInterpretation,
            SampleFormat,
            SamplesPerPixel
        } = fileDirectory;

        if (!ColorMap) {
            throw new Error("[geotiff-palette]: the image does not contain a color map, so we can't make a palette.");
        }

        const count = Math.pow(2, BitsPerSample);
        if (debug) console.log("[geotiff-palette]: count:", count);

        const bandSize = ColorMap.length / 3;
        if (debug) console.log("[geotiff-palette]: bandSize:", bandSize);

        if (bandSize !== count) {
            throw new Error("[geotiff-palette]: can't handle situations where the color map has more or less values than the number of possible values in a raster");
        }

        const greenOffset = bandSize;
        const redOffset = greenOffset + bandSize;

        const result = [];
        for (let i = 0; i < count; i++) {
            // colorMap[mapIndex] / 65536 * 256 equals colorMap[mapIndex] / 256
            // because (1 / 2^16) * (2^8) equals 1 / 2^8
            result.push([
                Math.floor(ColorMap[i] / 256), // red
                Math.floor(ColorMap[greenOffset + i] / 256), // green
                Math.floor(ColorMap[redOffset + i] / 256), // blue
                255 // alpha value is always 255
            ]);
        }
        if (debug) console.log("[geotiff-palette]: result is ", result);
        return result;
    };

    var geotiffPalette = { getPalette };

    /*
    Takes in a flattened one dimensional array
    representing two-dimensional pixel values
    and returns an array of arrays.
    */
    function unflatten(valuesInOneDimension, size) {
      const {height, width} = size;
      const valuesInTwoDimensions = [];
      for (let y = 0; y < height; y++) {
        const start = y * width;
        const end = start + width;
        valuesInTwoDimensions.push(valuesInOneDimension.slice(start, end));
      }
      return valuesInTwoDimensions;
    }

    function processResult(result, debug) {
      const noDataValue = result.noDataValue;
      const height = result.height;
      const width = result.width;

      return new Promise((resolve, reject) => {
        result.maxs = [];
        result.mins = [];
        result.ranges = [];

        let max; let min;

        // console.log("starting to get min, max and ranges");
        for (let rasterIndex = 0; rasterIndex < result.numberOfRasters; rasterIndex++) {
          const rows = result.values[rasterIndex];
          if (debug) console.log('[georaster] rows:', rows);

          for (let rowIndex = 0; rowIndex < height; rowIndex++) {
            const row = rows[rowIndex];

            for (let columnIndex = 0; columnIndex < width; columnIndex++) {
              const value = row[columnIndex];
              if (value != noDataValue && !isNaN(value)) {
                if (typeof min === 'undefined' || value < min) min = value;
                else if (typeof max === 'undefined' || value > max) max = value;
              }
            }
          }

          result.maxs.push(max);
          result.mins.push(min);
          result.ranges.push(max - min);
        }

        resolve(result);
      });
    }

    /* We're not using async because trying to avoid dependency on babel's polyfill
    There can be conflicts when GeoRaster is used in another project that is also
    using @babel/polyfill */
    function parseData(data, debug) {
      return new Promise((resolve, reject) => {
        try {
          if (debug) console.log('starting parseData with', data);
          if (debug) console.log('\tGeoTIFF:', typeof GeoTIFF);

          const result = {};

          let height, width;

          if (data.rasterType === 'object') {
            result.values = data.data;
            result.height = height = data.metadata.height || result.values[0].length;
            result.width = width = data.metadata.width || result.values[0][0].length;
            result.pixelHeight = data.metadata.pixelHeight;
            result.pixelWidth = data.metadata.pixelWidth;
            result.projection = data.metadata.projection;
            result.xmin = data.metadata.xmin;
            result.ymax = data.metadata.ymax;
            result.noDataValue = data.metadata.noDataValue;
            result.numberOfRasters = result.values.length;
            result.xmax = result.xmin + result.width * result.pixelWidth;
            result.ymin = result.ymax - result.height * result.pixelHeight;
            result._data = null;
            resolve(processResult(result));
          } else if (data.rasterType === 'geotiff') {
            result._data = data.data;

            let initFunction = geotiff.exports.fromArrayBuffer;
            if (data.sourceType === 'url') {
              initFunction = geotiff.exports.fromUrl;
            } else if (data.sourceType === 'Blob') {
              initFunction = geotiff.exports.fromBlob;
            }

            if (debug) console.log('data.rasterType is geotiff');
            resolve(initFunction(data.data).then(geotiff => {
              if (debug) console.log('geotiff:', geotiff);
              return geotiff.getImage().then(image => {
                try {
                  if (debug) console.log('image:', image);

                  const fileDirectory = image.fileDirectory;

                  const {
                    GeographicTypeGeoKey,
                    ProjectedCSTypeGeoKey,
                  } = image.getGeoKeys();

                  result.projection = ProjectedCSTypeGeoKey || GeographicTypeGeoKey;
                  if (debug) console.log('projection:', result.projection);

                  result.height = height = image.getHeight();
                  if (debug) console.log('result.height:', result.height);
                  result.width = width = image.getWidth();
                  if (debug) console.log('result.width:', result.width);

                  const [resolutionX, resolutionY] = image.getResolution();
                  result.pixelHeight = Math.abs(resolutionY);
                  result.pixelWidth = Math.abs(resolutionX);

                  const [originX, originY] = image.getOrigin();
                  result.xmin = originX;
                  result.xmax = result.xmin + width * result.pixelWidth;
                  result.ymax = originY;
                  result.ymin = result.ymax - height * result.pixelHeight;

                  result.noDataValue = fileDirectory.GDAL_NODATA ? parseFloat(fileDirectory.GDAL_NODATA) : null;

                  result.numberOfRasters = fileDirectory.SamplesPerPixel;

                  if (fileDirectory.ColorMap) {
                    result.palette = geotiffPalette.getPalette(image);
                  }

                  if (data.sourceType !== 'url') {
                    return image.readRasters().then(rasters => {
                      result.values = rasters.map(valuesInOneDimension => {
                        return unflatten(valuesInOneDimension, {height, width});
                      });
                      return processResult(result);
                    });
                  } else {
                    return result;
                  }
                } catch (error) {
                  reject(error);
                  console.error('[georaster] error parsing georaster:', error);
                }
              });
            }));
          }
        } catch (error) {
          reject(error);
          console.error('[georaster] error parsing georaster:', error);
        }
      });
    }

    /* global ImageData */

    function toImageData(georaster, canvasWidth, canvasHeight) {
      if (georaster.values) {
        const { noDataValue, mins, ranges, values } = georaster;
        const numBands = values.length;
        const xRatio = georaster.width / canvasWidth;
        const yRatio = georaster.height / canvasHeight;
        const data = new Uint8ClampedArray(canvasWidth * canvasHeight * 4);
        for (let rowIndex = 0; rowIndex < canvasHeight; rowIndex++) {
          for (let columnIndex = 0; columnIndex < canvasWidth; columnIndex++) {
            const rasterRowIndex = Math.round(rowIndex * yRatio);
            const rasterColumnIndex = Math.round(columnIndex * xRatio);
            const pixelValues = values.map(band => {
              try {
                return band[rasterRowIndex][rasterColumnIndex];
              } catch (error) {
                console.error(error);
              }
            });
            const haveDataForAllBands = pixelValues.every(value => value !== undefined && value !== noDataValue);
            if (haveDataForAllBands) {
              const i = (rowIndex * (canvasWidth * 4)) + 4 * columnIndex;
              if (numBands === 1) {
                const pixelValue = Math.round(pixelValues[0]);
                const scaledPixelValue = Math.round((pixelValue - mins[0]) / ranges[0] * 255);
                data[i] = scaledPixelValue;
                data[i + 1] = scaledPixelValue;
                data[i + 2] = scaledPixelValue;
                data[i + 3] = 255;
              } else if (numBands === 3) {
                try {
                  const [r, g, b] = pixelValues;
                  data[i] = r;
                  data[i + 1] = g;
                  data[i + 2] = b;
                  data[i + 3] = 255;
                } catch (error) {
                  console.error(error);
                }
              } else if (numBands === 4) {
                try {
                  const [r, g, b, a] = pixelValues;
                  data[i] = r;
                  data[i + 1] = g;
                  data[i + 2] = b;
                  data[i + 3] = a;
                } catch (error) {
                  console.error(error);
                }
              }
            }
          }
        }
        return new ImageData(data, canvasWidth, canvasHeight);
      }
    }

    function toCanvas(georaster, options) {
      if (typeof ImageData === "undefined") {
        throw `toCanvas is not supported in your environment`;
      } else {
        const canvas = document.createElement("CANVAS");
        const canvasHeight = options && options.height ? Math.min(georaster.height, options.height) : Math.min(georaster.height, 100);
        const canvasWidth = options && options.width ? Math.min(georaster.width, options.width) : Math.min(georaster.width, 100);
        canvas.height = canvasHeight;
        canvas.width = canvasWidth;
        canvas.style.minHeight = "200px";
        canvas.style.minWidth = "400px";
        canvas.style.maxWidth = "100%";
        const context = canvas.getContext("2d");
        const imageData = toImageData(georaster, canvasWidth, canvasHeight);
        context.putImageData(imageData, 0, 0);
        return canvas;
      }
    }

    function urlExists(url) {
      try {
        return fetch(url, {method: 'HEAD'})
            .then(response => response.status === 200)
            .catch(error => false);
      } catch (error) {
        return Promise.resolve(false);
      }
    }

    function getValues(geotiff, options) {
      const {left, top, right, bottom, width, height, resampleMethod} = options;
      // note this.image and this.geotiff both have a readRasters method;
      // they are not the same thing. use this.geotiff for experimental version
      // that reads from best overview
      return geotiff.readRasters({
        window: [left, top, right, bottom],
        width: width,
        height: height,
        resampleMethod: resampleMethod || 'bilinear',
      }).then(rasters => {
        /*
          The result appears to be an array with a width and height property set.
          We only need the values, assuming the user remembers the width and height.
          Ex: [[0,27723,...11025,12924], width: 10, height: 10]
        */
        return rasters.map(raster => unflatten(raster, {height, width}));
      });
    }

    class GeoRaster {
      constructor(data, metadata, debug) {
        if (debug) console.log('starting GeoRaster.constructor with', data, metadata);

        this._web_worker_is_available = typeof window !== 'undefined' && window.Worker !== 'undefined';
        this._blob_is_available = typeof Blob !== 'undefined';
        this._url_is_available = typeof URL !== 'undefined';

        // check if should convert to buffer
        if (typeof data === 'object' && data.constructor && data.constructor.name === 'Buffer' && Buffer.isBuffer(data) === false) {
          data = new Buffer(data);
        }

        if (typeof data === 'string') {
          if (debug) console.log('data is a url');
          this._data = data;
          this._url = data;
          this.rasterType = 'geotiff';
          this.sourceType = 'url';
        } else if (typeof Blob !== 'undefined' && data instanceof Blob) {
          this._data = data;
          this.rasterType = 'geotiff';
          this.sourceType = 'Blob';
        } else if (typeof Buffer !== 'undefined' && Buffer.isBuffer(data)) {
          // this is node
          if (debug) console.log('data is a buffer');
          this._data = data.buffer.slice(data.byteOffset, data.byteOffset + data.byteLength);
          this.rasterType = 'geotiff';
          this.sourceType = 'Buffer';
        } else if (data instanceof ArrayBuffer) {
          // this is browser
          this._data = data;
          this.rasterType = 'geotiff';
          this.sourceType = 'ArrayBuffer';
        } else if (Array.isArray(data) && metadata) {
          this._data = data;
          this.rasterType = 'object';
          this._metadata = metadata;
        }

        if (debug) console.log('this after construction:', this);
      }

      preinitialize(debug) {
        if (debug) console.log('starting preinitialize');
        if (this._url) {
          // initialize these outside worker to avoid weird worker error
          // I don't see how cache option is passed through with fromUrl,
          // though constantinius says it should work: https://github.com/geotiffjs/geotiff.js/issues/61
          const ovrURL = this._url + '.ovr';
          return urlExists(ovrURL).then(ovrExists => {
            if (debug) console.log('overview exists:', ovrExists);
            if (ovrExists) {
              return geotiff.exports.fromUrls(this._url, [ovrURL], {cache: true, forceXHR: false});
            } else {
              return geotiff.exports.fromUrl(this._url, {cache: true, forceXHR: false});
            }
          });
        } else {
          // no pre-initialization steps required if not using a Cloud Optimized GeoTIFF
          return Promise.resolve();
        }
      }

      initialize(debug) {
        return this.preinitialize(debug).then(geotiff => {
          return new Promise((resolve, reject) => {
            if (debug) console.log('starting GeoRaster.initialize');
            if (debug) console.log('this', this);

            if (this.rasterType === 'object' || this.rasterType === 'geotiff' || this.rasterType === 'tiff') {
              if (this._web_worker_is_available) {
                const worker = new WorkerFactory();
                worker.onmessage = (e) => {
                  if (debug) console.log('main thread received message:', e);
                  const data = e.data;
                  for (const key in data) {
                    this[key] = data[key];
                  }
                  if (this._url) {
                    this._geotiff = geotiff;
                    this.getValues = function(options) {
                      return getValues(this._geotiff, options);
                    };
                  }
                  this.toCanvas = function(options) {
                    return toCanvas(this, options);
                  };
                  resolve(this);
                };
                if (debug) console.log('about to postMessage');
                if (this._data instanceof ArrayBuffer) {
                  worker.postMessage({
                    data: this._data,
                    rasterType: this.rasterType,
                    sourceType: this.sourceType,
                    metadata: this._metadata,
                  }, [this._data]);
                } else {
                  worker.postMessage({
                    data: this._data,
                    rasterType: this.rasterType,
                    sourceType: this.sourceType,
                    metadata: this._metadata,
                  });
                }
              } else {
                if (debug) console.log('web worker is not available');
                parseData({
                  data: this._data,
                  rasterType: this.rasterType,
                  sourceType: this.sourceType,
                  metadata: this._metadata,
                }, debug).then(result => {
                  if (debug) console.log('result:', result);
                  if (this._url) {
                    result._geotiff = geotiff;
                    result.getValues = function(options) {
                      return getValues(this._geotiff, options);
                    };
                  }
                  result.toCanvas = function(options) {
                    return toCanvas(this, options);
                  };
                  resolve(result);
                }).catch(reject);
              }
            } else {
              reject('couldn\'t find a way to parse');
            }
          });
        });
      }
    }

    const parseGeoraster = (input, metadata, debug) => {
      if (debug) console.log('starting parseGeoraster with ', input, metadata);

      if (input === undefined) {
        const errorMessage = '[Georaster.parseGeoraster] Error. You passed in undefined to parseGeoraster. We can\'t make a raster out of nothing!';
        throw Error(errorMessage);
      }

      return new GeoRaster(input, metadata, debug).initialize(debug);
    };

    exports.parseGeoraster = parseGeoraster;

    Object.defineProperty(exports, '__esModule', { value: true });

}));
//# sourceMappingURL=georaster.bundle.js.map
