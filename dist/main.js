!function(e){var t={};function r(i){if(t[i])return t[i].exports;var n=t[i]={i:i,l:!1,exports:{}};return e[i].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=t,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(i,n,function(t){return e[t]}.bind(null,n));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=32)}([function(e,t,r){"use strict";var i="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var r=t.shift();if(r){if("object"!=typeof r)throw new TypeError(r+"must be non-object");for(var i in r)n(r,i)&&(e[i]=r[i])}}return e},t.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var a={arraySet:function(e,t,r,i,n){if(t.subarray&&e.subarray)e.set(t.subarray(r,r+i),n);else for(var a=0;a<i;a++)e[n+a]=t[r+a]},flattenChunks:function(e){var t,r,i,n,a,o;for(i=0,t=0,r=e.length;t<r;t++)i+=e[t].length;for(o=new Uint8Array(i),n=0,t=0,r=e.length;t<r;t++)a=e[t],o.set(a,n),n+=a.length;return o}},o={arraySet:function(e,t,r,i,n){for(var a=0;a<i;a++)e[n+a]=t[r+a]},flattenChunks:function(e){return[].concat.apply([],e)}};t.setTyped=function(e){e?(t.Buf8=Uint8Array,t.Buf16=Uint16Array,t.Buf32=Int32Array,t.assign(t,a)):(t.Buf8=Array,t.Buf16=Array,t.Buf32=Array,t.assign(t,o))},t.setTyped(i)},function(e,t,r){"use strict";function i(){}i.prototype={isAsync:function(){return void 0===this.decodeBlock}},e.exports=i},function(e,t){function r(e,t){for(var r in e)t[r]=e[r]}function i(e,t){var i=e.prototype;if(Object.create){var n=Object.create(t.prototype);i.__proto__=n}if(!(i instanceof t)){function a(){}a.prototype=t.prototype,r(i,a=new a),e.prototype=i=a}i.constructor!=e&&("function"!=typeof e&&console.error("unknow Class:"+e),i.constructor=e)}var n="http://www.w3.org/1999/xhtml",a={},o=a.ELEMENT_NODE=1,s=a.ATTRIBUTE_NODE=2,c=a.TEXT_NODE=3,l=a.CDATA_SECTION_NODE=4,f=a.ENTITY_REFERENCE_NODE=5,u=a.ENTITY_NODE=6,h=a.PROCESSING_INSTRUCTION_NODE=7,d=a.COMMENT_NODE=8,g=a.DOCUMENT_NODE=9,p=a.DOCUMENT_TYPE_NODE=10,m=a.DOCUMENT_FRAGMENT_NODE=11,b=a.NOTATION_NODE=12,w={},y={},v=(w.INDEX_SIZE_ERR=(y[1]="Index size error",1),w.DOMSTRING_SIZE_ERR=(y[2]="DOMString size error",2),w.HIERARCHY_REQUEST_ERR=(y[3]="Hierarchy request error",3)),_=(w.WRONG_DOCUMENT_ERR=(y[4]="Wrong document",4),w.INVALID_CHARACTER_ERR=(y[5]="Invalid character",5),w.NO_DATA_ALLOWED_ERR=(y[6]="No data allowed",6),w.NO_MODIFICATION_ALLOWED_ERR=(y[7]="No modification allowed",7),w.NOT_FOUND_ERR=(y[8]="Not found",8)),x=(w.NOT_SUPPORTED_ERR=(y[9]="Not supported",9),w.INUSE_ATTRIBUTE_ERR=(y[10]="Attribute in use",10));w.INVALID_STATE_ERR=(y[11]="Invalid state",11),w.SYNTAX_ERR=(y[12]="Syntax error",12),w.INVALID_MODIFICATION_ERR=(y[13]="Invalid modification",13),w.NAMESPACE_ERR=(y[14]="Invalid namespace",14),w.INVALID_ACCESS_ERR=(y[15]="Invalid access",15);function A(e,t){if(t instanceof Error)var r=t;else r=this,Error.call(this,y[e]),this.message=y[e],Error.captureStackTrace&&Error.captureStackTrace(this,A);return r.code=e,t&&(this.message=this.message+": "+t),r}function k(){}function E(e,t){this._node=e,this._refresh=t,S(this)}function S(e){var t=e._node._inc||e._node.ownerDocument._inc;if(e._inc!=t){var i=e._refresh(e._node);re(e,"length",i.length),r(i,e),e._inc=t}}function T(){}function D(e,t){for(var r=e.length;r--;)if(e[r]===t)return r}function I(e,t,r,i){if(i?t[D(t,i)]=r:t[t.length++]=r,e){r.ownerElement=e;var n=e.ownerDocument;n&&(i&&M(n,e,i),function(e,t,r){e&&e._inc++,"http://www.w3.org/2000/xmlns/"==r.namespaceURI&&(t._nsMap[r.prefix?r.localName:""]=r.value)}(n,e,r))}}function N(e,t,r){var i=D(t,r);if(!(i>=0))throw A(_,new Error(e.tagName+"@"+r));for(var n=t.length-1;i<n;)t[i]=t[++i];if(t.length=n,e){var a=e.ownerDocument;a&&(M(a,e,r),r.ownerElement=null)}}function C(e){if(this._features={},e)for(var t in e)this._features=e[t]}function B(){}function O(e){return("<"==e?"&lt;":">"==e&&"&gt;")||"&"==e&&"&amp;"||'"'==e&&"&quot;"||"&#"+e.charCodeAt()+";"}function R(e,t){if(t(e))return!0;if(e=e.firstChild)do{if(R(e,t))return!0}while(e=e.nextSibling)}function P(){}function M(e,t,r,i){e&&e._inc++,"http://www.w3.org/2000/xmlns/"==r.namespaceURI&&delete t._nsMap[r.prefix?r.localName:""]}function U(e,t,r){if(e&&e._inc){e._inc++;var i=t.childNodes;if(r)i[i.length++]=r;else{for(var n=t.firstChild,a=0;n;)i[a++]=n,n=n.nextSibling;i.length=a}}}function j(e,t){var r=t.previousSibling,i=t.nextSibling;return r?r.nextSibling=i:e.firstChild=i,i?i.previousSibling=r:e.lastChild=r,U(e.ownerDocument,e),t}function G(e,t,r){var i=t.parentNode;if(i&&i.removeChild(t),t.nodeType===m){var n=t.firstChild;if(null==n)return t;var a=t.lastChild}else n=a=t;var o=r?r.previousSibling:e.lastChild;n.previousSibling=o,a.nextSibling=r,o?o.nextSibling=n:e.firstChild=n,null==r?e.lastChild=a:r.previousSibling=a;do{n.parentNode=e}while(n!==a&&(n=n.nextSibling));return U(e.ownerDocument||e,e),t.nodeType==m&&(t.firstChild=t.lastChild=null),t}function F(){this._nsMap={}}function L(){}function K(){}function V(){}function q(){}function z(){}function Z(){}function Y(){}function H(){}function W(){}function X(){}function $(){}function J(){}function Q(e,t){var r=[],i=9==this.nodeType?this.documentElement:this,n=i.prefix,a=i.namespaceURI;if(a&&null==n&&null==(n=i.lookupPrefix(a)))var o=[{namespace:a,prefix:null}];return te(this,r,e,t,o),r.join("")}function ee(e,t,r){var i=e.prefix||"",n=e.namespaceURI;if(!i&&!n)return!1;if("xml"===i&&"http://www.w3.org/XML/1998/namespace"===n||"http://www.w3.org/2000/xmlns/"==n)return!1;for(var a=r.length;a--;){var o=r[a];if(o.prefix==i)return o.namespace!=n}return!0}function te(e,t,r,i,a){if(i){if(!(e=i(e)))return;if("string"==typeof e)return void t.push(e)}switch(e.nodeType){case o:a||(a=[]);a.length;var u=e.attributes,b=u.length,w=e.firstChild,y=e.tagName;r=n===e.namespaceURI||r,t.push("<",y);for(var v=0;v<b;v++){"xmlns"==(_=u.item(v)).prefix?a.push({prefix:_.localName,namespace:_.value}):"xmlns"==_.nodeName&&a.push({prefix:"",namespace:_.value})}for(v=0;v<b;v++){var _;if(ee(_=u.item(v),0,a)){var x=_.prefix||"",A=_.namespaceURI,k=x?" xmlns:"+x:" xmlns";t.push(k,'="',A,'"'),a.push({prefix:x,namespace:A})}te(_,t,r,i,a)}if(ee(e,0,a)){x=e.prefix||"",A=e.namespaceURI,k=x?" xmlns:"+x:" xmlns";t.push(k,'="',A,'"'),a.push({prefix:x,namespace:A})}if(w||r&&!/^(?:meta|link|img|br|hr|input)$/i.test(y)){if(t.push(">"),r&&/^script$/i.test(y))for(;w;)w.data?t.push(w.data):te(w,t,r,i,a),w=w.nextSibling;else for(;w;)te(w,t,r,i,a),w=w.nextSibling;t.push("</",y,">")}else t.push("/>");return;case g:case m:for(w=e.firstChild;w;)te(w,t,r,i,a),w=w.nextSibling;return;case s:return t.push(" ",e.name,'="',e.value.replace(/[<&"]/g,O),'"');case c:return t.push(e.data.replace(/[<&]/g,O));case l:return t.push("<![CDATA[",e.data,"]]>");case d:return t.push("\x3c!--",e.data,"--\x3e");case p:var E=e.publicId,S=e.systemId;if(t.push("<!DOCTYPE ",e.name),E)t.push(' PUBLIC "',E),S&&"."!=S&&t.push('" "',S),t.push('">');else if(S&&"."!=S)t.push(' SYSTEM "',S,'">');else{var T=e.internalSubset;T&&t.push(" [",T,"]"),t.push(">")}return;case h:return t.push("<?",e.target," ",e.data,"?>");case f:return t.push("&",e.nodeName,";");default:t.push("??",e.nodeName)}}function re(e,t,r){e[t]=r}A.prototype=Error.prototype,r(w,A),k.prototype={length:0,item:function(e){return this[e]||null},toString:function(e,t){for(var r=[],i=0;i<this.length;i++)te(this[i],r,e,t);return r.join("")}},E.prototype.item=function(e){return S(this),this[e]},i(E,k),T.prototype={length:0,item:k.prototype.item,getNamedItem:function(e){for(var t=this.length;t--;){var r=this[t];if(r.nodeName==e)return r}},setNamedItem:function(e){var t=e.ownerElement;if(t&&t!=this._ownerElement)throw new A(x);var r=this.getNamedItem(e.nodeName);return I(this._ownerElement,this,e,r),r},setNamedItemNS:function(e){var t,r=e.ownerElement;if(r&&r!=this._ownerElement)throw new A(x);return t=this.getNamedItemNS(e.namespaceURI,e.localName),I(this._ownerElement,this,e,t),t},removeNamedItem:function(e){var t=this.getNamedItem(e);return N(this._ownerElement,this,t),t},removeNamedItemNS:function(e,t){var r=this.getNamedItemNS(e,t);return N(this._ownerElement,this,r),r},getNamedItemNS:function(e,t){for(var r=this.length;r--;){var i=this[r];if(i.localName==t&&i.namespaceURI==e)return i}return null}},C.prototype={hasFeature:function(e,t){var r=this._features[e.toLowerCase()];return!(!r||t&&!(t in r))},createDocument:function(e,t,r){var i=new P;if(i.implementation=this,i.childNodes=new k,i.doctype=r,r&&i.appendChild(r),t){var n=i.createElementNS(e,t);i.appendChild(n)}return i},createDocumentType:function(e,t,r){var i=new Z;return i.name=e,i.nodeName=e,i.publicId=t,i.systemId=r,i}},B.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(e,t){return G(this,e,t)},replaceChild:function(e,t){this.insertBefore(e,t),t&&this.removeChild(t)},removeChild:function(e){return j(this,e)},appendChild:function(e){return this.insertBefore(e,null)},hasChildNodes:function(){return null!=this.firstChild},cloneNode:function(e){return function e(t,r,i){var n=new r.constructor;for(var a in r){var c=r[a];"object"!=typeof c&&c!=n[a]&&(n[a]=c)}r.childNodes&&(n.childNodes=new k);n.ownerDocument=t;switch(n.nodeType){case o:var l=r.attributes,f=n.attributes=new T,u=l.length;f._ownerElement=n;for(var h=0;h<u;h++)n.setAttributeNode(e(t,l.item(h),!0));break;case s:i=!0}if(i)for(var d=r.firstChild;d;)n.appendChild(e(t,d,i)),d=d.nextSibling;return n}(this.ownerDocument||this,this,e)},normalize:function(){for(var e=this.firstChild;e;){var t=e.nextSibling;t&&t.nodeType==c&&e.nodeType==c?(this.removeChild(t),e.appendData(t.data)):(e.normalize(),e=t)}},isSupported:function(e,t){return this.ownerDocument.implementation.hasFeature(e,t)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(e){for(var t=this;t;){var r=t._nsMap;if(r)for(var i in r)if(r[i]==e)return i;t=t.nodeType==s?t.ownerDocument:t.parentNode}return null},lookupNamespaceURI:function(e){for(var t=this;t;){var r=t._nsMap;if(r&&e in r)return r[e];t=t.nodeType==s?t.ownerDocument:t.parentNode}return null},isDefaultNamespace:function(e){return null==this.lookupPrefix(e)}},r(a,B),r(a,B.prototype),P.prototype={nodeName:"#document",nodeType:g,doctype:null,documentElement:null,_inc:1,insertBefore:function(e,t){if(e.nodeType==m){for(var r=e.firstChild;r;){var i=r.nextSibling;this.insertBefore(r,t),r=i}return e}return null==this.documentElement&&e.nodeType==o&&(this.documentElement=e),G(this,e,t),e.ownerDocument=this,e},removeChild:function(e){return this.documentElement==e&&(this.documentElement=null),j(this,e)},importNode:function(e,t){return function e(t,r,i){var n;switch(r.nodeType){case o:(n=r.cloneNode(!1)).ownerDocument=t;case m:break;case s:i=!0}n||(n=r.cloneNode(!1));n.ownerDocument=t;n.parentNode=null;if(i)for(var a=r.firstChild;a;)n.appendChild(e(t,a,i)),a=a.nextSibling;return n}(this,e,t)},getElementById:function(e){var t=null;return R(this.documentElement,function(r){if(r.nodeType==o&&r.getAttribute("id")==e)return t=r,!0}),t},createElement:function(e){var t=new F;return t.ownerDocument=this,t.nodeName=e,t.tagName=e,t.childNodes=new k,(t.attributes=new T)._ownerElement=t,t},createDocumentFragment:function(){var e=new X;return e.ownerDocument=this,e.childNodes=new k,e},createTextNode:function(e){var t=new V;return t.ownerDocument=this,t.appendData(e),t},createComment:function(e){var t=new q;return t.ownerDocument=this,t.appendData(e),t},createCDATASection:function(e){var t=new z;return t.ownerDocument=this,t.appendData(e),t},createProcessingInstruction:function(e,t){var r=new $;return r.ownerDocument=this,r.tagName=r.target=e,r.nodeValue=r.data=t,r},createAttribute:function(e){var t=new L;return t.ownerDocument=this,t.name=e,t.nodeName=e,t.localName=e,t.specified=!0,t},createEntityReference:function(e){var t=new W;return t.ownerDocument=this,t.nodeName=e,t},createElementNS:function(e,t){var r=new F,i=t.split(":"),n=r.attributes=new T;return r.childNodes=new k,r.ownerDocument=this,r.nodeName=t,r.tagName=t,r.namespaceURI=e,2==i.length?(r.prefix=i[0],r.localName=i[1]):r.localName=t,n._ownerElement=r,r},createAttributeNS:function(e,t){var r=new L,i=t.split(":");return r.ownerDocument=this,r.nodeName=t,r.name=t,r.namespaceURI=e,r.specified=!0,2==i.length?(r.prefix=i[0],r.localName=i[1]):r.localName=t,r}},i(P,B),F.prototype={nodeType:o,hasAttribute:function(e){return null!=this.getAttributeNode(e)},getAttribute:function(e){var t=this.getAttributeNode(e);return t&&t.value||""},getAttributeNode:function(e){return this.attributes.getNamedItem(e)},setAttribute:function(e,t){var r=this.ownerDocument.createAttribute(e);r.value=r.nodeValue=""+t,this.setAttributeNode(r)},removeAttribute:function(e){var t=this.getAttributeNode(e);t&&this.removeAttributeNode(t)},appendChild:function(e){return e.nodeType===m?this.insertBefore(e,null):function(e,t){var r=t.parentNode;if(r){var i=e.lastChild;r.removeChild(t),i=e.lastChild}return i=e.lastChild,t.parentNode=e,t.previousSibling=i,t.nextSibling=null,i?i.nextSibling=t:e.firstChild=t,e.lastChild=t,U(e.ownerDocument,e,t),t}(this,e)},setAttributeNode:function(e){return this.attributes.setNamedItem(e)},setAttributeNodeNS:function(e){return this.attributes.setNamedItemNS(e)},removeAttributeNode:function(e){return this.attributes.removeNamedItem(e.nodeName)},removeAttributeNS:function(e,t){var r=this.getAttributeNodeNS(e,t);r&&this.removeAttributeNode(r)},hasAttributeNS:function(e,t){return null!=this.getAttributeNodeNS(e,t)},getAttributeNS:function(e,t){var r=this.getAttributeNodeNS(e,t);return r&&r.value||""},setAttributeNS:function(e,t,r){var i=this.ownerDocument.createAttributeNS(e,t);i.value=i.nodeValue=""+r,this.setAttributeNode(i)},getAttributeNodeNS:function(e,t){return this.attributes.getNamedItemNS(e,t)},getElementsByTagName:function(e){return new E(this,function(t){var r=[];return R(t,function(i){i===t||i.nodeType!=o||"*"!==e&&i.tagName!=e||r.push(i)}),r})},getElementsByTagNameNS:function(e,t){return new E(this,function(r){var i=[];return R(r,function(n){n===r||n.nodeType!==o||"*"!==e&&n.namespaceURI!==e||"*"!==t&&n.localName!=t||i.push(n)}),i})}},P.prototype.getElementsByTagName=F.prototype.getElementsByTagName,P.prototype.getElementsByTagNameNS=F.prototype.getElementsByTagNameNS,i(F,B),L.prototype.nodeType=s,i(L,B),K.prototype={data:"",substringData:function(e,t){return this.data.substring(e,e+t)},appendData:function(e){e=this.data+e,this.nodeValue=this.data=e,this.length=e.length},insertData:function(e,t){this.replaceData(e,0,t)},appendChild:function(e){throw new Error(y[v])},deleteData:function(e,t){this.replaceData(e,t,"")},replaceData:function(e,t,r){r=this.data.substring(0,e)+r+this.data.substring(e+t),this.nodeValue=this.data=r,this.length=r.length}},i(K,B),V.prototype={nodeName:"#text",nodeType:c,splitText:function(e){var t=this.data,r=t.substring(e);t=t.substring(0,e),this.data=this.nodeValue=t,this.length=t.length;var i=this.ownerDocument.createTextNode(r);return this.parentNode&&this.parentNode.insertBefore(i,this.nextSibling),i}},i(V,K),q.prototype={nodeName:"#comment",nodeType:d},i(q,K),z.prototype={nodeName:"#cdata-section",nodeType:l},i(z,K),Z.prototype.nodeType=p,i(Z,B),Y.prototype.nodeType=b,i(Y,B),H.prototype.nodeType=u,i(H,B),W.prototype.nodeType=f,i(W,B),X.prototype.nodeName="#document-fragment",X.prototype.nodeType=m,i(X,B),$.prototype.nodeType=h,i($,B),J.prototype.serializeToString=function(e,t,r){return Q.call(e,t,r)},B.prototype.toString=Q;try{if(Object.defineProperty){Object.defineProperty(E.prototype,"length",{get:function(){return S(this),this.$$length}}),Object.defineProperty(B.prototype,"textContent",{get:function(){return function e(t){switch(t.nodeType){case o:case m:var r=[];for(t=t.firstChild;t;)7!==t.nodeType&&8!==t.nodeType&&r.push(e(t)),t=t.nextSibling;return r.join("");default:return t.nodeValue}}(this)},set:function(e){switch(this.nodeType){case o:case m:for(;this.firstChild;)this.removeChild(this.firstChild);(e||String(e))&&this.appendChild(this.ownerDocument.createTextNode(e));break;default:this.data=e,this.value=e,this.nodeValue=e}}}),re=function(e,t,r){e["$$"+t]=r}}}catch(e){}t.DOMImplementation=C,t.XMLSerializer=J},function(e,t,r){"use strict";var i,n={315:"Artist",258:"BitsPerSample",265:"CellLength",264:"CellWidth",320:"ColorMap",259:"Compression",33432:"Copyright",306:"DateTime",338:"ExtraSamples",266:"FillOrder",289:"FreeByteCounts",288:"FreeOffsets",291:"GrayResponseCurve",290:"GrayResponseUnit",316:"HostComputer",270:"ImageDescription",257:"ImageLength",256:"ImageWidth",271:"Make",281:"MaxSampleValue",280:"MinSampleValue",272:"Model",254:"NewSubfileType",274:"Orientation",262:"PhotometricInterpretation",284:"PlanarConfiguration",296:"ResolutionUnit",278:"RowsPerStrip",277:"SamplesPerPixel",305:"Software",279:"StripByteCounts",273:"StripOffsets",255:"SubfileType",263:"Threshholding",282:"XResolution",283:"YResolution",326:"BadFaxLines",327:"CleanFaxData",343:"ClipPath",328:"ConsecutiveBadFaxLines",433:"Decode",434:"DefaultImageColor",269:"DocumentName",336:"DotRange",321:"HalftoneHints",346:"Indexed",347:"JPEGTables",285:"PageName",297:"PageNumber",317:"Predictor",319:"PrimaryChromaticities",532:"ReferenceBlackWhite",339:"SampleFormat",340:"SMinSampleValue",341:"SMaxSampleValue",559:"StripRowCounts",330:"SubIFDs",292:"T4Options",293:"T6Options",325:"TileByteCounts",323:"TileLength",324:"TileOffsets",322:"TileWidth",301:"TransferFunction",318:"WhitePoint",344:"XClipPathUnits",286:"XPosition",529:"YCbCrCoefficients",531:"YCbCrPositioning",530:"YCbCrSubSampling",345:"YClipPathUnits",287:"YPosition",37378:"ApertureValue",40961:"ColorSpace",36868:"DateTimeDigitized",36867:"DateTimeOriginal",34665:"Exif IFD",36864:"ExifVersion",33434:"ExposureTime",41728:"FileSource",37385:"Flash",40960:"FlashpixVersion",33437:"FNumber",42016:"ImageUniqueID",37384:"LightSource",37500:"MakerNote",37377:"ShutterSpeedValue",37510:"UserComment",33723:"IPTC",34675:"ICC Profile",700:"XMP",42112:"GDAL_METADATA",42113:"GDAL_NODATA",34377:"Photoshop",33550:"ModelPixelScale",33922:"ModelTiepoint",34264:"ModelTransformation",34735:"GeoKeyDirectory",34736:"GeoDoubleParams",34737:"GeoAsciiParams"},a={};for(i in n)a[n[i]]=parseInt(i);var o=[a.BitsPerSample,a.ExtraSamples,a.SampleFormat,a.StripByteCounts,a.StripOffsets,a.StripRowCounts,a.TileByteCounts,a.TileOffsets],s={1:"BYTE",2:"ASCII",3:"SHORT",4:"LONG",5:"RATIONAL",6:"SBYTE",7:"UNDEFINED",8:"SSHORT",9:"SLONG",10:"SRATIONAL",11:"FLOAT",12:"DOUBLE",16:"LONG8",17:"SLONG8",18:"IFD8"},c={};for(i in s)c[s[i]]=parseInt(i);var l,f={1024:"GTModelTypeGeoKey",1025:"GTRasterTypeGeoKey",1026:"GTCitationGeoKey",2048:"GeographicTypeGeoKey",2049:"GeogCitationGeoKey",2050:"GeogGeodeticDatumGeoKey",2051:"GeogPrimeMeridianGeoKey",2052:"GeogLinearUnitsGeoKey",2053:"GeogLinearUnitSizeGeoKey",2054:"GeogAngularUnitsGeoKey",2055:"GeogAngularUnitSizeGeoKey",2056:"GeogEllipsoidGeoKey",2057:"GeogSemiMajorAxisGeoKey",2058:"GeogSemiMinorAxisGeoKey",2059:"GeogInvFlatteningGeoKey",2060:"GeogAzimuthUnitsGeoKey",2061:"GeogPrimeMeridianLongGeoKey",2062:"GeogTOWGS84GeoKey",3072:"ProjectedCSTypeGeoKey",3073:"PCSCitationGeoKey",3074:"ProjectionGeoKey",3075:"ProjCoordTransGeoKey",3076:"ProjLinearUnitsGeoKey",3077:"ProjLinearUnitSizeGeoKey",3078:"ProjStdParallel1GeoKey",3079:"ProjStdParallel2GeoKey",3080:"ProjNatOriginLongGeoKey",3081:"ProjNatOriginLatGeoKey",3082:"ProjFalseEastingGeoKey",3083:"ProjFalseNorthingGeoKey",3084:"ProjFalseOriginLongGeoKey",3085:"ProjFalseOriginLatGeoKey",3086:"ProjFalseOriginEastingGeoKey",3087:"ProjFalseOriginNorthingGeoKey",3088:"ProjCenterLongGeoKey",3089:"ProjCenterLatGeoKey",3090:"ProjCenterEastingGeoKey",3091:"ProjCenterNorthingGeoKey",3092:"ProjScaleAtNatOriginGeoKey",3093:"ProjScaleAtCenterGeoKey",3094:"ProjAzimuthAngleGeoKey",3095:"ProjStraightVertPoleLongGeoKey",3096:"ProjRectifiedGridAngleGeoKey",4096:"VerticalCSTypeGeoKey",4097:"VerticalCitationGeoKey",4098:"VerticalDatumGeoKey",4099:"VerticalUnitsGeoKey"},u={};for(i in f)u[f[i]]=parseInt(i);"undefined"==typeof window?l=function(e){return(new(0,r(24).DOMParser)).parseFromString(e,"text/xml")}:void 0!==window.DOMParser?l=function(e){return(new window.DOMParser).parseFromString(e,"text/xml")}:void 0!==window.ActiveXObject&&new window.ActiveXObject("Microsoft.XMLDOM")&&(l=function(e){var t=new window.ActiveXObject("Microsoft.XMLDOM");return t.async="false",t.loadXML(e),t}),e.exports={fieldTags:a,fieldTagNames:n,arrayFields:o,fieldTypes:c,fieldTypeNames:s,photometricInterpretations:{WhiteIsZero:0,BlackIsZero:1,RGB:2,Palette:3,TransparencyMask:4,CMYK:5,YCbCr:6,CIELab:8,ICCLab:9},geoKeys:u,geoKeyNames:f,parseXml:l}},function(e,t,r){"use strict";var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}();var n=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._dataView=new DataView(t)}return i(e,[{key:"getUint64",value:function(e,t){var r=this.getUint32(e,t),i=this.getUint32(e+4,t);return t?r<<32|i:i<<32|r}},{key:"getInt64",value:function(e,t){var r;return t?(r=this.getInt32(e,t))<<32|this.getUint32(e+4,t):(r=this.getUint32(e,t),this.getInt32(e+4,t)<<32|r)}},{key:"getUint8",value:function(e,t){return this._dataView.getUint8(e,t)}},{key:"getInt8",value:function(e,t){return this._dataView.getInt8(e,t)}},{key:"getUint16",value:function(e,t){return this._dataView.getUint16(e,t)}},{key:"getInt16",value:function(e,t){return this._dataView.getInt16(e,t)}},{key:"getUint32",value:function(e,t){return this._dataView.getUint32(e,t)}},{key:"getInt32",value:function(e,t){return this._dataView.getInt32(e,t)}},{key:"getFloat32",value:function(e,t){return this._dataView.getFloat32(e,t)}},{key:"getFloat64",value:function(e,t){return this._dataView.getFloat64(e,t)}},{key:"buffer",get:function(){return this._dataView.buffer}}]),e}();e.exports=n},function(e,t,r){"use strict";function i(e,t,r){var i=e.length;i-=t;var n=0;do{for(var a=t;a>0;a--)e[n+t]+=e[n],n++;i-=t}while(i>0)}function n(e,t,r){for(var i,n=0,a=e.length,o=a/r;a>t;){for(i=t;i>0;--i)e[n+t]+=e[n],++n;a-=t}var s=e.slice();for(i=0;i<o;++i)for(var c=0;c<r;++c)e[r*i+c]=s[(r-c-1)*o+i]}e.exports={applyPredictor:function(e,t,r,a,o){var s,c;if(!t||1===t)return e;for(s=0;s<o.length;++s){if(o[s]%8!=0)throw new Error("When decoding with predictor, only multiple of 8 bits are supported.");if(o[s]!==o[0])throw new Error("When decoding with predictor, all samples must have the same size.")}var l=o[0]/8,f=o.length;for(s=0;s<a;++s)if(2===t){switch(o[0]){case 8:c=new Uint8Array(e,s*f*r*l,f*r*l);break;case 16:c=new Uint16Array(e,s*f*r*l,f*r*l/2);break;case 32:c=new Uint32Array(e,s*f*r*l,f*r*l/4);break;default:throw new Error("Predictor 2 not allowed with "+o[0]+" bits per sample.")}i(c,f)}else 3===t&&n(c=new Uint8Array(e,s*f*r*l,r*l),f,l);return e}}},function(e,t,r){"use strict";var i=r(1);function n(){}n.prototype=Object.create(i.prototype),n.prototype.constructor=n,n.prototype.decodeBlock=function(e){var t,r,i=new DataView(e),n=[];for(t=0;t<e.byteLength;++t){var a=i.getInt8(t);if(a<0){var o=i.getUint8(t+1);for(a=-a,r=0;r<=a;++r)n.push(o);t+=1}else{for(r=0;r<=a;++r)n.push(i.getUint8(t+r+1));t+=a+1}}return new Uint8Array(n).buffer},e.exports=n},function(e,t,r){"use strict";e.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},function(e,t,r){"use strict";e.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},function(e,t,r){"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},function(e,t,r){"use strict";e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},function(e,t,r){"use strict";var i=r(0),n=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch(e){n=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){a=!1}for(var o=new i.Buf8(256),s=0;s<256;s++)o[s]=s>=252?6:s>=248?5:s>=240?4:s>=224?3:s>=192?2:1;function c(e,t){if(t<65537&&(e.subarray&&a||!e.subarray&&n))return String.fromCharCode.apply(null,i.shrinkBuf(e,t));for(var r="",o=0;o<t;o++)r+=String.fromCharCode(e[o]);return r}o[254]=o[254]=1,t.string2buf=function(e){var t,r,n,a,o,s=e.length,c=0;for(a=0;a<s;a++)55296==(64512&(r=e.charCodeAt(a)))&&a+1<s&&56320==(64512&(n=e.charCodeAt(a+1)))&&(r=65536+(r-55296<<10)+(n-56320),a++),c+=r<128?1:r<2048?2:r<65536?3:4;for(t=new i.Buf8(c),o=0,a=0;o<c;a++)55296==(64512&(r=e.charCodeAt(a)))&&a+1<s&&56320==(64512&(n=e.charCodeAt(a+1)))&&(r=65536+(r-55296<<10)+(n-56320),a++),r<128?t[o++]=r:r<2048?(t[o++]=192|r>>>6,t[o++]=128|63&r):r<65536?(t[o++]=224|r>>>12,t[o++]=128|r>>>6&63,t[o++]=128|63&r):(t[o++]=240|r>>>18,t[o++]=128|r>>>12&63,t[o++]=128|r>>>6&63,t[o++]=128|63&r);return t},t.buf2binstring=function(e){return c(e,e.length)},t.binstring2buf=function(e){for(var t=new i.Buf8(e.length),r=0,n=t.length;r<n;r++)t[r]=e.charCodeAt(r);return t},t.buf2string=function(e,t){var r,i,n,a,s=t||e.length,l=new Array(2*s);for(i=0,r=0;r<s;)if((n=e[r++])<128)l[i++]=n;else if((a=o[n])>4)l[i++]=65533,r+=a-1;else{for(n&=2===a?31:3===a?15:7;a>1&&r<s;)n=n<<6|63&e[r++],a--;a>1?l[i++]=65533:n<65536?l[i++]=n:(n-=65536,l[i++]=55296|n>>10&1023,l[i++]=56320|1023&n)}return c(l,i)},t.utf8border=function(e,t){var r;for((t=t||e.length)>e.length&&(t=e.length),r=t-1;r>=0&&128==(192&e[r]);)r--;return r<0?t:0===r?t:r+o[e[r]]>t?r:t}},function(e,t,r){"use strict";var i=r(0),n=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],a=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],o=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],s=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(e,t,r,c,l,f,u,h){var d,g,p,m,b,w,y,v,_,x=h.bits,A=0,k=0,E=0,S=0,T=0,D=0,I=0,N=0,C=0,B=0,O=null,R=0,P=new i.Buf16(16),M=new i.Buf16(16),U=null,j=0;for(A=0;A<=15;A++)P[A]=0;for(k=0;k<c;k++)P[t[r+k]]++;for(T=x,S=15;S>=1&&0===P[S];S--);if(T>S&&(T=S),0===S)return l[f++]=20971520,l[f++]=20971520,h.bits=1,0;for(E=1;E<S&&0===P[E];E++);for(T<E&&(T=E),N=1,A=1;A<=15;A++)if(N<<=1,(N-=P[A])<0)return-1;if(N>0&&(0===e||1!==S))return-1;for(M[1]=0,A=1;A<15;A++)M[A+1]=M[A]+P[A];for(k=0;k<c;k++)0!==t[r+k]&&(u[M[t[r+k]]++]=k);if(0===e?(O=U=u,w=19):1===e?(O=n,R-=257,U=a,j-=257,w=256):(O=o,U=s,w=-1),B=0,k=0,A=E,b=f,D=T,I=0,p=-1,m=(C=1<<T)-1,1===e&&C>852||2===e&&C>592)return 1;for(;;){y=A-I,u[k]<w?(v=0,_=u[k]):u[k]>w?(v=U[j+u[k]],_=O[R+u[k]]):(v=96,_=0),d=1<<A-I,E=g=1<<D;do{l[b+(B>>I)+(g-=d)]=y<<24|v<<16|_|0}while(0!==g);for(d=1<<A-1;B&d;)d>>=1;if(0!==d?(B&=d-1,B+=d):B=0,k++,0==--P[A]){if(A===S)break;A=t[r+u[k]]}if(A>T&&(B&m)!==p){for(0===I&&(I=T),b+=E,N=1<<(D=A-I);D+I<S&&!((N-=P[D+I])<=0);)D++,N<<=1;if(C+=1<<D,1===e&&C>852||2===e&&C>592)return 1;l[p=B&m]=T<<24|D<<16|b-f|0}}return 0!==B&&(l[b+B]=A-I<<24|64<<16|0),h.bits=T,0}},function(e,t,r){"use strict";e.exports=function(e,t){var r,i,n,a,o,s,c,l,f,u,h,d,g,p,m,b,w,y,v,_,x,A,k,E,S;r=e.state,i=e.next_in,E=e.input,n=i+(e.avail_in-5),a=e.next_out,S=e.output,o=a-(t-e.avail_out),s=a+(e.avail_out-257),c=r.dmax,l=r.wsize,f=r.whave,u=r.wnext,h=r.window,d=r.hold,g=r.bits,p=r.lencode,m=r.distcode,b=(1<<r.lenbits)-1,w=(1<<r.distbits)-1;e:do{g<15&&(d+=E[i++]<<g,g+=8,d+=E[i++]<<g,g+=8),y=p[d&b];t:for(;;){if(d>>>=v=y>>>24,g-=v,0===(v=y>>>16&255))S[a++]=65535&y;else{if(!(16&v)){if(0==(64&v)){y=p[(65535&y)+(d&(1<<v)-1)];continue t}if(32&v){r.mode=12;break e}e.msg="invalid literal/length code",r.mode=30;break e}_=65535&y,(v&=15)&&(g<v&&(d+=E[i++]<<g,g+=8),_+=d&(1<<v)-1,d>>>=v,g-=v),g<15&&(d+=E[i++]<<g,g+=8,d+=E[i++]<<g,g+=8),y=m[d&w];r:for(;;){if(d>>>=v=y>>>24,g-=v,!(16&(v=y>>>16&255))){if(0==(64&v)){y=m[(65535&y)+(d&(1<<v)-1)];continue r}e.msg="invalid distance code",r.mode=30;break e}if(x=65535&y,g<(v&=15)&&(d+=E[i++]<<g,(g+=8)<v&&(d+=E[i++]<<g,g+=8)),(x+=d&(1<<v)-1)>c){e.msg="invalid distance too far back",r.mode=30;break e}if(d>>>=v,g-=v,x>(v=a-o)){if((v=x-v)>f&&r.sane){e.msg="invalid distance too far back",r.mode=30;break e}if(A=0,k=h,0===u){if(A+=l-v,v<_){_-=v;do{S[a++]=h[A++]}while(--v);A=a-x,k=S}}else if(u<v){if(A+=l+u-v,(v-=u)<_){_-=v;do{S[a++]=h[A++]}while(--v);if(A=0,u<_){_-=v=u;do{S[a++]=h[A++]}while(--v);A=a-x,k=S}}}else if(A+=u-v,v<_){_-=v;do{S[a++]=h[A++]}while(--v);A=a-x,k=S}for(;_>2;)S[a++]=k[A++],S[a++]=k[A++],S[a++]=k[A++],_-=3;_&&(S[a++]=k[A++],_>1&&(S[a++]=k[A++]))}else{A=a-x;do{S[a++]=S[A++],S[a++]=S[A++],S[a++]=S[A++],_-=3}while(_>2);_&&(S[a++]=S[A++],_>1&&(S[a++]=S[A++]))}break}}break}}while(i<n&&a<s);i-=_=g>>3,d&=(1<<(g-=_<<3))-1,e.next_in=i,e.next_out=a,e.avail_in=i<n?n-i+5:5-(i-n),e.avail_out=a<s?s-a+257:257-(a-s),r.hold=d,r.bits=g}},function(e,t,r){"use strict";var i=function(){for(var e,t=[],r=0;r<256;r++){e=r;for(var i=0;i<8;i++)e=1&e?3988292384^e>>>1:e>>>1;t[r]=e}return t}();e.exports=function(e,t,r,n){var a=i,o=n+r;e^=-1;for(var s=n;s<o;s++)e=e>>>8^a[255&(e^t[s])];return-1^e}},function(e,t,r){"use strict";e.exports=function(e,t,r,i){for(var n=65535&e|0,a=e>>>16&65535|0,o=0;0!==r;){r-=o=r>2e3?2e3:r;do{a=a+(n=n+t[i++]|0)|0}while(--o);n%=65521,a%=65521}return n|a<<16|0}},function(e,t,r){"use strict";var i=r(0),n=r(15),a=r(14),o=r(13),s=r(12),c=0,l=1,f=2,u=4,h=5,d=6,g=0,p=1,m=2,b=-2,w=-3,y=-4,v=-5,_=8,x=1,A=2,k=3,E=4,S=5,T=6,D=7,I=8,N=9,C=10,B=11,O=12,R=13,P=14,M=15,U=16,j=17,G=18,F=19,L=20,K=21,V=22,q=23,z=24,Z=25,Y=26,H=27,W=28,X=29,$=30,J=31,Q=32,ee=852,te=592,re=15;function ie(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function ne(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=x,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new i.Buf32(ee),t.distcode=t.distdyn=new i.Buf32(te),t.sane=1,t.back=-1,g):b}function ae(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,ne(e)):b}function oe(e,t){var r,i;return e&&e.state?(i=e.state,t<0?(r=0,t=-t):(r=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?b:(null!==i.window&&i.wbits!==t&&(i.window=null),i.wrap=r,i.wbits=t,ae(e))):b}function se(e,t){var r,n;return e?(n=new function(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new i.Buf16(320),this.work=new i.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0},e.state=n,n.window=null,(r=oe(e,t))!==g&&(e.state=null),r):b}var ce,le,fe=!0;function ue(e){if(fe){var t;for(ce=new i.Buf32(512),le=new i.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(s(l,e.lens,0,288,ce,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;s(f,e.lens,0,32,le,0,e.work,{bits:5}),fe=!1}e.lencode=ce,e.lenbits=9,e.distcode=le,e.distbits=5}function he(e,t,r,n){var a,o=e.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new i.Buf8(o.wsize)),n>=o.wsize?(i.arraySet(o.window,t,r-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):((a=o.wsize-o.wnext)>n&&(a=n),i.arraySet(o.window,t,r-n,a,o.wnext),(n-=a)?(i.arraySet(o.window,t,r-n,n,0),o.wnext=n,o.whave=o.wsize):(o.wnext+=a,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=a))),0}t.inflateReset=ae,t.inflateReset2=oe,t.inflateResetKeep=ne,t.inflateInit=function(e){return se(e,re)},t.inflateInit2=se,t.inflate=function(e,t){var r,ee,te,re,ne,ae,oe,se,ce,le,fe,de,ge,pe,me,be,we,ye,ve,_e,xe,Ae,ke,Ee,Se=0,Te=new i.Buf8(4),De=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return b;(r=e.state).mode===O&&(r.mode=R),ne=e.next_out,te=e.output,oe=e.avail_out,re=e.next_in,ee=e.input,ae=e.avail_in,se=r.hold,ce=r.bits,le=ae,fe=oe,Ae=g;e:for(;;)switch(r.mode){case x:if(0===r.wrap){r.mode=R;break}for(;ce<16;){if(0===ae)break e;ae--,se+=ee[re++]<<ce,ce+=8}if(2&r.wrap&&35615===se){r.check=0,Te[0]=255&se,Te[1]=se>>>8&255,r.check=a(r.check,Te,2,0),se=0,ce=0,r.mode=A;break}if(r.flags=0,r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&se)<<8)+(se>>8))%31){e.msg="incorrect header check",r.mode=$;break}if((15&se)!==_){e.msg="unknown compression method",r.mode=$;break}if(ce-=4,xe=8+(15&(se>>>=4)),0===r.wbits)r.wbits=xe;else if(xe>r.wbits){e.msg="invalid window size",r.mode=$;break}r.dmax=1<<xe,e.adler=r.check=1,r.mode=512&se?C:O,se=0,ce=0;break;case A:for(;ce<16;){if(0===ae)break e;ae--,se+=ee[re++]<<ce,ce+=8}if(r.flags=se,(255&r.flags)!==_){e.msg="unknown compression method",r.mode=$;break}if(57344&r.flags){e.msg="unknown header flags set",r.mode=$;break}r.head&&(r.head.text=se>>8&1),512&r.flags&&(Te[0]=255&se,Te[1]=se>>>8&255,r.check=a(r.check,Te,2,0)),se=0,ce=0,r.mode=k;case k:for(;ce<32;){if(0===ae)break e;ae--,se+=ee[re++]<<ce,ce+=8}r.head&&(r.head.time=se),512&r.flags&&(Te[0]=255&se,Te[1]=se>>>8&255,Te[2]=se>>>16&255,Te[3]=se>>>24&255,r.check=a(r.check,Te,4,0)),se=0,ce=0,r.mode=E;case E:for(;ce<16;){if(0===ae)break e;ae--,se+=ee[re++]<<ce,ce+=8}r.head&&(r.head.xflags=255&se,r.head.os=se>>8),512&r.flags&&(Te[0]=255&se,Te[1]=se>>>8&255,r.check=a(r.check,Te,2,0)),se=0,ce=0,r.mode=S;case S:if(1024&r.flags){for(;ce<16;){if(0===ae)break e;ae--,se+=ee[re++]<<ce,ce+=8}r.length=se,r.head&&(r.head.extra_len=se),512&r.flags&&(Te[0]=255&se,Te[1]=se>>>8&255,r.check=a(r.check,Te,2,0)),se=0,ce=0}else r.head&&(r.head.extra=null);r.mode=T;case T:if(1024&r.flags&&((de=r.length)>ae&&(de=ae),de&&(r.head&&(xe=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Array(r.head.extra_len)),i.arraySet(r.head.extra,ee,re,de,xe)),512&r.flags&&(r.check=a(r.check,ee,de,re)),ae-=de,re+=de,r.length-=de),r.length))break e;r.length=0,r.mode=D;case D:if(2048&r.flags){if(0===ae)break e;de=0;do{xe=ee[re+de++],r.head&&xe&&r.length<65536&&(r.head.name+=String.fromCharCode(xe))}while(xe&&de<ae);if(512&r.flags&&(r.check=a(r.check,ee,de,re)),ae-=de,re+=de,xe)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=I;case I:if(4096&r.flags){if(0===ae)break e;de=0;do{xe=ee[re+de++],r.head&&xe&&r.length<65536&&(r.head.comment+=String.fromCharCode(xe))}while(xe&&de<ae);if(512&r.flags&&(r.check=a(r.check,ee,de,re)),ae-=de,re+=de,xe)break e}else r.head&&(r.head.comment=null);r.mode=N;case N:if(512&r.flags){for(;ce<16;){if(0===ae)break e;ae--,se+=ee[re++]<<ce,ce+=8}if(se!==(65535&r.check)){e.msg="header crc mismatch",r.mode=$;break}se=0,ce=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=O;break;case C:for(;ce<32;){if(0===ae)break e;ae--,se+=ee[re++]<<ce,ce+=8}e.adler=r.check=ie(se),se=0,ce=0,r.mode=B;case B:if(0===r.havedict)return e.next_out=ne,e.avail_out=oe,e.next_in=re,e.avail_in=ae,r.hold=se,r.bits=ce,m;e.adler=r.check=1,r.mode=O;case O:if(t===h||t===d)break e;case R:if(r.last){se>>>=7&ce,ce-=7&ce,r.mode=H;break}for(;ce<3;){if(0===ae)break e;ae--,se+=ee[re++]<<ce,ce+=8}switch(r.last=1&se,ce-=1,3&(se>>>=1)){case 0:r.mode=P;break;case 1:if(ue(r),r.mode=L,t===d){se>>>=2,ce-=2;break e}break;case 2:r.mode=j;break;case 3:e.msg="invalid block type",r.mode=$}se>>>=2,ce-=2;break;case P:for(se>>>=7&ce,ce-=7&ce;ce<32;){if(0===ae)break e;ae--,se+=ee[re++]<<ce,ce+=8}if((65535&se)!=(se>>>16^65535)){e.msg="invalid stored block lengths",r.mode=$;break}if(r.length=65535&se,se=0,ce=0,r.mode=M,t===d)break e;case M:r.mode=U;case U:if(de=r.length){if(de>ae&&(de=ae),de>oe&&(de=oe),0===de)break e;i.arraySet(te,ee,re,de,ne),ae-=de,re+=de,oe-=de,ne+=de,r.length-=de;break}r.mode=O;break;case j:for(;ce<14;){if(0===ae)break e;ae--,se+=ee[re++]<<ce,ce+=8}if(r.nlen=257+(31&se),se>>>=5,ce-=5,r.ndist=1+(31&se),se>>>=5,ce-=5,r.ncode=4+(15&se),se>>>=4,ce-=4,r.nlen>286||r.ndist>30){e.msg="too many length or distance symbols",r.mode=$;break}r.have=0,r.mode=G;case G:for(;r.have<r.ncode;){for(;ce<3;){if(0===ae)break e;ae--,se+=ee[re++]<<ce,ce+=8}r.lens[De[r.have++]]=7&se,se>>>=3,ce-=3}for(;r.have<19;)r.lens[De[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,ke={bits:r.lenbits},Ae=s(c,r.lens,0,19,r.lencode,0,r.work,ke),r.lenbits=ke.bits,Ae){e.msg="invalid code lengths set",r.mode=$;break}r.have=0,r.mode=F;case F:for(;r.have<r.nlen+r.ndist;){for(;be=(Se=r.lencode[se&(1<<r.lenbits)-1])>>>16&255,we=65535&Se,!((me=Se>>>24)<=ce);){if(0===ae)break e;ae--,se+=ee[re++]<<ce,ce+=8}if(we<16)se>>>=me,ce-=me,r.lens[r.have++]=we;else{if(16===we){for(Ee=me+2;ce<Ee;){if(0===ae)break e;ae--,se+=ee[re++]<<ce,ce+=8}if(se>>>=me,ce-=me,0===r.have){e.msg="invalid bit length repeat",r.mode=$;break}xe=r.lens[r.have-1],de=3+(3&se),se>>>=2,ce-=2}else if(17===we){for(Ee=me+3;ce<Ee;){if(0===ae)break e;ae--,se+=ee[re++]<<ce,ce+=8}ce-=me,xe=0,de=3+(7&(se>>>=me)),se>>>=3,ce-=3}else{for(Ee=me+7;ce<Ee;){if(0===ae)break e;ae--,se+=ee[re++]<<ce,ce+=8}ce-=me,xe=0,de=11+(127&(se>>>=me)),se>>>=7,ce-=7}if(r.have+de>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=$;break}for(;de--;)r.lens[r.have++]=xe}}if(r.mode===$)break;if(0===r.lens[256]){e.msg="invalid code -- missing end-of-block",r.mode=$;break}if(r.lenbits=9,ke={bits:r.lenbits},Ae=s(l,r.lens,0,r.nlen,r.lencode,0,r.work,ke),r.lenbits=ke.bits,Ae){e.msg="invalid literal/lengths set",r.mode=$;break}if(r.distbits=6,r.distcode=r.distdyn,ke={bits:r.distbits},Ae=s(f,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,ke),r.distbits=ke.bits,Ae){e.msg="invalid distances set",r.mode=$;break}if(r.mode=L,t===d)break e;case L:r.mode=K;case K:if(ae>=6&&oe>=258){e.next_out=ne,e.avail_out=oe,e.next_in=re,e.avail_in=ae,r.hold=se,r.bits=ce,o(e,fe),ne=e.next_out,te=e.output,oe=e.avail_out,re=e.next_in,ee=e.input,ae=e.avail_in,se=r.hold,ce=r.bits,r.mode===O&&(r.back=-1);break}for(r.back=0;be=(Se=r.lencode[se&(1<<r.lenbits)-1])>>>16&255,we=65535&Se,!((me=Se>>>24)<=ce);){if(0===ae)break e;ae--,se+=ee[re++]<<ce,ce+=8}if(be&&0==(240&be)){for(ye=me,ve=be,_e=we;be=(Se=r.lencode[_e+((se&(1<<ye+ve)-1)>>ye)])>>>16&255,we=65535&Se,!(ye+(me=Se>>>24)<=ce);){if(0===ae)break e;ae--,se+=ee[re++]<<ce,ce+=8}se>>>=ye,ce-=ye,r.back+=ye}if(se>>>=me,ce-=me,r.back+=me,r.length=we,0===be){r.mode=Y;break}if(32&be){r.back=-1,r.mode=O;break}if(64&be){e.msg="invalid literal/length code",r.mode=$;break}r.extra=15&be,r.mode=V;case V:if(r.extra){for(Ee=r.extra;ce<Ee;){if(0===ae)break e;ae--,se+=ee[re++]<<ce,ce+=8}r.length+=se&(1<<r.extra)-1,se>>>=r.extra,ce-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=q;case q:for(;be=(Se=r.distcode[se&(1<<r.distbits)-1])>>>16&255,we=65535&Se,!((me=Se>>>24)<=ce);){if(0===ae)break e;ae--,se+=ee[re++]<<ce,ce+=8}if(0==(240&be)){for(ye=me,ve=be,_e=we;be=(Se=r.distcode[_e+((se&(1<<ye+ve)-1)>>ye)])>>>16&255,we=65535&Se,!(ye+(me=Se>>>24)<=ce);){if(0===ae)break e;ae--,se+=ee[re++]<<ce,ce+=8}se>>>=ye,ce-=ye,r.back+=ye}if(se>>>=me,ce-=me,r.back+=me,64&be){e.msg="invalid distance code",r.mode=$;break}r.offset=we,r.extra=15&be,r.mode=z;case z:if(r.extra){for(Ee=r.extra;ce<Ee;){if(0===ae)break e;ae--,se+=ee[re++]<<ce,ce+=8}r.offset+=se&(1<<r.extra)-1,se>>>=r.extra,ce-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=$;break}r.mode=Z;case Z:if(0===oe)break e;if(de=fe-oe,r.offset>de){if((de=r.offset-de)>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=$;break}de>r.wnext?(de-=r.wnext,ge=r.wsize-de):ge=r.wnext-de,de>r.length&&(de=r.length),pe=r.window}else pe=te,ge=ne-r.offset,de=r.length;de>oe&&(de=oe),oe-=de,r.length-=de;do{te[ne++]=pe[ge++]}while(--de);0===r.length&&(r.mode=K);break;case Y:if(0===oe)break e;te[ne++]=r.length,oe--,r.mode=K;break;case H:if(r.wrap){for(;ce<32;){if(0===ae)break e;ae--,se|=ee[re++]<<ce,ce+=8}if(fe-=oe,e.total_out+=fe,r.total+=fe,fe&&(e.adler=r.check=r.flags?a(r.check,te,fe,ne-fe):n(r.check,te,fe,ne-fe)),fe=oe,(r.flags?se:ie(se))!==r.check){e.msg="incorrect data check",r.mode=$;break}se=0,ce=0}r.mode=W;case W:if(r.wrap&&r.flags){for(;ce<32;){if(0===ae)break e;ae--,se+=ee[re++]<<ce,ce+=8}if(se!==(4294967295&r.total)){e.msg="incorrect length check",r.mode=$;break}se=0,ce=0}r.mode=X;case X:Ae=p;break e;case $:Ae=w;break e;case J:return y;case Q:default:return b}return e.next_out=ne,e.avail_out=oe,e.next_in=re,e.avail_in=ae,r.hold=se,r.bits=ce,(r.wsize||fe!==e.avail_out&&r.mode<$&&(r.mode<H||t!==u))&&he(e,e.output,e.next_out,fe-e.avail_out)?(r.mode=J,y):(le-=e.avail_in,fe-=e.avail_out,e.total_in+=le,e.total_out+=fe,r.total+=fe,r.wrap&&fe&&(e.adler=r.check=r.flags?a(r.check,te,fe,e.next_out-fe):n(r.check,te,fe,e.next_out-fe)),e.data_type=r.bits+(r.last?64:0)+(r.mode===O?128:0)+(r.mode===L||r.mode===M?256:0),(0===le&&0===fe||t===u)&&Ae===g&&(Ae=v),Ae)},t.inflateEnd=function(e){if(!e||!e.state)return b;var t=e.state;return t.window&&(t.window=null),e.state=null,g},t.inflateGetHeader=function(e,t){var r;return e&&e.state?0==(2&(r=e.state).wrap)?b:(r.head=t,t.done=!1,g):b},t.inflateSetDictionary=function(e,t){var r,i=t.length;return e&&e.state?0!==(r=e.state).wrap&&r.mode!==B?b:r.mode===B&&n(1,t,i,0)!==r.check?w:he(e,t,i,i)?(r.mode=J,y):(r.havedict=1,g):b},t.inflateInfo="pako inflate (from Nodeca project)"},function(e,t,r){"use strict";var i=r(16),n=r(0),a=r(11),o=r(10),s=r(9),c=r(8),l=r(7),f=Object.prototype.toString;function u(e){if(!(this instanceof u))return new u(e);this.options=n.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var r=i.inflateInit2(this.strm,t.windowBits);if(r!==o.Z_OK)throw new Error(s[r]);this.header=new l,i.inflateGetHeader(this.strm,this.header)}function h(e,t){var r=new u(t);if(r.push(e,!0),r.err)throw r.msg||s[r.err];return r.result}u.prototype.push=function(e,t){var r,s,c,l,u,h,d=this.strm,g=this.options.chunkSize,p=this.options.dictionary,m=!1;if(this.ended)return!1;s=t===~~t?t:!0===t?o.Z_FINISH:o.Z_NO_FLUSH,"string"==typeof e?d.input=a.binstring2buf(e):"[object ArrayBuffer]"===f.call(e)?d.input=new Uint8Array(e):d.input=e,d.next_in=0,d.avail_in=d.input.length;do{if(0===d.avail_out&&(d.output=new n.Buf8(g),d.next_out=0,d.avail_out=g),(r=i.inflate(d,o.Z_NO_FLUSH))===o.Z_NEED_DICT&&p&&(h="string"==typeof p?a.string2buf(p):"[object ArrayBuffer]"===f.call(p)?new Uint8Array(p):p,r=i.inflateSetDictionary(this.strm,h)),r===o.Z_BUF_ERROR&&!0===m&&(r=o.Z_OK,m=!1),r!==o.Z_STREAM_END&&r!==o.Z_OK)return this.onEnd(r),this.ended=!0,!1;d.next_out&&(0!==d.avail_out&&r!==o.Z_STREAM_END&&(0!==d.avail_in||s!==o.Z_FINISH&&s!==o.Z_SYNC_FLUSH)||("string"===this.options.to?(c=a.utf8border(d.output,d.next_out),l=d.next_out-c,u=a.buf2string(d.output,c),d.next_out=l,d.avail_out=g-l,l&&n.arraySet(d.output,d.output,c,l,0),this.onData(u)):this.onData(n.shrinkBuf(d.output,d.next_out)))),0===d.avail_in&&0===d.avail_out&&(m=!0)}while((d.avail_in>0||0===d.avail_out)&&r!==o.Z_STREAM_END);return r===o.Z_STREAM_END&&(s=o.Z_FINISH),s===o.Z_FINISH?(r=i.inflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===o.Z_OK):s!==o.Z_SYNC_FLUSH||(this.onEnd(o.Z_OK),d.avail_out=0,!0)},u.prototype.onData=function(e){this.chunks.push(e)},u.prototype.onEnd=function(e){e===o.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=n.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},t.Inflate=u,t.inflate=h,t.inflateRaw=function(e,t){return(t=t||{}).raw=!0,h(e,t)},t.ungzip=h},function(e,t,r){"use strict";var i=r(1),n=r(17).inflate;function a(){}a.prototype=Object.create(i.prototype),a.prototype.constructor=a,a.prototype.decodeBlock=function(e){return n(new Uint8Array(e)).buffer},e.exports=a},function(e,t,r){"use strict";var i=r(1),n=9,a=256,o=257;function s(e,t){for(var r=t.length-1;r>=0;r--)e.push(t[r]);return e}function c(e){for(var t=new Uint16Array(4093),r=new Uint8Array(4093),i=0;i<=257;i++)t[i]=4096,r[i]=i;var c=258,l=n,f=0;function u(){c=258,l=n}function h(e){var t=function(e,t,r){var i=t%8,n=Math.floor(t/8),a=8-i,s=t+r-8*(n+1),c=8*(n+2)-(t+r),l=8*(n+2)-t;if(c=Math.max(0,c),n>=e.length)return console.warn("ran off the end of the buffer before finding EOI_CODE (end on input code)"),o;var f=e[n]&Math.pow(2,8-i)-1,u=f<<=r-a;if(n+1<e.length){var h=e[n+1]>>>c;u+=h<<=Math.max(0,r-l)}if(s>8&&n+2<e.length){var d=8*(n+3)-(t+r);u+=e[n+2]>>>d}return u}(e,f,l);return f+=l,t}function d(e,i){return r[c]=i,t[c]=e,++c>=Math.pow(2,l)&&l++,c-1}function g(e){for(var i=[];4096!==e;)i.push(r[e]),e=t[e];return i}var p=[];u();for(var m,b=new Uint8Array(e),w=h(b);w!==o;){if(w===a){for(u(),w=h(b);w===a;)w=h(b);if(w>a)throw"corrupted code at scanline "+w;if(w===o)break;s(p,g(w)),m=w}else if(w<c){var y=g(w);s(p,y),d(m,y[y.length-1]),m=w}else{var v=g(m);if(!v)throw"Bogus entry. Not in dictionary, "+m+" / "+c+", position: "+f;s(p,v),p.push(v[v.length-1]),d(m,v[v.length-1]),m=w}c>=Math.pow(2,l)-1&&l++,w=h(b)}return new Uint8Array(p)}function l(){}l.prototype=Object.create(i.prototype),l.prototype.constructor=l,l.prototype.decodeBlock=function(e){return c(e).buffer},e.exports=l},function(e,t,r){"use strict";var i=r(1);function n(){}n.prototype=Object.create(i.prototype),n.prototype.constructor=n,n.prototype.decodeBlock=function(e){return e},e.exports=n},function(e,t,r){"use strict";var i=.95047,n=1,a=1.08883;e.exports={fromWhiteIsZero:function(e,t,r,i){for(var n,a=new Uint8Array(r*i*3),o=0,s=0;o<e.length;++o,s+=3)n=256-e[o]/t*256,a[s]=n,a[s+1]=n,a[s+2]=n;return a},fromBlackIsZero:function(e,t,r,i){for(var n,a=new Uint8Array(r*i*3),o=0,s=0;o<e.length;++o,s+=3)n=e[o]/t*256,a[s]=n,a[s+1]=n,a[s+2]=n;return a},fromPalette:function(e,t,r,i){for(var n=new Uint8Array(r*i*3),a=t.length/3,o=t.length/3*2,s=0,c=0;s<e.length;++s,c+=3){var l=e[s];n[c]=t[l]/65536*256,n[c+1]=t[l+a]/65536*256,n[c+2]=t[l+o]/65536*256}return n},fromCMYK:function(e,t,r){for(var i,n,a,o,s=new Uint8Array(t*r*3),c=0,l=0;c<e.length;c+=4,l+=3)i=e[c],n=e[c+1],a=e[c+2],o=e[c+3],s[l]=(255-i)/256*255*((255-o)/256),s[l+1]=(255-n)/256*255*((255-o)/256),s[l+2]=(255-a)/256*255*((255-o)/256);return s},fromYCbCr:function(e,t,r){for(var i,n,a,o=new Uint8Array(t*r*3),s=0,c=0;s<e.length;s+=3,c+=3)i=e[s],n=e[s+1],a=e[s+2],o[c]=i+1.402*(a-128),o[c+1]=i-.34414*(n-128)-.71414*(a-128),o[c+2]=i+1.772*(n-128);return o},fromCIELab:function(e,t,r){for(var o=new Uint8Array(t*r*3),s=0,c=0;s<e.length;s+=3,c+=3){var l,f,u,h=(e[s+0]+16)/116,d=(e[s+1]<<24>>24)/500+h,g=h-(e[s+2]<<24>>24)/200;f=-.9689*(d=i*(d*d*d>.008856?d*d*d:(d-16/116)/7.787))+1.8758*(h=n*(h*h*h>.008856?h*h*h:(h-16/116)/7.787))+.0415*(g=a*(g*g*g>.008856?g*g*g:(g-16/116)/7.787)),u=.0557*d+-.204*h+1.057*g,l=(l=3.2406*d+-1.5372*h+-.4986*g)>.0031308?1.055*Math.pow(l,1/2.4)-.055:12.92*l,f=f>.0031308?1.055*Math.pow(f,1/2.4)-.055:12.92*f,u=u>.0031308?1.055*Math.pow(u,1/2.4)-.055:12.92*u,o[c]=255*Math.max(0,Math.min(1,l)),o[c+1]=255*Math.max(0,Math.min(1,f)),o[c+2]=255*Math.max(0,Math.min(1,u))}return o}}},function(e,t,r){"use strict";var i=r(3),n=r(21),a=r(20),o=r(19),s=r(18),c=r(6),l=r(5).applyPredictor,f=function(e,t,r){for(var i=0,n=t;n<r;++n)i+=e[n];return i},u=function(e,t,r){switch(e){case 1:switch(t){case 8:return new Uint8Array(r);case 16:return new Uint16Array(r);case 32:return new Uint32Array(r)}break;case 2:switch(t){case 8:return new Int8Array(r);case 16:return new Int16Array(r);case 32:return new Int32Array(r)}break;case 3:switch(t){case 32:return new Float32Array(r);case 64:return new Float64Array(r)}}throw Error("Unsupported data format/bitsPerSample")};function h(e,t,r,i,n){this.fileDirectory=e,this.geoKeys=t,this.dataView=r,this.littleEndian=i,this.tiles=n?{}:null,this.isTiled=!e.StripOffsets;var l=e.PlanarConfiguration;if(this.planarConfiguration=void 0===l?1:l,1!==this.planarConfiguration&&2!==this.planarConfiguration)throw new Error("Invalid planar configuration.");switch(this.fileDirectory.Compression){case void 0:case 1:this.decoder=new a;break;case 5:this.decoder=new o;break;case 6:throw new Error("JPEG compression not supported.");case 8:this.decoder=new s;break;case 32773:this.decoder=new c;break;default:throw new Error("Unknown compresseion method identifier: "+this.fileDirectory.Compression)}}h.prototype={getFileDirectory:function(){return this.fileDirectory},getGeoKeys:function(){return this.geoKeys},getWidth:function(){return this.fileDirectory.ImageWidth},getHeight:function(){return this.fileDirectory.ImageLength},getSamplesPerPixel:function(){return this.fileDirectory.SamplesPerPixel},getTileWidth:function(){return this.isTiled?this.fileDirectory.TileWidth:this.getWidth()},getTileHeight:function(){return this.isTiled?this.fileDirectory.TileLength:this.fileDirectory.RowsPerStrip},getBytesPerPixel:function(){for(var e=0,t=0;t<this.fileDirectory.BitsPerSample.length;++t){var r=this.fileDirectory.BitsPerSample[t];if(r%8!=0)throw new Error("Sample bit-width of "+r+" is not supported.");if(r!==this.fileDirectory.BitsPerSample[0])throw new Error("Differing size of samples in a pixel are not supported.");e+=r}return e/8},getSampleByteSize:function(e){if(e>=this.fileDirectory.BitsPerSample.length)throw new RangeError("Sample index "+e+" is out of range.");var t=this.fileDirectory.BitsPerSample[e];if(t%8!=0)throw new Error("Sample bit-width of "+t+" is not supported.");return t/8},getReaderForSample:function(e){var t=this.fileDirectory.SampleFormat?this.fileDirectory.SampleFormat[e]:1,r=this.fileDirectory.BitsPerSample[e];switch(t){case 1:switch(r){case 8:return DataView.prototype.getUint8;case 16:return DataView.prototype.getUint16;case 32:return DataView.prototype.getUint32}break;case 2:switch(r){case 8:return DataView.prototype.getInt8;case 16:return DataView.prototype.getInt16;case 32:return DataView.prototype.getInt32}break;case 3:switch(r){case 32:return DataView.prototype.getFloat32;case 64:return DataView.prototype.getFloat64}}},getArrayForSample:function(e,t){var r=this.fileDirectory.SampleFormat?this.fileDirectory.SampleFormat[e]:1,i=this.fileDirectory.BitsPerSample[e];return u(r,i,t)},getDecoder:function(){return this.decoder},getTileOrStrip:function(e,t,r,i){var n,a,o,s=Math.ceil(this.getWidth()/this.getTileWidth()),c=Math.ceil(this.getHeight()/this.getTileHeight()),l=this.tiles;if(1===this.planarConfiguration?n=t*s+e:2===this.planarConfiguration&&(n=r*s*c+t*s+e),null!==l&&n in l)return i?i(null,{x:e,y:t,sample:r,data:l[n]}):l[n];this.isTiled?(a=this.fileDirectory.TileOffsets[n],o=this.fileDirectory.TileByteCounts[n]):(a=this.fileDirectory.StripOffsets[n],o=this.fileDirectory.StripByteCounts[n]);var f=this.dataView.buffer.slice(a,a+o);if(i)return this.getDecoder().decodeBlockAsync(f,function(a,o){a||null===l||(l[n]=o),i(a,{x:e,y:t,sample:r,data:o})});var u=this.getDecoder().decodeBlock(f);return null!==l&&(l[n]=u),u},_readRasterAsync:function(e,t,r,i,n,a){for(var o=this.getTileWidth(),s=this.getTileHeight(),c=Math.floor(e[0]/o),u=Math.ceil(e[2]/o),h=Math.floor(e[1]/s),d=Math.ceil(e[3]/s),g=(Math.ceil(this.getWidth()/o),e[2]-e[0]),p=(e[3],e[1],this.getBytesPerPixel()),m=(this.getWidth(),this.fileDirectory.Predictor||1),b=this.fileDirectory.BitsPerSample,w=[],y=[],v=0;v<t.length;++v)1===this.planarConfiguration?w.push(f(this.fileDirectory.BitsPerSample,0,t[v])/8):w.push(0),y.push(this.getReaderForSample(t[v]));var _=!1,x=0,A=this.littleEndian,k=null;function E(){_&&0===x&&(k?a(k):n(r))}function S(n,a){if(n)k=n;else{var c=a.data;1!==m&&(c=l(c,m,o,s,b));for(var f=new DataView(c),u=a.y*s,h=a.x*o,d=(a.y+1)*s,v=(a.x+1)*o,_=a.sample,S=Math.max(0,e[1]-u);S<Math.min(s,s-(d-e[3]));++S)for(var T=Math.max(0,e[0]-h);T<Math.min(o,o-(v-e[2]));++T){var D,I=(S*o+T)*p,N=y[_].call(f,I+w[_],A);i?(D=(S+u-e[1])*g*t.length+(T+h-e[0])*t.length+_,r[D]=N):(D=(S+u-e[1])*g+T+h-e[0],r[_][D]=N)}}x-=1,E()}for(var T=h;T<=d;++T)for(var D=c;D<=u;++D)for(var I=0;I<t.length;++I){var N=t[I];2===this.planarConfiguration&&(p=this.getSampleByteSize(N));x+=1,this.getTileOrStrip(D,T,N,S)}_=!0,E()},_readRaster:function(e,t,r,i,n,a){try{for(var o=this.getTileWidth(),s=this.getTileHeight(),c=Math.floor(e[0]/o),u=Math.ceil(e[2]/o),h=Math.floor(e[1]/s),d=Math.ceil(e[3]/s),g=(Math.ceil(this.getWidth()/o),e[2]-e[0]),p=(e[3],e[1],this.getBytesPerPixel()),m=(this.getWidth(),this.fileDirectory.Predictor||1),b=[],w=[],y=0;y<t.length;++y)1===this.planarConfiguration?b.push(f(this.fileDirectory.BitsPerSample,0,t[y])/8):b.push(0),w.push(this.getReaderForSample(t[y]));for(var v=h;v<d;++v)for(var _=c;_<u;++_)for(var x=v*s,A=_*o,k=(v+1)*s,E=(_+1)*o,S=0;S<t.length;++S){var T=t[S];2===this.planarConfiguration&&(p=this.getSampleByteSize(T));var D=this.getTileOrStrip(_,v,T);1!==m&&(D=l(D,m,o,s,this.fileDirectory.BitsPerSample));var I=new DataView(D),N=w[S],C=Math.min(s,s-(k-e[3])),B=Math.min(o,o-(E-e[2])),O=(C*o+B)*p,R=new Uint8Array(I.buffer).length;2*R!==O&&this._debugMessages&&console.warn("dimension mismatch",R,O);for(var P=Math.max(0,e[1]-x);P<C;++P)for(var M=Math.max(0,e[0]-A);M<B;++M){var U,j=(P*o+M)*p,G=0;j<R-1&&(G=N.call(I,j+b[S],this.littleEndian)),i?r[U=(P+x-e[1])*g*t.length+(M+A-e[0])*t.length+S]=G:(U=(P+x-e[1])*g+M+A-e[0],r[S][U]=G)}}return n(r),r}catch(e){return a(e)}},readRasters:function(){var e,t,r;switch(arguments.length){case 0:break;case 1:"function"==typeof arguments[0]?t=arguments[0]:e=arguments[0];break;case 2:"function"==typeof arguments[0]?(t=arguments[0],r=arguments[1]):(e=arguments[0],t=arguments[1]);break;case 3:e=arguments[0],t=arguments[1],r=arguments[2];break;default:throw new Error("Invalid number of arguments passed.")}e=e||{},r=r||function(e){console.error(e)};var i=e.window||[0,0,this.getWidth(),this.getHeight()],n=e.samples,a=e.interleave;if(i[0]<0||i[1]<0||i[2]>this.getWidth()||i[3]>this.getHeight())throw new Error("Select window is out of image bounds.");if(i[0]>i[2]||i[1]>i[3])throw new Error("Invalid subsets");var o,s,c=(i[2]-i[0])*(i[3]-i[1]);if(n){for(o=0;o<n.length;++o)if(n[o]>=this.fileDirectory.SamplesPerPixel)throw new RangeError("Invalid sample index '"+n[o]+"'.")}else for(n=[],o=0;o<this.fileDirectory.SamplesPerPixel;++o)n.push(o);if(a){var l=this.fileDirectory.SampleFormat?Math.max.apply(null,this.fileDirectory.SampleFormat):1,f=Math.max.apply(null,this.fileDirectory.BitsPerSample);s=u(l,f,c*n.length)}else for(s=[],o=0;o<n.length;++o)s.push(this.getArrayForSample(n[o],c));if(this.getDecoder().isAsync()){if(!t)throw new Error("No callback specified for asynchronous raster reading.");return this._readRasterAsync(i,n,s,a,t,r)}return t=t||function(){},this._readRaster(i,n,s,a,t,r)},readRGB:function(){var e=null,t=null,r=null;switch(arguments.length){case 0:break;case 1:"function"==typeof arguments[0]?t=arguments[0]:e=arguments[0];break;case 2:"function"==typeof arguments[0]?(t=arguments[0],r=arguments[1]):(e=arguments[0],t=arguments[1]);break;case 3:e=arguments[0],t=arguments[1],r=arguments[2];break;default:throw new Error("Invalid number of arguments passed.")}e=e||{},r=r||function(e){console.error(e)};var a=e.window||[0,0,this.getWidth(),this.getHeight()];if(a[0]<0||a[1]<0||a[2]>this.getWidth()||a[3]>this.getHeight())throw new Error("Select window is out of image bounds.");if(a[0]>a[2]||a[1]>a[3])throw new Error("Invalid subsets");var o,s=a[2]-a[0],c=a[3]-a[1],l=this.fileDirectory.PhotometricInterpretation,f=this.fileDirectory.BitsPerSample[0],u=Math.pow(2,f);if(l===i.photometricInterpretations.RGB)return this.readRasters({window:e.window,interleave:!0},t,r);switch(l){case i.photometricInterpretations.WhiteIsZero:case i.photometricInterpretations.BlackIsZero:case i.photometricInterpretations.Palette:o=[0];break;case i.photometricInterpretations.CMYK:o=[0,1,2,3];break;case i.photometricInterpretations.YCbCr:case i.photometricInterpretations.CIELab:o=[0,1,2];break;default:throw new Error("Invalid or unsupported photometric interpretation.")}var h={window:e.window,interleave:!0,samples:o},d=this.fileDirectory;return this.readRasters(h,function(e){switch(l){case i.photometricInterpretations.WhiteIsZero:return t(n.fromWhiteIsZero(e,u,s,c));case i.photometricInterpretations.BlackIsZero:return t(n.fromBlackIsZero(e,u,s,c));case i.photometricInterpretations.Palette:return t(n.fromPalette(e,d.ColorMap,s,c));case i.photometricInterpretations.CMYK:return t(n.fromCMYK(e,s,c));case i.photometricInterpretations.YCbCr:return t(n.fromYCbCr(e,s,c));case i.photometricInterpretations.CIELab:return t(n.fromCIELab(e,s,c))}},r)},getTiePoints:function(){if(!this.fileDirectory.ModelTiepoint)return[];for(var e=[],t=0;t<this.fileDirectory.ModelTiepoint.length;t+=6)e.push({i:this.fileDirectory.ModelTiepoint[t],j:this.fileDirectory.ModelTiepoint[t+1],k:this.fileDirectory.ModelTiepoint[t+2],x:this.fileDirectory.ModelTiepoint[t+3],y:this.fileDirectory.ModelTiepoint[t+4],z:this.fileDirectory.ModelTiepoint[t+5]});return e},getGDALMetadata:function(){var e={};if(!this.fileDirectory.GDAL_METADATA)return null;for(var t=this.fileDirectory.GDAL_METADATA,r=i.parseXml(t.substring(0,t.length-1)),n=r.evaluate("GDALMetadata/Item",r,null,XPathResult.UNORDERED_NODE_SNAPSHOT_TYPE,null),a=0;a<n.snapshotLength;++a){var o=n.snapshotItem(a);e[o.getAttribute("name")]=o.textContent}return e},getOrigin:function(){var e=this.fileDirectory.ModelTiepoint,t=this.fileDirectory.ModelTransformation;if(e&&6===e.length)return[e[3],e[4],e[5]];if(t)return[t[3],t[7],t[11]];throw new Error("The image does not have an affine transformation.")},getResolution:function(){var e=this.fileDirectory.ModelPixelScale,t=this.fileDirectory.ModelTransformation;if(e)return[e[0],e[1],e[2]];if(t)return[t[0],t[5],t[10]];throw new Error("The image does not have an affine transformation.")},pixelIsArea:function(){return 1===this.geoKeys.GTRasterTypeGeoKey},getBoundingBox:function(){var e=this.getOrigin(),t=this.getResolution(),r=e[0],i=e[1],n=r+t[0]*this.getWidth(),a=i+t[1]*this.getHeight();return[Math.min(r,n),Math.min(i,a),Math.max(r,n),Math.max(i,a)]}},e.exports=h},function(e,t){var r=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,i=new RegExp("[\\-\\.0-9"+r.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),n=new RegExp("^"+r.source+i.source+"*(?::"+r.source+i.source+"*)?$"),a=0,o=1,s=2,c=3,l=4,f=5,u=6,h=7;function d(){}function g(e,t){return t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber,t}function p(e,t,r,i,n,d){for(var g,p=++t,m=a;;){var b=e.charAt(p);switch(b){case"=":if(m===o)g=e.slice(t,p),m=c;else{if(m!==s)throw new Error("attribute equal must after attrName");m=c}break;case"'":case'"':if(m===c||m===o){if(m===o&&(d.warning('attribute value must after "="'),g=e.slice(t,p)),t=p+1,!((p=e.indexOf(b,t))>0))throw new Error("attribute value no end '"+b+"' match");w=e.slice(t,p).replace(/&#?\w+;/g,n),r.add(g,w,t-1),m=f}else{if(m!=l)throw new Error('attribute value must after "="');w=e.slice(t,p).replace(/&#?\w+;/g,n),r.add(g,w,t),d.warning('attribute "'+g+'" missed start quot('+b+")!!"),t=p+1,m=f}break;case"/":switch(m){case a:r.setTagName(e.slice(t,p));case f:case u:case h:m=h,r.closed=!0;case l:case o:case s:break;default:throw new Error("attribute invalid close char('/')")}break;case"":return d.error("unexpected end of input"),m==a&&r.setTagName(e.slice(t,p)),p;case">":switch(m){case a:r.setTagName(e.slice(t,p));case f:case u:case h:break;case l:case o:"/"===(w=e.slice(t,p)).slice(-1)&&(r.closed=!0,w=w.slice(0,-1));case s:m===s&&(w=g),m==l?(d.warning('attribute "'+w+'" missed quot(")!!'),r.add(g,w.replace(/&#?\w+;/g,n),t)):("http://www.w3.org/1999/xhtml"===i[""]&&w.match(/^(?:disabled|checked|selected)$/i)||d.warning('attribute "'+w+'" missed value!! "'+w+'" instead!!'),r.add(w,w,t));break;case c:throw new Error("attribute value missed!!")}return p;case"":b=" ";default:if(b<=" ")switch(m){case a:r.setTagName(e.slice(t,p)),m=u;break;case o:g=e.slice(t,p),m=s;break;case l:var w=e.slice(t,p).replace(/&#?\w+;/g,n);d.warning('attribute "'+w+'" missed quot(")!!'),r.add(g,w,t);case f:m=u}else switch(m){case s:r.tagName;"http://www.w3.org/1999/xhtml"===i[""]&&g.match(/^(?:disabled|checked|selected)$/i)||d.warning('attribute "'+g+'" missed value!! "'+g+'" instead2!!'),r.add(g,g,t),t=p,m=o;break;case f:d.warning('attribute space is required"'+g+'"!!');case u:m=o,t=p;break;case c:m=l,t=p;break;case h:throw new Error("elements closed character '/' and '>' must be connected to")}}p++}}function m(e,t,r){for(var i=e.tagName,n=null,a=e.length;a--;){var o=e[a],s=o.qName,c=o.value;if((h=s.indexOf(":"))>0)var l=o.prefix=s.slice(0,h),f=s.slice(h+1),u="xmlns"===l&&f;else f=s,l=null,u="xmlns"===s&&"";o.localName=f,!1!==u&&(null==n&&(n={},y(r,r={})),r[u]=n[u]=c,o.uri="http://www.w3.org/2000/xmlns/",t.startPrefixMapping(u,c))}for(a=e.length;a--;){(l=(o=e[a]).prefix)&&("xml"===l&&(o.uri="http://www.w3.org/XML/1998/namespace"),"xmlns"!==l&&(o.uri=r[l||""]))}var h;(h=i.indexOf(":"))>0?(l=e.prefix=i.slice(0,h),f=e.localName=i.slice(h+1)):(l=null,f=e.localName=i);var d=e.uri=r[l||""];if(t.startElement(d,f,i,e),!e.closed)return e.currentNSMap=r,e.localNSMap=n,!0;if(t.endElement(d,f,i),n)for(l in n)t.endPrefixMapping(l)}function b(e,t,r,i,n){if(/^(?:script|textarea)$/i.test(r)){var a=e.indexOf("</"+r+">",t),o=e.substring(t+1,a);if(/[&<]/.test(o))return/^script$/i.test(r)?(n.characters(o,0,o.length),a):(o=o.replace(/&#?\w+;/g,i),n.characters(o,0,o.length),a)}return t+1}function w(e,t,r,i){var n=i[r];return null==n&&((n=e.lastIndexOf("</"+r+">"))<t&&(n=e.lastIndexOf("</"+r)),i[r]=n),n<t}function y(e,t){for(var r in e)t[r]=e[r]}function v(e,t,r,i){switch(e.charAt(t+2)){case"-":return"-"===e.charAt(t+3)?(n=e.indexOf("--\x3e",t+4))>t?(r.comment(e,t+4,n-t-4),n+3):(i.error("Unclosed comment"),-1):-1;default:if("CDATA["==e.substr(t+3,6)){var n=e.indexOf("]]>",t+9);return r.startCDATA(),r.characters(e,t+9,n-t-9),r.endCDATA(),n+3}var a=function(e,t){var r,i=[],n=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;n.lastIndex=t,n.exec(e);for(;r=n.exec(e);)if(i.push(r),r[1])return i}(e,t),o=a.length;if(o>1&&/!doctype/i.test(a[0][0])){var s=a[1][0],c=o>3&&/^public$/i.test(a[2][0])&&a[3][0],l=o>4&&a[4][0],f=a[o-1];return r.startDTD(s,c&&c.replace(/^(['"])(.*?)\1$/,"$2"),l&&l.replace(/^(['"])(.*?)\1$/,"$2")),r.endDTD(),f.index+f[0].length}}return-1}function _(e,t,r){var i=e.indexOf("?>",t);if(i){var n=e.substring(t,i).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);if(n){n[0].length;return r.processingInstruction(n[1],n[2]),i+2}return-1}return-1}function x(e){}function A(e,t){return e.__proto__=t,e}d.prototype={parse:function(e,t,r){var i=this.domBuilder;i.startDocument(),y(t,t={}),function(e,t,r,i,n){function a(e){var t=e.slice(1,-1);return t in r?r[t]:"#"===t.charAt(0)?function(e){if(e>65535){var t=55296+((e-=65536)>>10),r=56320+(1023&e);return String.fromCharCode(t,r)}return String.fromCharCode(e)}(parseInt(t.substr(1).replace("x","0x"))):(n.error("entity not found:"+e),e)}function o(t){if(t>y){var r=e.substring(y,t).replace(/&#?\w+;/g,a);u&&s(y),i.characters(r,0,t-y),y=t}}function s(t,r){for(;t>=l&&(r=f.exec(e));)c=r.index,l=c+r[0].length,u.lineNumber++;u.columnNumber=t-c+1}var c=0,l=0,f=/.*(?:\r\n?|\n)|.*$/g,u=i.locator,h=[{currentNSMap:t}],d={},y=0;for(;;){try{var A=e.indexOf("<",y);if(A<0){if(!e.substr(y).match(/^\s*$/)){var k=i.doc,E=k.createTextNode(e.substr(y));k.appendChild(E),i.currentElement=E}return}switch(A>y&&o(A),e.charAt(A+1)){case"/":var S=e.indexOf(">",A+3),T=e.substring(A+2,S),D=h.pop();S<0?(T=e.substring(A+2).replace(/[\s<].*/,""),n.error("end tag name: "+T+" is not complete:"+D.tagName),S=A+1+T.length):T.match(/\s</)&&(T=T.replace(/[\s<].*/,""),n.error("end tag name: "+T+" maybe not complete"),S=A+1+T.length);var I=D.localNSMap,N=D.tagName==T,C=N||D.tagName&&D.tagName.toLowerCase()==T.toLowerCase();if(C){if(i.endElement(D.uri,D.localName,T),I)for(var B in I)i.endPrefixMapping(B);N||n.fatalError("end tag name: "+T+" is not match the current start tagName:"+D.tagName)}else h.push(D);S++;break;case"?":u&&s(A),S=_(e,A,i);break;case"!":u&&s(A),S=v(e,A,i,n);break;default:u&&s(A);var O=new x,R=h[h.length-1].currentNSMap,S=p(e,A,O,R,a,n),P=O.length;if(!O.closed&&w(e,S,O.tagName,d)&&(O.closed=!0,r.nbsp||n.warning("unclosed xml attribute")),u&&P){for(var M=g(u,{}),U=0;U<P;U++){var j=O[U];s(j.offset),j.locator=g(u,{})}i.locator=M,m(O,i,R)&&h.push(O),i.locator=u}else m(O,i,R)&&h.push(O);"http://www.w3.org/1999/xhtml"!==O.uri||O.closed?S++:S=b(e,S,O.tagName,a,i)}}catch(e){n.error("element parse error: "+e),S=-1}S>y?y=S:o(Math.max(A,y)+1)}}(e,t,r,i,this.errorHandler),i.endDocument()}},x.prototype={setTagName:function(e){if(!n.test(e))throw new Error("invalid tagName:"+e);this.tagName=e},add:function(e,t,r){if(!n.test(e))throw new Error("invalid attribute:"+e);this[this.length++]={qName:e,value:t,offset:r}},length:0,getLocalName:function(e){return this[e].localName},getLocator:function(e){return this[e].locator},getQName:function(e){return this[e].qName},getURI:function(e){return this[e].uri},getValue:function(e){return this[e].value}},A({},A.prototype)instanceof A||(A=function(e,t){function r(){}for(t in r.prototype=t,r=new r,e)r[t]=e[t];return r}),t.XMLReader=d},function(e,t,r){function i(e){this.options=e||{locator:{}}}function n(){this.cdata=!1}function a(e,t){t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber}function o(e){if(e)return"\n@"+(e.systemId||"")+"#[line:"+e.lineNumber+",col:"+e.columnNumber+"]"}function s(e,t,r){return"string"==typeof e?e.substr(t,r):e.length>=t+r||t?new java.lang.String(e,t,r)+"":e}function c(e,t){e.currentElement?e.currentElement.appendChild(t):e.doc.appendChild(t)}i.prototype.parseFromString=function(e,t){var r=this.options,i=new l,a=r.domBuilder||new n,s=r.errorHandler,c=r.locator,f=r.xmlns||{},u={lt:"<",gt:">",amp:"&",quot:'"',apos:"'"};return c&&a.setDocumentLocator(c),i.errorHandler=function(e,t,r){if(!e){if(t instanceof n)return t;e=t}var i={},a=e instanceof Function;function s(t){var n=e[t];!n&&a&&(n=2==e.length?function(r){e(t,r)}:e),i[t]=n&&function(e){n("[xmldom "+t+"]\t"+e+o(r))}||function(){}}return r=r||{},s("warning"),s("error"),s("fatalError"),i}(s,a,c),i.domBuilder=r.domBuilder||a,/\/x?html?$/.test(t)&&(u.nbsp="",u.copy="",f[""]="http://www.w3.org/1999/xhtml"),f.xml=f.xml||"http://www.w3.org/XML/1998/namespace",e?i.parse(e,f,u):i.errorHandler.error("invalid doc source"),a.doc},n.prototype={startDocument:function(){this.doc=(new f).createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(e,t,r,i){var n=this.doc,o=n.createElementNS(e,r||t),s=i.length;c(this,o),this.currentElement=o,this.locator&&a(this.locator,o);for(var l=0;l<s;l++){e=i.getURI(l);var f=i.getValue(l),u=(r=i.getQName(l),n.createAttributeNS(e,r));this.locator&&a(i.getLocator(l),u),u.value=u.nodeValue=f,o.setAttributeNode(u)}},endElement:function(e,t,r){var i=this.currentElement;i.tagName;this.currentElement=i.parentNode},startPrefixMapping:function(e,t){},endPrefixMapping:function(e){},processingInstruction:function(e,t){var r=this.doc.createProcessingInstruction(e,t);this.locator&&a(this.locator,r),c(this,r)},ignorableWhitespace:function(e,t,r){},characters:function(e,t,r){if(e=s.apply(this,arguments)){if(this.cdata)var i=this.doc.createCDATASection(e);else i=this.doc.createTextNode(e);this.currentElement?this.currentElement.appendChild(i):/^\s*$/.test(e)&&this.doc.appendChild(i),this.locator&&a(this.locator,i)}},skippedEntity:function(e){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(e){(this.locator=e)&&(e.lineNumber=0)},comment:function(e,t,r){e=s.apply(this,arguments);var i=this.doc.createComment(e);this.locator&&a(this.locator,i),c(this,i)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(e,t,r){var i=this.doc.implementation;if(i&&i.createDocumentType){var n=i.createDocumentType(e,t,r);this.locator&&a(this.locator,n),c(this,n)}},warning:function(e){console.warn("[xmldom warning]\t"+e,o(this.locator))},error:function(e){console.error("[xmldom error]\t"+e,o(this.locator))},fatalError:function(e){throw console.error("[xmldom fatalError]\t"+e,o(this.locator)),e}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(e){n.prototype[e]=function(){return null}});var l=r(23).XMLReader,f=t.DOMImplementation=r(2).DOMImplementation;t.XMLSerializer=r(2).XMLSerializer,t.DOMParser=i},function(e,t,r){"use strict";var i=r(3),n=r(22),a=r(4),o=i.fieldTypes,s=i.fieldTagNames,c=i.arrayFields,l=i.geoKeyNames;function f(e,t){this.dataView=new a(e),t=t||{},this.cache=t.cache||!1;var r=this.dataView.getUint16(0,0);if(18761===r)this.littleEndian=!0;else{if(19789!==r)throw new TypeError("Invalid byte order value.");this.littleEndian=!1}var i=this.dataView.getUint16(2,this.littleEndian);if(42===this.dataView.getUint16(2,this.littleEndian))this.bigTiff=!1;else{if(43!==i)throw new TypeError("Invalid magic number.");if(this.bigTiff=!0,8!==this.dataView.getUint16(4,this.littleEndian))throw new Error("Unsupported offset byte-size.")}this.fileDirectories=this.parseFileDirectories(this.getOffset(this.bigTiff?8:4))}f.prototype={getOffset:function(e){return this.bigTiff?this.dataView.getUint64(e,this.littleEndian):this.dataView.getUint32(e,this.littleEndian)},getFieldTypeLength:function(e){switch(e){case o.BYTE:case o.ASCII:case o.SBYTE:case o.UNDEFINED:return 1;case o.SHORT:case o.SSHORT:return 2;case o.LONG:case o.SLONG:case o.FLOAT:return 4;case o.RATIONAL:case o.SRATIONAL:case o.DOUBLE:case o.LONG8:case o.SLONG8:case o.IFD8:return 8;default:throw new RangeError("Invalid field type: "+e)}},getValues:function(e,t,r){var i,n=null,a=null,s=this.getFieldTypeLength(e);switch(e){case o.BYTE:case o.ASCII:case o.UNDEFINED:n=new Uint8Array(t),a=this.dataView.getUint8;break;case o.SBYTE:n=new Int8Array(t),a=this.dataView.getInt8;break;case o.SHORT:n=new Uint16Array(t),a=this.dataView.getUint16;break;case o.SSHORT:n=new Int16Array(t),a=this.dataView.getInt16;break;case o.LONG:n=new Uint32Array(t),a=this.dataView.getUint32;break;case o.SLONG:n=new Int32Array(t),a=this.dataView.getInt32;break;case o.LONG8:case o.IFD8:n=new Array(t),a=this.dataView.getUint64;break;case o.SLONG8:n=new Array(t),a=this.dataView.getInt64;break;case o.RATIONAL:n=new Uint32Array(2*t),a=this.dataView.getUint32;break;case o.SRATIONAL:n=new Int32Array(2*t),a=this.dataView.getInt32;break;case o.FLOAT:n=new Float32Array(t),a=this.dataView.getFloat32;break;case o.DOUBLE:n=new Float64Array(t),a=this.dataView.getFloat64;break;default:throw new RangeError("Invalid field type: "+e)}if(e!==o.RATIONAL&&e!==o.SRATIONAL)for(i=0;i<t;++i)n[i]=a.call(this.dataView,r+i*s,this.littleEndian);else for(i=0;i<t;i+=2)n[i]=a.call(this.dataView,r+i*s,this.littleEndian),n[i+1]=a.call(this.dataView,r+(i*s+4),this.littleEndian);return e===o.ASCII?String.fromCharCode.apply(null,n):n},getFieldValues:function(e,t,r,i){var n;if(this.getFieldTypeLength(t)*r<=(this.bigTiff?8:4))n=this.getValues(t,r,i);else{var a=this.getOffset(i);n=this.getValues(t,r,a)}return 1===r&&-1===c.indexOf(e)&&t!==o.RATIONAL&&t!==o.SRATIONAL?n[0]:n},parseGeoKeyDirectory:function(e){var t=e.GeoKeyDirectory;if(!t)return null;for(var r={},i=4;i<=4*t[3];i+=4){var n=l[t[i]],a=t[i+1]?s[t[i+1]]:null,o=t[i+2],c=t[i+3],f=null;if(a){if(void 0===(f=e[a])||null===f)throw new Error("Could not get value of geoKey '"+n+"'.");"string"==typeof f?f=f.substring(c,c+o-1):f.subarray&&(f=f.subarray(c,c+o-1))}else f=c;r[n]=f}return r},parseFileDirectories:function(e){for(var t=e,r=[];0!==t;){for(var i=this.bigTiff?this.dataView.getUint64(t,this.littleEndian):this.dataView.getUint16(t,this.littleEndian),n={},a=t+(this.bigTiff?8:2),o=0;o<i;a+=this.bigTiff?20:12,++o){var c=this.dataView.getUint16(a,this.littleEndian),l=this.dataView.getUint16(a+2,this.littleEndian),f=this.bigTiff?this.dataView.getUint64(a+4,this.littleEndian):this.dataView.getUint32(a+4,this.littleEndian);n[s[c]]=this.getFieldValues(c,l,f,a+(this.bigTiff?12:8))}r.push([n,this.parseGeoKeyDirectory(n)]),t=this.getOffset(a)}return r},getImage:function(e){e=e||0;var t=this.fileDirectories[e];if(!t)throw new RangeError("Invalid image index");return new n(t[0],t[1],this.dataView,this.littleEndian,this.cache)},getImageCount:function(){return this.fileDirectories.length}},e.exports=f},function(e,t,r){"use strict";var i=r(25),n=function(e,t){var r,n,a,o;if("string"==typeof e||e instanceof String)for(r=new ArrayBuffer(2*e.length),o=new Uint16Array(r),n=0,a=e.length;n<a;++n)o[n]=e.charCodeAt(n);else{if(!(e instanceof ArrayBuffer))throw new Error("Invalid input data given.");r=e}return new i(r,t)};void 0!==e&&void 0!==e.exports&&(e.exports.parse=n),"undefined"!=typeof window?window.GeoTIFF={parse:n}:"undefined"!=typeof self&&(self.GeoTIFF={parse:n})},function(e,t){var r={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},function(e,t){t.read=function(e,t,r,i,n){var a,o,s=8*n-i-1,c=(1<<s)-1,l=c>>1,f=-7,u=r?n-1:0,h=r?-1:1,d=e[t+u];for(u+=h,a=d&(1<<-f)-1,d>>=-f,f+=s;f>0;a=256*a+e[t+u],u+=h,f-=8);for(o=a&(1<<-f)-1,a>>=-f,f+=i;f>0;o=256*o+e[t+u],u+=h,f-=8);if(0===a)a=1-l;else{if(a===c)return o?NaN:1/0*(d?-1:1);o+=Math.pow(2,i),a-=l}return(d?-1:1)*o*Math.pow(2,a-i)},t.write=function(e,t,r,i,n,a){var o,s,c,l=8*a-n-1,f=(1<<l)-1,u=f>>1,h=23===n?Math.pow(2,-24)-Math.pow(2,-77):0,d=i?0:a-1,g=i?1:-1,p=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=f):(o=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-o))<1&&(o--,c*=2),(t+=o+u>=1?h/c:h*Math.pow(2,1-u))*c>=2&&(o++,c/=2),o+u>=f?(s=0,o=f):o+u>=1?(s=(t*c-1)*Math.pow(2,n),o+=u):(s=t*Math.pow(2,u-1)*Math.pow(2,n),o=0));n>=8;e[r+d]=255&s,d+=g,s/=256,n-=8);for(o=o<<n|s,l+=n;l>0;e[r+d]=255&o,d+=g,o/=256,l-=8);e[r+d-g]|=128*p}},function(e,t,r){"use strict";t.byteLength=function(e){var t=l(e),r=t[0],i=t[1];return 3*(r+i)/4-i},t.toByteArray=function(e){for(var t,r=l(e),i=r[0],o=r[1],s=new a(function(e,t,r){return 3*(t+r)/4-r}(0,i,o)),c=0,f=o>0?i-4:i,u=0;u<f;u+=4)t=n[e.charCodeAt(u)]<<18|n[e.charCodeAt(u+1)]<<12|n[e.charCodeAt(u+2)]<<6|n[e.charCodeAt(u+3)],s[c++]=t>>16&255,s[c++]=t>>8&255,s[c++]=255&t;2===o&&(t=n[e.charCodeAt(u)]<<2|n[e.charCodeAt(u+1)]>>4,s[c++]=255&t);1===o&&(t=n[e.charCodeAt(u)]<<10|n[e.charCodeAt(u+1)]<<4|n[e.charCodeAt(u+2)]>>2,s[c++]=t>>8&255,s[c++]=255&t);return s},t.fromByteArray=function(e){for(var t,r=e.length,n=r%3,a=[],o=0,s=r-n;o<s;o+=16383)a.push(f(e,o,o+16383>s?s:o+16383));1===n?(t=e[r-1],a.push(i[t>>2]+i[t<<4&63]+"==")):2===n&&(t=(e[r-2]<<8)+e[r-1],a.push(i[t>>10]+i[t>>4&63]+i[t<<2&63]+"="));return a.join("")};for(var i=[],n=[],a="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,c=o.length;s<c;++s)i[s]=o[s],n[o.charCodeAt(s)]=s;function l(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function f(e,t,r){for(var n,a,o=[],s=t;s<r;s+=3)n=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),o.push(i[(a=n)>>18&63]+i[a>>12&63]+i[a>>6&63]+i[63&a]);return o.join("")}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},function(e,t){var r;r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t,r){"use strict";(function(e){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
var i=r(29),n=r(28),a=r(27);function o(){return c.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(e,t){if(o()<t)throw new RangeError("Invalid typed array length");return c.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=c.prototype:(null===e&&(e=new c(t)),e.length=t),e}function c(e,t,r){if(!(c.TYPED_ARRAY_SUPPORT||this instanceof c))return new c(e,t,r);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return u(this,e)}return l(this,e,t,r)}function l(e,t,r,i){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,r,i){if(t.byteLength,r<0||t.byteLength<r)throw new RangeError("'offset' is out of bounds");if(t.byteLength<r+(i||0))throw new RangeError("'length' is out of bounds");t=void 0===r&&void 0===i?new Uint8Array(t):void 0===i?new Uint8Array(t,r):new Uint8Array(t,r,i);c.TYPED_ARRAY_SUPPORT?(e=t).__proto__=c.prototype:e=h(e,t);return e}(e,t,r,i):"string"==typeof t?function(e,t,r){"string"==typeof r&&""!==r||(r="utf8");if(!c.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var i=0|g(t,r),n=(e=s(e,i)).write(t,r);n!==i&&(e=e.slice(0,n));return e}(e,t,r):function(e,t){if(c.isBuffer(t)){var r=0|d(t.length);return 0===(e=s(e,r)).length?e:(t.copy(e,0,0,r),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(i=t.length)!=i?s(e,0):h(e,t);if("Buffer"===t.type&&a(t.data))return h(e,t.data)}var i;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function f(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function u(e,t){if(f(t),e=s(e,t<0?0:0|d(t)),!c.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;++r)e[r]=0;return e}function h(e,t){var r=t.length<0?0:0|d(t.length);e=s(e,r);for(var i=0;i<r;i+=1)e[i]=255&t[i];return e}function d(e){if(e>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|e}function g(e,t){if(c.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var r=e.length;if(0===r)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return F(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return L(e).length;default:if(i)return F(e).length;t=(""+t).toLowerCase(),i=!0}}function p(e,t,r){var i=e[t];e[t]=e[r],e[r]=i}function m(e,t,r,i,n){if(0===e.length)return-1;if("string"==typeof r?(i=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=n?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(n)return-1;r=e.length-1}else if(r<0){if(!n)return-1;r=0}if("string"==typeof t&&(t=c.from(t,i)),c.isBuffer(t))return 0===t.length?-1:b(e,t,r,i,n);if("number"==typeof t)return t&=255,c.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?n?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):b(e,[t],r,i,n);throw new TypeError("val must be string, number or Buffer")}function b(e,t,r,i,n){var a,o=1,s=e.length,c=t.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(e.length<2||t.length<2)return-1;o=2,s/=2,c/=2,r/=2}function l(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(n){var f=-1;for(a=r;a<s;a++)if(l(e,a)===l(t,-1===f?0:a-f)){if(-1===f&&(f=a),a-f+1===c)return f*o}else-1!==f&&(a-=a-f),f=-1}else for(r+c>s&&(r=s-c),a=r;a>=0;a--){for(var u=!0,h=0;h<c;h++)if(l(e,a+h)!==l(t,h)){u=!1;break}if(u)return a}return-1}function w(e,t,r,i){r=Number(r)||0;var n=e.length-r;i?(i=Number(i))>n&&(i=n):i=n;var a=t.length;if(a%2!=0)throw new TypeError("Invalid hex string");i>a/2&&(i=a/2);for(var o=0;o<i;++o){var s=parseInt(t.substr(2*o,2),16);if(isNaN(s))return o;e[r+o]=s}return o}function y(e,t,r,i){return K(F(t,e.length-r),e,r,i)}function v(e,t,r,i){return K(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,i)}function _(e,t,r,i){return v(e,t,r,i)}function x(e,t,r,i){return K(L(t),e,r,i)}function A(e,t,r,i){return K(function(e,t){for(var r,i,n,a=[],o=0;o<e.length&&!((t-=2)<0);++o)r=e.charCodeAt(o),i=r>>8,n=r%256,a.push(n),a.push(i);return a}(t,e.length-r),e,r,i)}function k(e,t,r){return 0===t&&r===e.length?i.fromByteArray(e):i.fromByteArray(e.slice(t,r))}function E(e,t,r){r=Math.min(e.length,r);for(var i=[],n=t;n<r;){var a,o,s,c,l=e[n],f=null,u=l>239?4:l>223?3:l>191?2:1;if(n+u<=r)switch(u){case 1:l<128&&(f=l);break;case 2:128==(192&(a=e[n+1]))&&(c=(31&l)<<6|63&a)>127&&(f=c);break;case 3:a=e[n+1],o=e[n+2],128==(192&a)&&128==(192&o)&&(c=(15&l)<<12|(63&a)<<6|63&o)>2047&&(c<55296||c>57343)&&(f=c);break;case 4:a=e[n+1],o=e[n+2],s=e[n+3],128==(192&a)&&128==(192&o)&&128==(192&s)&&(c=(15&l)<<18|(63&a)<<12|(63&o)<<6|63&s)>65535&&c<1114112&&(f=c)}null===f?(f=65533,u=1):f>65535&&(f-=65536,i.push(f>>>10&1023|55296),f=56320|1023&f),i.push(f),n+=u}return function(e){var t=e.length;if(t<=S)return String.fromCharCode.apply(String,e);var r="",i=0;for(;i<t;)r+=String.fromCharCode.apply(String,e.slice(i,i+=S));return r}(i)}t.Buffer=c,t.SlowBuffer=function(e){+e!=e&&(e=0);return c.alloc(+e)},t.INSPECT_MAX_BYTES=50,c.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=o(),c.poolSize=8192,c._augment=function(e){return e.__proto__=c.prototype,e},c.from=function(e,t,r){return l(null,e,t,r)},c.TYPED_ARRAY_SUPPORT&&(c.prototype.__proto__=Uint8Array.prototype,c.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&c[Symbol.species]===c&&Object.defineProperty(c,Symbol.species,{value:null,configurable:!0})),c.alloc=function(e,t,r){return function(e,t,r,i){return f(t),t<=0?s(e,t):void 0!==r?"string"==typeof i?s(e,t).fill(r,i):s(e,t).fill(r):s(e,t)}(null,e,t,r)},c.allocUnsafe=function(e){return u(null,e)},c.allocUnsafeSlow=function(e){return u(null,e)},c.isBuffer=function(e){return!(null==e||!e._isBuffer)},c.compare=function(e,t){if(!c.isBuffer(e)||!c.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,i=t.length,n=0,a=Math.min(r,i);n<a;++n)if(e[n]!==t[n]){r=e[n],i=t[n];break}return r<i?-1:i<r?1:0},c.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(e,t){if(!a(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return c.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var i=c.allocUnsafe(t),n=0;for(r=0;r<e.length;++r){var o=e[r];if(!c.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(i,n),n+=o.length}return i},c.byteLength=g,c.prototype._isBuffer=!0,c.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)p(this,t,t+1);return this},c.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)p(this,t,t+3),p(this,t+1,t+2);return this},c.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)p(this,t,t+7),p(this,t+1,t+6),p(this,t+2,t+5),p(this,t+3,t+4);return this},c.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?E(this,0,e):function(e,t,r){var i=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return I(this,t,r);case"utf8":case"utf-8":return E(this,t,r);case"ascii":return T(this,t,r);case"latin1":case"binary":return D(this,t,r);case"base64":return k(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return N(this,t,r);default:if(i)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),i=!0}}.apply(this,arguments)},c.prototype.equals=function(e){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===c.compare(this,e)},c.prototype.inspect=function(){var e="",r=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(e+=" ... ")),"<Buffer "+e+">"},c.prototype.compare=function(e,t,r,i,n){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===i&&(i=0),void 0===n&&(n=this.length),t<0||r>e.length||i<0||n>this.length)throw new RangeError("out of range index");if(i>=n&&t>=r)return 0;if(i>=n)return-1;if(t>=r)return 1;if(t>>>=0,r>>>=0,i>>>=0,n>>>=0,this===e)return 0;for(var a=n-i,o=r-t,s=Math.min(a,o),l=this.slice(i,n),f=e.slice(t,r),u=0;u<s;++u)if(l[u]!==f[u]){a=l[u],o=f[u];break}return a<o?-1:o<a?1:0},c.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},c.prototype.indexOf=function(e,t,r){return m(this,e,t,r,!0)},c.prototype.lastIndexOf=function(e,t,r){return m(this,e,t,r,!1)},c.prototype.write=function(e,t,r,i){if(void 0===t)i="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)i=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(r)?(r|=0,void 0===i&&(i="utf8")):(i=r,r=void 0)}var n=this.length-t;if((void 0===r||r>n)&&(r=n),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var a=!1;;)switch(i){case"hex":return w(this,e,t,r);case"utf8":case"utf-8":return y(this,e,t,r);case"ascii":return v(this,e,t,r);case"latin1":case"binary":return _(this,e,t,r);case"base64":return x(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,e,t,r);default:if(a)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),a=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var S=4096;function T(e,t,r){var i="";r=Math.min(e.length,r);for(var n=t;n<r;++n)i+=String.fromCharCode(127&e[n]);return i}function D(e,t,r){var i="";r=Math.min(e.length,r);for(var n=t;n<r;++n)i+=String.fromCharCode(e[n]);return i}function I(e,t,r){var i=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>i)&&(r=i);for(var n="",a=t;a<r;++a)n+=G(e[a]);return n}function N(e,t,r){for(var i=e.slice(t,r),n="",a=0;a<i.length;a+=2)n+=String.fromCharCode(i[a]+256*i[a+1]);return n}function C(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function B(e,t,r,i,n,a){if(!c.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>n||t<a)throw new RangeError('"value" argument is out of bounds');if(r+i>e.length)throw new RangeError("Index out of range")}function O(e,t,r,i){t<0&&(t=65535+t+1);for(var n=0,a=Math.min(e.length-r,2);n<a;++n)e[r+n]=(t&255<<8*(i?n:1-n))>>>8*(i?n:1-n)}function R(e,t,r,i){t<0&&(t=4294967295+t+1);for(var n=0,a=Math.min(e.length-r,4);n<a;++n)e[r+n]=t>>>8*(i?n:3-n)&255}function P(e,t,r,i,n,a){if(r+i>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function M(e,t,r,i,a){return a||P(e,0,r,4),n.write(e,t,r,i,23,4),r+4}function U(e,t,r,i,a){return a||P(e,0,r,8),n.write(e,t,r,i,52,8),r+8}c.prototype.slice=function(e,t){var r,i=this.length;if(e=~~e,t=void 0===t?i:~~t,e<0?(e+=i)<0&&(e=0):e>i&&(e=i),t<0?(t+=i)<0&&(t=0):t>i&&(t=i),t<e&&(t=e),c.TYPED_ARRAY_SUPPORT)(r=this.subarray(e,t)).__proto__=c.prototype;else{var n=t-e;r=new c(n,void 0);for(var a=0;a<n;++a)r[a]=this[a+e]}return r},c.prototype.readUIntLE=function(e,t,r){e|=0,t|=0,r||C(e,t,this.length);for(var i=this[e],n=1,a=0;++a<t&&(n*=256);)i+=this[e+a]*n;return i},c.prototype.readUIntBE=function(e,t,r){e|=0,t|=0,r||C(e,t,this.length);for(var i=this[e+--t],n=1;t>0&&(n*=256);)i+=this[e+--t]*n;return i},c.prototype.readUInt8=function(e,t){return t||C(e,1,this.length),this[e]},c.prototype.readUInt16LE=function(e,t){return t||C(e,2,this.length),this[e]|this[e+1]<<8},c.prototype.readUInt16BE=function(e,t){return t||C(e,2,this.length),this[e]<<8|this[e+1]},c.prototype.readUInt32LE=function(e,t){return t||C(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},c.prototype.readUInt32BE=function(e,t){return t||C(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},c.prototype.readIntLE=function(e,t,r){e|=0,t|=0,r||C(e,t,this.length);for(var i=this[e],n=1,a=0;++a<t&&(n*=256);)i+=this[e+a]*n;return i>=(n*=128)&&(i-=Math.pow(2,8*t)),i},c.prototype.readIntBE=function(e,t,r){e|=0,t|=0,r||C(e,t,this.length);for(var i=t,n=1,a=this[e+--i];i>0&&(n*=256);)a+=this[e+--i]*n;return a>=(n*=128)&&(a-=Math.pow(2,8*t)),a},c.prototype.readInt8=function(e,t){return t||C(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},c.prototype.readInt16LE=function(e,t){t||C(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},c.prototype.readInt16BE=function(e,t){t||C(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},c.prototype.readInt32LE=function(e,t){return t||C(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},c.prototype.readInt32BE=function(e,t){return t||C(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},c.prototype.readFloatLE=function(e,t){return t||C(e,4,this.length),n.read(this,e,!0,23,4)},c.prototype.readFloatBE=function(e,t){return t||C(e,4,this.length),n.read(this,e,!1,23,4)},c.prototype.readDoubleLE=function(e,t){return t||C(e,8,this.length),n.read(this,e,!0,52,8)},c.prototype.readDoubleBE=function(e,t){return t||C(e,8,this.length),n.read(this,e,!1,52,8)},c.prototype.writeUIntLE=function(e,t,r,i){(e=+e,t|=0,r|=0,i)||B(this,e,t,r,Math.pow(2,8*r)-1,0);var n=1,a=0;for(this[t]=255&e;++a<r&&(n*=256);)this[t+a]=e/n&255;return t+r},c.prototype.writeUIntBE=function(e,t,r,i){(e=+e,t|=0,r|=0,i)||B(this,e,t,r,Math.pow(2,8*r)-1,0);var n=r-1,a=1;for(this[t+n]=255&e;--n>=0&&(a*=256);)this[t+n]=e/a&255;return t+r},c.prototype.writeUInt8=function(e,t,r){return e=+e,t|=0,r||B(this,e,t,1,255,0),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},c.prototype.writeUInt16LE=function(e,t,r){return e=+e,t|=0,r||B(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):O(this,e,t,!0),t+2},c.prototype.writeUInt16BE=function(e,t,r){return e=+e,t|=0,r||B(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):O(this,e,t,!1),t+2},c.prototype.writeUInt32LE=function(e,t,r){return e=+e,t|=0,r||B(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):R(this,e,t,!0),t+4},c.prototype.writeUInt32BE=function(e,t,r){return e=+e,t|=0,r||B(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):R(this,e,t,!1),t+4},c.prototype.writeIntLE=function(e,t,r,i){if(e=+e,t|=0,!i){var n=Math.pow(2,8*r-1);B(this,e,t,r,n-1,-n)}var a=0,o=1,s=0;for(this[t]=255&e;++a<r&&(o*=256);)e<0&&0===s&&0!==this[t+a-1]&&(s=1),this[t+a]=(e/o>>0)-s&255;return t+r},c.prototype.writeIntBE=function(e,t,r,i){if(e=+e,t|=0,!i){var n=Math.pow(2,8*r-1);B(this,e,t,r,n-1,-n)}var a=r-1,o=1,s=0;for(this[t+a]=255&e;--a>=0&&(o*=256);)e<0&&0===s&&0!==this[t+a+1]&&(s=1),this[t+a]=(e/o>>0)-s&255;return t+r},c.prototype.writeInt8=function(e,t,r){return e=+e,t|=0,r||B(this,e,t,1,127,-128),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},c.prototype.writeInt16LE=function(e,t,r){return e=+e,t|=0,r||B(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):O(this,e,t,!0),t+2},c.prototype.writeInt16BE=function(e,t,r){return e=+e,t|=0,r||B(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):O(this,e,t,!1),t+2},c.prototype.writeInt32LE=function(e,t,r){return e=+e,t|=0,r||B(this,e,t,4,2147483647,-2147483648),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):R(this,e,t,!0),t+4},c.prototype.writeInt32BE=function(e,t,r){return e=+e,t|=0,r||B(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):R(this,e,t,!1),t+4},c.prototype.writeFloatLE=function(e,t,r){return M(this,e,t,!0,r)},c.prototype.writeFloatBE=function(e,t,r){return M(this,e,t,!1,r)},c.prototype.writeDoubleLE=function(e,t,r){return U(this,e,t,!0,r)},c.prototype.writeDoubleBE=function(e,t,r){return U(this,e,t,!1,r)},c.prototype.copy=function(e,t,r,i){if(r||(r=0),i||0===i||(i=this.length),t>=e.length&&(t=e.length),t||(t=0),i>0&&i<r&&(i=r),i===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-r&&(i=e.length-t+r);var n,a=i-r;if(this===e&&r<t&&t<i)for(n=a-1;n>=0;--n)e[n+t]=this[n+r];else if(a<1e3||!c.TYPED_ARRAY_SUPPORT)for(n=0;n<a;++n)e[n+t]=this[n+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+a),t);return a},c.prototype.fill=function(e,t,r,i){if("string"==typeof e){if("string"==typeof t?(i=t,t=0,r=this.length):"string"==typeof r&&(i=r,r=this.length),1===e.length){var n=e.charCodeAt(0);n<256&&(e=n)}if(void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!c.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;var a;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(a=t;a<r;++a)this[a]=e;else{var o=c.isBuffer(e)?e:F(new c(e,i).toString()),s=o.length;for(a=0;a<r-t;++a)this[a+t]=o[a%s]}return this};var j=/[^+\/0-9A-Za-z-_]/g;function G(e){return e<16?"0"+e.toString(16):e.toString(16)}function F(e,t){var r;t=t||1/0;for(var i=e.length,n=null,a=[],o=0;o<i;++o){if((r=e.charCodeAt(o))>55295&&r<57344){if(!n){if(r>56319){(t-=3)>-1&&a.push(239,191,189);continue}if(o+1===i){(t-=3)>-1&&a.push(239,191,189);continue}n=r;continue}if(r<56320){(t-=3)>-1&&a.push(239,191,189),n=r;continue}r=65536+(n-55296<<10|r-56320)}else n&&(t-=3)>-1&&a.push(239,191,189);if(n=null,r<128){if((t-=1)<0)break;a.push(r)}else if(r<2048){if((t-=2)<0)break;a.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;a.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return a}function L(e){return i.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(j,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function K(e,t,r,i){for(var n=0;n<i&&!(n+r>=t.length||n>=e.length);++n)t[n+r]=e[n];return n}}).call(this,r(30))},function(e,t,r){"use strict";(function(t){var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),n=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],i=!0,n=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(i=(o=s.next()).done)&&(r.push(o.value),!t||r.length!==t);i=!0);}catch(e){n=!0,a=e}finally{try{!i&&s.return&&s.return()}finally{if(n)throw a}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var o=r(26),s=function(){function e(r,i,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n&&console.log("starting GeoRaster.constructor with",r,i),this._web_worker_is_available="undefined"!=typeof window&&"undefined"!==window.Worker,this._blob_is_available="undefined"!=typeof Blob,this._url_is_available="undefined"!=typeof URL,void 0!==t&&t.isBuffer(r)?(this._data=r.buffer.slice(r.byteOffset,r.byteOffset+r.byteLength),this.raster_type="geotiff"):r instanceof ArrayBuffer?(this._data=r,this.raster_type="geotiff"):Array.isArray(r)&&i&&(this._data=r,this.raster_type="object",this._metadata=i),n&&console.log("this after construction:",this)}return i(e,[{key:"initialize",value:function(e){var t=this;return new Promise(function(r,i){if(e&&console.log("starting GeoRaster.initialize"),"object"===t.raster_type||"geotiff"===t.raster_type||"tiff"===t.raster_type)if(t._web_worker_is_available){var s=void 0;if(t._blob_is_available){var c=new Blob(['\n\n    // this is a bit of a hack to trick geotiff to work with web worker\n    let window = self;\n\n    // copied string from geotiff.browserify.min.js\n    !function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module \'"+g+"\'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c||a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";function d(a){if(!(this instanceof d))return new d(a);this.options=h.assign({chunkSize:16384,windowBits:0,to:""},a||{});var b=this.options;b.raw&&b.windowBits>=0&&b.windowBits<16&&(b.windowBits=-b.windowBits,0===b.windowBits&&(b.windowBits=-15)),!(b.windowBits>=0&&b.windowBits<16)||a&&a.windowBits||(b.windowBits+=32),b.windowBits>15&&b.windowBits<48&&0==(15&b.windowBits)&&(b.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var c=g.inflateInit2(this.strm,b.windowBits);if(c!==j.Z_OK)throw new Error(k[c]);this.header=new m,g.inflateGetHeader(this.strm,this.header)}function e(a,b){var c=new d(b);if(c.push(a,!0),c.err)throw c.msg||k[c.err];return c.result}function f(a,b){return b=b||{},b.raw=!0,e(a,b)}var g=a("./zlib/inflate"),h=a("./utils/common"),i=a("./utils/strings"),j=a("./zlib/constants"),k=a("./zlib/messages"),l=a("./zlib/zstream"),m=a("./zlib/gzheader"),n=Object.prototype.toString;d.prototype.push=function(a,b){var c,d,e,f,k,l,m=this.strm,o=this.options.chunkSize,p=this.options.dictionary,q=!1;if(this.ended)return!1;d=b===~~b?b:!0===b?j.Z_FINISH:j.Z_NO_FLUSH,"string"==typeof a?m.input=i.binstring2buf(a):"[object ArrayBuffer]"===n.call(a)?m.input=new Uint8Array(a):m.input=a,m.next_in=0,m.avail_in=m.input.length;do{if(0===m.avail_out&&(m.output=new h.Buf8(o),m.next_out=0,m.avail_out=o),c=g.inflate(m,j.Z_NO_FLUSH),c===j.Z_NEED_DICT&&p&&(l="string"==typeof p?i.string2buf(p):"[object ArrayBuffer]"===n.call(p)?new Uint8Array(p):p,c=g.inflateSetDictionary(this.strm,l)),c===j.Z_BUF_ERROR&&!0===q&&(c=j.Z_OK,q=!1),c!==j.Z_STREAM_END&&c!==j.Z_OK)return this.onEnd(c),this.ended=!0,!1;m.next_out&&(0!==m.avail_out&&c!==j.Z_STREAM_END&&(0!==m.avail_in||d!==j.Z_FINISH&&d!==j.Z_SYNC_FLUSH)||("string"===this.options.to?(e=i.utf8border(m.output,m.next_out),f=m.next_out-e,k=i.buf2string(m.output,e),m.next_out=f,m.avail_out=o-f,f&&h.arraySet(m.output,m.output,e,f,0),this.onData(k)):this.onData(h.shrinkBuf(m.output,m.next_out)))),0===m.avail_in&&0===m.avail_out&&(q=!0)}while((m.avail_in>0||0===m.avail_out)&&c!==j.Z_STREAM_END);return c===j.Z_STREAM_END&&(d=j.Z_FINISH),d===j.Z_FINISH?(c=g.inflateEnd(this.strm),this.onEnd(c),this.ended=!0,c===j.Z_OK):d!==j.Z_SYNC_FLUSH||(this.onEnd(j.Z_OK),m.avail_out=0,!0)},d.prototype.onData=function(a){this.chunks.push(a)},d.prototype.onEnd=function(a){a===j.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=h.flattenChunks(this.chunks)),this.chunks=[],this.err=a,this.msg=this.strm.msg},c.Inflate=d,c.inflate=e,c.inflateRaw=f,c.ungzip=e},{"./utils/common":2,"./utils/strings":3,"./zlib/constants":5,"./zlib/gzheader":7,"./zlib/inflate":9,"./zlib/messages":11,"./zlib/zstream":12}],2:[function(a,b,c){"use strict";function d(a,b){return Object.prototype.hasOwnProperty.call(a,b)}var e="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;c.assign=function(a){for(var b=Array.prototype.slice.call(arguments,1);b.length;){var c=b.shift();if(c){if("object"!=typeof c)throw new TypeError(c+"must be non-object");for(var e in c)d(c,e)&&(a[e]=c[e])}}return a},c.shrinkBuf=function(a,b){return a.length===b?a:a.subarray?a.subarray(0,b):(a.length=b,a)};var f={arraySet:function(a,b,c,d,e){if(b.subarray&&a.subarray)return void a.set(b.subarray(c,c+d),e);for(var f=0;f<d;f++)a[e+f]=b[c+f]},flattenChunks:function(a){var b,c,d,e,f,g;for(d=0,b=0,c=a.length;b<c;b++)d+=a[b].length;for(g=new Uint8Array(d),e=0,b=0,c=a.length;b<c;b++)f=a[b],g.set(f,e),e+=f.length;return g}},g={arraySet:function(a,b,c,d,e){for(var f=0;f<d;f++)a[e+f]=b[c+f]},flattenChunks:function(a){return[].concat.apply([],a)}};c.setTyped=function(a){a?(c.Buf8=Uint8Array,c.Buf16=Uint16Array,c.Buf32=Int32Array,c.assign(c,f)):(c.Buf8=Array,c.Buf16=Array,c.Buf32=Array,c.assign(c,g))},c.setTyped(e)},{}],3:[function(a,b,c){"use strict";function d(a,b){if(b<65537&&(a.subarray&&g||!a.subarray&&f))return String.fromCharCode.apply(null,e.shrinkBuf(a,b));for(var c="",d=0;d<b;d++)c+=String.fromCharCode(a[d]);return c}var e=a("./common"),f=!0,g=!0;try{String.fromCharCode.apply(null,[0])}catch(a){f=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(a){g=!1}for(var h=new e.Buf8(256),i=0;i<256;i++)h[i]=i>=252?6:i>=248?5:i>=240?4:i>=224?3:i>=192?2:1;h[254]=h[254]=1,c.string2buf=function(a){var b,c,d,f,g,h=a.length,i=0;for(f=0;f<h;f++)c=a.charCodeAt(f),55296==(64512&c)&&f+1<h&&56320==(64512&(d=a.charCodeAt(f+1)))&&(c=65536+(c-55296<<10)+(d-56320),f++),i+=c<128?1:c<2048?2:c<65536?3:4;for(b=new e.Buf8(i),g=0,f=0;g<i;f++)c=a.charCodeAt(f),55296==(64512&c)&&f+1<h&&56320==(64512&(d=a.charCodeAt(f+1)))&&(c=65536+(c-55296<<10)+(d-56320),f++),c<128?b[g++]=c:c<2048?(b[g++]=192|c>>>6,b[g++]=128|63&c):c<65536?(b[g++]=224|c>>>12,b[g++]=128|c>>>6&63,b[g++]=128|63&c):(b[g++]=240|c>>>18,b[g++]=128|c>>>12&63,b[g++]=128|c>>>6&63,b[g++]=128|63&c);return b},c.buf2binstring=function(a){return d(a,a.length)},c.binstring2buf=function(a){for(var b=new e.Buf8(a.length),c=0,d=b.length;c<d;c++)b[c]=a.charCodeAt(c);return b},c.buf2string=function(a,b){var c,e,f,g,i=b||a.length,j=new Array(2*i);for(e=0,c=0;c<i;)if((f=a[c++])<128)j[e++]=f;else if((g=h[f])>4)j[e++]=65533,c+=g-1;else{for(f&=2===g?31:3===g?15:7;g>1&&c<i;)f=f<<6|63&a[c++],g--;g>1?j[e++]=65533:f<65536?j[e++]=f:(f-=65536,j[e++]=55296|f>>10&1023,j[e++]=56320|1023&f)}return d(j,e)},c.utf8border=function(a,b){var c;for(b=b||a.length,b>a.length&&(b=a.length),c=b-1;c>=0&&128==(192&a[c]);)c--;return c<0?b:0===c?b:c+h[a[c]]>b?c:b}},{"./common":2}],4:[function(a,b,c){"use strict";function d(a,b,c,d){for(var e=65535&a|0,f=a>>>16&65535|0,g=0;0!==c;){g=c>2e3?2e3:c,c-=g;do{e=e+b[d++]|0,f=f+e|0}while(--g);e%=65521,f%=65521}return e|f<<16|0}b.exports=d},{}],5:[function(a,b,c){"use strict";b.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],6:[function(a,b,c){"use strict";function d(a,b,c,d){var f=e,g=d+c;a^=-1;for(var h=d;h<g;h++)a=a>>>8^f[255&(a^b[h])];return-1^a}var e=function(){for(var a,b=[],c=0;c<256;c++){a=c;for(var d=0;d<8;d++)a=1&a?3988292384^a>>>1:a>>>1;b[c]=a}return b}();b.exports=d},{}],7:[function(a,b,c){"use strict";function d(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}b.exports=d},{}],8:[function(a,b,c){"use strict";b.exports=function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A;c=a.state,d=a.next_in,z=a.input,e=d+(a.avail_in-5),f=a.next_out,A=a.output,g=f-(b-a.avail_out),h=f+(a.avail_out-257),i=c.dmax,j=c.wsize,k=c.whave,l=c.wnext,m=c.window,n=c.hold,o=c.bits,p=c.lencode,q=c.distcode,r=(1<<c.lenbits)-1,s=(1<<c.distbits)-1;a:do{o<15&&(n+=z[d++]<<o,o+=8,n+=z[d++]<<o,o+=8),t=p[n&r];b:for(;;){if(u=t>>>24,n>>>=u,o-=u,0===(u=t>>>16&255))A[f++]=65535&t;else{if(!(16&u)){if(0==(64&u)){t=p[(65535&t)+(n&(1<<u)-1)];continue b}if(32&u){c.mode=12;break a}a.msg="invalid literal/length code",c.mode=30;break a}v=65535&t,u&=15,u&&(o<u&&(n+=z[d++]<<o,o+=8),v+=n&(1<<u)-1,n>>>=u,o-=u),o<15&&(n+=z[d++]<<o,o+=8,n+=z[d++]<<o,o+=8),t=q[n&s];c:for(;;){if(u=t>>>24,n>>>=u,o-=u,!(16&(u=t>>>16&255))){if(0==(64&u)){t=q[(65535&t)+(n&(1<<u)-1)];continue c}a.msg="invalid distance code",c.mode=30;break a}if(w=65535&t,u&=15,o<u&&(n+=z[d++]<<o,(o+=8)<u&&(n+=z[d++]<<o,o+=8)),(w+=n&(1<<u)-1)>i){a.msg="invalid distance too far back",c.mode=30;break a}if(n>>>=u,o-=u,u=f-g,w>u){if((u=w-u)>k&&c.sane){a.msg="invalid distance too far back",c.mode=30;break a}if(x=0,y=m,0===l){if(x+=j-u,u<v){v-=u;do{A[f++]=m[x++]}while(--u);x=f-w,y=A}}else if(l<u){if(x+=j+l-u,(u-=l)<v){v-=u;do{A[f++]=m[x++]}while(--u);if(x=0,l<v){u=l,v-=u;do{A[f++]=m[x++]}while(--u);x=f-w,y=A}}}else if(x+=l-u,u<v){v-=u;do{A[f++]=m[x++]}while(--u);x=f-w,y=A}for(;v>2;)A[f++]=y[x++],A[f++]=y[x++],A[f++]=y[x++],v-=3;v&&(A[f++]=y[x++],v>1&&(A[f++]=y[x++]))}else{x=f-w;do{A[f++]=A[x++],A[f++]=A[x++],A[f++]=A[x++],v-=3}while(v>2);v&&(A[f++]=A[x++],v>1&&(A[f++]=A[x++]))}break}}break}}while(d<e&&f<h);v=o>>3,d-=v,o-=v<<3,n&=(1<<o)-1,a.next_in=d,a.next_out=f,a.avail_in=d<e?e-d+5:5-(d-e),a.avail_out=f<h?h-f+257:257-(f-h),c.hold=n,c.bits=o}},{}],9:[function(a,b,c){"use strict";function d(a){return(a>>>24&255)+(a>>>8&65280)+((65280&a)<<8)+((255&a)<<24)}function e(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new s.Buf16(320),this.work=new s.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function f(a){var b;return a&&a.state?(b=a.state,a.total_in=a.total_out=b.total=0,a.msg="",b.wrap&&(a.adler=1&b.wrap),b.mode=L,b.last=0,b.havedict=0,b.dmax=32768,b.head=null,b.hold=0,b.bits=0,b.lencode=b.lendyn=new s.Buf32(pa),b.distcode=b.distdyn=new s.Buf32(qa),b.sane=1,b.back=-1,D):G}function g(a){var b;return a&&a.state?(b=a.state,b.wsize=0,b.whave=0,b.wnext=0,f(a)):G}function h(a,b){var c,d;return a&&a.state?(d=a.state,b<0?(c=0,b=-b):(c=1+(b>>4),b<48&&(b&=15)),b&&(b<8||b>15)?G:(null!==d.window&&d.wbits!==b&&(d.window=null),d.wrap=c,d.wbits=b,g(a))):G}function i(a,b){var c,d;return a?(d=new e,a.state=d,d.window=null,c=h(a,b),c!==D&&(a.state=null),c):G}function j(a){return i(a,ra)}function k(a){if(sa){var b;for(q=new s.Buf32(512),r=new s.Buf32(32),b=0;b<144;)a.lens[b++]=8;for(;b<256;)a.lens[b++]=9;for(;b<280;)a.lens[b++]=7;for(;b<288;)a.lens[b++]=8;for(w(y,a.lens,0,288,q,0,a.work,{bits:9}),b=0;b<32;)a.lens[b++]=5;w(z,a.lens,0,32,r,0,a.work,{bits:5}),sa=!1}a.lencode=q,a.lenbits=9,a.distcode=r,a.distbits=5}function l(a,b,c,d){var e,f=a.state;return null===f.window&&(f.wsize=1<<f.wbits,f.wnext=0,f.whave=0,f.window=new s.Buf8(f.wsize)),d>=f.wsize?(s.arraySet(f.window,b,c-f.wsize,f.wsize,0),f.wnext=0,f.whave=f.wsize):(e=f.wsize-f.wnext,e>d&&(e=d),s.arraySet(f.window,b,c-d,e,f.wnext),d-=e,d?(s.arraySet(f.window,b,c-d,d,0),f.wnext=d,f.whave=f.wsize):(f.wnext+=e,f.wnext===f.wsize&&(f.wnext=0),f.whave<f.wsize&&(f.whave+=e))),0}function m(a,b){var c,e,f,g,h,i,j,m,n,o,p,q,r,pa,qa,ra,sa,ta,ua,va,wa,xa,ya,za,Aa=0,Ba=new s.Buf8(4),Ca=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!a||!a.state||!a.output||!a.input&&0!==a.avail_in)return G;c=a.state,c.mode===W&&(c.mode=X),h=a.next_out,f=a.output,j=a.avail_out,g=a.next_in,e=a.input,i=a.avail_in,m=c.hold,n=c.bits,o=i,p=j,xa=D;a:for(;;)switch(c.mode){case L:if(0===c.wrap){c.mode=X;break}for(;n<16;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}if(2&c.wrap&&35615===m){c.check=0,Ba[0]=255&m,Ba[1]=m>>>8&255,c.check=u(c.check,Ba,2,0),m=0,n=0,c.mode=M;break}if(c.flags=0,c.head&&(c.head.done=!1),!(1&c.wrap)||(((255&m)<<8)+(m>>8))%31){a.msg="incorrect header check",c.mode=ma;break}if((15&m)!==K){a.msg="unknown compression method",c.mode=ma;break}if(m>>>=4,n-=4,wa=8+(15&m),0===c.wbits)c.wbits=wa;else if(wa>c.wbits){a.msg="invalid window size",c.mode=ma;break}c.dmax=1<<wa,a.adler=c.check=1,c.mode=512&m?U:W,m=0,n=0;break;case M:for(;n<16;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}if(c.flags=m,(255&c.flags)!==K){a.msg="unknown compression method",c.mode=ma;break}if(57344&c.flags){a.msg="unknown header flags set",c.mode=ma;break}c.head&&(c.head.text=m>>8&1),512&c.flags&&(Ba[0]=255&m,Ba[1]=m>>>8&255,c.check=u(c.check,Ba,2,0)),m=0,n=0,c.mode=N;case N:for(;n<32;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}c.head&&(c.head.time=m),512&c.flags&&(Ba[0]=255&m,Ba[1]=m>>>8&255,Ba[2]=m>>>16&255,Ba[3]=m>>>24&255,c.check=u(c.check,Ba,4,0)),m=0,n=0,c.mode=O;case O:for(;n<16;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}c.head&&(c.head.xflags=255&m,c.head.os=m>>8),512&c.flags&&(Ba[0]=255&m,Ba[1]=m>>>8&255,c.check=u(c.check,Ba,2,0)),m=0,n=0,c.mode=P;case P:if(1024&c.flags){for(;n<16;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}c.length=m,c.head&&(c.head.extra_len=m),512&c.flags&&(Ba[0]=255&m,Ba[1]=m>>>8&255,c.check=u(c.check,Ba,2,0)),m=0,n=0}else c.head&&(c.head.extra=null);c.mode=Q;case Q:if(1024&c.flags&&(q=c.length,q>i&&(q=i),q&&(c.head&&(wa=c.head.extra_len-c.length,c.head.extra||(c.head.extra=new Array(c.head.extra_len)),s.arraySet(c.head.extra,e,g,q,wa)),512&c.flags&&(c.check=u(c.check,e,q,g)),i-=q,g+=q,c.length-=q),c.length))break a;c.length=0,c.mode=R;case R:if(2048&c.flags){if(0===i)break a;q=0;do{wa=e[g+q++],c.head&&wa&&c.length<65536&&(c.head.name+=String.fromCharCode(wa))}while(wa&&q<i);if(512&c.flags&&(c.check=u(c.check,e,q,g)),i-=q,g+=q,wa)break a}else c.head&&(c.head.name=null);c.length=0,c.mode=S;case S:if(4096&c.flags){if(0===i)break a;q=0;do{wa=e[g+q++],c.head&&wa&&c.length<65536&&(c.head.comment+=String.fromCharCode(wa))}while(wa&&q<i);if(512&c.flags&&(c.check=u(c.check,e,q,g)),i-=q,g+=q,wa)break a}else c.head&&(c.head.comment=null);c.mode=T;case T:if(512&c.flags){for(;n<16;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}if(m!==(65535&c.check)){a.msg="header crc mismatch",c.mode=ma;break}m=0,n=0}c.head&&(c.head.hcrc=c.flags>>9&1,c.head.done=!0),a.adler=c.check=0,c.mode=W;break;case U:for(;n<32;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}a.adler=c.check=d(m),m=0,n=0,c.mode=V;case V:if(0===c.havedict)return a.next_out=h,a.avail_out=j,a.next_in=g,a.avail_in=i,c.hold=m,c.bits=n,F;a.adler=c.check=1,c.mode=W;case W:if(b===B||b===C)break a;case X:if(c.last){m>>>=7&n,n-=7&n,c.mode=ja;break}for(;n<3;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}switch(c.last=1&m,m>>>=1,n-=1,3&m){case 0:c.mode=Y;break;case 1:if(k(c),c.mode=ca,b===C){m>>>=2,n-=2;break a}break;case 2:c.mode=_;break;case 3:a.msg="invalid block type",c.mode=ma}m>>>=2,n-=2;break;case Y:for(m>>>=7&n,n-=7&n;n<32;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}if((65535&m)!=(m>>>16^65535)){a.msg="invalid stored block lengths",c.mode=ma;break}if(c.length=65535&m,m=0,n=0,c.mode=Z,b===C)break a;case Z:c.mode=$;case $:if(q=c.length){if(q>i&&(q=i),q>j&&(q=j),0===q)break a;s.arraySet(f,e,g,q,h),i-=q,g+=q,j-=q,h+=q,c.length-=q;break}c.mode=W;break;case _:for(;n<14;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}if(c.nlen=257+(31&m),m>>>=5,n-=5,c.ndist=1+(31&m),m>>>=5,n-=5,c.ncode=4+(15&m),m>>>=4,n-=4,c.nlen>286||c.ndist>30){a.msg="too many length or distance symbols",c.mode=ma;break}c.have=0,c.mode=aa;case aa:for(;c.have<c.ncode;){for(;n<3;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}c.lens[Ca[c.have++]]=7&m,m>>>=3,n-=3}for(;c.have<19;)c.lens[Ca[c.have++]]=0;if(c.lencode=c.lendyn,c.lenbits=7,ya={bits:c.lenbits},xa=w(x,c.lens,0,19,c.lencode,0,c.work,ya),c.lenbits=ya.bits,xa){a.msg="invalid code lengths set",c.mode=ma;break}c.have=0,c.mode=ba;case ba:for(;c.have<c.nlen+c.ndist;){for(;Aa=c.lencode[m&(1<<c.lenbits)-1],qa=Aa>>>24,ra=Aa>>>16&255,sa=65535&Aa,!(qa<=n);){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}if(sa<16)m>>>=qa,n-=qa,c.lens[c.have++]=sa;else{if(16===sa){for(za=qa+2;n<za;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}if(m>>>=qa,n-=qa,0===c.have){a.msg="invalid bit length repeat",c.mode=ma;break}wa=c.lens[c.have-1],q=3+(3&m),m>>>=2,n-=2}else if(17===sa){for(za=qa+3;n<za;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}m>>>=qa,n-=qa,wa=0,q=3+(7&m),m>>>=3,n-=3}else{for(za=qa+7;n<za;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}m>>>=qa,n-=qa,wa=0,q=11+(127&m),m>>>=7,n-=7}if(c.have+q>c.nlen+c.ndist){a.msg="invalid bit length repeat",c.mode=ma;break}for(;q--;)c.lens[c.have++]=wa}}if(c.mode===ma)break;if(0===c.lens[256]){a.msg="invalid code -- missing end-of-block",c.mode=ma;break}if(c.lenbits=9,ya={bits:c.lenbits},xa=w(y,c.lens,0,c.nlen,c.lencode,0,c.work,ya),c.lenbits=ya.bits,xa){a.msg="invalid literal/lengths set",c.mode=ma;break}if(c.distbits=6,c.distcode=c.distdyn,ya={bits:c.distbits},xa=w(z,c.lens,c.nlen,c.ndist,c.distcode,0,c.work,ya),c.distbits=ya.bits,xa){a.msg="invalid distances set",c.mode=ma;break}if(c.mode=ca,b===C)break a;case ca:c.mode=da;case da:if(i>=6&&j>=258){a.next_out=h,a.avail_out=j,a.next_in=g,a.avail_in=i,c.hold=m,c.bits=n,v(a,p),h=a.next_out,f=a.output,j=a.avail_out,g=a.next_in,e=a.input,i=a.avail_in,m=c.hold,n=c.bits,c.mode===W&&(c.back=-1);break}for(c.back=0;Aa=c.lencode[m&(1<<c.lenbits)-1],qa=Aa>>>24,ra=Aa>>>16&255,sa=65535&Aa,!(qa<=n);){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}if(ra&&0==(240&ra)){for(ta=qa,ua=ra,va=sa;Aa=c.lencode[va+((m&(1<<ta+ua)-1)>>ta)],qa=Aa>>>24,ra=Aa>>>16&255,sa=65535&Aa,!(ta+qa<=n);){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}m>>>=ta,n-=ta,c.back+=ta}if(m>>>=qa,n-=qa,c.back+=qa,c.length=sa,0===ra){c.mode=ia;break}if(32&ra){c.back=-1,c.mode=W;break}if(64&ra){a.msg="invalid literal/length code",c.mode=ma;break}c.extra=15&ra,c.mode=ea;case ea:if(c.extra){for(za=c.extra;n<za;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}c.length+=m&(1<<c.extra)-1,m>>>=c.extra,n-=c.extra,c.back+=c.extra}c.was=c.length,c.mode=fa;case fa:for(;Aa=c.distcode[m&(1<<c.distbits)-1],qa=Aa>>>24,ra=Aa>>>16&255,sa=65535&Aa,!(qa<=n);){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}if(0==(240&ra)){for(ta=qa,ua=ra,va=sa;Aa=c.distcode[va+((m&(1<<ta+ua)-1)>>ta)],qa=Aa>>>24,ra=Aa>>>16&255,sa=65535&Aa,!(ta+qa<=n);){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}m>>>=ta,n-=ta,c.back+=ta}if(m>>>=qa,n-=qa,c.back+=qa,64&ra){a.msg="invalid distance code",c.mode=ma;break}c.offset=sa,c.extra=15&ra,c.mode=ga;case ga:if(c.extra){for(za=c.extra;n<za;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}c.offset+=m&(1<<c.extra)-1,m>>>=c.extra,n-=c.extra,c.back+=c.extra}if(c.offset>c.dmax){a.msg="invalid distance too far back",c.mode=ma;break}c.mode=ha;case ha:if(0===j)break a;if(q=p-j,c.offset>q){if((q=c.offset-q)>c.whave&&c.sane){a.msg="invalid distance too far back",c.mode=ma;break}q>c.wnext?(q-=c.wnext,r=c.wsize-q):r=c.wnext-q,q>c.length&&(q=c.length),pa=c.window}else pa=f,r=h-c.offset,q=c.length;q>j&&(q=j),j-=q,c.length-=q;do{f[h++]=pa[r++]}while(--q);0===c.length&&(c.mode=da);break;case ia:if(0===j)break a;f[h++]=c.length,j--,c.mode=da;break;case ja:if(c.wrap){for(;n<32;){if(0===i)break a;i--,m|=e[g++]<<n,n+=8}if(p-=j,a.total_out+=p,c.total+=p,p&&(a.adler=c.check=c.flags?u(c.check,f,p,h-p):t(c.check,f,p,h-p)),p=j,(c.flags?m:d(m))!==c.check){a.msg="incorrect data check",c.mode=ma;break}m=0,n=0}c.mode=ka;case ka:if(c.wrap&&c.flags){for(;n<32;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}if(m!==(4294967295&c.total)){a.msg="incorrect length check",c.mode=ma;break}m=0,n=0}c.mode=la;case la:xa=E;break a;case ma:xa=H;break a;case na:return I;case oa:default:return G}return a.next_out=h,a.avail_out=j,a.next_in=g,a.avail_in=i,c.hold=m,c.bits=n,(c.wsize||p!==a.avail_out&&c.mode<ma&&(c.mode<ja||b!==A))&&l(a,a.output,a.next_out,p-a.avail_out)?(c.mode=na,I):(o-=a.avail_in,p-=a.avail_out,a.total_in+=o,a.total_out+=p,c.total+=p,c.wrap&&p&&(a.adler=c.check=c.flags?u(c.check,f,p,a.next_out-p):t(c.check,f,p,a.next_out-p)),a.data_type=c.bits+(c.last?64:0)+(c.mode===W?128:0)+(c.mode===ca||c.mode===Z?256:0),(0===o&&0===p||b===A)&&xa===D&&(xa=J),xa)}function n(a){if(!a||!a.state)return G;var b=a.state;return b.window&&(b.window=null),a.state=null,D}function o(a,b){var c;return a&&a.state?(c=a.state,0==(2&c.wrap)?G:(c.head=b,b.done=!1,D)):G}function p(a,b){var c,d,e=b.length;return a&&a.state?(c=a.state,0!==c.wrap&&c.mode!==V?G:c.mode===V&&(d=1,(d=t(d,b,e,0))!==c.check)?H:l(a,b,e,e)?(c.mode=na,I):(c.havedict=1,D)):G}var q,r,s=a("../utils/common"),t=a("./adler32"),u=a("./crc32"),v=a("./inffast"),w=a("./inftrees"),x=0,y=1,z=2,A=4,B=5,C=6,D=0,E=1,F=2,G=-2,H=-3,I=-4,J=-5,K=8,L=1,M=2,N=3,O=4,P=5,Q=6,R=7,S=8,T=9,U=10,V=11,W=12,X=13,Y=14,Z=15,$=16,_=17,aa=18,ba=19,ca=20,da=21,ea=22,fa=23,ga=24,ha=25,ia=26,ja=27,ka=28,la=29,ma=30,na=31,oa=32,pa=852,qa=592,ra=15,sa=!0;c.inflateReset=g,c.inflateReset2=h,c.inflateResetKeep=f,c.inflateInit=j,c.inflateInit2=i,c.inflate=m,c.inflateEnd=n,c.inflateGetHeader=o,c.inflateSetDictionary=p,c.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":2,"./adler32":4,"./crc32":6,"./inffast":8,"./inftrees":10}],10:[function(a,b,c){"use strict";var d=a("../utils/common"),e=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],f=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],g=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],h=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];b.exports=function(a,b,c,i,j,k,l,m){var n,o,p,q,r,s,t,u,v,w=m.bits,x=0,y=0,z=0,A=0,B=0,C=0,D=0,E=0,F=0,G=0,H=null,I=0,J=new d.Buf16(16),K=new d.Buf16(16),L=null,M=0;for(x=0;x<=15;x++)J[x]=0;for(y=0;y<i;y++)J[b[c+y]]++;for(B=w,A=15;A>=1&&0===J[A];A--);if(B>A&&(B=A),0===A)return j[k++]=20971520,j[k++]=20971520,m.bits=1,0;for(z=1;z<A&&0===J[z];z++);for(B<z&&(B=z),E=1,x=1;x<=15;x++)if(E<<=1,(E-=J[x])<0)return-1;if(E>0&&(0===a||1!==A))return-1;for(K[1]=0,x=1;x<15;x++)K[x+1]=K[x]+J[x];for(y=0;y<i;y++)0!==b[c+y]&&(l[K[b[c+y]]++]=y);if(0===a?(H=L=l,s=19):1===a?(H=e,I-=257,L=f,M-=257,s=256):(H=g,L=h,s=-1),G=0,y=0,x=z,r=k,C=B,D=0,p=-1,F=1<<B,q=F-1,1===a&&F>852||2===a&&F>592)return 1;for(;;){t=x-D,l[y]<s?(u=0,v=l[y]):l[y]>s?(u=L[M+l[y]],v=H[I+l[y]]):(u=96,v=0),n=1<<x-D,o=1<<C,z=o;do{o-=n,j[r+(G>>D)+o]=t<<24|u<<16|v|0}while(0!==o);for(n=1<<x-1;G&n;)n>>=1;if(0!==n?(G&=n-1,G+=n):G=0,y++,0==--J[x]){if(x===A)break;x=b[c+l[y]]}if(x>B&&(G&q)!==p){for(0===D&&(D=B),r+=z,C=x-D,E=1<<C;C+D<A&&!((E-=J[C+D])<=0);)C++,E<<=1;if(F+=1<<C,1===a&&F>852||2===a&&F>592)return 1;p=G&q,j[p]=B<<24|C<<16|r-k|0}}return 0!==G&&(j[r+G]=x-D<<24|64<<16|0),m.bits=B,0}},{"../utils/common":2}],11:[function(a,b,c){"use strict";b.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],12:[function(a,b,c){"use strict";function d(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}b.exports=d},{}],13:[function(a,b,c){"use strict";function d(){}d.prototype={isAsync:function(){return void 0===this.decodeBlock}},b.exports=d},{}],14:[function(a,b,c){"use strict";function d(){}var e=a("../abstractdecoder.js"),f=a("pako/lib/inflate").inflate;d.prototype=Object.create(e.prototype),d.prototype.constructor=d,d.prototype.decodeBlock=function(a){return f(new Uint8Array(a)).buffer},b.exports=d},{"../abstractdecoder.js":13,"pako/lib/inflate":1}],15:[function(a,b,c){"use strict";function d(a,b,c){var d=b%8,e=Math.floor(b/8),f=8-d,g=b+c-8*(e+1),h=8*(e+2)-(b+c),i=8*(e+2)-b;if(h=Math.max(0,h),e>=a.length)return console.warn("ran off the end of the buffer before finding EOI_CODE (end on input code)"),k;var j=a[e]&Math.pow(2,8-d)-1;j<<=c-f;var l=j;if(e+1<a.length){var m=a[e+1]>>>h;m<<=Math.max(0,c-i),l+=m}if(g>8&&e+2<a.length){var n=8*(e+3)-(b+c);l+=a[e+2]>>>n}return l}function e(a,b){for(var c=b.length-1;c>=0;c--)a.push(b[c]);return a}function f(a){function b(){n=258,o=i}function c(a){var b=d(a,p,o);return p+=o,b}function f(a,b){return l[n]=b,h[n]=a,n++,n>=Math.pow(2,o)&&o++,n-1}function g(a){for(var b=[];4096!==a;)b.push(l[a]),a=h[a];return b}for(var h=new Uint16Array(4093),l=new Uint8Array(4093),m=0;m<=257;m++)h[m]=4096,l[m]=m;var n=258,o=i,p=0,q=[];b();for(var r,s=new Uint8Array(a),t=c(s);t!==k;){if(t===j){for(b(),t=c(s);t===j;)t=c(s);if(t>j)throw"corrupted code at scanline "+t;if(t===k)break;e(q,g(t)),r=t}else if(t<n){var u=g(t);e(q,u),f(r,u[u.length-1]),r=t}else{var v=g(r);if(!v)throw"Bogus entry. Not in dictionary, "+r+" / "+n+", position: "+p;e(q,v),q.push(v[v.length-1]),f(r,v[v.length-1]),r=t}n>=Math.pow(2,o)-1&&o++,t=c(s)}return new Uint8Array(q)}function g(){}var h=a("../abstractdecoder.js"),i=9,j=256,k=257;g.prototype=Object.create(h.prototype),g.prototype.constructor=g,g.prototype.decodeBlock=function(a){return f(a).buffer},b.exports=g},{"../abstractdecoder.js":13}],16:[function(a,b,c){"use strict";function d(){}var e=a("../abstractdecoder.js");d.prototype=Object.create(e.prototype),d.prototype.constructor=d,d.prototype.decodeBlock=function(a){var b,c,d=new DataView(a),e=[];for(b=0;b<a.byteLength;++b){var f=d.getInt8(b);if(f<0){var g=d.getUint8(b+1);for(f=-f,c=0;c<=f;++c)e.push(g);b+=1}else{for(c=0;c<=f;++c)e.push(d.getUint8(b+c+1));b+=f+1}}return new Uint8Array(e).buffer},b.exports=d},{"../abstractdecoder.js":13}],17:[function(a,b,c){"use strict";function d(){}var e=a("../abstractdecoder.js");d.prototype=Object.create(e.prototype),d.prototype.constructor=d,d.prototype.decodeBlock=function(a){return a},b.exports=d},{"../abstractdecoder.js":13}],18:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=function(){function a(b){d(this,a),this._dataView=new DataView(b)}return e(a,[{key:"getUint64",value:function(a,b){var c=this.getUint32(a,b),d=this.getUint32(a+4,b);return b?c<<32|d:d<<32|c}},{key:"getInt64",value:function(a,b){var c,d;return b?(c=this.getInt32(a,b),d=this.getUint32(a+4,b),c<<32|d):(c=this.getUint32(a,b),(d=this.getInt32(a+4,b))<<32|c)}},{key:"getUint8",value:function(a,b){return this._dataView.getUint8(a,b)}},{key:"getInt8",value:function(a,b){return this._dataView.getInt8(a,b)}},{key:"getUint16",value:function(a,b){return this._dataView.getUint16(a,b)}},{key:"getInt16",value:function(a,b){return this._dataView.getInt16(a,b)}},{key:"getUint32",value:function(a,b){return this._dataView.getUint32(a,b)}},{key:"getInt32",value:function(a,b){return this._dataView.getInt32(a,b)}},{key:"getFloat32",value:function(a,b){return this._dataView.getFloat32(a,b)}},{key:"getFloat64",value:function(a,b){return this._dataView.getFloat64(a,b)}},{key:"buffer",get:function(){return this._dataView.buffer}}]),a}();b.exports=f},{}],19:[function(a,b,c){"use strict";function d(a,b){this.dataView=new g(a),b=b||{},this.cache=b.cache||!1;var c=this.dataView.getUint16(0,0);if(18761===c)this.littleEndian=!0;else{if(19789!==c)throw new TypeError("Invalid byte order value.");this.littleEndian=!1}var d=this.dataView.getUint16(2,this.littleEndian);if(42===this.dataView.getUint16(2,this.littleEndian))this.bigTiff=!1;else{if(43!==d)throw new TypeError("Invalid magic number.");this.bigTiff=!0;if(8!==this.dataView.getUint16(4,this.littleEndian))throw new Error("Unsupported offset byte-size.")}this.fileDirectories=this.parseFileDirectories(this.getOffset(this.bigTiff?8:4))}var e=a("./globals.js"),f=a("./geotiffimage.js"),g=a("./dataview64.js"),h=e.fieldTypes,i=e.fieldTagNames,j=e.arrayFields,k=e.geoKeyNames;d.prototype={getOffset:function(a){return this.bigTiff?this.dataView.getUint64(a,this.littleEndian):this.dataView.getUint32(a,this.littleEndian)},getFieldTypeLength:function(a){switch(a){case h.BYTE:case h.ASCII:case h.SBYTE:case h.UNDEFINED:return 1;case h.SHORT:case h.SSHORT:return 2;case h.LONG:case h.SLONG:case h.FLOAT:return 4;case h.RATIONAL:case h.SRATIONAL:case h.DOUBLE:case h.LONG8:case h.SLONG8:case h.IFD8:return 8;default:throw new RangeError("Invalid field type: "+a)}},getValues:function(a,b,c){var d,e=null,f=null,g=this.getFieldTypeLength(a);switch(a){case h.BYTE:case h.ASCII:case h.UNDEFINED:e=new Uint8Array(b),f=this.dataView.getUint8;break;case h.SBYTE:e=new Int8Array(b),f=this.dataView.getInt8;break;case h.SHORT:e=new Uint16Array(b),f=this.dataView.getUint16;break;case h.SSHORT:e=new Int16Array(b),f=this.dataView.getInt16;break;case h.LONG:e=new Uint32Array(b),f=this.dataView.getUint32;break;case h.SLONG:e=new Int32Array(b),f=this.dataView.getInt32;break;case h.LONG8:case h.IFD8:e=new Array(b),f=this.dataView.getUint64;break;case h.SLONG8:e=new Array(b),f=this.dataView.getInt64;break;case h.RATIONAL:e=new Uint32Array(2*b),f=this.dataView.getUint32;break;case h.SRATIONAL:e=new Int32Array(2*b),f=this.dataView.getInt32;break;case h.FLOAT:e=new Float32Array(b),f=this.dataView.getFloat32;break;case h.DOUBLE:e=new Float64Array(b),f=this.dataView.getFloat64;break;default:throw new RangeError("Invalid field type: "+a)}if(a!==h.RATIONAL&&a!==h.SRATIONAL)for(d=0;d<b;++d)e[d]=f.call(this.dataView,c+d*g,this.littleEndian);else for(d=0;d<b;d+=2)e[d]=f.call(this.dataView,c+d*g,this.littleEndian),e[d+1]=f.call(this.dataView,c+(d*g+4),this.littleEndian);return a===h.ASCII?String.fromCharCode.apply(null,e):e},getFieldValues:function(a,b,c,d){var e;if(this.getFieldTypeLength(b)*c<=(this.bigTiff?8:4))e=this.getValues(b,c,d);else{var f=this.getOffset(d);e=this.getValues(b,c,f)}return 1===c&&-1===j.indexOf(a)&&b!==h.RATIONAL&&b!==h.SRATIONAL?e[0]:e},parseGeoKeyDirectory:function(a){var b=a.GeoKeyDirectory;if(!b)return null;for(var c={},d=4;d<=4*b[3];d+=4){var e=k[b[d]],f=b[d+1]?i[b[d+1]]:null,g=b[d+2],h=b[d+3],j=null;if(f){if(void 0===(j=a[f])||null===j)throw new Error("Could not get value of geoKey \'"+e+"\'.");"string"==typeof j?j=j.substring(h,h+g-1):j.subarray&&(j=j.subarray(h,h+g-1))}else j=h;c[e]=j}return c},parseFileDirectories:function(a){for(var b=a,c=[];0!==b;){for(var d=this.bigTiff?this.dataView.getUint64(b,this.littleEndian):this.dataView.getUint16(b,this.littleEndian),e={},f=b+(this.bigTiff?8:2),g=0;g<d;f+=this.bigTiff?20:12,++g){var h=this.dataView.getUint16(f,this.littleEndian),j=this.dataView.getUint16(f+2,this.littleEndian),k=this.bigTiff?this.dataView.getUint64(f+4,this.littleEndian):this.dataView.getUint32(f+4,this.littleEndian);e[i[h]]=this.getFieldValues(h,j,k,f+(this.bigTiff?12:8))}c.push([e,this.parseGeoKeyDirectory(e)]),b=this.getOffset(f)}return c},getImage:function(a){a=a||0;var b=this.fileDirectories[a];if(!b)throw new RangeError("Invalid image index");return new f(b[0],b[1],this.dataView,this.littleEndian,this.cache)},getImageCount:function(){return this.fileDirectories.length}},b.exports=d},{"./dataview64.js":18,"./geotiffimage.js":20,"./globals.js":21}],20:[function(a,b,c){"use strict";function d(a,b,c,d,e){this.fileDirectory=a,this.geoKeys=b,this.dataView=c,this.littleEndian=d,this.tiles=e?{}:null,this.isTiled=!a.StripOffsets;var f=a.PlanarConfiguration;if(this.planarConfiguration=void 0===f?1:f,1!==this.planarConfiguration&&2!==this.planarConfiguration)throw new Error("Invalid planar configuration.");switch(this.fileDirectory.Compression){case void 0:case 1:this.decoder=new g;break;case 5:this.decoder=new h;break;case 6:throw new Error("JPEG compression not supported.");case 8:this.decoder=new i;break;case 32773:this.decoder=new j;break;default:throw new Error("Unknown compresseion method identifier: "+this.fileDirectory.Compression)}}var e=a("./globals.js"),f=a("./rgb.js"),g=a("./compression/raw.js"),h=a("./compression/lzw.js"),i=a("./compression/deflate.js"),j=a("./compression/packbits.js"),k=a("./predictor.js").applyPredictor,l=function(a,b,c){for(var d=0,e=b;e<c;++e)d+=a[e];return d},m=function(a,b,c){switch(a){case 1:switch(b){case 8:return new Uint8Array(c);case 16:return new Uint16Array(c);case 32:return new Uint32Array(c)}break;case 2:switch(b){case 8:return new Int8Array(c);case 16:return new Int16Array(c);case 32:\nreturn new Int32Array(c)}break;case 3:switch(b){case 32:return new Float32Array(c);case 64:return new Float64Array(c)}}throw Error("Unsupported data format/bitsPerSample")};d.prototype={getFileDirectory:function(){return this.fileDirectory},getGeoKeys:function(){return this.geoKeys},getWidth:function(){return this.fileDirectory.ImageWidth},getHeight:function(){return this.fileDirectory.ImageLength},getSamplesPerPixel:function(){return this.fileDirectory.SamplesPerPixel},getTileWidth:function(){return this.isTiled?this.fileDirectory.TileWidth:this.getWidth()},getTileHeight:function(){return this.isTiled?this.fileDirectory.TileLength:this.fileDirectory.RowsPerStrip},getBytesPerPixel:function(){for(var a=0,b=0;b<this.fileDirectory.BitsPerSample.length;++b){var c=this.fileDirectory.BitsPerSample[b];if(c%8!=0)throw new Error("Sample bit-width of "+c+" is not supported.");if(c!==this.fileDirectory.BitsPerSample[0])throw new Error("Differing size of samples in a pixel are not supported.");a+=c}return a/8},getSampleByteSize:function(a){if(a>=this.fileDirectory.BitsPerSample.length)throw new RangeError("Sample index "+a+" is out of range.");var b=this.fileDirectory.BitsPerSample[a];if(b%8!=0)throw new Error("Sample bit-width of "+b+" is not supported.");return b/8},getReaderForSample:function(a){var b=this.fileDirectory.SampleFormat?this.fileDirectory.SampleFormat[a]:1,c=this.fileDirectory.BitsPerSample[a];switch(b){case 1:switch(c){case 8:return DataView.prototype.getUint8;case 16:return DataView.prototype.getUint16;case 32:return DataView.prototype.getUint32}break;case 2:switch(c){case 8:return DataView.prototype.getInt8;case 16:return DataView.prototype.getInt16;case 32:return DataView.prototype.getInt32}break;case 3:switch(c){case 32:return DataView.prototype.getFloat32;case 64:return DataView.prototype.getFloat64}}},getArrayForSample:function(a,b){var c=this.fileDirectory.SampleFormat?this.fileDirectory.SampleFormat[a]:1,d=this.fileDirectory.BitsPerSample[a];return m(c,d,b)},getDecoder:function(){return this.decoder},getTileOrStrip:function(a,b,c,d){var e,f=Math.ceil(this.getWidth()/this.getTileWidth()),g=Math.ceil(this.getHeight()/this.getTileHeight()),h=this.tiles;if(1===this.planarConfiguration?e=b*f+a:2===this.planarConfiguration&&(e=c*f*g+b*f+a),null!==h&&e in h)return d?d(null,{x:a,y:b,sample:c,data:h[e]}):h[e];var i,j;this.isTiled?(i=this.fileDirectory.TileOffsets[e],j=this.fileDirectory.TileByteCounts[e]):(i=this.fileDirectory.StripOffsets[e],j=this.fileDirectory.StripByteCounts[e]);var k=this.dataView.buffer.slice(i,i+j);if(d)return this.getDecoder().decodeBlockAsync(k,function(f,g){f||null===h||(h[e]=g),d(f,{x:a,y:b,sample:c,data:g})});var l=this.getDecoder().decodeBlock(k);return null!==h&&(h[e]=l),l},_readRasterAsync:function(a,b,c,d,e,f){function g(){x&&0===y&&(A?f(A):e(c))}function h(e,f){if(e)A=e;else{var h=f.data;1!==s&&(h=k(h,s,i,j,t));for(var l=new DataView(h),m=f.y*j,n=f.x*i,o=(f.y+1)*j,p=(f.x+1)*i,w=f.sample,x=Math.max(0,a[1]-m);x<Math.min(j,j-(o-a[3]));++x)for(var B=Math.max(0,a[0]-n);B<Math.min(i,i-(p-a[2]));++B){var C,D=(x*i+B)*r,E=v[w].call(l,D+u[w],z);d?(C=(x+m-a[1])*q*b.length+(B+n-a[0])*b.length+w,c[C]=E):(C=(x+m-a[1])*q+B+n-a[0],c[w][C]=E)}}y-=1,g()}for(var i=this.getTileWidth(),j=this.getTileHeight(),m=Math.floor(a[0]/i),n=Math.ceil(a[2]/i),o=Math.floor(a[1]/j),p=Math.ceil(a[3]/j),q=(Math.ceil(this.getWidth()/i),a[2]-a[0]),r=(a[3],a[1],this.getBytesPerPixel()),s=(this.getWidth(),this.fileDirectory.Predictor||1),t=this.fileDirectory.BitsPerSample,u=[],v=[],w=0;w<b.length;++w)1===this.planarConfiguration?u.push(l(this.fileDirectory.BitsPerSample,0,b[w])/8):u.push(0),v.push(this.getReaderForSample(b[w]));for(var x=!1,y=0,z=this.littleEndian,A=null,B=o;B<=p;++B)for(var C=m;C<=n;++C)for(var D=0;D<b.length;++D){var E=b[D];2===this.planarConfiguration&&(r=this.getSampleByteSize(E));y+=1,this.getTileOrStrip(C,B,E,h)}x=!0,g()},_readRaster:function(a,b,c,d,e,f){try{for(var g=this.getTileWidth(),h=this.getTileHeight(),i=Math.floor(a[0]/g),j=Math.ceil(a[2]/g),m=Math.floor(a[1]/h),n=Math.ceil(a[3]/h),o=(Math.ceil(this.getWidth()/g),a[2]-a[0]),p=(a[3],a[1],this.getBytesPerPixel()),q=(this.getWidth(),this.fileDirectory.Predictor||1),r=[],s=[],t=0;t<b.length;++t)1===this.planarConfiguration?r.push(l(this.fileDirectory.BitsPerSample,0,b[t])/8):r.push(0),s.push(this.getReaderForSample(b[t]));for(var u=m;u<n;++u)for(var v=i;v<j;++v)for(var w=u*h,x=v*g,y=(u+1)*h,z=(v+1)*g,A=0;A<b.length;++A){var B=b[A];2===this.planarConfiguration&&(p=this.getSampleByteSize(B));var C=this.getTileOrStrip(v,u,B);1!==q&&(C=k(C,q,g,h,this.fileDirectory.BitsPerSample));var D=new DataView(C),E=s[A],F=Math.min(h,h-(y-a[3])),G=Math.min(g,g-(z-a[2])),H=(F*g+G)*p,I=new Uint8Array(D.buffer).length;2*I!==H&&this._debugMessages&&console.warn("dimension mismatch",I,H);for(var J=Math.max(0,a[1]-w);J<F;++J)for(var K=Math.max(0,a[0]-x);K<G;++K){var L=(J*g+K)*p,M=0;L<I-1&&(M=E.call(D,L+r[A],this.littleEndian));var N;d?(N=(J+w-a[1])*o*b.length+(K+x-a[0])*b.length+A,c[N]=M):(N=(J+w-a[1])*o+K+x-a[0],c[A][N]=M)}}return e(c),c}catch(a){return f(a)}},readRasters:function(){var a,b,c;switch(arguments.length){case 0:break;case 1:"function"==typeof arguments[0]?b=arguments[0]:a=arguments[0];break;case 2:"function"==typeof arguments[0]?(b=arguments[0],c=arguments[1]):(a=arguments[0],b=arguments[1]);break;case 3:a=arguments[0],b=arguments[1],c=arguments[2];break;default:throw new Error("Invalid number of arguments passed.")}a=a||{},c=c||function(a){console.error(a)};var d=a.window||[0,0,this.getWidth(),this.getHeight()],e=a.samples,f=a.interleave;if(d[0]<0||d[1]<0||d[2]>this.getWidth()||d[3]>this.getHeight())throw new Error("Select window is out of image bounds.");if(d[0]>d[2]||d[1]>d[3])throw new Error("Invalid subsets");var g,h=d[2]-d[0],i=d[3]-d[1],j=h*i;if(e){for(g=0;g<e.length;++g)if(e[g]>=this.fileDirectory.SamplesPerPixel)throw new RangeError("Invalid sample index \'"+e[g]+"\'.")}else for(e=[],g=0;g<this.fileDirectory.SamplesPerPixel;++g)e.push(g);var k;if(f){var l=this.fileDirectory.SampleFormat?Math.max.apply(null,this.fileDirectory.SampleFormat):1,n=Math.max.apply(null,this.fileDirectory.BitsPerSample);k=m(l,n,j*e.length)}else for(k=[],g=0;g<e.length;++g)k.push(this.getArrayForSample(e[g],j));if(this.getDecoder().isAsync()){if(!b)throw new Error("No callback specified for asynchronous raster reading.");return this._readRasterAsync(d,e,k,f,b,c)}return b=b||function(){},this._readRaster(d,e,k,f,b,c)},readRGB:function(){var a=null,b=null,c=null;switch(arguments.length){case 0:break;case 1:"function"==typeof arguments[0]?b=arguments[0]:a=arguments[0];break;case 2:"function"==typeof arguments[0]?(b=arguments[0],c=arguments[1]):(a=arguments[0],b=arguments[1]);break;case 3:a=arguments[0],b=arguments[1],c=arguments[2];break;default:throw new Error("Invalid number of arguments passed.")}a=a||{},c=c||function(a){console.error(a)};var d=a.window||[0,0,this.getWidth(),this.getHeight()];if(d[0]<0||d[1]<0||d[2]>this.getWidth()||d[3]>this.getHeight())throw new Error("Select window is out of image bounds.");if(d[0]>d[2]||d[1]>d[3])throw new Error("Invalid subsets");var g=d[2]-d[0],h=d[3]-d[1],i=this.fileDirectory.PhotometricInterpretation,j=this.fileDirectory.BitsPerSample[0],k=Math.pow(2,j);if(i===e.photometricInterpretations.RGB)return this.readRasters({window:a.window,interleave:!0},b,c);var l;switch(i){case e.photometricInterpretations.WhiteIsZero:case e.photometricInterpretations.BlackIsZero:case e.photometricInterpretations.Palette:l=[0];break;case e.photometricInterpretations.CMYK:l=[0,1,2,3];break;case e.photometricInterpretations.YCbCr:case e.photometricInterpretations.CIELab:l=[0,1,2];break;default:throw new Error("Invalid or unsupported photometric interpretation.")}var m={window:a.window,interleave:!0,samples:l},n=this.fileDirectory;return this.readRasters(m,function(a){switch(i){case e.photometricInterpretations.WhiteIsZero:return b(f.fromWhiteIsZero(a,k,g,h));case e.photometricInterpretations.BlackIsZero:return b(f.fromBlackIsZero(a,k,g,h));case e.photometricInterpretations.Palette:return b(f.fromPalette(a,n.ColorMap,g,h));case e.photometricInterpretations.CMYK:return b(f.fromCMYK(a,g,h));case e.photometricInterpretations.YCbCr:return b(f.fromYCbCr(a,g,h));case e.photometricInterpretations.CIELab:return b(f.fromCIELab(a,g,h))}},c)},getTiePoints:function(){if(!this.fileDirectory.ModelTiepoint)return[];for(var a=[],b=0;b<this.fileDirectory.ModelTiepoint.length;b+=6)a.push({i:this.fileDirectory.ModelTiepoint[b],j:this.fileDirectory.ModelTiepoint[b+1],k:this.fileDirectory.ModelTiepoint[b+2],x:this.fileDirectory.ModelTiepoint[b+3],y:this.fileDirectory.ModelTiepoint[b+4],z:this.fileDirectory.ModelTiepoint[b+5]});return a},getGDALMetadata:function(){var a={};if(!this.fileDirectory.GDAL_METADATA)return null;for(var b=this.fileDirectory.GDAL_METADATA,c=e.parseXml(b.substring(0,b.length-1)),d=c.evaluate("GDALMetadata/Item",c,null,XPathResult.UNORDERED_NODE_SNAPSHOT_TYPE,null),f=0;f<d.snapshotLength;++f){var g=d.snapshotItem(f);a[g.getAttribute("name")]=g.textContent}return a},getOrigin:function(){var a=this.fileDirectory.ModelTiepoint,b=this.fileDirectory.ModelTransformation;if(a&&6===a.length)return[a[3],a[4],a[5]];if(b)return[b[3],b[7],b[11]];throw new Error("The image does not have an affine transformation.")},getResolution:function(){var a=this.fileDirectory.ModelPixelScale,b=this.fileDirectory.ModelTransformation;if(a)return[a[0],a[1],a[2]];if(b)return[b[0],b[5],b[10]];throw new Error("The image does not have an affine transformation.")},pixelIsArea:function(){return 1===this.geoKeys.GTRasterTypeGeoKey},getBoundingBox:function(){var a=this.getOrigin(),b=this.getResolution(),c=a[0],d=a[1],e=c+b[0]*this.getWidth(),f=d+b[1]*this.getHeight();return[Math.min(c,e),Math.min(d,f),Math.max(c,e),Math.max(d,f)]}},b.exports=d},{"./compression/deflate.js":14,"./compression/lzw.js":15,"./compression/packbits.js":16,"./compression/raw.js":17,"./globals.js":21,"./predictor.js":23,"./rgb.js":24}],21:[function(a,b,c){"use strict";var d,e={315:"Artist",258:"BitsPerSample",265:"CellLength",264:"CellWidth",320:"ColorMap",259:"Compression",33432:"Copyright",306:"DateTime",338:"ExtraSamples",266:"FillOrder",289:"FreeByteCounts",288:"FreeOffsets",291:"GrayResponseCurve",290:"GrayResponseUnit",316:"HostComputer",270:"ImageDescription",257:"ImageLength",256:"ImageWidth",271:"Make",281:"MaxSampleValue",280:"MinSampleValue",272:"Model",254:"NewSubfileType",274:"Orientation",262:"PhotometricInterpretation",284:"PlanarConfiguration",296:"ResolutionUnit",278:"RowsPerStrip",277:"SamplesPerPixel",305:"Software",279:"StripByteCounts",273:"StripOffsets",255:"SubfileType",263:"Threshholding",282:"XResolution",283:"YResolution",326:"BadFaxLines",327:"CleanFaxData",343:"ClipPath",328:"ConsecutiveBadFaxLines",433:"Decode",434:"DefaultImageColor",269:"DocumentName",336:"DotRange",321:"HalftoneHints",346:"Indexed",347:"JPEGTables",285:"PageName",297:"PageNumber",317:"Predictor",319:"PrimaryChromaticities",532:"ReferenceBlackWhite",339:"SampleFormat",340:"SMinSampleValue",341:"SMaxSampleValue",559:"StripRowCounts",330:"SubIFDs",292:"T4Options",293:"T6Options",325:"TileByteCounts",323:"TileLength",324:"TileOffsets",322:"TileWidth",301:"TransferFunction",318:"WhitePoint",344:"XClipPathUnits",286:"XPosition",529:"YCbCrCoefficients",531:"YCbCrPositioning",530:"YCbCrSubSampling",345:"YClipPathUnits",287:"YPosition",37378:"ApertureValue",40961:"ColorSpace",36868:"DateTimeDigitized",36867:"DateTimeOriginal",34665:"Exif IFD",36864:"ExifVersion",33434:"ExposureTime",41728:"FileSource",37385:"Flash",40960:"FlashpixVersion",33437:"FNumber",42016:"ImageUniqueID",37384:"LightSource",37500:"MakerNote",37377:"ShutterSpeedValue",37510:"UserComment",33723:"IPTC",34675:"ICC Profile",700:"XMP",42112:"GDAL_METADATA",42113:"GDAL_NODATA",34377:"Photoshop",33550:"ModelPixelScale",33922:"ModelTiepoint",34264:"ModelTransformation",34735:"GeoKeyDirectory",34736:"GeoDoubleParams",34737:"GeoAsciiParams"},f={};for(d in e)f[e[d]]=parseInt(d);var g=[f.BitsPerSample,f.ExtraSamples,f.SampleFormat,f.StripByteCounts,f.StripOffsets,f.StripRowCounts,f.TileByteCounts,f.TileOffsets],h={1:"BYTE",2:"ASCII",3:"SHORT",4:"LONG",5:"RATIONAL",6:"SBYTE",7:"UNDEFINED",8:"SSHORT",9:"SLONG",10:"SRATIONAL",11:"FLOAT",12:"DOUBLE",16:"LONG8",17:"SLONG8",18:"IFD8"},i={};for(d in h)i[h[d]]=parseInt(d);var j={WhiteIsZero:0,BlackIsZero:1,RGB:2,Palette:3,TransparencyMask:4,CMYK:5,YCbCr:6,CIELab:8,ICCLab:9},k={1024:"GTModelTypeGeoKey",1025:"GTRasterTypeGeoKey",1026:"GTCitationGeoKey",2048:"GeographicTypeGeoKey",2049:"GeogCitationGeoKey",2050:"GeogGeodeticDatumGeoKey",2051:"GeogPrimeMeridianGeoKey",2052:"GeogLinearUnitsGeoKey",2053:"GeogLinearUnitSizeGeoKey",2054:"GeogAngularUnitsGeoKey",2055:"GeogAngularUnitSizeGeoKey",2056:"GeogEllipsoidGeoKey",2057:"GeogSemiMajorAxisGeoKey",2058:"GeogSemiMinorAxisGeoKey",2059:"GeogInvFlatteningGeoKey",2060:"GeogAzimuthUnitsGeoKey",2061:"GeogPrimeMeridianLongGeoKey",2062:"GeogTOWGS84GeoKey",3072:"ProjectedCSTypeGeoKey",3073:"PCSCitationGeoKey",3074:"ProjectionGeoKey",3075:"ProjCoordTransGeoKey",3076:"ProjLinearUnitsGeoKey",3077:"ProjLinearUnitSizeGeoKey",3078:"ProjStdParallel1GeoKey",3079:"ProjStdParallel2GeoKey",3080:"ProjNatOriginLongGeoKey",3081:"ProjNatOriginLatGeoKey",3082:"ProjFalseEastingGeoKey",3083:"ProjFalseNorthingGeoKey",3084:"ProjFalseOriginLongGeoKey",3085:"ProjFalseOriginLatGeoKey",3086:"ProjFalseOriginEastingGeoKey",3087:"ProjFalseOriginNorthingGeoKey",3088:"ProjCenterLongGeoKey",3089:"ProjCenterLatGeoKey",3090:"ProjCenterEastingGeoKey",3091:"ProjCenterNorthingGeoKey",3092:"ProjScaleAtNatOriginGeoKey",3093:"ProjScaleAtCenterGeoKey",3094:"ProjAzimuthAngleGeoKey",3095:"ProjStraightVertPoleLongGeoKey",3096:"ProjRectifiedGridAngleGeoKey",4096:"VerticalCSTypeGeoKey",4097:"VerticalCitationGeoKey",4098:"VerticalDatumGeoKey",4099:"VerticalUnitsGeoKey"},l={};for(d in k)l[k[d]]=parseInt(d);var m;"undefined"==typeof window?m=function(b){return(new(0,a("xmldom").DOMParser)).parseFromString(b,"text/xml")}:void 0!==window.DOMParser?m=function(a){return(new window.DOMParser).parseFromString(a,"text/xml")}:void 0!==window.ActiveXObject&&new window.ActiveXObject("Microsoft.XMLDOM")&&(m=function(a){var b=new window.ActiveXObject("Microsoft.XMLDOM");return b.async="false",b.loadXML(a),b}),b.exports={fieldTags:f,fieldTagNames:e,arrayFields:g,fieldTypes:i,fieldTypeNames:h,photometricInterpretations:j,geoKeys:l,geoKeyNames:k,parseXml:m}},{xmldom:"xmldom"}],22:[function(a,b,c){"use strict";var d=a("./geotiff.js"),e=function(a,b){var c,e,f,g;if("string"==typeof a||a instanceof String)for(c=new ArrayBuffer(2*a.length),g=new Uint16Array(c),e=0,f=a.length;e<f;++e)g[e]=a.charCodeAt(e);else{if(!(a instanceof ArrayBuffer))throw new Error("Invalid input data given.");c=a}return new d(c,b)};void 0!==b&&void 0!==b.exports&&(b.exports.parse=e),"undefined"!=typeof window?window.GeoTIFF={parse:e}:"undefined"!=typeof self&&(self.GeoTIFF={parse:e})},{"./geotiff.js":19}],23:[function(a,b,c){"use strict";function d(a,b,c){var d=a.length;d-=b;var e=0;do{for(var f=b;f>0;f--)a[e+b]+=a[e],e++;d-=b}while(d>0)}function e(a,b,c){for(var d,e=0,f=a.length,g=f/c;f>b;){for(d=b;d>0;--d)a[e+b]+=a[e],++e;f-=b}var h=a.slice();for(d=0;d<g;++d)for(var i=0;i<c;++i)a[c*d+i]=h[(c-i-1)*g+d]}b.exports={applyPredictor:function(a,b,c,f,g){var h,i;if(!b||1===b)return a;for(h=0;h<g.length;++h){if(g[h]%8!=0)throw new Error("When decoding with predictor, only multiple of 8 bits are supported.");if(g[h]!==g[0])throw new Error("When decoding with predictor, all samples must have the same size.")}var j=g[0]/8,k=g.length;for(h=0;h<f;++h)if(2===b){switch(g[0]){case 8:i=new Uint8Array(a,h*k*c*j,k*c*j);break;case 16:i=new Uint16Array(a,h*k*c*j,k*c*j/2);break;case 32:i=new Uint32Array(a,h*k*c*j,k*c*j/4);break;default:throw new Error("Predictor 2 not allowed with "+g[0]+" bits per sample.")}d(i,k,j)}else 3===b&&(i=new Uint8Array(a,h*k*c*j,c*j),e(i,k,j));return a}}},{}],24:[function(a,b,c){"use strict";function d(a,b,c,d){for(var e,f=new Uint8Array(c*d*3),g=0,h=0;g<a.length;++g,h+=3)e=256-a[g]/b*256,f[h]=e,f[h+1]=e,f[h+2]=e;return f}function e(a,b,c,d){for(var e,f=new Uint8Array(c*d*3),g=0,h=0;g<a.length;++g,h+=3)e=a[g]/b*256,f[h]=e,f[h+1]=e,f[h+2]=e;return f}function f(a,b,c,d){for(var e=new Uint8Array(c*d*3),f=b.length/3,g=b.length/3*2,h=0,i=0;h<a.length;++h,i+=3){var j=a[h];e[i]=b[j]/65536*256,e[i+1]=b[j+f]/65536*256,e[i+2]=b[j+g]/65536*256}return e}function g(a,b,c){for(var d,e,f,g,h=new Uint8Array(b*c*3),i=0,j=0;i<a.length;i+=4,j+=3)d=a[i],e=a[i+1],f=a[i+2],g=a[i+3],h[j]=(255-d)/256*255*((255-g)/256),h[j+1]=(255-e)/256*255*((255-g)/256),h[j+2]=(255-f)/256*255*((255-g)/256);return h}function h(a,b,c){for(var d,e,f,g=new Uint8Array(b*c*3),h=0,i=0;h<a.length;h+=3,i+=3)d=a[h],e=a[h+1],f=a[h+2],g[i]=d+1.402*(f-128),g[i+1]=d-.34414*(e-128)-.71414*(f-128),g[i+2]=d+1.772*(e-128);return g}function i(a,b,c){for(var d=new Uint8Array(b*c*3),e=0,f=0;e<a.length;e+=3,f+=3){var g,h,i,m=a[e+0],n=a[e+1]<<24>>24,o=a[e+2]<<24>>24,p=(m+16)/116,q=n/500+p,r=p-o/200;q=j*(q*q*q>.008856?q*q*q:(q-16/116)/7.787),p=k*(p*p*p>.008856?p*p*p:(p-16/116)/7.787),r=l*(r*r*r>.008856?r*r*r:(r-16/116)/7.787),g=3.2406*q+-1.5372*p+-.4986*r,h=-.9689*q+1.8758*p+.0415*r,i=.0557*q+-.204*p+1.057*r,g=g>.0031308?1.055*Math.pow(g,1/2.4)-.055:12.92*g,h=h>.0031308?1.055*Math.pow(h,1/2.4)-.055:12.92*h,i=i>.0031308?1.055*Math.pow(i,1/2.4)-.055:12.92*i,d[f]=255*Math.max(0,Math.min(1,g)),d[f+1]=255*Math.max(0,Math.min(1,h)),d[f+2]=255*Math.max(0,Math.min(1,i))}return d}var j=.95047,k=1,l=1.08883;b.exports={fromWhiteIsZero:d,fromBlackIsZero:e,fromPalette:f,fromCMYK:g,fromYCbCr:h,fromCIELab:i}},{}]},{},[22]);\n\n    // parse data minified with https://minifier.org\n    let parse_data=(data,debug)=>{try{if(debug)console.log("starting parse_data with",data);if(debug)console.log("\tGeoTIFF:",typeof GeoTIFF);let result={};let height,no_data_value,width;if(data.raster_type==="object"){result.values=data.data;result.height=height=data.metadata.height||result.values[0].length;result.width=width=data.metadata.width||result.values[0][0].length;result.pixelHeight=data.metadata.pixelHeight;result.pixelWidth=data.metadata.pixelWidth;result.projection=data.metadata.projection;result.xmin=data.metadata.xmin;result.ymax=data.metadata.ymax;result.no_data_value=no_data_value=data.metadata.no_data_value;result.number_of_rasters=result.values.length;result.xmax=result.xmin+result.width*result.pixelWidth;result.ymin=result.ymax-result.height*result.pixelHeight}else if(data.raster_type==="geotiff"){result._data=data.data;let parser=typeof GeoTIFF!=="undefined"?GeoTIFF:typeof window!=="undefined"?window.GeoTIFF:typeof self!=="undefined"?self.GeoTIFF:null;if(debug)console.log("data.raster_type is geotiff");let geotiff=parser.parse(data.data);if(debug)console.log("geotiff:",geotiff);let image=geotiff.getImage();if(debug)console.log("image:",image);let fileDirectory=image.fileDirectory;let geoKeys=image.getGeoKeys();if(debug)console.log("geoKeys:",geoKeys);result.projection=geoKeys.GeographicTypeGeoKey;if(debug)console.log("projection:",result.projection);result.height=height=image.getHeight();if(debug)console.log("result.height:",result.height);result.width=width=image.getWidth();if(debug)console.log("result.width:",result.width);let[resolutionX,resolutionY,resolutionZ]=image.getResolution();result.pixelHeight=Math.abs(resolutionY);result.pixelWidth=Math.abs(resolutionX);let[originX,originY,originZ]=image.getOrigin();result.xmin=originX;result.xmax=result.xmin+width*result.pixelWidth;result.ymax=originY;result.ymin=result.ymax-height*result.pixelHeight;result.no_data_value=no_data_value=fileDirectory.GDAL_NODATA?parseFloat(fileDirectory.GDAL_NODATA):null;result.number_of_rasters=fileDirectory.SamplesPerPixel;result.values=image.readRasters().map(values_in_one_dimension=>{let values_in_two_dimensions=[];for(let y=0;y<height;y++){let start=y*width;let end=start+width;values_in_two_dimensions.push(values_in_one_dimension.slice(start,end))}\n    return values_in_two_dimensions})}\n    result.maxs=[];result.mins=[];result.ranges=[];let max;let min;for(let raster_index=0;raster_index<result.number_of_rasters;raster_index++){let rows=result.values[raster_index];if(debug)console.log("[georaster] rows:",rows);for(let row_index=0;row_index<height;row_index++){let row=rows[row_index];for(let column_index=0;column_index<width;column_index++){let value=row[column_index];if(value!=no_data_value){if(typeof min==="undefined"||value<min)min=value;else if(typeof max==="undefined"||value>max)max=value}}}\n    result.maxs.push(max);result.mins.push(min);result.ranges.push(max-min)}\n    return result}catch(error){console.error("[georaster] error parsing georaster:",error)}}\n    //console.log("inside web worker, parse_data is", parse_data);\n\n    onmessage = e => {\n        //console.error("inside worker on message started with", e); \n        let data = e.data;\n        let result = parse_data(data);\n        console.log("posting from web wroker:", result);\n        if (result._data instanceof ArrayBuffer) {\n            postMessage(result, [result._data]);\n        } else {\n            postMessage(result);\n        }\n        close();\n    }\n'],{type:"application/javascript"});t._url_is_available&&(s=URL.createObjectURL(c))}var l=new Worker(s);l.onmessage=function(e){console.log("main thread received message:",e);var i=e.data;for(var n in i)t[n]=i[n];r(t)},e&&console.log("about to postMessage"),t._data instanceof ArrayBuffer?l.postMessage({data:t._data,raster_type:t.raster_type,metadata:t._metadata},[t._data]):l.postMessage({data:t._data,raster_type:t.raster_type,metadata:t._metadata})}else{e&&console.log("web worker is not available");var f=function(e,t){try{t&&console.log("starting parse_data with",e),t&&console.log("\tGeoTIFF:",void 0===o?"undefined":a(o));var r={},i=void 0,s=void 0,c=void 0;if("object"===e.raster_type)r.values=e.data,r.height=i=e.metadata.height||r.values[0].length,r.width=c=e.metadata.width||r.values[0][0].length,r.pixelHeight=e.metadata.pixelHeight,r.pixelWidth=e.metadata.pixelWidth,r.projection=e.metadata.projection,r.xmin=e.metadata.xmin,r.ymax=e.metadata.ymax,r.no_data_value=s=e.metadata.no_data_value,r.number_of_rasters=r.values.length,r.xmax=r.xmin+r.width*r.pixelWidth,r.ymin=r.ymax-r.height*r.pixelHeight,r._data=null;else if("geotiff"===e.raster_type){r._data=e.data;var l=void 0!==o?o:"undefined"!=typeof window?window.GeoTIFF:"undefined"!=typeof self?self.GeoTIFF:null;t&&console.log("data.raster_type is geotiff");var f=l.parse(e.data);t&&console.log("geotiff:",f);var u=f.getImage();t&&console.log("image:",u);var h=u.fileDirectory,d=u.getGeoKeys();t&&console.log("geoKeys:",d),r.projection=d.GeographicTypeGeoKey,t&&console.log("projection:",r.projection),r.height=i=u.getHeight(),t&&console.log("result.height:",r.height),r.width=c=u.getWidth(),t&&console.log("result.width:",r.width);var g=u.getResolution(),p=n(g,3),m=p[0],b=p[1];p[2],r.pixelHeight=Math.abs(b),r.pixelWidth=Math.abs(m);var w=u.getOrigin(),y=n(w,3),v=y[0],_=y[1];y[2],r.xmin=v,r.xmax=r.xmin+c*r.pixelWidth,r.ymax=_,r.ymin=r.ymax-i*r.pixelHeight,r.no_data_value=s=h.GDAL_NODATA?parseFloat(h.GDAL_NODATA):null,r.number_of_rasters=h.SamplesPerPixel,r.values=u.readRasters().map(function(e){for(var t=[],r=0;r<i;r++){var n=r*c,a=n+c;t.push(e.slice(n,a))}return t})}r.maxs=[],r.mins=[],r.ranges=[];for(var x=void 0,A=void 0,k=0;k<r.number_of_rasters;k++){var E=r.values[k];t&&console.log("[georaster] rows:",E);for(var S=0;S<i;S++)for(var T=E[S],D=0;D<c;D++){var I=T[D];I!=s&&(void 0===A||I<A?A=I:(void 0===x||I>x)&&(x=I))}r.maxs.push(x),r.mins.push(A),r.ranges.push(x-A)}return r}catch(e){console.error("[georaster] error parsing georaster:",e)}}({data:t._data,raster_type:t.raster_type,metadata:t._metadata});e&&console.log("result:",f),r(f)}else i("couldn't find a way to parse")})}}]),e}(),c=function(e,t,r){if(r&&console.log("starting parse_georaster with ",e,t),void 0===e){throw Error("[Georaster.parse_georaster] Error. You passed in undefined to parse_georaster. We can't make a raster out of nothing!")}return new s(e,t,r).initialize(r)};void 0!==e&&void 0!==e.exports&&(e.exports=c),"undefined"!=typeof window?window.parse_georaster=c:"undefined"!=typeof self&&(self.parse_georaster=c)}).call(this,r(31).Buffer)}]);